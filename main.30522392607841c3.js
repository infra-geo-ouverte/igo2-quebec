(self.webpackChunkigo2_quebec=self.webpackChunkigo2_quebec||[]).push([[179],{38185:(Z,xe,u)=>{"use strict";var O=u(50318),e=u(3184),w=u(17643),R=u(57481),m=u(36362),c=u(39146),_e=u(19946);class te{constructor(){}}te.\u0275fac=function(t){return new(t||te)},te.\u0275cmp=e.Xpm({type:te,selectors:[["app-menu-home"]],decls:14,vars:0,consts:[[1,"page"],[1,"row"],[1,"d-block","themeTitre"],[2,"display","inline"],["href","https://github.com/infra-geo-ouverte/igo2","target","_blank","rel","noreferrer",2,"display","inline"]],template:function(t,n){1&t&&(e.TgZ(0,"div",0)(1,"div",1)(2,"h1",2),e._uU(3,"Accueil"),e.qZA(),e.TgZ(4,"h2"),e._uU(5,"Infrastructure g\xe9omatique ouverte 2.0 (IGO2) / Open GIS Infrastructure 2.0"),e.qZA(),e.TgZ(6,"h4"),e._uU(7,"Qu'est-ce qu'IGO?"),e.qZA(),e.TgZ(8,"p"),e._uU(9,"IGO2 est une solution Web gratuite en g\xe9omatique bas\xe9e sur Angular - Material, OpenLayers et IGO2lib. IGO2 permet de tirer profit d\u2019une multitude de donn\xe9es g\xe9ographiques gr\xe2ce \xe0 une interface cartographique accessible par un navigateur Web sur un poste de travail et par un appareil mobile. IGO2 a \xe9t\xe9 initi\xe9 par l'administration publique du Qu\xe9bec (Canada) et issu d\u2019un travail collaboratif bas\xe9 sur la philosophie des logiciels libres et ouverts (\xab open source \xbb). Les membres du public en g\xe9omatique et du Web qui soumettent des contributions conservent leurs droits d'auteur s'ils partagent leur code source selon la LICENCE LiLiQ-R de type LGPL."),e.qZA(),e.TgZ(10,"p",3),e._uU(11,"T\xe9l\xe9chargement et code source : "),e.TgZ(12,"a",4),e._uU(13,"https://github.com/infra-geo-ouverte/igo2"),e.qZA()()()())},encapsulation:2});class ne{constructor(){}}ne.\u0275fac=function(t){return new(t||ne)},ne.\u0275cmp=e.Xpm({type:ne,selectors:[["app-about"]],decls:82,vars:0,consts:[[1,"row"],[1,"container-fluid","page"],[1,"d-block","themeTitre"],["href","http://loripsum.net/","target","_blank"]],template:function(t,n){1&t&&(e.TgZ(0,"div",0)(1,"div",1)(2,"h1",2),e._uU(3,"En savoir plus"),e.qZA(),e.TgZ(4,"h2"),e._uU(5,"Notre Mission"),e.qZA(),e.TgZ(6,"h3"),e._uU(7,"Mission 1"),e.qZA(),e.TgZ(8,"p"),e._uU(9,"Paragraphe : Lorem ipsum dolor sit amet, consectetur adipiscing elit. Tu enim ista lenius, hic Stoicorum more nos vexat. Quo studio Aristophanem putamus aetatem in litteris duxisse? Honesta oratio, Socratica, Platonis etiam. Vitiosum est enim in dividendo partem in genere numerare. "),e.TgZ(10,"i"),e._uU(11,"Non est igitur voluptas bonum."),e.qZA(),e._uU(12," Duo Reges: constructio interrete. Non autem hoc: igitur ne illud quidem. "),e.TgZ(13,"b"),e._uU(14,"Magna laus."),e.qZA(),e.TgZ(15,"b"),e._uU(16,"Quis istum dolorem timet?"),e.qZA(),e._uU(17," Quod autem satis est, eo quicquid accessit, nimium est; "),e.TgZ(18,"b"),e._uU(19,"Sed ille, ut dixi, vitiose."),e.qZA()(),e.TgZ(20,"p"),e._uU(21,"Cur tantas regiones barbarorum pedibus obiit, tot maria transmisit? "),e.TgZ(22,"a",3),e._uU(23,"Nulla erit controversia."),e.qZA(),e._uU(24," Prave, nequiter, turpiter cenabat; "),e.TgZ(25,"code"),e._uU(26,"Multoque hoc melius nos veriusque quam Stoici."),e.qZA(),e._uU(27," Contineo me ab exemplis. "),e.TgZ(28,"b"),e._uU(29,"Sed nimis multa."),e.qZA(),e.TgZ(30,"code"),e._uU(31,"Nos vero, inquit ille;"),e.qZA(),e.TgZ(32,"mark"),e._uU(33,"Occultum facinus esse potuerit, gaudebit;"),e.qZA()(),e.TgZ(34,"ul")(35,"li"),e._uU(36,"Iam doloris medicamenta illa Epicurea tamquam de narthecio proment: Si gravis, brevis;"),e.qZA(),e.TgZ(37,"li"),e._uU(38,"Ergo et avarus erit, sed finite, et adulter, verum habebit modum, et luxuriosus eodem modo."),e.qZA(),e.TgZ(39,"li"),e._uU(40,"Sedulo, inquam, faciam."),e.qZA(),e.TgZ(41,"li"),e._uU(42,"Quid enim tanto opus est instrumento in optimis artibus comparandis?"),e.qZA(),e.TgZ(43,"li"),e._uU(44,"Sic, et quidem diligentius saepiusque ista loquemur inter nos agemusque communiter."),e.qZA()(),e.TgZ(45,"p")(46,"b"),e._uU(47," Bold Inde igitur, inquit, ordiendum est."),e.qZA(),e._uU(48," Quis hoc dicit? Quamquam te quidem video minime esse deterritum. "),e.TgZ(49,"i"),e._uU(50,"Bonum incolumis acies: misera caecitas."),e.qZA(),e._uU(51," Indicant pueri, in quibus ut in speculis natura cernitur. Duae sunt enim res quoque, ne tu verba solum putes. "),e.TgZ(52,"code"),e._uU(53,"Est enim effectrix multarum et magnarum voluptatum."),e.qZA()(),e.TgZ(54,"pre"),e._uU(55," Pre Corporis igitur nostri partes totaque figura et forma et\n        statura quam apta ad naturam sit, apparet, neque est dubium,\n        quin frons, oculi, aures et reliquae partes quales propriae\n        sint hominis intellegatur.\n\n        Pungunt quasi aculeis interrogatiunculis angustis, quibus\n        etiam qui assentiuntur nihil commutantur animo et idem\n        abeunt, qui venerant.\n        "),e.qZA(),e.TgZ(56,"ol")(57,"li"),e._uU(58,"Atqui perspicuum est hominem e corpore animoque constare, cum primae sint animi partes, secundae corporis."),e.qZA(),e.TgZ(59,"li"),e._uU(60,"Nonne videmus quanta perturbatio rerum omnium consequatur, quanta confusio?"),e.qZA()(),e.TgZ(61,"dl")(62,"dt")(63,"dfn"),e._uU(64,"Stoicos roga."),e.qZA()(),e.TgZ(65,"dd"),e._uU(66,"Quid enim de amicitia statueris utilitatis causa expetenda vides."),e.qZA(),e.TgZ(67,"dt")(68,"dfn"),e._uU(69,"Qui convenit?"),e.qZA()(),e.TgZ(70,"dd"),e._uU(71,"Que Manilium, ab iisque M."),e.qZA(),e.TgZ(72,"dt")(73,"dfn"),e._uU(74,"Paria sunt igitur."),e.qZA()(),e.TgZ(75,"dd"),e._uU(76,"Quamquam ab iis philosophiam et omnes ingenuas disciplinas habemus;"),e.qZA(),e.TgZ(77,"dt")(78,"dfn"),e._uU(79,"Confecta res esset."),e.qZA()(),e.TgZ(80,"dd"),e._uU(81,"Cupiditates non Epicuri divisione finiebat, sed sua satietate."),e.qZA()()()())},encapsulation:2});var _=u(76317),Pe=u(87260),Be=u(10745),ye=u(19337),je=u(98977),D=u(71989),Te=u(64055),Me=u(59295),ve=u(57647),be=u(28784),ke=u(92845),Fe=u(39910),oe=u(91419),d=u(51027),s=u(50445);class P{constructor(t,n,o){this.searchSourceService=t,this.storageService=n,this.configService=o,this.searchOverlayStyle={},this.searchOverlayStyleSelection={},this.searchOverlayStyleFocus={},this.searchTermSplitter$=new _.X("|"),this.searchTerm$=new _.X(void 0),this.searchType$=new _.X(void 0),this.searchDisabled$=new _.X(!1),this.searchResultsGeometryEnabled$=new _.X(!1),this.selectedResult$=new _.X(void 0),this.store=new d.cf([]),this.searchOverlayStyle={markerColor:"#45D7E6",markerOpacity:.8,markerOutlineColor:"#ffffff",fillColor:"transparent",fillOpacity:0,strokeColor:"#45D7E6",strokeOpacity:.7,strokeWidth:4},this.searchOverlayStyleSelection={markerColor:"#45D7E6",markerOpacity:1,markerOutlineColor:"#ffffff",fillColor:"transparent",fillOpacity:0,strokeColor:"#45D7E6",strokeOpacity:1,strokeWidth:4},this.searchOverlayStyleFocus={markerColor:"#45D7E6",markerOpacity:1,markerOutlineColor:"#ffffff",fillColor:"transparent",fillOpacity:0,strokeColor:"#45D7E6",strokeOpacity:1,strokeWidth:4};const i=this.storageService.get("searchResultsGeometryEnabled");i&&this.searchResultsGeometryEnabled$.next(i),this.store.addStrategy(this.createCustomFilterTermStrategy(),!1)}get searchTypes(){return this.searchSourceService.getEnabledSources().map(t=>t.constructor.type)}createCustomFilterTermStrategy(){return new d.kk({filterClauseFunc:n=>100===n.entity.meta.score})}activateCustomFilterTermStrategy(){const t=this.store.getStrategyOfType(d.kk);void 0!==t&&t.activate()}deactivateCustomFilterTermStrategy(){const t=this.store.getStrategyOfType(d.kk);void 0!==t&&t.deactivate()}enableSearch(){this.searchDisabled$.next(!1)}disableSearch(){this.searchDisabled$.next(!0)}setSearchTerm(t){this.searchTerm$.next(t)}setSearchType(t){this.searchSourceService.enableSourcesByType(t),this.searchType$.next(t)}setSelectedResult(t){this.selectedResult$.next(t)}setSearchResultsGeometryStatus(t){this.storageService.set("searchResultsGeometryEnabled",t),this.searchResultsGeometryEnabled$.next(t)}}P.\u0275fac=function(t){return new(t||P)(e.LFG(s.gS3),e.LFG(c.V1),e.LFG(c.E4))},P.\u0275prov=e.Yz7({token:P,factory:P.\u0275fac,providedIn:"root"});var Ue=u(28653),Le=u(29744),qe=function(a,t,n,o){return new(n||(n=Promise))(function(r,l){function p(x){try{f(o.next(x))}catch(F){l(F)}}function g(x){try{f(o.throw(x))}catch(F){l(F)}}function f(x){x.done?r(x.value):function i(r){return r instanceof n?r:new n(function(l){l(r)})}(x.value).then(p,g)}f((o=o.apply(a,t||[])).next())})};class Q{constructor(t,n,o){this.updates=t,this.languageService=n,this.confirmDialogService=o,this.confirmOpened=!1,t.isEnabled&&this.handleVersionUpdates()}checkForUpdates(){this.updates.isEnabled&&(0,Ue.F)(12e4).pipe((0,Pe.T)(1)).subscribe(()=>qe(this,void 0,void 0,function*(){try{const t=yield this.updates.checkForUpdate();console.log(t?"A new version is available.":"Already on the latest version.")}catch(t){console.error("Failed to check for updates:",t)}}))}modalUpdatePWA(){if(this.confirmOpened)return;const o=`${this.languageService.translate.instant("pwa.new-version-title")} ${this.languageService.translate.instant("pwa.new-version")}`;this.confirmDialogService.open(o).pipe((0,ye.b)(()=>this.confirmOpened=!0)).subscribe(i=>{i&&(this.confirmOpened=!1,window.navigator.onLine?document.location.reload():(alert("Hors-ligne / Offline. Vous devez \xeatre en ligne pour mettre \xe0 jour l'application. You must be online to update the application."),setTimeout(()=>{this.modalUpdatePWA()},9e5)))})}handleVersionUpdates(){this.updates.versionUpdates.subscribe(t=>{switch(t.type){case"VERSION_DETECTED":console.log(`Downloading new app version: ${t.version.hash}`);break;case"VERSION_READY":console.log(`Current app version: ${t.currentVersion.hash}`),console.log(`New app version ready for use: ${t.latestVersion.hash}`),this.modalUpdatePWA();break;case"VERSION_INSTALLATION_FAILED":console.error(`Failed to install app version '${t.version.hash}': ${t.error}`)}})}}Q.\u0275fac=function(t){return new(t||Q)(e.LFG(Le.yO),e.LFG(c.TS),e.LFG(d.DN))},Q.\u0275prov=e.Yz7({token:Q,factory:Q.\u0275fac,providedIn:"root"});var h=u(31631);var y=u(78172),Je=u(13289),L=u(79944),S=u(40089),H=u(32600),k=u(87514);class ie{constructor(t){this.languageService=t}}ie.\u0275fac=function(t){return new(t||ie)(e.Y36(c.TS))},ie.\u0275cmp=e.Xpm({type:ie,selectors:[["app-footer"]],decls:22,vars:18,consts:[["id","footer-id",1,"footer-right"],["id","scaleLine"],[1,"order2"],[1,"footer-text"],["rel","noopener noreferrer","alt","('externallinks' | translate)","target","_blank",3,"href"]],template:function(t,n){1&t&&(e.TgZ(0,"div",0),e._UZ(1,"div",1),e.TgZ(2,"span",2)(3,"span",3)(4,"a",4),e.ALo(5,"translate"),e._uU(6),e.ALo(7,"translate"),e.qZA()(),e.TgZ(8,"span",3),e._uU(9," | "),e.qZA(),e.TgZ(10,"span",3)(11,"a",4),e.ALo(12,"translate"),e._uU(13),e.ALo(14,"translate"),e.qZA()(),e.TgZ(15,"span",3),e._uU(16," | "),e.qZA(),e.TgZ(17,"span",3)(18,"a",4),e.ALo(19,"translate"),e._uU(20),e.ALo(21,"translate"),e.qZA()()()()),2&t&&(e.xp6(4),e.s9C("href",e.lcZ(5,6,"footer.url-conditions"),e.LSH),e.xp6(2),e.Oqu(e.lcZ(7,8,"footer.conditions")),e.xp6(5),e.s9C("href",e.lcZ(12,10,"footer.url-ministry"),e.LSH),e.xp6(2),e.Oqu(e.lcZ(14,12,"footer.ministry")),e.xp6(5),e.s9C("href",e.lcZ(19,14,"footer.url-gov"),e.LSH),e.xp6(2),e.Oqu(e.lcZ(21,16,"footer.gov")))},dependencies:[k.X$],styles:[".order2[_ngcontent-%COMP%]{order:2;margin-right:.5%;display:flex;justify-content:flex-end;right:0;margin-left:140px;text-align:right!important;width:100%}.footer-right[_ngcontent-%COMP%]{z-index:666;background:rgba(255,255,255,.6392156863);font-size:.7rem;align-items:center;height:29px;display:flex;margin-left:auto}span.footer-text[_ngcontent-%COMP%]{color:#095797;align-self:center;margin-left:.5rem}span.footer-text[_ngcontent-%COMP%]   a[_ngcontent-%COMP%]{color:#095797;text-decoration:none}  .map-hasFooter{height:calc(100% - 29px)!important}  .ol-scale-line-inner{border:1px solid black;color:#000;border-top:none;order:1}  div.ol-scale-line{position:fixed!important;display:flex;flex-direction:row;top:auto!important;top:initial!important;left:10px!important;bottom:3px!important;background:transparent none repeat 0 0 / auto auto padding-box border-box scroll!important;background:initial!important;color:#000;z-index:5!important;transform:none!important;transform:initial!important}"]});const Re=function(a){return{width:a}};function Ne(a,t){if(1&a&&(e.ynx(0),e._UZ(1,"img",6),e.BQk()),2&a){const n=e.oxw(2).$implicit;e.xp6(1),e.Q6J("src",n.imgSrc,e.LSH)("alt",n.alt)("ngStyle",e.VKq(3,Re,n.imgSize))}}function Ge(a,t){if(1&a&&(e.TgZ(0,"a",4),e._uU(1),e.YNc(2,Ne,2,5,"ng-container",5),e.qZA()),2&a){const n=e.oxw().$implicit;e.Q6J("href",n.link,e.LSH),e.xp6(1),e.hij(" ",n.text," "),e.xp6(1),e.Q6J("ngIf",n.imgSrc)}}function Ye(a,t){if(1&a&&(e.ynx(0),e._UZ(1,"img",6),e.BQk()),2&a){const n=e.oxw(2).$implicit;e.xp6(1),e.Q6J("src",n.imgSrc,e.LSH)("alt",n.alt)("ngStyle",e.VKq(3,Re,n.imgSize))}}function Ve(a,t){if(1&a&&(e._uU(0),e.YNc(1,Ye,2,5,"ng-container",5)),2&a){const n=e.oxw().$implicit;e.hij(" ",n.text," "),e.xp6(1),e.Q6J("ngIf",n.imgSrc)}}function Xe(a,t){if(1&a&&(e.ynx(0),e.TgZ(1,"div",1),e.YNc(2,Ge,3,3,"a",2),e.YNc(3,Ve,2,2,"ng-template",null,3,e.W1O),e.qZA(),e.BQk()),2&a){const n=t.$implicit,o=e.MAs(4);e.xp6(1),e.Udp("position",n.fixed?"fixed":"absolute")("margin-left",n.marginLeft)("margin-right",n.marginRight)("margin-top",n.marginTop)("margin-bottom",n.marginBottom)("font-size",n.fontSize),e.Q6J("ngClass",n.cssClass),e.xp6(1),e.Q6J("ngIf",n.link)("ngIfElse",o)}}class ae{constructor(t,n,o){this.contextService=t,this.mediaService=n,this.configService=o,this.mapOverlay=[]}ngAfterViewInit(){this.context$$=this.contextService.context$.subscribe(t=>{this.handleContextChange(t),this.context=t}),this.media$$=this.mediaService.media$.subscribe(t=>this.handleContextChange(this.context))}ngOnDestroy(){this.context$$.unsubscribe(),this.media$$.unsubscribe()}handleContextChange(t){let n=[];if(void 0!==t){this.mapOverlay=[],t.mapOverlay?n=t.mapOverlay:this.configService.getConfig("mapOverlay")&&(n=this.configService.getConfig("mapOverlay"));for(const o of n)(!o.media&&"desktop"===this.mediaService.getMedia()||o.media&&o.media.includes(this.mediaService.getMedia()))&&this.mapOverlay.push(o)}}}ae.\u0275fac=function(t){return new(t||ae)(e.Y36(H.Ob),e.Y36(c.yJ),e.Y36(c.E4))},ae.\u0275cmp=e.Xpm({type:ae,selectors:[["app-map-overlay"]],decls:1,vars:1,consts:[[4,"ngFor","ngForOf"],[1,"mapOverlayDefault",3,"ngClass"],["target","_blank",3,"href",4,"ngIf","ngIfElse"],["templateNoLink",""],["target","_blank",3,"href"],[4,"ngIf"],[3,"src","alt","ngStyle"]],template:function(t,n){1&t&&e.YNc(0,Xe,5,15,"ng-container",0),2&t&&e.Q6J("ngForOf",n.mapOverlay)},dependencies:[m.mk,m.sg,m.O5,m.PC],styles:["[_nghost-%COMP%]{height:100%;top:0;left:0;right:0;position:fixed;pointer-events:none}.mapOverlayDefault[_ngcontent-%COMP%]{position:absolute;white-space:nowrap;pointer-events:auto}.bottom-right[_ngcontent-%COMP%]{bottom:0;right:0}.top-right[_ngcontent-%COMP%]{top:0;right:0}.bottom-left[_ngcontent-%COMP%]{bottom:0;left:0}.top-left[_ngcontent-%COMP%]{top:0;left:0}.bottom-center[_ngcontent-%COMP%]{bottom:0;left:50%;transform:translate(-50%)}.top-center[_ngcontent-%COMP%]{top:0;left:50%;transform:translate(-50%)}.center-center[_ngcontent-%COMP%]{top:50%;left:50%;transform:translate(-50%)}.center-right[_ngcontent-%COMP%]{top:50%;right:0}.center-left[_ngcontent-%COMP%]{top:50%;left:0}"]});var C=u(65590),T=u(87317),re=u(7216),z=u(26562),Ke=u(50635),Ae=u(6788),Ie=u(83733),We=u(67981);function nt(a,t){if(1&a&&e._UZ(0,"igo-search-add-button",7),2&a){const n=e.oxw().result,o=e.oxw(2);e.Q6J("map",o.map)("layer",n)}}function ot(a,t){1&a&&e.YNc(0,nt,1,2,"igo-search-add-button",6)}function it(a,t){if(1&a){const n=e.EpF();e.TgZ(0,"igo-flexible",1,2),e.ALo(2,"async"),e.TgZ(3,"div",3)(4,"igo-search-results",4),e.NdJ("resultFocus",function(i){e.CHM(n);const r=e.oxw();return e.KtG(r.onResultFocus(i))})("resultSelect",function(i){e.CHM(n);const r=e.oxw();return e.KtG(r.onResultSelect(i))})("resultUnfocus",function(i){e.CHM(n);const r=e.oxw();return e.KtG(r.onResultUnfocus(i))})("resultMouseenter",function(i){e.CHM(n);const r=e.oxw();return e.KtG(r.onResultFocus(i))})("resultMouseleave",function(i){e.CHM(n);const r=e.oxw();return e.KtG(r.onResultUnfocus(i))})("moreResults",function(i){e.CHM(n);const r=e.oxw();return e.KtG(r.onSearch(i))}),e.YNc(5,ot,1,0,"ng-template",null,5,e.W1O),e.qZA()()()}if(2&a){const n=e.oxw();e.Q6J("state",e.lcZ(2,6,n.feature$)?n.topPanelState:"initial"),e.xp6(4),e.Q6J("store",n.store)("showIcons",n.showIcons)("term",n.term)("termSplitter",n.termSplitter)("settingsChange$",n.settingsChange$)}}let $=class{constructor(t,n,o,i,r,l,p){this.mapState=t,this.searchState=n,this.elRef=o,this.toolState=i,this.directionState=r,this.queryState=p,this.showIcons=!0,this.shownResultsGeometries=[],this.shownResultsEmphasisGeometries=[],this.focusedResult$=new _.X(void 0),this.isSelectedResultOutOfView$=new _.X(!1),this.debouncedEmpty$=new _.X(!0),this.featureSelected=new e.vpe,this.term="",this.settingsChange$=new _.X(void 0),this.format=new ke.Z,this.initialized=void 0,this.searchEvent=new e.vpe,this.hasFeatureEmphasisOnSelection=l.getConfig("hasFeatureEmphasisOnSelection"),this.addFeaturetoLayer=l.getConfig("addFeaturetoLayer")}get store(){return this.searchState.store}get map(){return this.mapState.map}get featureTitle(){return this.feature?(0,d.TF)(this.feature):void 0}get feature$(){return this.store.stateView.firstBy$(t=>t.state.focused).pipe((0,Ke.U)(t=>this.feature=t?t.entity.data:void 0))}get termSplitter(){return this.searchState.searchTermSplitter$.value}get searchStore(){return this.searchState.store}get mapQueryClick(){return this._mapQueryClick}set mapQueryClick(t){this._mapQueryClick=t}get searchInit(){return this._searchInit}set searchInit(t){this._searchInit=t}get legendPanelOpened(){return this._legendPanelOpened}set legendPanelOpened(t){this._legendPanelOpened=t}get queryStore(){return this.queryState.store}ngOnInit(){this.initialized=!0,this.searchTerm$$=this.searchState.searchTerm$.subscribe(t=>{null!=t&&(this.term=t)}),this.hasFeatureEmphasisOnSelection&&(this.searchState.focusedOrResolution$$||(this.searchState.focusedOrResolution$$=(0,z.a)([this.focusedResult$,this.map.viewController.resolution$]).subscribe(t=>this.buildResultEmphasis(t[0],"focused"))),this.searchState.selectedOrResolution$$||(this.searchState.selectedOrResolution$$=(0,z.a)([this.searchState.selectedResult$,this.map.viewController.resolution$]).subscribe(t=>this.buildResultEmphasis(t[0],"selected")))),this.monitorResultOutOfView(),this.showResultsGeometries$$=(0,z.a)([this.searchState.searchResultsGeometryEnabled$,this.store.stateView.all$(),this.focusedResult$,this.searchState.selectedResult$,this.searchState.searchTerm$,this.map.viewController.resolution$]).subscribe(t=>{const n=t[0],o=t[1];this.hasFeatureEmphasisOnSelection&&this.clearFeatureEmphasis("shown"),this.shownResultsGeometries.map(r=>this.map.queryResultsOverlay.removeFeature(r)),o.filter(r=>r.entity.meta.dataType===s.D97&&r.entity.data.geometry&&!r.state.selected&&!r.state.focused).map(r=>{var l;n&&(r.entity.data.meta.style=(0,s.eU6)(Object.assign({},{feature:r.entity.data},this.searchState.searchOverlayStyle,null!==(l=r.entity.style)&&void 0!==l&&l.base?r.entity.style.base:{})),this.shownResultsGeometries.push(r.entity.data),this.map.queryResultsOverlay.addFeature(r.entity.data,s.bAZ.None),this.hasFeatureEmphasisOnSelection&&this.buildResultEmphasis(r.entity,"shown"))})}),this.debouncedEmpty$$=this.store.stateView.empty$.pipe((0,D.b)(1500)).subscribe(t=>this.debouncedEmpty$.next(t))}monitorResultOutOfView(){this.isSelectedResultOutOfView$$=(0,z.a)([this.map.viewController.state$,this.searchState.selectedResult$]).pipe((0,D.b)(100)).subscribe(t=>{const n=t[1];if(n){if(n.data.geometry){const o=(0,s.zMd)(n.data,this.map.projection),i=(0,s.HgW)(this.map,[o]);this.isSelectedResultOutOfView$.next((0,s.brJ)(this.map,i))}}else this.isSelectedResultOutOfView$.next(!1)})}buildResultEmphasis(t,n){var o,i,r;if("shown"!==n&&this.clearFeatureEmphasis(n),!t||!t.data.geometry)return;const p=(0,s.zMd)(t.data,this.map.projection).getGeometry();if((0,s.fle)(this.map,p.getExtent(),.0025)){const g=p.getExtent(),f=g[0]+(g[2]-g[0])/2,x=g[1]+(g[3]-g[1])/2,F=new Ae.Z({name:`${n}AbstractResult'`,geometry:new Ie.Z([f,x])}),b=(0,s.ve2)(F,this.map.projection);let v,M=0;switch(n){case"focused":v=(0,s.DQ6)(Object.assign({},{feature:b},this.searchState.searchOverlayStyleFocus,null!==(o=t.style)&&void 0!==o&&o.focus?t.style.focus:{})),M=2;break;case"shown":v=(0,s.eU6)(Object.assign({},{feature:b},this.searchState.searchOverlayStyle,null!==(i=t.style)&&void 0!==i&&i.base?t.style.base:{}));break;case"selected":v=(0,s.DQ6)(Object.assign({},{feature:b},this.searchState.searchOverlayStyleSelection,null!==(r=t.style)&&void 0!==r&&r.selection?t.style.selection:{})),M=1}b.meta.style=v,b.meta.style.setZIndex(2e3+M),this.map.searchResultsOverlay.addFeature(b,s.bAZ.None),"focused"===n&&(this.abstractFocusedResult=b),"selected"===n&&(this.abstractSelectedResult=b),"shown"===n&&this.shownResultsEmphasisGeometries.push(b)}else this.clearFeatureEmphasis(n)}clearFeatureEmphasis(t){"focused"===t&&this.abstractFocusedResult&&(this.map.searchResultsOverlay.removeFeature(this.abstractFocusedResult),this.abstractFocusedResult=void 0),"selected"===t&&this.abstractSelectedResult&&(this.map.searchResultsOverlay.removeFeature(this.abstractSelectedResult),this.abstractSelectedResult=void 0),"shown"===t&&(this.shownResultsEmphasisGeometries.map(n=>this.map.searchResultsOverlay.removeFeature(n)),this.shownResultsEmphasisGeometries=[])}ngOnDestroy(){this.searchTerm$$.unsubscribe(),this.isSelectedResultOutOfView$$&&this.isSelectedResultOutOfView$$.unsubscribe(),this.showResultsGeometries$$&&this.showResultsGeometries$$.unsubscribe(),this.getRoute$$&&this.getRoute$$.unsubscribe(),this.debouncedEmpty$$&&this.debouncedEmpty$$.unsubscribe()}onResultFocus(t){var n;if(this.focusedResult$.next(t),t.meta.dataType===s.D97&&t.data.geometry){t.data.meta.style=(0,s.DQ6)(Object.assign({},{feature:t.data},this.searchState.searchOverlayStyleFocus,null!==(n=t.style)&&void 0!==n&&n.focus?t.style.focus:{}));const o=this.map.searchResultsOverlay.dataSource.ol.getFeatureById(t.meta.id);if(o)return void o.setStyle(t.data.meta.style);this.map.searchResultsOverlay.addFeature(t.data,s.bAZ.None),this.featureSelected.emit()}}onResultUnfocus(t){var n;if(this.focusedResult$.next(void 0),t.meta.dataType===s.D97){if(!0===this.store.state.get(t).selected){this.featureSelected.emit();const o=this.map.searchResultsOverlay.dataSource.ol.getFeatureById(t.meta.id);if(o){const i=(0,s.DQ6)(Object.assign({},{feature:t.data},this.searchState.searchOverlayStyleFocus,null!==(n=t.style)&&void 0!==n&&n.focus?t.style.focus:{}));o.setStyle(i)}return}this.map.searchResultsOverlay.removeFeature(t.data)}}onResultSelect(t){this.map.searchResultsOverlay.dataSource.ol.clear(),this.tryAddFeatureToMap(t),this.searchState.setSelectedResult(t)}onSearch(t){(this.mapQueryClick=!0)&&(this.queryState.store.softClear(),this.map.queryResultsOverlay.clear(),this.mapQueryClick=!1),this.store.clear(),this.searchInit=!0,this.legendPanelOpened=!1;const n=t.results;this.searchStore.state.updateAll({focused:!1,selected:!1});const o=this.searchStore.entities$.value.filter(i=>i.source!==t.research.source).concat(n);this.searchStore.updateMany(o),setTimeout(()=>{const i=this.elRef.nativeElement.querySelector("igo-list");let r;t.research.request.subscribe(l=>{r=l[0]&&l[0].source?"icherche"===l[0].source.getId()?i.querySelector(".icherche .moreResults"):"ilayer"===l[0].source.getId()?i.querySelector(".ilayer .moreResults"):"nominatim"===l[0].source.getId()?i.querySelector(".nominatim .moreResults"):i.querySelector("."+l[0].source.getId()+" .moreResults"):null,null!==r&&!this.isScrolledIntoView(i,r)&&(i.scrollTop=r.offsetTop+r.offsetHeight-i.clientHeight)})},250)}computeElementRef(){const t=document.getElementsByTagName("igo-search-results-item"),n=this.elRef.nativeElement.getElementsByTagName("igo-list")[0];let o;for(let i=0;i<t.length;i++)t[i].className.includes("igo-list-item-selected")&&(o=t[i]);return[n,o]}adjustTopPanel(t,n){this.isScrolledIntoView(t,n)||(t.scrollTop=n.offsetTop+n.children[0].offsetHeight-t.clientHeight)}zoomToFeatureExtent(){if(this.feature.geometry){const t=this.format.readFeature(this.feature,{dataProjection:this.feature.projection,featureProjection:this.map.projection});(0,s.ybU)(this.map,[t],s.bAZ.Zoom)}}tryAddFeatureToMap(t){var n;if(t.meta.dataType!==s.D97)return;const o=t.data;!o.geometry||(o.meta.style=(0,s.DQ6)(Object.assign({},{feature:o},this.searchState.searchOverlayStyleSelection,null!==(n=t.style)&&void 0!==n&&n.selection?t.style.selection:{})),this.map.searchResultsOverlay.addFeature(o))}isScrolledIntoView(t,n){const i=t.scrollTop,r=i+t.clientHeight,l=n.offsetTop;return l+n.clientHeight+6<=r&&l>=i}getRoute(){this.directionState.stopsStore.clearStops(),setTimeout(()=>{let t=!1;this.getRoute$$&&this.getRoute$$.unsubscribe(),this.getRoute$$=this.directionState.stopsStore.storeInitialized$.subscribe(n=>{if(this.directionState.stopsStore.storeInitialized$.value&&!t){t=!0;const o=this.directionState.stopsStore.all().find(r=>1===r.position);let i;if(this.feature.geometry)if("Point"===this.feature.geometry.type)i=[this.feature.geometry.coordinates[0],this.feature.geometry.coordinates[1]];else{const r=(0,We.Z)(this.feature.geometry);i=[r.geometry.coordinates[0],r.geometry.coordinates[1]]}if(o.text=this.featureTitle,o.coordinates=i,this.directionState.stopsStore.update(o),this.map.geolocationController.position$.value){const r=this.map.geolocationController.position$.value,l=this.directionState.stopsStore.all().find(f=>0===f.position),p=ve.vs(r.position,r.projection,"EPSG:4326"),g=(0,s.lQj)([p[0],p[1]],6);l.text=g.join(","),l.coordinates=g,this.directionState.stopsStore.update(l)}}})},250)}};$.\u0275fac=function(t){return new(t||$)(e.Y36(y.U5),e.Y36(P),e.Y36(e.SBq),e.Y36(y.EH),e.Y36(y.Nw),e.Y36(c.E4),e.Y36(y.Tb))},$.\u0275cmp=e.Xpm({type:$,selectors:[["app-search-results-tool"]],hostBindings:function(t,n){1&t&&e.NdJ("change",function(){return n.ngOnDestroy()})},inputs:{showIcons:"showIcons",mapQueryClick:"mapQueryClick",searchInit:"searchInit",legendPanelOpened:"legendPanelOpened"},outputs:{featureSelected:"featureSelected",searchEvent:"searchEvent"},decls:2,vars:3,consts:[["initial","100%","initialMobile","100%","collapsed","calc(100% - 58px)","collapsedMobile","calc(100% - 58px)","expanded","60%","expandedMobile","60%",3,"state",4,"ngIf"],["initial","100%","initialMobile","100%","collapsed","calc(100% - 58px)","collapsedMobile","calc(100% - 58px)","expanded","60%","expandedMobile","60%",3,"state"],["topPanel",""],[1,"igo-content"],["placeholder","false",3,"store","showIcons","term","termSplitter","settingsChange$","resultFocus","resultSelect","resultUnfocus","resultMouseenter","resultMouseleave","moreResults"],["igoSearchItemToolbar",""],[3,"map","layer",4,"ngIf(addFeaturetoLayer)"],[3,"map","layer"]],template:function(t,n){1&t&&(e.YNc(0,it,7,8,"igo-flexible",0),e.ALo(1,"async")),2&t&&e.Q6J("ngIf",n.store&&!1===e.lcZ(1,1,n.store.stateView.empty$))},dependencies:[m.O5,s.GYD,s.Uk0,d.dF,m.Ov],encapsulation:2,changeDetection:0}),$=function(a,t,n,o){var l,i=arguments.length,r=i<3?t:null===o?o=Object.getOwnPropertyDescriptor(t,n):o;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)r=Reflect.decorate(a,t,n,o);else for(var p=a.length-1;p>=0;p--)(l=a[p])&&(r=(i<3?l(r):i>3?l(t,n,r):l(t,n))||r);return i>3&&r&&Object.defineProperty(t,n,r),r}([(0,d.$9)({name:"searchResults",title:"igo.integration.tools.searchResults",icon:"magnify"}),function(a,t){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(a,t)}("design:paramtypes",[y.U5,P,e.SBq,y.EH,y.Nw,c.E4,y.Tb])],$);var Ze=u(50253),Qe=u(68951);function at(a,t){if(1&a&&(e.TgZ(0,"div",9),e._UZ(1,"mat-icon",10),e.qZA()),2&a){const n=e.oxw(3);e.xp6(1),e.s9C("svgIcon",n.icon)}}function rt(a,t){if(1&a){const n=e.EpF();e.TgZ(0,"div",9)(1,"a",11),e._uU(2),e.ALo(3,"translate"),e.qZA(),e.TgZ(4,"button",12),e.NdJ("click",function(){e.CHM(n);const i=e.oxw().$implicit,r=e.oxw(2);return e.KtG(r.copyTextToClipboard(i.value))}),e._UZ(5,"mat-icon",13),e.qZA()()}if(2&a){const n=e.oxw().$implicit,o=e.oxw(2);e.xp6(1),e.s9C("href",n.value,e.LSH),e.xp6(1),e.AsE(" ",e.lcZ(3,3,"igo.geo.targetHtmlUrl")," ",o.title,"")}}function st(a,t){if(1&a&&(e.TgZ(0,"div",14),e._uU(1),e.qZA()),2&a){const n=e.oxw().$implicit;e.xp6(1),e.hij(" ",n.key," ")}}function lt(a,t){if(1&a&&e._UZ(0,"div",15),2&a){const n=e.oxw().$implicit;e.Q6J("innerHTML",n.value,e.oJD)}}const $e=function(){return{cursor:"pointer",color:"blue"}};function ct(a,t){if(1&a){const n=e.EpF();e.TgZ(0,"div",16)(1,"u",17),e.NdJ("click",function(){e.CHM(n);const i=e.oxw().$implicit,r=e.oxw(2);return e.KtG(r.openSecureUrl(i.value))}),e._uU(2),e.qZA()()}if(2&a){const n=e.oxw().$implicit,o=e.oxw(2);e.xp6(1),e.Q6J("ngStyle",e.DdM(2,$e)),e.xp6(1),e.Oqu(o.getEmbeddedLinkText(n.value))}}function pt(a,t){if(1&a){const n=e.EpF();e.TgZ(0,"div",16)(1,"u",17),e.NdJ("click",function(){e.CHM(n);const i=e.oxw().$implicit,r=e.oxw(2);return e.KtG(r.openSecureUrl(i.value))}),e._uU(2),e.ALo(3,"translate"),e.qZA(),e.TgZ(4,"button",12),e.NdJ("click",function(){e.CHM(n);const i=e.oxw().$implicit,r=e.oxw(2);return e.KtG(r.copyTextToClipboard(i.value))}),e._UZ(5,"mat-icon",13),e.qZA()()}2&a&&(e.xp6(1),e.Q6J("ngStyle",e.DdM(4,$e)),e.xp6(1),e.Oqu(e.lcZ(3,2,"igo.geo.targetHtmlUrl")))}function ut(a,t){if(1&a){const n=e.EpF();e.TgZ(0,"div",16)(1,"a",18),e.NdJ("click",function(){e.CHM(n);const i=e.oxw().$implicit,r=e.oxw(2);return e.KtG(r.openSecureUrl(i.value))}),e._UZ(2,"img",19),e.ALo(3,"async"),e.ALo(4,"secureImage"),e.qZA()()}if(2&a){const n=e.oxw().$implicit;e.xp6(1),e.s9C("href",n.value,e.LSH),e.xp6(1),e.s9C("src",e.lcZ(3,2,e.lcZ(4,4,n.value)),e.LSH)}}function dt(a,t){if(1&a&&(e._UZ(0,"div",15),e.ALo(1,"json")),2&a){const n=e.oxw().$implicit;e.Q6J("innerHTML",e.lcZ(1,1,n.value),e.oJD)}}function mt(a,t){if(1&a&&(e.TgZ(0,"div",3)(1,"div",4),e.YNc(2,at,2,1,"div",5),e.YNc(3,rt,6,5,"div",5),e.YNc(4,st,2,1,"div",6),e.YNc(5,lt,1,1,"div",7),e.YNc(6,ct,3,3,"div",8),e.YNc(7,pt,6,5,"div",8),e.YNc(8,ut,5,6,"div",8),e.YNc(9,dt,2,3,"div",7),e.qZA()()),2&a){const n=t.$implicit,o=e.oxw(2);e.s9C("title",n.key),e.xp6(2),e.Q6J("ngIf","_blank"===o.feature.properties.target&&"url"===n.key),e.xp6(1),e.Q6J("ngIf","_blank"===o.feature.properties.target&&"url"===n.key),e.xp6(1),e.Q6J("ngIf",void 0===o.feature.properties.target),e.xp6(1),e.Q6J("ngIf",void 0===o.feature.properties.target&&!o.isObject(n.value)&&!o.isUrl(n.value)&&!o.isEmbeddedLink(n.value)),e.xp6(1),e.Q6J("ngIf",void 0===o.feature.properties.target&&o.isEmbeddedLink(n.value)),e.xp6(1),e.Q6J("ngIf",void 0===o.feature.properties.target&&!o.isObject(n.value)&&(o.isDoc(n.value)||o.isUrl(n.value))&&!o.isImg(n.value)),e.xp6(1),e.Q6J("ngIf",void 0===o.feature.properties.target&&!o.isObject(n.value)&&o.isUrl(n.value)&&o.isImg(n.value)),e.xp6(1),e.Q6J("ngIf",void 0===o.feature.properties.target&&o.isObject(n.value))}}function ht(a,t){if(1&a&&(e.TgZ(0,"div",1),e.YNc(1,mt,10,9,"div",2),e.ALo(2,"keyvalue"),e.qZA()),2&a){const n=e.oxw();e.xp6(1),e.Q6J("ngForOf",e.lcZ(2,1,n.filterFeatureProperties(n.feature)))}}class se{constructor(t,n,o,i,r){this.cdRef=t,this.networkService=n,this.configService=o,this.http=i,this.messageService=r,this.unsubscribe$=new Ze.x,this.mapQuery=new e.vpe,this.selectFeature=new e.vpe,this.networkService.currentState().pipe((0,Qe.R)(this.unsubscribe$)).subscribe(l=>{this.state=l})}get source(){return this._source}set source(t){this._source=t,this.cdRef.detectChanges()}get feature(){return this._feature}set feature(t){this._feature=t,this.cdRef.detectChanges(),this.selectFeature.emit()}ngOnInit(){this.ready=!0,this.title=this.feature.properties.value}ngOnDestroy(){this.mapQuery.emit(!1),this.unsubscribe$.next(),this.unsubscribe$.complete()}formatReading(t){return t.toString().replace(".",",")}isObject(t){return"object"==typeof t}isDoc(t){if("string"==typeof t)return!!this.isUrl(t)&&/(pdf|docx?|xlsx?)$/.test(t.toLowerCase())}isUrl(t){if("string"==typeof t)return/^https?:\/\//.test(t)}isImg(t){if("string"==typeof t)return!!this.isUrl(t)&&/(jpe?g|png|gif)$/.test(t.toLowerCase())}isEmbeddedLink(t){if("string"==typeof t){const n=/<a/g;return 1===(t.match(n)||[]).length}return!1}openSecureUrl(t){var n;let o;const i=new RegExp((null===(n=this.configService)||void 0===n?void 0:n.getConfig("depot.url"))+'.*?(?="|$)');if(i.test(t))o=t.match(i)[0],this.http.get(o,{responseType:"blob"}).subscribe(l=>{const p=URL.createObjectURL(l);window.open(p,"_blank"),this.cdRef.detectChanges()},l=>{this.messageService.error("igo.geo.targetHtmlUrlUnauthorized","igo.geo.targetHtmlUrlUnauthorizedTitle")});else{let l=t;if(this.isEmbeddedLink(t)){var r=document.createElement("div");r.innerHTML=t,l=r.children[0].getAttribute("href")}window.open(l,"_blank")}}getEmbeddedLinkText(t){let o=t.match(/(?:>).*?(?=<|$)/)[0];return o=o.replace(/>/g,""),o}filterFeatureProperties(t){const n=t.meta?t.meta.alias:void 0;this.featureTitle=t.meta?t.meta.title:void 0;const o={};return t.properties&&t.properties.Route&&delete t.properties.Route,n?(Object.keys(n).forEach(r=>{o[n[r]]=t.properties[r]}),o):(this.state.connection&&t.meta&&t.meta.excludeAttribute?t.meta.excludeAttribute.forEach(l=>{delete t.properties[l]}):!this.state.connection&&t.meta&&t.meta.excludeAttributeOffline&&t.meta.excludeAttributeOffline.forEach(l=>{delete t.properties[l]}),t.properties)}copyTextToClipboard(t){oe.TU.copy(t)&&this.messageService.success("igo.geo.query.link.message")}}function gt(a,t){if(1&a&&(e.TgZ(0,"div",9),e._UZ(1,"mat-icon",10),e.qZA()),2&a){const n=e.oxw(3);e.xp6(1),e.s9C("svgIcon",n.icon)}}function ft(a,t){if(1&a){const n=e.EpF();e.TgZ(0,"div",9)(1,"a",11),e._uU(2),e.ALo(3,"translate"),e.qZA(),e.TgZ(4,"button",12),e.NdJ("click",function(){e.CHM(n);const i=e.oxw().$implicit,r=e.oxw(2);return e.KtG(r.copyTextToClipboard(i.value))}),e._UZ(5,"mat-icon",13),e.qZA()()}if(2&a){const n=e.oxw().$implicit,o=e.oxw(2);e.xp6(1),e.s9C("href",n.value,e.LSH),e.xp6(1),e.AsE(" ",e.lcZ(3,3,"igo.geo.targetHtmlUrl")," ",o.title,"")}}function _t(a,t){if(1&a&&(e.TgZ(0,"div",14),e._uU(1),e.qZA()),2&a){const n=e.oxw().$implicit;e.xp6(1),e.hij(" ",n.key," ")}}function yt(a,t){if(1&a&&e._UZ(0,"div",15),2&a){const n=e.oxw().$implicit;e.Q6J("innerHTML",n.value,e.oJD)}}se.\u0275fac=function(t){return new(t||se)(e.Y36(e.sBO),e.Y36(c.SL),e.Y36(c.E4),e.Y36(be.eN),e.Y36(c.ez))},se.\u0275cmp=e.Xpm({type:se,selectors:[["app-feature-details"]],inputs:{source:"source",map:"map",feature:"feature",mobile:"mobile",mapQueryClick:"mapQueryClick"},outputs:{mapQuery:"mapQuery",selectFeature:"selectFeature"},decls:1,vars:1,consts:[["class","flextable","role","table","class","igo-striped mat-typography table-container",4,"ngIf"],["role","table",1,"igo-striped","mat-typography","table-container"],[3,"title",4,"ngFor","ngForOf"],[3,"title"],[1,"table-row"],["class","key flex-row","role","rowheader",4,"ngIf"],["id","keyValue","class","key flex-row","role","rowheader",4,"ngIf"],["class","value flex-row","role","cell",3,"innerHTML",4,"ngIf"],["class","value flex-row","role","cell",4,"ngIf"],["role","rowheader",1,"key","flex-row"],["mat-list-avatar","",3,"svgIcon"],["target","_blank","rel","noopener noreferrer",3,"href"],["mat-icon-button","",1,"copyClipboard",3,"click"],["svgIcon","content-copy"],["id","keyValue","role","rowheader",1,"key","flex-row"],["role","cell",1,"value","flex-row",3,"innerHTML"],["role","cell",1,"value","flex-row"],[3,"ngStyle","click"],["target","_blank","rel","noopener noreferrer",3,"href","click"],["igoImageError","","width","225","height","auto",3,"src"]],template:function(t,n){1&t&&e.YNc(0,ht,3,3,"div",0),2&t&&e.Q6J("ngIf",n.ready&&n.feature&&n.feature.properties)},dependencies:[m.sg,m.O5,m.PC,C.Hw,d.hE,m.Ov,m.Ts,k.X$,d.Nd,d.uS],styles:['div[_ngcontent-%COMP%]{box-sizing:border-box}.table-container[_ngcontent-%COMP%]{display:block;margin:2em auto;width:100%}.table-row[_ngcontent-%COMP%]{display:flex;flex-flow:row nowrap;border-bottom:1px solid #DAE6F0}.table-row[_ngcontent-%COMP%]:hover{cursor:pointer;background-color:#dae6f0}.table-row[_ngcontent-%COMP%]   .key[_ngcontent-%COMP%]{width:38%;font:700 16px/24px Open Sans,sans-serif;color:#223654;margin-top:4px;margin-bottom:4px;text-align:left}.table-row[_ngcontent-%COMP%]   .value[_ngcontent-%COMP%]{width:62%;font: 16px/24px Open Sans,sans-serif;color:#223654;text-align:left;margin-top:4px;margin-bottom:8px}.flex-row[_ngcontent-%COMP%]{text-align:center;padding:.5em}.info[_ngcontent-%COMP%]{vertical-align:bottom;transform:scale(.9)}.link[_ngcontent-%COMP%]:hover{color:#3374cc}  .tooltip-right,   .tooltip-above{position:relative!important;top:30%;z-index:5000!important;background-color:#fff!important;color:#223654!important;margin:0 8px!important;padding:8px 12px!important;font-size:14px!important;line-height:24px!important;border:1px solid #c5cad2;border-radius:0!important;overflow:visible!important;box-shadow:0 1px 7px #22365450!important;white-space:pre-line}  .tooltip-right:after{content:""!important;position:absolute!important;top:18%!important;right:100%!important;margin-top:-5px!important;border-width:10px!important;border-style:solid!important;border-color:transparent transparent transparent white!important;transform:rotate(180deg)}  .tooltip-above:after{display:none}'],changeDetection:0});const Ee=function(){return{cursor:"pointer",color:"blue"}};function bt(a,t){if(1&a){const n=e.EpF();e.TgZ(0,"div",16)(1,"u",17),e.NdJ("click",function(){e.CHM(n);const i=e.oxw().$implicit,r=e.oxw(2);return e.KtG(r.openSecureUrl(i.value))}),e._uU(2),e.qZA()()}if(2&a){const n=e.oxw().$implicit,o=e.oxw(2);e.xp6(1),e.Q6J("ngStyle",e.DdM(2,Ee)),e.xp6(1),e.Oqu(o.getEmbeddedLinkText(n.value))}}function xt(a,t){if(1&a){const n=e.EpF();e.TgZ(0,"div",16)(1,"u",17),e.NdJ("click",function(){e.CHM(n);const i=e.oxw().$implicit,r=e.oxw(2);return e.KtG(r.openSecureUrl(i.value))}),e._uU(2),e.ALo(3,"translate"),e.qZA(),e.TgZ(4,"button",12),e.NdJ("click",function(){e.CHM(n);const i=e.oxw().$implicit,r=e.oxw(2);return e.KtG(r.copyTextToClipboard(i.value))}),e._UZ(5,"mat-icon",13),e.qZA()()}2&a&&(e.xp6(1),e.Q6J("ngStyle",e.DdM(4,Ee)),e.xp6(1),e.Oqu(e.lcZ(3,2,"igo.geo.targetHtmlUrl")))}function vt(a,t){if(1&a){const n=e.EpF();e.TgZ(0,"div",16)(1,"a",18),e.NdJ("click",function(){e.CHM(n);const i=e.oxw().$implicit,r=e.oxw(2);return e.KtG(r.openSecureUrl(i.value))}),e._UZ(2,"img",19),e.ALo(3,"async"),e.ALo(4,"secureImage"),e.qZA()()}if(2&a){const n=e.oxw().$implicit;e.xp6(1),e.s9C("href",n.value,e.LSH),e.xp6(1),e.s9C("src",e.lcZ(3,2,e.lcZ(4,4,n.value)),e.LSH)}}function St(a,t){if(1&a&&(e._UZ(0,"div",15),e.ALo(1,"json")),2&a){const n=e.oxw().$implicit;e.Q6J("innerHTML",e.lcZ(1,1,n.value),e.oJD)}}function Ct(a,t){if(1&a&&(e.TgZ(0,"div")(1,"div",4),e.YNc(2,gt,2,1,"div",5),e.YNc(3,ft,6,5,"div",5),e.YNc(4,_t,2,1,"div",6),e.YNc(5,yt,1,1,"div",7),e.YNc(6,bt,3,3,"div",8),e.YNc(7,xt,6,5,"div",8),e.YNc(8,vt,5,6,"div",8),e.YNc(9,St,2,3,"div",7),e.qZA()()),2&a){const n=t.$implicit,o=e.oxw(2);e.xp6(2),e.Q6J("ngIf","_blank"===o.feature.properties.target&&"url"===n.key),e.xp6(1),e.Q6J("ngIf","_blank"===o.feature.properties.target&&"url"===n.key),e.xp6(1),e.Q6J("ngIf",void 0===o.feature.properties.target),e.xp6(1),e.Q6J("ngIf",void 0===o.feature.properties.target&&!o.isObject(n.value)&&!o.isUrl(n.value)&&!o.isEmbeddedLink(n.value)),e.xp6(1),e.Q6J("ngIf",void 0===o.feature.properties.target&&o.isEmbeddedLink(n.value)),e.xp6(1),e.Q6J("ngIf",void 0===o.feature.properties.target&&!o.isObject(n.value)&&(o.isDoc(n.value)||o.isUrl(n.value))&&!o.isImg(n.value)),e.xp6(1),e.Q6J("ngIf",void 0===o.feature.properties.target&&!o.isObject(n.value)&&o.isUrl(n.value)&&o.isImg(n.value)),e.xp6(1),e.Q6J("ngIf",void 0===o.feature.properties.target&&o.isObject(n.value))}}function wt(a,t){if(1&a&&(e.TgZ(0,"div",1),e._uU(1," Custom feature details template "),e._UZ(2,"mat-icon",2),e.ALo(3,"translate"),e.YNc(4,Ct,10,8,"div",3),e.ALo(5,"keyvalue"),e.qZA()),2&a){const n=e.oxw();e.xp6(2),e.Q6J("matTooltip",e.lcZ(3,4,"feature.tooltip"))("matTooltipPosition",n.mobile?"above":"right")("matTooltipClass",n.mobile?"tooltip-above":"tooltip-right"),e.xp6(2),e.Q6J("ngForOf",e.lcZ(5,6,n.filterFeatureProperties(n.feature)))}}class le{constructor(t,n,o,i,r,l){this.cdRef=t,this.networkService=n,this.languageService=o,this.configService=i,this.http=r,this.messageService=l,this.unsubscribe$=new Ze.x,this.selectFeature=new e.vpe,this.networkService.currentState().pipe((0,Qe.R)(this.unsubscribe$)).subscribe(p=>{this.state=p})}get source(){return this._source}set source(t){this._source=t,this.cdRef.detectChanges()}get feature(){return this._feature}set feature(t){this._feature=t,this.cdRef.detectChanges(),this.selectFeature.emit()}get mobile(){return this._mobile}set mobile(t){this._mobile=t}get mapQueryClick(){return this._mapQueryClick}set mapQueryClick(t){this._mapQueryClick=t}ngOnInit(){this.ready=!0}ngOnDestroy(){this.mapQueryClick=!1,this.unsubscribe$.next(),this.unsubscribe$.complete()}formatReading(t){return t.toString().replace(".",",")}tooltipPosition(){this.mobile?this.matTooltipPosition="above":this.matTooltipPosition="right"}get title(){return(0,d.TF)(this.feature)}isObject(t){return"object"==typeof t}isDoc(t){if("string"==typeof t)return!!this.isUrl(t)&&/(pdf|docx?|xlsx?)$/.test(t.toLowerCase())}isUrl(t){if("string"==typeof t)return/^https?:\/\//.test(t)}isImg(t){if("string"==typeof t)return!!this.isUrl(t)&&/(jpe?g|png|gif)$/.test(t.toLowerCase())}isEmbeddedLink(t){if("string"==typeof t){const n=/<a/g;return 1===(t.match(n)||[]).length}return!1}openSecureUrl(t){var n;let o;const i=new RegExp((null===(n=this.configService)||void 0===n?void 0:n.getConfig("depot.url"))+'.*?(?="|$)');if(i.test(t))o=t.match(i)[0],this.http.get(o,{responseType:"blob"}).subscribe(l=>{const p=URL.createObjectURL(l);window.open(p,"_blank"),this.cdRef.detectChanges()},l=>{this.messageService.error("igo.geo.targetHtmlUrlUnauthorized","igo.geo.targetHtmlUrlUnauthorizedTitle")});else{let l=t;if(this.isEmbeddedLink(t)){var r=document.createElement("div");r.innerHTML=t,l=r.children[0].getAttribute("href")}window.open(l,"_blank")}}getEmbeddedLinkText(t){let o=t.match(/(?:>).*?(?=<|$)/)[0];return o=o.replace(/>/g,""),o}filterFeatureProperties(t){const n=t.meta?t.meta.alias:void 0;this.featureTitle=t.meta?t.meta.title:void 0;const o={};return t.properties&&t.properties.Route&&delete t.properties.Route,n?(Object.keys(n).forEach(i=>{o[n[i]]=t.properties[i]}),o):(this.state.connection&&t.meta&&t.meta.excludeAttribute?t.meta.excludeAttribute.forEach(r=>{delete t.properties[r]}):!this.state.connection&&t.meta&&t.meta.excludeAttributeOffline&&t.meta.excludeAttributeOffline.forEach(r=>{delete t.properties[r]}),t.properties)}}function Ot(a,t){if(1&a&&e._UZ(0,"app-feature-details",8),2&a){const n=e.oxw(2);e.Q6J("mobile",n.mobile)("feature",n.resultSelected$.value.data)("mapQueryClick",n.mapQueryClick)}}function Pt(a,t){if(1&a){const n=e.EpF();e.TgZ(0,"app-feature-details-custom",9),e.NdJ("mapQuery",function(i){e.CHM(n);const r=e.oxw(2);return e.KtG(r.mapQueryFromFeatureDetails(i))}),e.qZA()}if(2&a){const n=e.oxw(2);e.Q6J("mobile",n.mobile)("feature",n.resultSelected$.value.data)("mapQueryClick",n.mapQueryClick)}}function Tt(a,t){if(1&a){const n=e.EpF();e.ynx(0,1),e.NdJ("keydown",function(i){e.CHM(n);const r=e.oxw();return e.KtG(r.handleKeyboardEvent(i))}),e.TgZ(1,"span",2)(2,"h4",3),e.NdJ("click",function(){e.CHM(n);const i=e.oxw();return e.KtG(i.onTitleClick())}),e._uU(3),e.qZA(),e.TgZ(4,"button",4),e.NdJ("click",function(){e.CHM(n);const i=e.oxw();return e.KtG(i.clearButton())}),e.ALo(5,"translate"),e._UZ(6,"mat-icon",5),e.qZA()(),e.YNc(7,Ot,1,3,"app-feature-details",6),e.YNc(8,Pt,1,3,"app-feature-details-custom",7),e.BQk()}if(2&a){const n=e.oxw();e.xp6(3),e.Oqu(n.title),e.xp6(1),e.Q6J("matTooltip",e.lcZ(5,4,"feature.close")),e.xp6(3),e.Q6J("ngIf",n.resultSelected$.value&&!n.customFeatureDetails),e.xp6(1),e.Q6J("ngIf",n.resultSelected$.value&&n.customFeatureDetails)}}le.\u0275fac=function(t){return new(t||le)(e.Y36(e.sBO),e.Y36(c.SL),e.Y36(c.TS),e.Y36(c.E4),e.Y36(be.eN),e.Y36(c.ez))},le.\u0275cmp=e.Xpm({type:le,selectors:[["app-feature-details-custom"]],inputs:{source:"source",map:"map",feature:"feature",mobile:"mobile",mapQueryClick:"mapQueryClick",matTooltipPosition:"matTooltipPosition"},outputs:{selectFeature:"selectFeature"},decls:1,vars:1,consts:[["class","flextable","role","table","class","igo-striped mat-typography table-container",4,"ngIf"],["role","table",1,"igo-striped","mat-typography","table-container"],["color","primary","svgIcon","information",1,"info",3,"matTooltip","matTooltipPosition","matTooltipClass"],[4,"ngFor","ngForOf"],[1,"table-row"],["class","key flex-row","role","rowheader",4,"ngIf"],["id","keyValue","class","key flex-row","role","rowheader",4,"ngIf"],["class","value flex-row","role","cell",3,"innerHTML",4,"ngIf"],["class","value flex-row","role","cell",4,"ngIf"],["role","rowheader",1,"key","flex-row"],["mat-list-avatar","",3,"svgIcon"],["target","_blank","rel","noopener noreferrer",3,"href"],["mat-icon-button","",1,"copyClipboard",3,"click"],["svgIcon","content-copy"],["id","keyValue","role","rowheader",1,"key","flex-row"],["role","cell",1,"value","flex-row",3,"innerHTML"],["role","cell",1,"value","flex-row"],[3,"ngStyle","click"],["target","_blank","rel","noopener noreferrer",3,"href","click"],["igoImageError","","width","225","height","auto",3,"src"]],template:function(t,n){1&t&&e.YNc(0,wt,6,8,"div",0),2&t&&e.Q6J("ngIf",n.ready&&n.feature&&n.feature.properties)},dependencies:[m.sg,m.O5,m.PC,C.Hw,d.hE,S.gM,m.Ov,m.Ts,k.X$,d.Nd,d.uS],styles:['div[_ngcontent-%COMP%]{box-sizing:border-box}.table-container[_ngcontent-%COMP%]{display:block;margin:2em auto;width:100%}.table-row[_ngcontent-%COMP%]{display:flex;flex-flow:row nowrap;border-bottom:1px solid #DAE6F0}.table-row[_ngcontent-%COMP%]:hover{cursor:pointer;background-color:#dae6f0}.table-row[_ngcontent-%COMP%]   .key[_ngcontent-%COMP%]{width:38%;font:700 16px/24px Open Sans,sans-serif;color:#223654;margin-top:4px;margin-bottom:4px;text-align:left}.table-row[_ngcontent-%COMP%]   .value[_ngcontent-%COMP%]{width:62%;font: 16px/24px Open Sans,sans-serif;color:#223654;text-align:left;margin-top:4px;margin-bottom:8px}.flex-row[_ngcontent-%COMP%]{text-align:center;padding:.5em}.info[_ngcontent-%COMP%]{vertical-align:bottom;transform:scale(.9)}.link[_ngcontent-%COMP%]:hover{color:#3374cc}  .tooltip-right,   .tooltip-above{position:relative!important;top:30%;z-index:5000!important;background-color:#fff!important;color:#223654!important;margin:0 8px!important;padding:8px 12px!important;font-size:14px!important;line-height:24px!important;border:1px solid #c5cad2;border-radius:0!important;overflow:visible!important;box-shadow:0 1px 7px #22365450!important;white-space:pre-line}  .tooltip-right:after{content:""!important;position:absolute!important;top:18%!important;right:100%!important;margin-top:-5px!important;border-width:10px!important;border-style:solid!important;border-color:transparent transparent transparent white!important;transform:rotate(180deg)}  .tooltip-above:after{display:none}'],changeDetection:0});class J{constructor(t,n,o,i,r,l){this.mediaService=t,this.languageService=n,this.storageState=o,this.queryState=i,this.configService=r,this.searchState=l,this.closeQuery=new e.vpe,this.mapQuery=new e.vpe,this.panelOpened=new e.vpe,this.isResultSelected$=new _.X(!1),this.isSelectedResultOutOfView$=new _.X(!1),this.initialized=!0,this.resultSelected$=new _.X(void 0),this._mapQueryInit=!1,this.customFeatureTitle=void 0!==this.configService.getConfig("customFeatureTitle")&&this.configService.getConfig("customFeatureTitle"),this.customFeatureDetails=void 0!==this.configService.getConfig("customFeatureDetails")&&this.configService.getConfig("customFeatureDetails")}get storageService(){return this.storageState.storageService}get map(){return this._map}set map(t){this._map=t}get store(){return this._store}set store(t){this._store=t}get feature(){return this._feature}set feature(t){this._feature=t}get displayStyle(){return this.results.length?(1===this.results.length&&this.initialized&&this.selectResult(this.results[0]),"visible"):"hidden"}onEscapeHandler(t){this.clearButton()}get results(){return this.store.all()}get searchStore(){return this.searchState.store}get mapQueryInit(){return this._mapQueryInit}set mapQueryInit(t){this._mapQueryInit=t}monitorResultOutOfView(){this.isSelectedResultOutOfView$$=(0,z.a)([this.map.viewController.state$,this.resultSelected$]).pipe((0,D.b)(100)).subscribe(t=>{const n=t[1];if(!n)return void this.isSelectedResultOutOfView$.next(!1);const o=(0,s.zMd)(n.data,this.map.projection),i=(0,s.HgW)(this.map,[o]);this.isSelectedResultOutOfView$.next((0,s.brJ)(this.map,i))})}ngOnInit(){this.store.entities$.subscribe(()=>{this.initialized=!0}),this.monitorResultOutOfView()}ngOnDestroy(){this.clearButton(),this.resultOrResolution$$&&this.resultOrResolution$$.unsubscribe(),this.isSelectedResultOutOfView$$&&this.isSelectedResultOutOfView$$.unsubscribe()}onTitleClick(){this.closeQuery.emit()}selectResult(t){this.store.state.update(t,{focused:!0,selected:!0},!0),this.resultSelected$.next(t);const n=[];for(const o of this.store.all())o.meta.id===t.meta.id?(o.data.meta.style=(0,s.DQ6)(Object.assign({},{feature:o.data},this.queryState.queryOverlayStyleSelection)),o.data.meta.style.setZIndex(2e3)):o.data.meta.style=(0,s.eU6)(Object.assign({},{feature:o.data},this.queryState.queryOverlayStyle)),n.push(o.data),this.featureTitle=o.meta.title,this.getTitle();this.map.queryResultsOverlay.removeFeatures(n),this.map.queryResultsOverlay.addFeatures(n,s.bAZ.None),this.isResultSelected$.next(!0),this.initialized=!1}getTitle(){this.title=this.customFeatureTitle?this.languageService.translate.instant("feature.title"):this.featureTitle}unselectResult(){this.resultSelected$.next(void 0),this.isResultSelected$.next(!1),this.store.state.clear();const t=[];for(const n of this.store.all())n.data.meta.style=(0,s.eU6)(Object.assign({},{feature:n.data},this.queryState.queryOverlayStyle)),t.push(n.data);this.map.queryResultsOverlay.setFeatures(t,s.bAZ.None,"map")}clearButton(){this.map.queryResultsOverlay.clear(),this.store.clear(),this.unselectResult(),this.mapQuery.emit(!1),this.panelOpened.emit(!1),this.closeQuery.emit()}mapQueryFromFeatureDetails(t){this.mapQuery.emit(t)}}function Mt(a,t){if(1&a){const n=e.EpF();e.TgZ(0,"div",11)(1,"button",12),e.NdJ("click",function(){e.CHM(n);const i=e.oxw();return e.KtG(i.closePanelLegend())}),e.ALo(2,"translate"),e._UZ(3,"mat-icon",13),e.qZA(),e.TgZ(4,"h4",14),e._uU(5),e.ALo(6,"translate"),e.qZA(),e._UZ(7,"igo-layer-legend-list",15),e.qZA()}if(2&a){const n=e.oxw();e.Q6J("mapQueryClick",n.mapQueryClick)("legendPanelOpened",n.legendPanelOpened)("panelOpenState",n.panelOpenState),e.xp6(1),e.Q6J("matTooltip",e.lcZ(2,11,"legend.close")),e.xp6(4),e.Oqu(e.lcZ(6,13,"legend.title")),e.xp6(2),e.Q6J("layers",n.mapLayersShownInLegend)("excludeBaseLayers",!0)("allowShowAllLegends",!1)("updateLegendOnResolutionChange",!0)("showAllLegendsValue",!1)("layers",n.layers)}}function kt(a,t){1&a&&(e.TgZ(0,"div",16)(1,"section",17)(2,"h5")(3,"strong"),e._uU(4),e.ALo(5,"translate"),e.qZA()(),e.TgZ(6,"h6")(7,"strong"),e._uU(8),e.ALo(9,"translate"),e.qZA()(),e._UZ(10,"p",18),e.ALo(11,"translate"),e.qZA()()),2&a&&(e.xp6(4),e.Oqu(e.lcZ(5,3,"igo.integration.searchResultsTool.noResults")),e.xp6(4),e.Oqu(e.lcZ(9,5,"igo.integration.searchResultsTool.doSearch")),e.xp6(2),e.Q6J("innerHTML",e.lcZ(11,7,"igo.integration.searchResultsTool.examples"),e.oJD))}function Ft(a,t){if(1&a){const n=e.EpF();e.TgZ(0,"div",null,19)(2,"app-feature-info",20),e.NdJ("closeQuery",function(){e.CHM(n);const i=e.oxw();return e.KtG(i.closePanelOnCloseQuery())})("clearSearchbarterm",function(i){return i})("panelOpened",function(i){e.CHM(n);const r=e.oxw();return e.KtG(r.panelOpenedFromFeature(i))})("mapQuery",function(i){e.CHM(n);const r=e.oxw();return e.KtG(r.mapQueryFromFeature(i))}),e.qZA()()}if(2&a){const n=e.oxw();e.xp6(2),e.Q6J("map",n.map)("mobile",n.mobile)("store",n.queryStore)("mapQueryClick",n.mapQueryClick)("title",n.featureTitle)("hasFeatureEmphasisOnSelection",n.hasFeatureEmphasisOnSelection)}}function Lt(a,t){if(1&a&&(e.TgZ(0,"div",null,21),e._UZ(2,"app-search-results-tool",22,23),e.qZA()),2&a){const n=e.oxw();e.xp6(2),e.Q6J("showIcons",!0)("mapQueryClick",n.mapQueryClick)("legendPanelOpened",n.legendPanelOpened)("panelOpenState",n.panelOpenState)("searchInit",n.searchInit)}}J.\u0275fac=function(t){return new(t||J)(e.Y36(c.yJ),e.Y36(c.TS),e.Y36(y.I2),e.Y36(y.Tb),e.Y36(c.E4),e.Y36(P))},J.\u0275cmp=e.Xpm({type:J,selectors:[["app-feature-info"]],hostVars:2,hostBindings:function(t,n){1&t&&e.NdJ("keydown.escape",function(i){return n.onEscapeHandler(i)},!1,e.evT),2&t&&e.Udp("visibility",n.displayStyle)},inputs:{map:"map",store:"store",mapQueryClick:"mapQueryClick",panelOpenState:"panelOpenState",mobile:"mobile",feature:"feature",mapQueryInit:"mapQueryInit"},outputs:{closeQuery:"closeQuery",mapQuery:"mapQuery",panelOpened:"panelOpened"},decls:2,vars:3,consts:[["class","featureInfo",3,"keydown",4,"ngIf"],[1,"featureInfo",3,"keydown"],[1,"title"],["color","primary",2,"cursor","pointer",3,"click"],["mat-icon-button","","igoStopPropagation","","color","primary",1,"clear-button",3,"matTooltip","click"],["svgIcon","close"],[3,"mobile","feature","mapQueryClick",4,"ngIf"],[3,"mobile","feature","mapQueryClick","mapQuery",4,"ngIf"],[3,"mobile","feature","mapQueryClick"],[3,"mobile","feature","mapQueryClick","mapQuery"]],template:function(t,n){1&t&&(e.YNc(0,Tt,9,6,"ng-container",0),e.ALo(1,"async")),2&t&&e.Q6J("ngIf",e.lcZ(1,1,n.store.entities$))},dependencies:[m.O5,C.Hw,T.lW,S.gM,d._u,se,le,m.Ov,k.X$],styles:["@media only screen and (orientation:portrait) and (max-width: 599px),only screen and (orientation:landscape) and (max-width: 959px){[_nghost-%COMP%]{width:100%;overflow-x:clip}}.title[_ngcontent-%COMP%]{display:flex;flex-direction:row;align-items:center}.title[_ngcontent-%COMP%]   h4[_ngcontent-%COMP%]{display:block;text-align:center}.title[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]{float:right;width:24px;height:24px;margin-left:auto}app-feature-details[_ngcontent-%COMP%]{float:left;width:100%;overflow-x:clip;margin-right:8px}"],changeDetection:0});class ce{constructor(t,n,o,i){this.configService=t,this.searchState=n,this.queryState=o,this.cdRef=i,this.title$=new _.X(void 0),this.openedChange=new e.vpe,this.mapQuery=new e.vpe,this.selectFeature=new e.vpe,this.hasFeatureEmphasisOnSelection=!0,this.store=new d.Dn([]),this.settingsChange$=new _.X(void 0),this.closeLegend=new e.vpe,this.closeQuery=new e.vpe,this.panelOpened=new e.vpe}get map(){return this._map}set map(t){this._map=t}get opened(){return this._opened}set opened(t){t!==this._opened&&(this._opened=t,this.openedChange.emit(this._opened))}get queryStore(){return this.queryState.store}get feature(){return this._feature}set feature(t){this._feature=t,this.cdRef.detectChanges(),this.selectFeature.emit()}get searchInit(){return this._searchInit}set searchInit(t){this._searchInit=t}get searchStore(){return this.searchState.store}get layers(){return this._layers}set layers(t){this._layers=t}get legendPanelOpened(){return this._legendPanelOpened}set legendPanelOpened(t){this._legendPanelOpened=t}ngOnInit(){this.queryStore.entities$.subscribe(t=>{t.length>0?(this.mapQuery.emit(!0),this.legendPanelOpened=!1,this.panelOpened.emit(!0),this.clearSearch()):this.closePanelOnCloseQuery()})}ngOnDestroy(){this.store.destroy(),this.store.entities$.unsubscribe(),this.legendPanelOpened=!1,this.clearSearch(),this.clearQuery(),this.map.propertyChange$.unsubscribe}isScrolledIntoView(t,n){const i=t.scrollTop,r=i+t.clientHeight,l=n.offsetTop;return l+n.clientHeight+6<=r&&l>=i}onResultFocus(t){this.tryAddFeatureToMap(t),this.selectedFeature=t.data}tryAddFeatureToMap(t){t.meta.dataType===s.D97&&void 0!==t.data.geometry&&(this.map.searchResultsOverlay.setFeatures([t.data],s.bAZ.Default),this.hasFeatureEmphasisOnSelection=this.configService.getConfig("hasFeatureEmphasisOnSelection"))}removeFeatureFromMap(){this.map.searchResultsOverlay.clear()}closePanelOnCloseQuery(){this.closeQuery.emit(),this.mapQuery.emit(!1),!this.searchInit&&!this.legendPanelOpened&&this.panelOpened.emit(!1),(this.searchInit||this.legendPanelOpened)&&this.panelOpened.emit(!0)}clearSearch(){this.map.searchResultsOverlay.clear(),this.searchStore.clear(),this.searchState.setSelectedResult(void 0),this.searchState.deactivateCustomFilterTermStrategy(),this.searchInit=!1,this.searchState.setSearchTerm("")}clearQuery(){this.queryState.store.softClear(),this.queryState.store.clear(),this.mapQuery.emit(!1),this.removeFeatureFromMap()}closePanelLegend(){this.legendPanelOpened=!1,this.closeLegend.emit(),this.map.propertyChange$.unsubscribe}panelOpenedFromFeature(t){this.panelOpened.emit(t)}mapQueryFromFeature(t){this.mapQuery.emit(t)}}ce.\u0275fac=function(t){return new(t||ce)(e.Y36(c.E4),e.Y36(P),e.Y36(y.Tb),e.Y36(e.sBO))},ce.\u0275cmp=e.Xpm({type:ce,selectors:[["app-sidepanel"]],hostBindings:function(t,n){1&t&&e.NdJ("change",function(){return n.ngOnDestroy()})},inputs:{map:"map",opened:"opened",mobile:"mobile",mapQueryClick:"mapQueryClick",feature:"feature",featureTitle:"featureTitle",searchInit:"searchInit",layers:"layers",legendPanelOpened:"legendPanelOpened",panelOpenState:"panelOpenState"},outputs:{openedChange:"openedChange",mapQuery:"mapQuery",selectFeature:"selectFeature",closeLegend:"closeLegend",closeQuery:"closeQuery",panelOpened:"panelOpened"},decls:15,vars:15,consts:[["id","sidepanel",1,"sidepanel"],["mode","side",3,"autoFocus","opened","openedChange","closed","closeLegend"],["sidenav",""],[1,"app-sidenav-content"],["content",""],["id","legend",3,"mapQueryClick","legendPanelOpened","panelOpenState",4,"ngIf"],["style","margin: 24px;",4,"ngIf"],[4,"ngIf"],["mat-raised-button","","color","primary","id","sidepanel-button","isRoundButton","false","isIconButton","true","MatDrawerMode","push","matTooltipPosition","after",3,"ngClass","matTooltip","click"],["sidenavbutton",""],[1,"icon",3,"svgIcon"],["id","legend",3,"mapQueryClick","legendPanelOpened","panelOpenState"],["mat-icon-button","","color","primary",3,"matTooltip","click"],["svgIcon","close"],["mat-dialog-title",""],[3,"layers","excludeBaseLayers","allowShowAllLegends","updateLegendOnResolutionChange","showAllLegendsValue"],[2,"margin","24px"],[1,"mat-typography"],[3,"innerHTML"],["getInfo",""],[3,"map","mobile","store","mapQueryClick","title","hasFeatureEmphasisOnSelection","closeQuery","clearSearchbarterm","panelOpened","mapQuery"],["search",""],["placeholder","false",3,"showIcons","mapQueryClick","legendPanelOpened","panelOpenState","searchInit"],["searchresults",""]],template:function(t,n){if(1&t){const o=e.EpF();e.TgZ(0,"div",0)(1,"mat-sidenav",1,2),e.NdJ("openedChange",function(r){return n.panelOpenState=r})("closed",function(){return n.closePanelLegend()})("closeLegend",function(){return n.closePanelLegend()}),e.TgZ(3,"div",3,4),e.YNc(5,Mt,8,15,"div",5),e.YNc(6,kt,12,9,"div",6),e.ALo(7,"async"),e.YNc(8,Ft,3,6,"div",7),e.YNc(9,Lt,4,5,"div",7),e.qZA()(),e.TgZ(10,"button",8,9),e.NdJ("click",function(){e.CHM(o);const r=e.MAs(2);return e.KtG(r.toggle())}),e.ALo(12,"translate"),e.ALo(13,"translate"),e._UZ(14,"mat-icon",10),e.qZA()()}if(2&t){const o=e.MAs(2);e.xp6(1),e.Q6J("autoFocus",!1)("opened",n.panelOpenState),e.xp6(4),e.Q6J("ngIf",n.legendPanelOpened),e.xp6(1),e.Q6J("ngIf",!n.searchInit&&!0===e.lcZ(7,9,n.queryStore.empty$)&&!n.legendPanelOpened),e.xp6(2),e.Q6J("ngIf",n.mapQueryClick),e.xp6(1),e.Q6J("ngIf",n.searchInit),e.xp6(1),e.Q6J("ngClass",o.opened?"sidepanel-opened":"sidepanel-closed")("matTooltip",o.opened?e.lcZ(12,11,"sidePanel.close"):e.lcZ(13,13,"sidePanel.open")),e.xp6(4),e.Q6J("svgIcon",o.opened?"chevron-left":"chevron-right")}},dependencies:[m.mk,m.O5,C.Hw,T.lW,re.JX,S.gM,$,J,s.exk,m.Ov,k.X$],styles:['mat-sidenav[_ngcontent-%COMP%]{-o-box-shadow:2px 2px 2px 0px #dddddd;box-shadow:2px 2px 2px #ddd}[_nghost-%COMP%]{background-color:#fff}mat-sidenav[_ngcontent-%COMP%]{height:calc(100% - 29px);width:400px;overflow:visible}@media only screen and (orientation:portrait) and (max-width: 599px),only screen and (orientation:landscape) and (max-width: 959px){mat-sidenav[_ngcontent-%COMP%]{width:calc(100% - 44px);max-width:400px}}.app-sidenav-content[_ngcontent-%COMP%]{padding:0 16px!important}.app-content[_ngcontent-%COMP%], igo-panel[_ngcontent-%COMP%]{height:100%}app-sidepanel[_ngcontent-%COMP%]{width:400px}  igo-search-results{position:relative;left:16px!important;width:100%;display:contents;height:100%}igo-search-results-tool[_ngcontent-%COMP%]{display:block;position:relative;margin:0 16px;top:8px;height:100%}#sidepanel-button[_ngcontent-%COMP%]{position:absolute;top:50%;left:401px;z-index:1;padding:0;min-width:12px!important;width:24px;border-radius:0}#sidepanel-button[_ngcontent-%COMP%]:hover{background-color:#156bb2}.sidepanel-closed[_ngcontent-%COMP%]{left:0!important;position:absolute}  .icon svg{fill:#fff}@keyframes fadeIn{0%{opacity:0}to{opacity:1}}app-search-results-tool[_ngcontent-%COMP%], app-feature-info[_ngcontent-%COMP%]{width:100%;height:100%;display:flex;flex-direction:column;padding:16px 16px 0}  app-search-results-tool>div>section>h4>strong{font-size:21px!important}app-feature-info[_ngcontent-%COMP%]{position:relative}  .mat-drawer-inner-container{top:60px;position:relative;height:calc(100% - 60px)}[_nghost-%COMP%]{scrollbar-color:#095797 #fff;scrollbar-width:thin}  app-sidepanel .mat-drawer-inner-container::-webkit-scrollbar{width:6px}  app-sidepanel .mat-drawer-inner-container::-webkit-scrollbar-track{box-shadow:inset 0 0 5px #dae6f0;border-radius:10px}  app-sidepanel .mat-drawer-inner-container::-webkit-scrollbar-thumb{background:#095797;border-radius:10px;cursor:pointer}.mat-icon[_ngcontent-%COMP%], mat-button-wrapper[_ngcontent-%COMP%], .mat-icon-button[_ngcontent-%COMP%]   .mat-icon[_ngcontent-%COMP%], .mat-icon-button[_ngcontent-%COMP%]{line-height:26px;height:24px;width:24px;float:right}.mat-icon[_ngcontent-%COMP%]   svg[_ngcontent-%COMP%]{height:20px;width:20px}.legend-items[_ngcontent-%COMP%]   img[_ngcontent-%COMP%]{width:18px;vertical-align:middle;padding:0 5px 0 0}  .tooltip-chart:after{content:""!important;position:absolute!important;top:18%!important;right:100%!important;margin-top:-5px!important;border-width:10px!important;border-style:solid!important;border-color:transparent transparent transparent white!important;transform:rotate(180deg)}'],changeDetection:0});var Se=u(16531);function Rt(a,t){if(1&a){const n=e.EpF();e.TgZ(0,"igo-search-bar",7,8),e.NdJ("click",function(i){e.CHM(n);const r=e.oxw();return e.KtG(r.onSearchBarClick(i))})("keydown.Enter",function(i){return i.stopPropagation()})("keydown.Space",function(i){return i.stopPropagation()})("searchTermChange",function(i){e.CHM(n);const r=e.oxw();return e.KtG(r.onSearchTermChange(i))})("pointerSummaryStatus",function(i){e.CHM(n);const r=e.oxw();return e.KtG(r.onPointerSummaryStatusChange(i))})("searchResultsGeometryStatus",function(i){e.CHM(n);const r=e.oxw();return e.KtG(r.onSearchResultsGeometryStatusChange(i))})("clearFeature",function(i){e.CHM(n);const r=e.oxw();return e.KtG(r.clearSearchBar(i))})("search",function(i){e.CHM(n);const r=e.oxw();return e.KtG(r.onSearch(i))}),e.ALo(2,"translate"),e.qZA()}if(2&a){const n=e.oxw();e.Q6J("mobile",n.mobile)("matTooltip",e.lcZ(2,9,"searchBar"))("searchSettings",!1)("term",n.term)("termSplitter",n.termSplitter)("forceNA",n.forceCoordsNA)("store",n.searchStore)("pointerSummaryEnabled",n.igoSearchPointerSummaryEnabled)("searchResultsGeometryEnabled",n.searchResultsGeometryEnabled)}}function At(a,t){if(1&a){const n=e.EpF();e.TgZ(0,"div",9)(1,"button",10),e.NdJ("click",function(){e.CHM(n);const i=e.oxw();return e.KtG(i.closePanelLegend())}),e.ALo(2,"translate"),e._UZ(3,"mat-icon",11),e.qZA(),e.TgZ(4,"h4",12),e._uU(5),e.ALo(6,"translate"),e.qZA(),e._UZ(7,"igo-layer-legend-list",13),e.qZA()}if(2&a){const n=e.oxw();e.Q6J("legendPanelOpened",n.legendPanelOpened),e.xp6(1),e.Q6J("matTooltip",e.lcZ(2,9,"legend.close")),e.xp6(4),e.Oqu(e.lcZ(6,11,"legend.title")),e.xp6(2),e.Q6J("layers",n.mapLayersShownInLegend)("excludeBaseLayers",!0)("allowShowAllLegends",!1)("updateLegendOnResolutionChange",!0)("showAllLegendsValue",!1)("layers",n.layers)}}function It(a,t){1&a&&(e.TgZ(0,"div",14)(1,"section",15)(2,"h5")(3,"strong"),e._uU(4),e.ALo(5,"translate"),e.qZA()(),e.TgZ(6,"h6")(7,"strong"),e._uU(8),e.ALo(9,"translate"),e.qZA()(),e._UZ(10,"p",16),e.ALo(11,"translate"),e.qZA()()),2&a&&(e.xp6(4),e.Oqu(e.lcZ(5,3,"igo.integration.searchResultsTool.noResults")),e.xp6(4),e.Oqu(e.lcZ(9,5,"igo.integration.searchResultsTool.doSearch")),e.xp6(2),e.Q6J("innerHTML",e.lcZ(11,7,"igo.integration.searchResultsTool.examples"),e.oJD))}function Zt(a,t){if(1&a){const n=e.EpF();e.TgZ(0,"div",null,17)(2,"app-feature-info",18),e.NdJ("closeQuery",function(){e.CHM(n);const i=e.oxw();return e.KtG(i.closePanelOnCloseQuery())})("panelOpened",function(i){e.CHM(n);const r=e.oxw();return e.KtG(r.panelOpenedFromFeature(i))})("mapQuery",function(i){e.CHM(n);const r=e.oxw();return e.KtG(r.mapQueryFromFeature(i))}),e.qZA()()}if(2&a){const n=e.oxw();e.xp6(2),e.Q6J("map",n.map)("store",n.queryStore)("mobile",n.mobile)("mapQueryClick",n.mapQueryClick)("panelOpenState",n.panelOpenState)}}function Qt(a,t){if(1&a){const n=e.EpF();e.TgZ(0,"div",null,19)(2,"igo-search-results",20),e.NdJ("searchTermChange",function(i){e.CHM(n);const r=e.oxw();return e.KtG(r.onSearchTermChange(i))})("featureSelected",function(){e.CHM(n);const i=e.oxw();return e.KtG(i.closePanel())})("resultFocus",function(i){e.CHM(n);const r=e.oxw();return e.KtG(r.onResultFocus(i))})("resultSelect",function(i){e.CHM(n);const r=e.oxw();return e.KtG(r.onResultFocus(i))})("moreResults",function(i){e.CHM(n);const r=e.oxw();return e.KtG(r.onSearch(i))}),e.qZA()()}if(2&a){const n=e.oxw();e.xp6(2),e.Q6J("store",n.searchStore)("term",n.term)("showIcons",!0)("termSplitter",n.termSplitter)("zoomAuto",!1)}}class pe{constructor(t,n,o,i,r,l,p,g,f){this.configService=t,this.mapService=n,this.searchState=o,this.searchService=i,this.queryState=r,this.cdRef=l,this.mapState=p,this.storageState=g,this.elRef=f,this.title$=new _.X(void 0),this.closeLegend=new e.vpe,this.hideToggle=!1,this.mapQuery=new e.vpe,this.focusedResult$=new _.X(void 0),this.resultSelected$=new _.X(void 0),this.selectFeature=new e.vpe,this.hasFeatureEmphasisOnSelection=!1,this.store=new d.Dn([]),this.igoSearchPointerSummaryEnabled=!1,this.forceCoordsNA=!1,this.clearedSearchbar=!1,this.pageIterator=[],this.withZoomButton=!1,this.zoomAuto$=new _.X(!1),this._zoomAuto=!1,this.shownResultsEmphasisGeometries=[],this.panelOpened=new e.vpe,this.closeQuery=new e.vpe,this.mapService.setMap(this.map),this.showSearchBar=void 0===this.configService.getConfig("showSearchBar")||this.configService.getConfig("showSearchBar"),this.zoomAuto=this.storageService.get("zoomAuto")}get legendPanelOpened(){return this._legendPanelOpened}set legendPanelOpened(t){this._legendPanelOpened=t}get map(){return this.mapState.map}get queryStore(){return this.queryState.store}get feature(){return this._feature}set feature(t){this._feature=t,this.cdRef.detectChanges(),this.selectFeature.emit()}get term(){return this._term}set term(t){this._term=t,this.pageIterator=[]}get searchInit(){return this._searchInit}set searchInit(t){this._searchInit=t}get termSplitter(){return this.searchState.searchTermSplitter$.value}get searchStore(){return this.searchState.store}get storageService(){return this.storageState.storageService}get zoomAuto(){return this._zoomAuto}set zoomAuto(t){t===!this._zoomAuto&&(this._zoomAuto=t,this.zoomAuto$.next(t),this.storageService.set("zoomAuto",t))}get layers(){return this._layers}set layers(t){this._layers=t}ngOnInit(){let t,n;this.closePanel(),this.forceCoordsNA=this.configService.getConfig("app.forceCoordsNA"),this.queryStore.entities$.subscribe(o=>{o.length>0?(this.openPanel(),this.mapQuery.emit(!0),this.clearSearch(),this.searchInit=!1):!this.legendPanelOpened&&!this.searchInit&&this.closePanel()}),this.map.propertyChange$.subscribe(()=>{this.mapLayersShownInLegend=this.map.layers.filter(o=>!1!==o.showInLayerList)}),this.hasFeatureEmphasisOnSelection&&(this.resultOrResolution$$=(0,z.a)([this.focusedResult$.pipe((0,ye.b)(o=>{t=o,n="focused"})),this.resultSelected$.pipe((0,ye.b)(o=>{t=o,n="selected"})),this.map.viewController.resolution$,this.store.entities$]).subscribe(()=>this.buildResultEmphasis(t,n)))}ngOnDestroy(){this.searchInit=!1,this.mapQuery.emit(!1),this.store.destroy(),this.store.entities$.unsubscribe(),this.map.propertyChange$.unsubscribe,this.queryState.store.destroy(),this.clearSearch()}onPointerSummaryStatusChange(t){this.igoSearchPointerSummaryEnabled=t}onSearchTermChange(t=""){this.term=t,this.clearedSearchbar=!1,t.replace(/(#[^\s]*)/g,"").trim().length<2?(this.searchStore.clear(),this.selectedFeature=void 0,this.searchInit=!1,this.clearSearch()):this.mapQueryClick&&(this.queryState.store.softClear(),this.mapQuery.emit(!1),this.searchInit=!0)}onSearch(t){this.openPanel(),this.mapQueryClick&&(this.queryState.store.softClear(),this.map.queryResultsOverlay.clear(),this.mapQuery.emit(!1)),this.legendPanelOpened=!1,this.queryState.store.softClear(),this.searchInit=!0,this.clearedSearchbar=!1,this.store.clear();const n=t.results;this.searchStore.state.updateAll({focused:!1,selected:!1});const o=this.searchStore.entities$.value.filter(i=>i.source!==t.research.source).concat(n);this.searchStore.updateMany(o),setTimeout(()=>{const i=this.elRef.nativeElement.querySelector("igo-list");let r;t.research.request.subscribe(l=>{r=l[0]&&l[0].source?"icherche"===l[0].source.getId()?i.querySelector(".icherche .moreResults"):"ilayer"===l[0].source.getId()?i.querySelector(".ilayer .moreResults"):"nominatim"===l[0].source.getId()?i.querySelector(".nominatim .moreResults"):i.querySelector("."+l[0].source.getId()+" .moreResults"):null,null!==r&&!this.isScrolledIntoView(i,r)&&(i.scrollTop=r.offsetTop+r.offsetHeight-i.clientHeight)})},250)}isScrolledIntoView(t,n){const i=t.scrollTop,r=i+t.clientHeight,l=n.offsetTop;return l+n.clientHeight+6<=r&&l>=i}onResultFocus(t){var n;if(this.focusedResult$.next(t),t.meta.dataType===s.D97&&t.data.geometry){t.data.meta.style=(0,s.DQ6)(Object.assign({},{feature:t.data},this.searchState.searchOverlayStyleFocus,null!==(n=t.style)&&void 0!==n&&n.focus?t.style.focus:{}));const o=this.map.searchResultsOverlay.dataSource.ol.getFeatureById(t.meta.id);if(o)return void o.setStyle(t.data.meta.style);this.map.searchResultsOverlay.addFeature(t.data,s.bAZ.None)}this.tryAddFeatureToMap(t),this.selectedFeature=t.data,void 0!==this.selectedFeature&&this.closePanel()}tryAddFeatureToMap(t){void 0!==this.searchState.setSelectedResult&&this.closePanel(),t.meta.dataType===s.D97&&void 0!==t.data.geometry&&(this.map.searchResultsOverlay.setFeatures([t.data],s.bAZ.Default),this.closePanel(),this.hasFeatureEmphasisOnSelection=this.configService.getConfig("hasFeatureEmphasisOnSelection"))}removeFeatureFromMap(){this.map.searchResultsOverlay.clear(),this.closePanel()}onSearchCoordinate(){this.searchStore.clear();const t=this.searchService.reverseSearch(this.lonlat);for(const n in t)t.length>0&&t[n].request.subscribe(o=>{this.onSearch({research:t[n],results:o})})}onSearchBarClick(t){!this.panelOpenState&&!1===this.clearedSearchbar&&this.openPanel(),t.stopPropagation()}clearQuery(){this.queryState.store.softClear(),this.queryState.store.clear(),this.mapQuery.emit(!1),this.removeFeatureFromMap()}closePanelOnCloseQuery(){this.mapQuery.emit(!1),this.closeQuery.emit(),this.cdRef.detectChanges(),(this.searchInit||this.legendPanelOpened)&&this.openPanel()}clearSearchBar(t){this.searchInit=!1,this.clearSearch(),this.closePanel(),this.clearedSearchbar=!0,t&&t.stopPropagation()}clearSearch(){this.map.searchResultsOverlay.clear(),this.searchStore.clear(),this.searchState.setSelectedResult(void 0),this.searchState.deactivateCustomFilterTermStrategy(),this.term=""}closePanelLegend(){this.legendPanelOpened=!1,this.closePanel(),this.closeLegend.emit(),this.map.propertyChange$.unsubscribe}panelOpenedFromFeature(t){this.panelOpened.emit(t)}mapQueryFromFeature(t){this.mapQuery.emit(t)}closePanel(){!this.searchInit&&!this.mapQueryClick&&!this.legendPanelOpened&&this.panelOpened.emit(!1)}openPanel(){this.panelOpened.emit(!0)}clearFeatureEmphasis(t){"focused"===t&&this.abstractFocusedResult&&(this.map.searchResultsOverlay.removeFeature(this.abstractFocusedResult),this.abstractFocusedResult=void 0),"selected"===t&&this.abstractSelectedResult&&(this.map.searchResultsOverlay.removeFeature(this.abstractSelectedResult),this.abstractSelectedResult=void 0),"shown"===t&&(this.shownResultsEmphasisGeometries.map(n=>this.map.searchResultsOverlay.removeFeature(n)),this.shownResultsEmphasisGeometries=[])}buildResultEmphasis(t,n){var o,i,r;if("shown"!==n&&this.clearFeatureEmphasis(n),!t||!t.data.geometry)return;const p=(0,s.zMd)(t.data,this.map.projection).getGeometry();if((0,s.fle)(this.map,p.getExtent(),.0025)){const g=p.getExtent(),f=g[0]+(g[2]-g[0])/2,x=g[1]+(g[3]-g[1])/2,F=new Ae.Z({name:`${n}AbstractResult'`,geometry:new Ie.Z([f,x])}),b=(0,s.ve2)(F,this.map.projection);let v,M=0;switch(n){case"focused":v=(0,s.DQ6)(Object.assign({},{feature:b},this.searchState.searchOverlayStyleFocus,null!==(o=t.style)&&void 0!==o&&o.focus?t.style.focus:{})),M=2;break;case"shown":v=(0,s.eU6)(Object.assign({},{feature:b},this.searchState.searchOverlayStyle,null!==(i=t.style)&&void 0!==i&&i.base?t.style.base:{}));break;case"selected":v=(0,s.DQ6)(Object.assign({},{feature:b},this.searchState.searchOverlayStyleSelection,null!==(r=t.style)&&void 0!==r&&r.selection?t.style.selection:{})),M=1}b.meta.style=v,b.meta.style.setZIndex(2e3+M),this.map.searchResultsOverlay.addFeature(b,s.bAZ.None),"focused"===n&&(this.abstractFocusedResult=b),"selected"===n&&(this.abstractSelectedResult=b),"shown"===n&&this.shownResultsEmphasisGeometries.push(b)}else this.clearFeatureEmphasis(n)}}pe.\u0275fac=function(t){return new(t||pe)(e.Y36(c.E4),e.Y36(s.SM5),e.Y36(P),e.Y36(s.oDG),e.Y36(y.Tb),e.Y36(e.sBO),e.Y36(y.U5),e.Y36(y.I2),e.Y36(e.SBq))},pe.\u0275cmp=e.Xpm({type:pe,selectors:[["app-bottompanel"]],inputs:{legendPanelOpened:"legendPanelOpened",map:"map",hideToggle:"hideToggle",mobile:"mobile",mapQueryClick:"mapQueryClick",feature:"feature",term:"term",searchInit:"searchInit",layers:"layers",panelOpenState:"panelOpenState"},outputs:{closeLegend:"closeLegend",mapQuery:"mapQuery",selectFeature:"selectFeature",panelOpened:"panelOpened",closeQuery:"closeQuery"},decls:10,vars:9,consts:[["id","bottomPanelMobile"],[3,"hideToggle","expanded","opened","closed","closeLegend","keydown.Enter","click"],["bottompanel",""],["appearance","outline","searchIcon","magnify","matTooltipShowDelay","500","tooltip-position","after","color","primary",3,"mobile","matTooltip","searchSettings","term","termSplitter","forceNA","store","pointerSummaryEnabled","searchResultsGeometryEnabled","click","keydown.Enter","keydown.Space","searchTermChange","pointerSummaryStatus","searchResultsGeometryStatus","clearFeature","search",4,"ngIf"],["id","legend",3,"legendPanelOpened",4,"ngIf"],["style","margin: 20px;",4,"ngIf"],[4,"ngIf"],["appearance","outline","searchIcon","magnify","matTooltipShowDelay","500","tooltip-position","after","color","primary",3,"mobile","matTooltip","searchSettings","term","termSplitter","forceNA","store","pointerSummaryEnabled","searchResultsGeometryEnabled","click","keydown.Enter","keydown.Space","searchTermChange","pointerSummaryStatus","searchResultsGeometryStatus","clearFeature","search"],["searchbar",""],["id","legend",3,"legendPanelOpened"],["mat-icon-button","","color","primary",3,"matTooltip","click"],["svgIcon","close"],["mat-dialog-title",""],[3,"layers","excludeBaseLayers","allowShowAllLegends","updateLegendOnResolutionChange","showAllLegendsValue"],[2,"margin","20px"],[1,"mat-typography"],[3,"innerHTML"],["getInfo",""],[3,"map","store","mobile","mapQueryClick","panelOpenState","closeQuery","panelOpened","mapQuery"],["search",""],["placeholder","false",3,"store","term","showIcons","termSplitter","zoomAuto","searchTermChange","featureSelected","resultFocus","resultSelect","moreResults"]],template:function(t,n){1&t&&(e.TgZ(0,"div",0)(1,"mat-expansion-panel",1,2),e.NdJ("opened",function(){return n.openPanel()})("closed",function(){return n.closePanelLegend()})("closeLegend",function(){return n.closePanelLegend()})("keydown.Enter",function(i){return i.stopPropagation()})("click",function(i){return i.stopPropagation()}),e.TgZ(3,"mat-expansion-panel-header"),e.YNc(4,Rt,3,11,"igo-search-bar",3),e.qZA(),e.YNc(5,At,8,13,"div",4),e.YNc(6,It,12,9,"div",5),e.ALo(7,"async"),e.YNc(8,Zt,3,5,"div",6),e.YNc(9,Qt,3,5,"div",6),e.qZA()()),2&t&&(e.xp6(1),e.Q6J("hideToggle",!1)("expanded",n.panelOpenState),e.xp6(3),e.Q6J("ngIf",n.showSearchBar),e.xp6(1),e.Q6J("ngIf",!0===n.legendPanelOpened),e.xp6(1),e.Q6J("ngIf",!0!==n.searchInit&&!0===e.lcZ(7,7,n.queryStore.empty$)&&!1===n.legendPanelOpened),e.xp6(2),e.Q6J("ngIf",!0===n.mapQueryClick),e.xp6(1),e.Q6J("ngIf",!0===n.searchInit))},dependencies:[m.O5,C.Hw,T.lW,S.gM,s.NBD,s.GYD,Se.ib,Se.yz,J,s.exk,m.Ov,k.X$],styles:['[_nghost-%COMP%]{background-color:#fff;width:100%}  igo-search-results{position:relative;left:16px!important;width:352px;display:contents;height:calc(100% - 44px)}igo-search-results-tool[_ngcontent-%COMP%]{display:block;position:relative;margin:0 16px;top:8px;height:100%;width:100%}  app-search-results-tool>div>section>h4>strong{font-size:21px!important}igo-search-bar[_ngcontent-%COMP%]{margin:auto;width:100%;padding:8px}  app-bottompanel .mat-expansion-panel-content{overflow-y:scroll!important;overflow-x:clip;height:264px;max-width:100%;scrollbar-color:#095797 #fff;scrollbar-width:thin}  app-bottompanel .mat-expansion-panel-content::-webkit-scrollbar{width:6px}  app-bottompanel .mat-expansion-panel-content::-webkit-scrollbar-track{box-shadow:inset 0 0 5px #dae6f0;border-radius:10px}  app-bottompanel .mat-expansion-panel-content::-webkit-scrollbar-thumb{background:#095797;border-radius:10px}  .igo-search-bar-container .mat-icon{fill:#fff}#bottomPanelMobile[_ngcontent-%COMP%]{position:relative;display:block;bottom:0}app-feature-info[_ngcontent-%COMP%]{overflow-x:clip}[_nghost-%COMP%]     .mat-expansion-panel .mat-expansion-indicator:after{transform:rotate(-135deg)!important}[_nghost-%COMP%]     .mat-expansion-panel.mat-expanded .mat-expansion-indicator{transform:rotate(180deg)!important}.mat-icon[_ngcontent-%COMP%], mat-button-wrapper[_ngcontent-%COMP%], .mat-icon-button[_ngcontent-%COMP%]   .mat-icon[_ngcontent-%COMP%], .mat-icon-button[_ngcontent-%COMP%]{line-height:26px;height:24px;width:24px;float:right}.mat-icon[_ngcontent-%COMP%]   svg[_ngcontent-%COMP%]{height:20px;width:20px}  .legend.button:focus-visible{display:none}  .tooltip-above{position:relative!important;top:30%;z-index:5000!important;background-color:#fff!important;color:#223654!important;margin:0 8px!important;padding:8px 12px!important;font-size:14px!important;line-height:24px!important;border:1px solid #c5cad2;border-radius:0!important;overflow:visible!important;box-shadow:0 1px 7px #22365450!important;white-space:pre-line}  .tooltip-above:after{content:""!important;position:absolute!important;top:18%!important;right:100%!important;margin-top:-5px!important;border-width:10px!important;border-style:solid!important;border-color:transparent transparent transparent white!important;transform:rotate(180deg)}[_nghost-%COMP%]     .mat-expansion-indicator{padding:10px}[_nghost-%COMP%]     .mat-expansion-panel-header{padding:0 8px!important}'],changeDetection:0});class ue{constructor(t){this.mapState=t}get map(){return this.mapState.map}get layers$(){return this.map.layers$}ngOnInit(){this.mapLayersShownInLegend=this.map.layers.filter(t=>!1!==t.showInLayerList)}}ue.\u0275fac=function(t){return new(t||ue)(e.Y36(y.U5))},ue.\u0275cmp=e.Xpm({type:ue,selectors:[["app-legend-dialog"]],decls:7,vars:8,consts:[["mat-dialog-actions",""],["mat-button","","mat-icon-button","","mat-dialog-close","",1,"close"],["svgIcon","close"],["mat-dialog-title",""],[3,"layers","excludeBaseLayers","allowShowAllLegends","updateLegendOnResolutionChange","showAllLegendsValue"]],template:function(t,n){1&t&&(e.TgZ(0,"div",0)(1,"button",1),e._UZ(2,"mat-icon",2),e.qZA()(),e.TgZ(3,"h4",3),e._uU(4),e.ALo(5,"translate"),e.qZA(),e._UZ(6,"igo-layer-legend-list",4)),2&t&&(e.xp6(4),e.Oqu(e.lcZ(5,6,"legend.title")),e.xp6(2),e.Q6J("layers",n.mapLayersShownInLegend)("excludeBaseLayers",!0)("allowShowAllLegends",!1)("updateLegendOnResolutionChange",!0)("showAllLegendsValue",!1))},dependencies:[C.Hw,L.ZT,L.uh,L.H8,s.exk,T.lW,k.X$],styles:['#legend-dialog-container{width:-moz-fit-content!important;width:fit-content!important;z-index:10;position:fixed;right:.5%;max-width:99%!important;padding:16px!important;max-height:calc(100% - 201px)!important;overflow:hidden;display:flex;flex-direction:column;height:100%;border-radius:0;height:-moz-fit-content;height:fit-content}  #legend-dialog-container igo-layer-legend-list{max-height:inherit}  #legend-dialog-container igo-layer-legend-list .layer-legend-list-container{overflow-y:auto;height:inherit;max-height:inherit}  #legend-dialog-container igo-layer-legend-item{flex-wrap:wrap;width:-moz-min-content;width:min-content;display:flex;flex-direction:column;margin-bottom:16px}  #legend-dialog-container igo-layer-legend-item:last-child{margin-bottom:0}  #legend-dialog-container .igo-layer-legend-container{padding-left:0!important;width:-moz-max-content!important;width:max-content!important}@media (min-width: 768px){  #legend-dialog-container{max-height:calc(100% - 281px)!important;height:-moz-fit-content;height:fit-content}}  app-legend-dialog{max-height:calc(100% - 24px)!important;height:inherit}  app-legend-dialog .mat-list-base .mat-list-item .mat-list-item-content{padding:0!important}  app-legend-dialog .mat-dialog-title{margin:0;display:block}  app-legend-dialog .mat-dialog-title:after{content:"";display:block;width:2.8rem;border-bottom:4px solid #f09686;margin-bottom:.8rem}  app-legend-dialog .mat-list-item:after{content:"";display:block;width:1.8rem;border-bottom:3px solid #DAE6F0;margin-bottom:.4rem;padding-top:2px}  app-legend-dialog .igo-layer-list-item{height:-moz-fit-content!important;height:fit-content!important}  app-legend-dialog .mat-icon,   app-legend-dialog mat-button-wrapper,   app-legend-dialog .mat-icon-button .mat-icon,   app-legend-dialog .mat-icon-button{line-height:26px;height:24px;width:24px}  app-legend-dialog .mat-icon svg{height:20px;width:20px}  app-legend-dialog div.mat-dialog-content.legend>img{max-height:100%;max-width:100%}  app-legend-dialog div.mat-dialog-actions{float:right;padding:0;min-height:auto}']});class de{constructor(t,n){this.dialog=t,this.languageService=n,this.dialogRef=null,this.legendButtonTooltip=this.languageService.translate.instant("legend.open"),this.toggleLegend=new e.vpe}toggleLegendButton(){!this.legendInPanel&&!this.mobile&&(this.dialog.getDialogById("legend-dialog-container")?(this.legendButtonTooltip=this.languageService.translate.instant("legend.open"),this.dialogRef.close()):(this.legendButtonTooltip=this.languageService.translate.instant("legend.close"),this.dialogRef=this.dialog.open(ue,{id:"legend-dialog-container",hasBackdrop:!1,closeOnNavigation:!0}))),this.toggleLegend.emit()}}de.\u0275fac=function(t){return new(t||de)(e.Y36(L.uw),e.Y36(c.TS))},de.\u0275cmp=e.Xpm({type:de,selectors:[["app-legend-button"]],inputs:{tooltipDisabled:"tooltipDisabled",legendInPanel:"legendInPanel",mobile:"mobile"},outputs:{toggleLegend:"toggleLegend"},decls:3,vars:5,consts:[["id","legend-button","mat-raised-button","",3,"matTooltip","matTooltipDisabled","click"]],template:function(t,n){1&t&&(e.TgZ(0,"button",0),e.NdJ("click",function(){return n.toggleLegendButton()}),e._uU(1),e.ALo(2,"translate"),e.qZA()),2&t&&(e.Q6J("matTooltip",n.legendButtonTooltip)("matTooltipDisabled",n.tooltipDisabled),e.xp6(1),e.hij(" ",e.lcZ(2,3,"legend.button"),"\n"))},dependencies:[T.lW,S.gM,k.X$],styles:["#legend-button[_ngcontent-%COMP%],   .mat-raised-button{font-size:.9rem!important;font-weight:500!important;margin:0;min-width:8px;border:0px;border-radius:0!important}  .qcca-theme #legend-button{color:#095797!important;border-color:#095797!important}"]});const $t=["mapBrowser"],Et=["searchbar"];function Bt(a,t){if(1&a){const n=e.EpF();e.TgZ(0,"igo-search-bar",18,19),e.NdJ("pointerSummaryStatus",function(i){e.CHM(n);const r=e.oxw(2);return e.KtG(r.onPointerSummaryStatusChange(i))})("searchTermChange",function(i){e.CHM(n);const r=e.oxw(2);return e.KtG(r.onSearchTermChange(i))})("search",function(i){e.CHM(n);const r=e.oxw(2);return e.KtG(r.onSearch(i))})("clearFeature",function(){e.CHM(n);const i=e.oxw(2);return e.KtG(i.clearSearch())}),e.ALo(2,"translate"),e.qZA()}if(2&a){const n=e.oxw(2);e.Q6J("matTooltip",e.lcZ(2,6,"searchBar"))("searchSettings",!1)("forceNA",n.forceCoordsNA)("term",n.searchBarTerm)("store",n.searchStore)("termSplitter",n.termSplitter)}}function jt(a,t){1&a&&e._UZ(0,"div",20)}function Ut(a,t){if(1&a){const n=e.EpF();e.TgZ(0,"div",14),e.YNc(1,Bt,3,8,"igo-search-bar",15),e.YNc(2,jt,1,0,"div",5),e.TgZ(3,"app-sidepanel",16,17),e.NdJ("openedChange",function(i){e.CHM(n);const r=e.oxw();return e.KtG(r.panelOpenState=i)})("panelOpened",function(i){e.CHM(n);const r=e.oxw();return e.KtG(r.panelOpened(i))})("toggleLegend",function(){e.CHM(n);const i=e.oxw();return e.KtG(i.togglePanelLegend())})("closeLegend",function(){e.CHM(n);const i=e.oxw();return e.KtG(i.closePanelLegend())})("closeQuery",function(){e.CHM(n);const i=e.oxw();return e.KtG(i.closePanelOnCloseQuery())})("openLegend",function(){e.CHM(n);const i=e.oxw();return e.KtG(i.openPanelLegend())}),e.qZA()()}if(2&a){const n=e.oxw();e.xp6(1),e.Q6J("ngIf",n.showSearchBar),e.xp6(1),e.Q6J("ngIf",n.mobile),e.xp6(1),e.Q6J("map",n.map)("mobile",n.mobile)("opened",n.panelOpenState)("searchInit",n.searchInit)("store",n.queryStore)("legendPanelOpened",n.legendPanelOpened)("mapQueryClick",n.mapQueryClick)("panelOpenState",n.panelOpenState)("layers",n.mapLayersShownInLegend)}}function qt(a,t){1&a&&e._UZ(0,"div",20)}function Dt(a,t){if(1&a&&e._UZ(0,"igo-geolocate-button",9),2&a){const n=e.oxw();e.Q6J("map",n.map)}}function Ht(a,t){if(1&a){const n=e.EpF();e.TgZ(0,"app-legend-button",21),e.NdJ("toggleLegend",function(){e.CHM(n);const i=e.oxw();return e.KtG(i.toggleLegend())}),e.qZA()}if(2&a){const n=e.oxw();e.Q6J("legendInPanel",n.legendInPanel)("tooltipDisabled",n.mobile)("legendButtonTooltip",n.legendButtonTooltip)}}function zt(a,t){if(1&a){const n=e.EpF();e.TgZ(0,"app-bottompanel",22),e.NdJ("panelOpened",function(i){e.CHM(n);const r=e.oxw();return e.KtG(r.panelOpened(i))})("mapQuery",function(i){e.CHM(n);const r=e.oxw();return e.KtG(r.mapQuery(i))})("closeQuery",function(){e.CHM(n);const i=e.oxw();return e.KtG(i.closePanelOnCloseQuery())})("closeLegend",function(){e.CHM(n);const i=e.oxw();return e.KtG(i.closePanelLegend())})("openLegend",function(){e.CHM(n);const i=e.oxw();return e.KtG(i.openPanelLegend())})("toggleLegend",function(){e.CHM(n);const i=e.oxw();return e.KtG(i.togglePanelLegend())}),e.qZA()}if(2&a){const n=e.oxw();e.Q6J("mobile",n.mobile)("store",n.searchStore)("searchInit",n.searchInit)("mapQueryClick",n.mapQueryClick)("legendPanelOpened",n.legendPanelOpened)("panelOpenState",n.panelOpenState)("layers",n.mapLayersShownInLegend)}}function Jt(a,t){if(1&a&&e._UZ(0,"app-footer",23),2&a){const n=e.oxw();e.Q6J("mobile",n.mobile)}}const Nt=function(a,t){return{"igo-attribution-offset":a,"map-hasfooter":t}},Gt=function(){return["igo-baselayers-switcher-mobile"]},Yt=function(){return["baselayers-pushed"]},Vt=function(){return["baselayers"]},Xt=function(){return["map-buttons-mobile"]},Kt=function(){return["map-buttons"]};class N{constructor(t,n,o,i,r,l,p,g,f,x,F,b,v,M,we,Oe,dn,mn,hn,gn,fn,_n,yn,bn,xn,vn){this.route=t,this.workspaceState=n,this.authService=o,this.mediaService=i,this.layerService=r,this.dataSourceService=l,this.capabilitiesService=p,this.contextState=g,this.mapState=f,this.mapService=x,this.searchState=F,this.queryState=b,this.searchSourceService=v,this.configService=M,this.importService=we,this.http=Oe,this.languageService=dn,this.messageService=mn,this.dialogWindow=hn,this.storageService=gn,this.directionState=fn,this.dialog=_n,this.queryService=yn,this.breakpointObserver=bn,this.pwaService=xn,this.analyticsService=vn,this.showRotationButtonIfNoRotation=void 0,this.hasFooter=!0,this.hasLegendButton=!0,this.hasGeolocateButton=!0,this.workspaceNotAvailableMessage="workspace.disabled.resolution",this.workspaceEntitySortChange$=new _.X(!1),this.workspaceMaximize$$=[],this.workspaceMaximize$=new _.X(this.storageService.get("workspaceMaximize")),this.selectedWorkspace$=new _.X(void 0),this.hasSideSearch=!0,this.showSearchBar=!0,this.legendPanelOpened=!1,this.legendDialogOpened=!1,this.settingsChange$=new _.X(void 0),this.hasHomeExtentButton=!1,this.hasFeatureEmphasisOnSelection=!1,this.workspaceSwitchDisabled=!1,this.paginatorOptions={pageSize:50,pageSizeOptions:[1,5,10,20,50,100,500]},this.workspaceMenuClass="workspace-menu",this.fullExtent=this.storageService.get("fullExtent"),this.matDialogRef$=new _.X(void 0),this.searchBarTerm="",this.onSettingsChange$=new _.X(void 0),this.termDefinedInUrl=!1,this.termSplitter="|",this.termDefinedInUrlTriggered=!1,this.addedLayers$$=[],this.forceCoordsNA=!1,this.contextMenuStore=new d.Dn([]),this.contextLoaded=!1,this.toastPanelHtmlDisplay=!1,this.dialogOpened=this.dialog.getDialogById("legend-button-dialog-container"),this.mobileBreakPoint="(min-width: 768px)",this.Breakpoints=Fe.u3,this.currentBreakpoint="",this.panelOpenState=!1,this.mapQueryClick=!1,this.searchInit=!1,this.legendButtonTooltip=this.languageService.translate.instant("legend.open"),this.breakpoint$=this.breakpointObserver.observe(this.mobileBreakPoint).pipe((0,ye.b)(()=>{}),(0,je.x)()),this.hasFooter=void 0!==this.configService.getConfig("hasFooter")&&this.configService.getConfig("hasFooter"),this.hasLegendButton=void 0!==this.configService.getConfig("hasLegendButton")&&this.configService.getConfig("hasLegendButton"),this.hasSideSearch=void 0===this.configService.getConfig("hasSideSearch")||this.configService.getConfig("hasSideSearch"),this.showSearchBar=void 0===this.configService.getConfig("searchBar.showSearchBar")||this.configService.getConfig("searchBar.showSearchBar"),this.hasHomeExtentButton=void 0!==this.configService.getConfig("homeExtentButton"),this.hasGeolocateButton=void 0===this.configService.getConfig("hasGeolocateButton")||this.configService.getConfig("hasGeolocateButton"),this.showRotationButtonIfNoRotation=void 0!==this.configService.getConfig("showRotationButtonIfNoRotation")&&this.configService.getConfig("showRotationButtonIfNoRotation"),this.forceCoordsNA=this.configService.getConfig("app.forceCoordsNA"),this.hasFeatureEmphasisOnSelection=this.configService.getConfig("hasFeatureEmphasisOnSelection"),this.igoSearchPointerSummaryEnabled=this.configService.getConfig("hasSearchPointerSummary"),void 0===this.igoSearchPointerSummaryEnabled&&(this.igoSearchPointerSummaryEnabled=this.storageService.get("searchPointerSummaryEnabled")||!1),this.mobileBreakPoint=void 0===this.configService.getConfig("mobileBreakPoint")?"'(min-width: 768px)'":this.configService.getConfig("mobileBreakPoint"),this.hasHomeExtentButton=void 0!==this.configService.getConfig("homeExtentButton"),this.legendInPanel=void 0===this.configService.getConfig("legendInPanel")||this.configService.getConfig("legendInPanel")}getBaseLayersUseStaticIcon(){return this.configService.getConfig("useStaticIcon")}get map(){return this.mapState.map}get auth(){return this.configService.getConfig("auth")||[]}isMobile(){return this.mediaService.getMedia()===c.pU.Mobile}isTablet(){return this.mediaService.getMedia()===c.pU.Tablet}isLandscape(){return this.mediaService.getOrientation()===c.pC.Landscape}isPortrait(){return this.mediaService.getOrientation()===c.pC.Portrait}get backdropShown(){return this.panelOpenState}get expansionPanelExpanded(){return this.workspaceState.workspacePanelExpanded}set expansionPanelExpanded(t){this.workspaceState.workspacePanelExpanded=t,t?this.map.viewController.setPadding({bottom:280}):this.map.viewController.setPadding({bottom:0})}get workspace(){return this.workspaceState.workspace$.value}get actionbarMode(){return d.rO.Overlay}get actionbarWithTitle(){return this.actionbarMode===d.rO.Overlay}get searchStore(){return this.searchState.store}get searchResultsGeometryEnabled(){return this.searchState.searchResultsGeometryEnabled$.value}get workspaceStore(){return this.workspaceState.store}get queryStore(){return this.queryState.store}ngOnInit(){this.queryService.defaultFeatureCount=1,window.IGO=this,this.hasGeolocateButton=void 0===this.configService.getConfig("hasGeolocateButton")||this.configService.getConfig("hasGeolocateButton"),this.map.ol.once("rendercomplete",()=>{this.readQueryParams(),void 0!==this.configService.getConfig("geolocate.activateDefault")&&(this.map.geolocationController.tracking=this.configService.getConfig("geolocate.activateDefault"))}),this.searchState.searchTermSplitter$.next(this.termSplitter),this.authService.authenticate$.subscribe(n=>{this.contextLoaded=!1}),this.route.queryParams.subscribe(n=>{this.readLanguageParam(n)}),this.context$$=this.contextState.context$.subscribe(n=>this.onChangeContext(n));const t=[{id:"coordinates",title:"coordinates",handler:()=>this.searchCoordinate(this.contextMenuCoord)},{id:"googleMaps",title:"googleMap",handler:()=>this.openGoogleMaps(this.contextMenuCoord)},{id:"googleStreetView",title:"googleStreetView",handler:()=>this.openGoogleStreetView(this.contextMenuCoord)}];this.contextMenuStore.load(t),this.searchState.selectedResult$.subscribe(n=>{n&&this.isMobile()&&this.closePanels()}),this.searchTerm$$=this.searchState.searchTerm$.pipe((0,Pe.T)(1)).subscribe(n=>{null!=n&&this.analyticsService.trackSearch(n,this.searchState.store.count)}),this.queryService.defaultFeatureCount=1,this.queryStore.entities$.subscribe(n=>{n.length>0&&this.openPanelonQuery()}),this.breakpoint$.subscribe(()=>this.breakpointChanged())}ngAfterContentInit(){this.map.viewController.setInitialState()}toggleDialogLegend(){this.legendDialogOpened||(this.legendDialogOpened=!0)}toggleLegend(){this.legendInPanel||this.mobile?this.legendPanelOpened?(this.legendButtonTooltip=this.languageService.translate.instant("legend.open"),this.closePanelLegend()):(this.legendButtonTooltip=this.languageService.translate.instant("legend.close"),this.openPanelLegend(),this.searchInit&&(this.clearSearch(),this.openPanels()),this.mapQueryClick&&(this.onClearQuery(),this.mapQueryClick=!1,this.openPanels())):this.legendDialogOpened||(this.legendDialogOpened=!0)}panelOpened(t){this.panelOpenState=t}mapQuery(t){this.mapQueryClick=t}closePanelLegend(){this.legendPanelOpened=!1,this.closePanels(),this.map.propertyChange$.unsubscribe}openPanelLegend(){this.legendPanelOpened=!0,this.openPanels(),this.map.propertyChange$.subscribe(()=>{this.mapLayersShownInLegend=this.map.layers.filter(t=>!1!==t.showInLayerList)})}breakpointChanged(){this.breakpointObserver.isMatched("(min-width: 768px)")?(this.currentBreakpoint=this.mobileBreakPoint,this.mobile=!1):this.mobile=!0}createFeatureProperties(t){let n={};return t.options.sourceOptions.sourceFields.forEach(o=>{!o.primary&&o.visible&&(n[o.name]="")}),n}entitySortChange(){this.workspaceEntitySortChange$.next(!0)}ngOnDestroy(){var t;this.context$$.unsubscribe(),this.workspaceMaximize$$.map(n=>n.unsubscribe()),null===(t=this.layers$$)||void 0===t||t.unsubscribe(),this.searchTerm$$.unsubscribe()}getQuerySearchSource(){return this.searchSourceService.getSources().find(t=>t instanceof s.W2O)}getFeatureIsSameActiveWks(t){if(this.workspace){const n=t.meta.sourceTitle;return this.workspace.title===n}return!1}getWksActiveOpenInResolution(){if(this.workspace){const t=this.workspace;if(t.active&&t.inResolutionRange$.value&&this.workspaceState.workspacePanelExpanded)return!0}return!1}onMapQuery(t){this.configService.getConfig("queryOnlyOne")&&(t.features=[t.features[0]],this.map.queryResultsOverlay.clear());this.getQuerySearchSource();const o=[];if(t.features.length){this.searchInit&&this.clearSearch(),this.clearSearchbarterm(""),this.mapQueryClick&&this.onClearQuery(),this.openPanelonQuery();const r=t.features.map(p=>{let g=o.find(f=>f.title===p.meta.sourceTitle);if(!this.getFeatureIsSameActiveWks(p)||!this.getWksActiveOpenInResolution()||this.workspace.getLayerWksOptionMapQuery())return g&&(this.onClearQuery(),this.openPanelonQuery(),this.mapQueryClick=!0),g||(g=new s.W2O({title:p.meta.sourceTitle}),o.push(g)),(0,s.$LA)(p,g)}).filter(p=>void 0!==p);(0,Be.of)(r).subscribe(p=>{this.queryStore.load(p)})}else this.mapQueryClick=!1,!this.searchInit&&!this.legendPanelOpened&&!this.mobile&&(this.panelOpenState=!1),!this.searchInit&&this.mobile&&(this.panelOpenState=!1)}cancelOngoingAddLayer(){this.addedLayers$$.forEach(t=>t.unsubscribe()),this.addedLayers$$=[]}onBackdropClick(){this.closePanels(),this.mapQueryClick=!1}onSearchTermChange(t){var n;if(this.mobile&&(this.panelOpenState=!0),(null===(n=this.routeParams)||void 0===n?void 0:n.search)&&t!==this.routeParams.search&&this.searchState.deactivateCustomFilterTermStrategy(),this.searchState.setSearchTerm(t),t.replace(/(#[^\s]*)/g,"").trim().length<2)return this.mobile&&(this.panelOpenState=!0),void this.clearSearch();this.onBeforeSearch()}clearSearchbarterm(t){this.mobile||this.searchBar.setTerm("")}onSearch(t){this.searchInit=!0,this.legendPanelOpened=!1,this.panelOpenState=!0,this.mapQueryClick&&(this.onClearQuery(),this.mapQueryClick=!1,this.panelOpenState=!0);const n=t.results,o=!(0,s.OcM)(t.research.source);let i;i=o?this.searchSourceService.getEnabledSources().filter(s._iF):this.searchSourceService.getEnabledSources().filter(s.OcM);const r=this.searchStore.entities$.value.filter(l=>l.source!==t.research.source&&i.includes(l.source)).concat(n);this.searchStore.updateMany(r)}closePanels(){!this.mapQueryClick&&!this.searchInit&&!this.legendPanelOpened&&(this.panelOpenState=!1)}openPanels(){this.panelOpenState=!0}computeHomeExtentValues(t){var n,o;null!==(o=null===(n=null==t?void 0:t.map)||void 0===n?void 0:n.view)&&void 0!==o&&o.homeExtent?(this.homeExtent=t.map.view.homeExtent.extent,this.homeCenter=t.map.view.homeExtent.center,this.homeZoom=t.map.view.homeExtent.zoom):(this.homeExtent=void 0,this.homeCenter=void 0,this.homeZoom=void 0)}onChangeContext(t){this.cancelOngoingAddLayer(),void 0!==t&&(this.workspace&&!this.workspace.entityStore.empty&&this.workspace.entityStore.clear(),this.queryState.store.empty||this.queryState.store.softClear(),this.computeHomeExtentValues(t),this.route.queryParams.pipe((0,D.b)(250)).subscribe(n=>{(!n.context||n.context===t.uri)&&this.readLayersQueryParams(n)}),this.contextLoaded=!0)}onBeforeSearch(){this.openPanels()}clearSearch(){this.map.searchResultsOverlay.clear(),this.searchStore.clear(),this.searchState.setSelectedResult(void 0),this.searchState.deactivateCustomFilterTermStrategy(),this.searchInit=!1,this.searchBarTerm="",this.searchState.setSearchTerm("")}closePanelOnCloseQuery(){this.mapQueryClick=!1,(this.searchInit||this.legendPanelOpened)&&this.openPanels()}openPanelonQuery(){this.mapQueryClick=!0,this.openPanels,this.legendPanelOpened=!1,this.clearSearch()}onClearQuery(){this.queryState.store.clear(),this.queryState.store.softClear(),this.map.queryResultsOverlay.clear()}getTitle(t){return(0,d.TF)(t)}onContextMenuOpen(t){this.contextMenuCoord=this.getClickCoordinate(t)}getClickCoordinate(t){const n=t,o=this.mapBrowser.nativeElement.getBoundingClientRect();n.y=n.y-o.top+(window.scrollY||window.pageYOffset),n.x=n.x-o.left+(window.scrollX||window.pageXOffset);const i=[n.x,n.y],r=this.map.ol.getCoordinateFromPixel(i),l=this.map.projection;return ve.vs(r,l,"EPSG:4326")}openGoogleMaps(t){window.open(s.Gij.getGoogleMapsCoordLink(t[0],t[1]))}openGoogleStreetView(t){window.open(s.Gij.getGoogleStreetViewLink(t[0],t[1]))}searchCoordinate(t){this.searchBarTerm=t.map(n=>n.toFixed(6)).join(", ")}onPointerSummaryStatusChange(t){this.storageService.set("searchPointerSummaryEnabled",t),this.igoSearchPointerSummaryEnabled=t}readQueryParams(){this.route.queryParams.subscribe(t=>{this.routeParams=t,this.readSearchParams(),this.readFocusFirst(),this.computeZoomToExtent()})}readLanguageParam(t){t.lang&&(this.authService.languageForce=!0,this.languageService.setLanguage(t.lang))}computeZoomToExtent(){if(this.routeParams.zoomExtent){const t=this.routeParams.zoomExtent.split(","),n=ve.$A(t,"EPSG:4326",this.map.projection);this.map.viewController.zoomToExtent(n)}}getControlsOffsetY(){return this.expansionPanelExpanded?this.workspaceMaximize$.value?"firstRowFromBottom-expanded-maximized":"firstRowFromBottom-expanded":"firstRowFromBottom"}computeFocusFirst(){setTimeout(()=>{const t=document.getElementsByTagName("igo-search-results-item").item(0);t&&t.click()},1)}readFocusFirst(){if("1"===this.routeParams.sf&&this.termDefinedInUrl){const t=this.searchStore.stateView.all$().pipe((0,Te.n)(n=>0===n.length),(0,D.b)(1e3),(0,Me.q)(1)).subscribe(n=>{t.unsubscribe(),n.length&&!this.termDefinedInUrlTriggered&&(this.computeFocusFirst(),this.termDefinedInUrlTriggered=!0)})}}readSearchParams(){if(this.routeParams.search){if(this.termDefinedInUrl=!0,"1"===this.routeParams.exactMatch&&this.searchState.activateCustomFilterTermStrategy(),this.routeParams.search&&!this.routeParams.zoom&&"1"!==this.routeParams.sf){const t=this.searchStore.stateView.all$().pipe((0,Te.n)(n=>0===n.length),(0,D.b)(500),(0,Me.q)(1)).subscribe(n=>{t.unsubscribe();const o=n.filter(r=>r.entity.meta.dataType===s.D97).map(r=>(new ke.Z).readFeature(r.entity.data,{dataProjection:r.entity.data.projection,featureProjection:this.map.projection})),i=(0,s.HgW)(this.map,o);this.map.viewController.zoomToExtent(i)})}this.searchBarTerm=this.routeParams.search}"1"===this.routeParams.searchGeom&&this.searchState.searchResultsGeometryEnabled$.next(!0)}readLayersQueryParams(t){this.readLayersQueryParamsByType(t,"wms"),this.readLayersQueryParamsByType(t,"wmts"),this.readLayersQueryParamsByType(t,"arcgisrest"),this.readLayersQueryParamsByType(t,"imagearcgisrest"),this.readLayersQueryParamsByType(t,"tilearcgisrest"),this.readVectorQueryParams(t)}getQueryParam(t,n){let o;return n.includes("?")&&(o=new be.LE({fromString:n.split("?")[1]}).get(t)),o}readLayersQueryParamsByType(t,n){let o,i;switch(n){case"wms":(t.layers||t.wmsLayers)&&t.wmsUrl&&(i="wmsUrl",o=t.wmsLayers?"wmsLayers":"layers");break;case"wmts":t.wmtsLayers&&t.wmtsUrl&&(i="wmtsUrl",o="wmtsLayers");break;case"arcgisrest":t.arcgisLayers&&t.arcgisUrl&&(i="arcgisUrl",o="arcgisLayers");break;case"imagearcgisrest":t.iarcgisLayers&&t.iarcgisUrl&&(i="iarcgisUrl",o="iarcgisLayers");break;case"tilearcgisrest":t.tarcgisLayers&&t.tarcgisUrl&&(i="tarcgisUrl",o="tarcgisLayers")}if(!o||!i)return;const r=t[o].split("),("),l=t[i].split(",");let p=0;l.forEach(g=>{let f=g;const x=this.getQueryParam("VERSION",f)||this.getQueryParam("version",f)||void 0;x&&(f=f.replace("VERSION="+x,"").replace("version="+x,"")),this.extractLayersByService(r[p]).forEach(b=>{const v=b.split(":igoz"),M=oe.gb.removeUndefined({type:n,url:f,layer:v[0],params:"wms"===n?{LAYERS:v[0]}:void 0}),we=(0,s.lZj)(M),Oe=this.computeLayerVisibilityFromUrl(t,we);this.addLayerFromURL(f,v[0],n,x,Oe,v[1]?parseInt(v[1],10):void 0)}),p+=1})}readVectorQueryParams(t){if(t.vector){const n=t.vector,o=n.lastIndexOf("/"),i=n.slice(o+1,n.length);this.http.get(`${n}`,{responseType:"blob"}).subscribe(r=>{const l=new File([r],i,{type:r.type,lastModified:Date.now()});this.importService.import(l).subscribe(p=>this.onFileImportSuccess(l,p),p=>this.onFileImportError(l,p))})}}onFileImportSuccess(t,n){(0,s.xrF)(t,n,this.map,this.contextState.context$.value.uri,this.messageService,this.layerService)}onFileImportError(t,n){(0,s.jDn)(t,n,this.messageService)}extractLayersByService(t){let n=t;return n=n.startsWith("(")?n.substr(1):n,n=n.endsWith(")")?n.slice(0,-1):n,n.split(",")}addLayerFromURL(t,n,o,i,r=!0,l){if(!this.contextLoaded)return;const p={optionsFromCapabilities:!0,optionsFromApi:!0,crossOrigin:!0,type:o,url:t},g="arcgisrest"===o||"imagearcgisrest"===o||"tilearcgisrest"===o;let f={version:"wmts"===o?"1.0.0":void 0,queryable:!!g,queryFormat:g?"esrijson":void 0,layer:n};"wms"===o&&(f={params:{LAYERS:n,VERSION:i}}),f=oe.gb.removeUndefined(Object.assign({},f,p)),this.addedLayers$$.push(this.layerService.createAsyncLayer({zIndex:l,visible:r,sourceOptions:f}).subscribe(x=>{this.map.addLayer(x)}))}computeLayerVisibilityFromUrl(t,n){const o=t;let i=!0;if(!o||!n)return i;let r="",l="",p=[],g=[];return o.visiblelayers&&(r=o.visiblelayers),o.invisiblelayers&&(l=o.invisiblelayers),"*"===r&&(i=!0),"*"===l&&(i=!1),p=r.split(","),g=l.split(","),(p.indexOf(n)>-1||p.indexOf(n.toString())>-1)&&(i=!0),(g.indexOf(n)>-1||g.indexOf(n.toString())>-1)&&(i=!1),i}}N.\u0275fac=function(t){return new(t||N)(e.Y36(w.gz),e.Y36(y.gV),e.Y36(Je.e8),e.Y36(c.yJ),e.Y36(s.ITu),e.Y36(s.LvN),e.Y36(s.neU),e.Y36(y.sz),e.Y36(y.U5),e.Y36(s.SM5),e.Y36(P),e.Y36(y.Tb),e.Y36(s.gS3),e.Y36(c.E4),e.Y36(s.Y5R),e.Y36(be.eN),e.Y36(c.TS),e.Y36(c.ez),e.Y36(L.uw),e.Y36(c.V1),e.Y36(y.Nw),e.Y36(L.uw),e.Y36(s._7J),e.Y36(Fe.Yg),e.Y36(Q),e.Y36(c.yD))},N.\u0275cmp=e.Xpm({type:N,selectors:[["app-portal"]],viewQuery:function(t,n){if(1&t&&(e.Gf($t,7,e.SBq),e.Gf(Et,5)),2&t){let o;e.iGM(o=e.CRH())&&(n.mapBrowser=o.first),e.iGM(o=e.CRH())&&(n.searchBar=o.first)}},decls:17,vars:30,consts:[["position","end"],[3,"shown","click"],["id","searchDesktop",4,"ngIf"],["igoMapOffline","","igoMapContext","","igoLayerContext","","igoDropGeoFile","","igoHoverFeature","","igoQuery","",3,"igoHoverFeatureEnabled","queryFeatures","igoHoverFeatureDelay","map","ngClass","query","menuPosition"],["mapBrowser",""],["id","scaleLine",4,"ngIf"],[3,"ngClass","map","useStaticIcon"],["id","map-buttons",3,"ngClass"],["color","primary",3,"map",4,"ngIf"],["color","primary",3,"map"],["color","primary",3,"showIfNoRotation","map"],["color","primary",3,"legendInPanel","tooltipDisabled","legendButtonTooltip","toggleLegend",4,"ngIf"],[3,"mobile","store","searchInit","mapQueryClick","legendPanelOpened","panelOpenState","layers","panelOpened","mapQuery","closeQuery","closeLegend","openLegend","toggleLegend",4,"ngIf"],[3,"mobile",4,"ngIf"],["id","searchDesktop"],["appearance","outline","searchIcon","magnify","matTooltipShowDelay","500","tooltip-position","after","color","primary",3,"matTooltip","searchSettings","forceNA","term","store","termSplitter","pointerSummaryStatus","searchTermChange","search","clearFeature",4,"ngIf"],[1,"sidepanel",3,"map","mobile","opened","searchInit","store","legendPanelOpened","mapQueryClick","panelOpenState","layers","openedChange","panelOpened","toggleLegend","closeLegend","closeQuery","openLegend"],["sidepanel",""],["appearance","outline","searchIcon","magnify","matTooltipShowDelay","500","tooltip-position","after","color","primary",3,"matTooltip","searchSettings","forceNA","term","store","termSplitter","pointerSummaryStatus","searchTermChange","search","clearFeature"],["searchbar",""],["id","scaleLine"],["color","primary",3,"legendInPanel","tooltipDisabled","legendButtonTooltip","toggleLegend"],[3,"mobile","store","searchInit","mapQueryClick","legendPanelOpened","panelOpenState","layers","panelOpened","mapQuery","closeQuery","closeLegend","openLegend","toggleLegend"],[3,"mobile"]],template:function(t,n){1&t&&(e.TgZ(0,"mat-sidenav-container")(1,"mat-sidenav-content",0)(2,"igo-backdrop",1),e.NdJ("click",function(){return n.onBackdropClick()}),e.qZA(),e.YNc(3,Ut,5,11,"div",2),e.TgZ(4,"igo-map-browser",3,4),e.NdJ("query",function(i){return n.onMapQuery(i)})("menuPosition",function(i){return n.onContextMenuOpen(i)}),e.YNc(6,qt,1,0,"div",5),e._UZ(7,"igo-baselayers-switcher",6),e.TgZ(8,"div",7),e.YNc(9,Dt,1,1,"igo-geolocate-button",8),e._UZ(10,"igo-zoom-button",9)(11,"igo-rotation-button",10),e.YNc(12,Ht,1,3,"app-legend-button",11),e.qZA(),e.YNc(13,zt,1,7,"app-bottompanel",12),e.qZA(),e.YNc(14,Jt,1,1,"app-footer",13),e._UZ(15,"app-map-overlay"),e.ALo(16,"async"),e.qZA()()),2&t&&(e.xp6(2),e.Q6J("shown",!1),e.xp6(1),e.Q6J("ngIf",!n.mobile),e.xp6(1),e.Q6J("igoHoverFeatureEnabled",!0)("queryFeatures",!0)("igoHoverFeatureDelay",10)("map",n.map)("ngClass",e.WLB(22,Nt,n.map.getBaseLayers().length>1,n.hasFooter)),e.xp6(2),e.Q6J("ngIf",n.mobile),e.xp6(1),e.Q6J("ngClass",n.mobile?e.DdM(25,Gt):n.panelOpenState?e.DdM(26,Yt):e.DdM(27,Vt))("map",n.map)("useStaticIcon",n.getBaseLayersUseStaticIcon()),e.xp6(1),e.Q6J("ngClass",n.mobile?e.DdM(28,Xt):e.DdM(29,Kt)),e.xp6(1),e.Q6J("ngIf",n.hasGeolocateButton),e.xp6(1),e.Q6J("map",n.map),e.xp6(1),e.Q6J("showIfNoRotation",n.showRotationButtonIfNoRotation)("map",n.map),e.xp6(1),e.Q6J("ngIf",n.hasLegendButton),e.xp6(1),e.Q6J("ngIf",n.mobile),e.xp6(1),e.Q6J("ngIf",n.hasFooter&&!n.mobile),e.xp6(1),e.Q6J("@controlStateX","mobile"!==e.lcZ(16,20,n.mediaService.media$)&&n.panelOpenState?"right":"left"))},dependencies:[m.mk,m.O5,S.gM,s.ExE,s.PUQ,s.u$Y,s.fwr,s.AIr,s.W4Y,s.Ej2,H.b3,H.mH,ie,s.TEo,s.NBD,s.V$T,ae,ce,pe,d.qv,re.TM,re.Rh,de,m.Ov,k.X$],styles:['[_nghost-%COMP%]{width:100%;height:100%;display:block}mat-icon.disabled[_ngcontent-%COMP%]{color:#00000061}.layer-toggle[_ngcontent-%COMP%]{display:flex;flex-flow:column;position:absolute;z-index:1002!important;background-color:#fffffff2}.layer-toggle-desktop[_ngcontent-%COMP%]{top:16px;right:8px}.layer-toggle-mobile[_ngcontent-%COMP%]{top:8px;right:50%;transform:translate(50%)}.layer-toggle-mobile[_ngcontent-%COMP%]     .layer-toggles-title{font-size:14px}.layer-toggle-mobile[_ngcontent-%COMP%]     .layer-toggle-title{font-size:14px}.layer-toggle-mobile[_ngcontent-%COMP%]     .button-group{transform:scale(.9)}.layer-toggle-mobile[_ngcontent-%COMP%]     .qcca-theme mat-button-toggle.mat-button-toggle-checked .mat-button-toggle-label-content{font-size:12px}.layer-toggle-mobile[_ngcontent-%COMP%]     .mat-expansion-panel-body{padding:0 8px 8px}mat-sidenav-container[_ngcontent-%COMP%]{height:100%;width:100%;background-color:#efefef;z-index:5;display:inline;display:initial}@media only screen and (orientation:portrait) and (max-width: 599px),only screen and (orientation:landscape) and (max-width: 959px){mat-sidenav-content[_ngcontent-%COMP%]{z-index:auto}}.spacer[_ngcontent-%COMP%]{flex:1 1 auto}igo-search-bar[_ngcontent-%COMP%]{background-color:#fff;font-size:16px;position:absolute;top:16px;z-index:4;height:40px;margin:0 4px}igo-search-bar[_ngcontent-%COMP%]{width:360px}@media only screen and (orientation:portrait) and (max-width: 599px),only screen and (orientation:landscape) and (max-width: 959px){igo-search-bar[_ngcontent-%COMP%]{width:calc(100% - 92px);max-width:360px}}igo-search-bar[_ngcontent-%COMP%], igo-search-results[_ngcontent-%COMP%]   igo-list[_ngcontent-%COMP%], .baselayers[_ngcontent-%COMP%]{left:16px!important}  .igo-search-bar-container .mat-icon{fill:#fff}  .baselayers-pushed{left:404px!important;animation-duration:3s;visibility:visible;opacity:1;opacity:0;animation:fadeIn .1s;animation-delay:0s;animation-fill-mode:forwards}.igo-baselayers-switcher-mobile[_ngcontent-%COMP%],   .ol-scale-line{bottom:48px!important;z-index:1}.igo-baselayers-switcher-mobile[_ngcontent-%COMP%]{left:4px}  .ol-scale-line{left:88px!important}.igo-baselayers-switcher[_ngcontent-%COMP%]{z-index:1}  igo-search-bar{height:100%}igo-search-bar[_ngcontent-%COMP%]   svg[_ngcontent-%COMP%]{color:#fff;height:40px;width:40px}  .search-bar-buttons{height:100%;margin-top:.25em;background:#4E5662}  igo-search-bar .mat-form-field-outline-end,   igo-search-bar .mat-form-field-outline-start{border-color:#4e5662;height:40px!important}  igo-search-bar .mat-form-field-appearance-outline .mat-form-field-outline{top:0}  igo-search-bar .mat-form-field-appearance-outline .mat-form-field-wrapper,   .search-bar-buttons{margin-top:0}  .igo-search-bar-container{height:40px!important}  igo-search-bar .mat-form-field-appearance-outline .mat-form-field-infix input{line-height:40px;vertical-align:middle;border-top:0;padding:0;margin-top:0}  igo-search-bar .mat-form-field-appearance-outline .mat-form-field-infix{padding:0;border-top:0!important}  igo-search-bar .mat-form-field-appearance-outline .mat-form-field-wrapper, .search-bar-buttons[_ngcontent-%COMP%],   igo-search-bar .mat-form-field-outline-end,   igo-search-bar .mat-form-field-outline-start{height:40px;padding:0;margin-top:0}  igo-search-bar .mat-form-field-appearance-outline .mat-form-field-flex{padding:0 8px;margin-top:0!important;height:40px}  .igo-search-bar-container>mat-form-field{padding:0!important}  igo-search-bar .mat-form-field-outline-start{border-radius:0!important}  igo-search-bar .mat-form-field-outline-end{border-radius:0!important}  .search-bar-buttons .mat-icon{width:40px!important;display:inline-block!important}app-bottompanel[_ngcontent-%COMP%]{position:fixed;display:block;bottom:0;z-index:9999}igo-map-browser[_ngcontent-%COMP%]{width:100%;height:100%;position:relative;display:block}igo-map-browser[_ngcontent-%COMP%]     .ol-attribution{display:none;left:50px;bottom:4px;text-align:left;padding:0;margin-right:90px;background-color:#fff0;width:calc(100% - 500px)}igo-map-browser[_ngcontent-%COMP%]     .ol-attribution.ol-logo-only{height:inherit}igo-map-browser[_ngcontent-%COMP%]     .ol-attribution.ol-collapsed{background:none}igo-map-browser[_ngcontent-%COMP%]     .ol-attribution.ol-collapsed button{transform:none}igo-map-browser[_ngcontent-%COMP%]     .ol-attribution button{transform:rotate(180deg);background-color:#fff;cursor:pointer}igo-map-browser[_ngcontent-%COMP%]     .ol-attribution.ol-uncollapsible{height:auto}igo-map-browser[_ngcontent-%COMP%]     .ol-attribution ul{background-color:#fff9;padding:2px .5em}igo-map-browser[_ngcontent-%COMP%]     .ol-overlaycontainer-stopevent{position:absolute;width:100%;left:0;bottom:0}igo-map-browser.toast-offset-scale-line[_ngcontent-%COMP%]     .ol-overlaycontainer-stopevent   .ol-scale-line{bottom:50px}@media only screen and (orientation:portrait) and (max-width: 599px),only screen and (orientation:landscape) and (max-width: 959px){igo-map-browser.toast-offset-attribution[_ngcontent-%COMP%]     .ol-overlaycontainer-stopevent   .ol-attribution{display:none;bottom:50px}}  .ol-scale-line-inner{border:1px solid black;color:#000;border-top:none;order:1}  div.ol-scale-line{position:absolute!important;display:block;background:transparent none repeat 0 0 / auto auto padding-box border-box scroll!important;background:initial!important;color:#000;z-index:5!important;transform:none!important;transform:initial!important}  .olControlScaleLine{background:white;padding:5px;-ms-filter:"progid:DXImageTransform.Microsoft.Alpha(Opacity=85)";-moz-opacity:.85;opacity:.85}.map-buttons[_ngcontent-%COMP%]{display:flex;flex-direction:column;margin-bottom:5px;z-index:10;position:absolute;bottom:0;max-height:50%;right:4px}.map-buttons-mobile[_ngcontent-%COMP%]{display:flex;flex-direction:column;z-index:10;position:absolute;bottom:48px!important;max-height:50%;right:4px}.igo-zoom-button-container[_ngcontent-%COMP%], button[_ngcontent-%COMP%], app-legend-button[_ngcontent-%COMP%], igo-rotation-button[_ngcontent-%COMP%], igo-zoom-button[_ngcontent-%COMP%], igo-offline-button[_ngcontent-%COMP%], igo-geolocate-button[_ngcontent-%COMP%], igo-home-extent-button[_ngcontent-%COMP%]{margin-top:4px!important;position:static!important;position:initial!important;bottom:auto!important;bottom:initial!important;margin-left:auto;align-self:flex-end;margin-top:auto;box-shadow:0 3px 1px -2px #0003,0 2px 2px #00000024,0 1px 5px #0000001f}  app-legend-button button .mat-button-focus-overlay{opacity:0!important}@media only screen and (orientation:portrait) and (min-width: 600px) and (max-width: 839px),only screen and (orientation:landscape) and (min-width: 960px) and (max-width: 1279px){igo-zoom-button[_ngcontent-%COMP%]{display:none}}  .sidepanel .tooltip-chart:after{content:""!important;position:absolute!important;top:18%!important;right:100%!important;margin-top:-5px!important;border-width:10px!important;border-style:solid!important;border-color:transparent transparent transparent white!important;transform:rotate(180deg)}  .sidepanel{position:absolute!important;height:100%}  .map-hasfooter{height:calc(100% - 29px)!important}  #legend-dialog-container, app-legend-dialog[_ngcontent-%COMP%]{top:76px;max-height:calc(100% - 201px)}@media (min-width: 768px){  #legend-dialog-container, app-legend-dialog[_ngcontent-%COMP%]{top:76px;max-height:calc(100% - 281px)}}'],data:{animation:[function ze(){return[(0,h.X$)("controlsOffsetY",[(0,h.SB)("close",(0,h.oB)({})),(0,h.SB)("firstRowFromBottom",(0,h.oB)({bottom:"5px"})),(0,h.SB)("firstRowFromBottom-expanded",(0,h.oB)({bottom:"5px"})),(0,h.SB)("firstRowFromBottom-expanded-maximized",(0,h.oB)({bottom:"500px"})),(0,h.SB)("secondRowFromBottom",(0,h.oB)({bottom:"47px"})),(0,h.SB)("thirdRowFromBottom",(0,h.oB)({bottom:"104px"})),(0,h.SB)("",(0,h.oB)({bottom:"calc(285px)"})),(0,h.SB)("secondRowFromBottom-expanded",(0,h.oB)({bottom:"calc(285px + 52px)"})),(0,h.SB)("thirdRowFromBottom-expanded",(0,h.oB)({bottom:"calc(285px + 104px)"})),(0,h.eR)("* => *",(0,h.jt)("200ms"))])]}(),function De(){return(0,h.X$)("controlStateX",[(0,h.SB)("left",(0,h.oB)({left:"60px"})),(0,h.SB)("right",(0,h.oB)({left:"465px"})),(0,h.eR)("* => *",(0,h.jt)("200ms"))])}(),function He(){return(0,h.X$)("controlStateY",[(0,h.SB)("close",(0,h.oB)({})),(0,h.SB)("firstRowFromBottom",(0,h.oB)({bottom:"2px","margin-left":"0px"})),(0,h.SB)("firstRowFromBottom-expanded",(0,h.oB)({bottom:"285px","margin-left":"-55px"})),(0,h.SB)("firstRowFromBottom-expanded-maximized",(0,h.oB)({bottom:"500px","margin-left":"-55px"})),(0,h.eR)("* => *",(0,h.jt)("200ms"))])}()]}});class me{constructor(t){this.configService=t,this.hasHeader=!0,this.hasHeader=void 0!==this.configService.getConfig("header.hasHeader")&&this.configService.getConfig("header.hasHeader")}}me.\u0275fac=function(t){return new(t||me)(e.Y36(c.E4))},me.\u0275cmp=e.Xpm({type:me,selectors:[["app-map"]],decls:1,vars:1,consts:[[3,"ngClass"]],template:function(t,n){1&t&&e._UZ(0,"app-portal",0),2&t&&e.Q6J("ngClass",n.hasHeader?"portal-hasHeader-hasMenu":"portal-hasMenu")},dependencies:[m.mk,N],styles:[".portal-hasMenu{height:calc(100% - 40px)!important}  .portal-hasHeader-hasMenu{height:calc(100% - 112px)!important}  #legend-button-dialog-container{top:116px!important;max-height:calc(100% - 241px)!important}@media (min-width: 768px){  .portal-hasMenu{height:calc(100% - 72px)!important}  .portal-hasHeader-hasMenu{height:calc(100% - 144px)!important}  #legend-button-dialog-container{top:148px!important;max-height:calc(100% - 353px)!important}}"]});const Wt=[{path:"",component:te},{path:"carte",component:me},{path:"en-savoir-plus",component:ne}];class A{}A.\u0275fac=function(t){return new(t||A)},A.\u0275mod=e.oAB({type:A}),A.\u0275inj=e.cJS({imports:[w.Bz.forRoot(Wt,{onSameUrlNavigation:"reload",relativeLinkResolution:"legacy"}),w.Bz]});class E{}E.\u0275fac=function(t){return new(t||E)},E.\u0275mod=e.oAB({type:E}),E.\u0275inj=e.cJS({imports:[m.ez,c.yR,_e.g0,A]});class I{}I.\u0275fac=function(t){return new(t||I)},I.\u0275mod=e.oAB({type:I}),I.\u0275inj=e.cJS({imports:[m.ez,c.yR]});class B{}B.\u0275fac=function(t){return new(t||B)},B.\u0275mod=e.oAB({type:B}),B.\u0275inj=e.cJS({imports:[C.Ps,L.Is,s.t1T,s.FIR,T.ot,S.AV,c.yR]});class G{}G.\u0275fac=function(t){return new(t||G)},G.\u0275mod=e.oAB({type:G}),G.\u0275inj=e.cJS({imports:[m.ez,C.Ps,T.ot,s.FIR,s.t1T,S.AV,c.yR,L.Is,B]});class Y{}Y.\u0275fac=function(t){return new(t||Y)},Y.\u0275mod=e.oAB({type:Y}),Y.\u0275inj=e.cJS({imports:[m.ez]});var en=u(70178);class V{}V.\u0275fac=function(t){return new(t||V)},V.\u0275mod=e.oAB({type:V}),V.\u0275inj=e.cJS({imports:[m.ez,C.Ps,en.g,S.AV,T.ot,c.yR,s.Ud7,s.TxX,d.O4,d.Am,s.nob,d.k_]});var tn=u(11961);class j{}j.\u0275fac=function(t){return new(t||j)},j.\u0275mod=e.oAB({type:j}),j.\u0275inj=e.cJS({imports:[m.ez,C.Ps,c.yR,d.dS,w.Bz,d.d8,S.AV]});class U{}U.\u0275fac=function(t){return new(t||U)},U.\u0275mod=e.oAB({type:U}),U.\u0275inj=e.cJS({imports:[m.ez,j,s.eD4]});class X{}X.\u0275fac=function(t){return new(t||X)},X.\u0275mod=e.oAB({type:X}),X.\u0275inj=e.cJS({imports:[m.ez,C.Ps,T.ot,S.AV,c.yR,d.Po,U,s.tnH]});class K{}K.\u0275fac=function(t){return new(t||K)},K.\u0275mod=e.oAB({type:K}),K.\u0275inj=e.cJS({imports:[m.ez,C.Ps,T.ot,re.SJ,S.AV,c.yR,d.Am,d.O4,H.Zy,d.HL,tn.QW,c.zZ,s.FIR,s.TxX,d.gQ,d.qL,y.uL,s.TxX.forRoot(),V,Se.To,X,U,j,s.t1T,s.tnH]});class q{}q.\u0275fac=function(t){return new(t||q)},q.\u0275mod=e.oAB({type:q}),q.\u0275inj=e.cJS({imports:[m.ez,S.AV,T.ot,C.Ps,c.PV,s.Ud7,s.FIR,d.mD,d.O4,y.fZ,H.Zy,I,s.t1T,d.h5,s.Jpu,s.y1m.forRoot(),s.TxX.forRoot(),H.jm,L.Is,d.AP,s.ybB,Y,K,d.Am,d.BQ,d.qL,d.HL,d.gr,d.t3,B,re.SJ,y.NX,s.TxX,G]});class W{}W.\u0275fac=function(t){return new(t||W)},W.\u0275mod=e.oAB({type:W}),W.\u0275inj=e.cJS({imports:[m.ez,A,q,E,I,_e.g0,A]});const Ce={production:!0,igo:{app:{forceCoordsNA:!0,install:{enabled:!0,promote:!0,manifestPath:"./config/github.webmanifest"},pwa:{enabled:!1}},language:{prefix:["./locale/"]},searchSources:{workspace:{available:!1,enabled:!1},nominatim:{available:!1},storedqueries:{enabled:!1,available:!1},icherche:{searchUrl:"https://geoegl.msp.gouv.qc.ca/apis/icherche/",order:2,params:{limit:"5"},settings:[],showInPointerSummary:!0},coordinatesreverse:{showInPointerSummary:!0},icherchereverse:{showInPointerSummary:!0,searchUrl:"https://geoegl.msp.gouv.qc.ca/apis/terrapi",order:3,enabled:!0},ilayer:{enabled:!1,searchUrl:"https://geoegl.msp.gouv.qc.ca/apis/icherche/layers",order:4,params:{limit:"3"}}},projections:[{code:"EPSG:32198",alias:"Quebec Lambert",def:"+proj=lcc +lat_1=60 +lat_2=46 +lat_0=44 +lon_0=-68.5 +x_0=0 +y_0=0           +ellps=GRS80 +towgs84=0,0,0,0,0,0,0 +units=m +no_defs",extent:[-799574,45802,891595.4,1849567.5]},{code:"EPSG:3798",alias:"MTQ Lambert",def:"+proj=lcc +lat_1=50 +lat_2=46 +lat_0=44 +lon_0=-70 +x_0=800000 +y_0=0           +ellps=GRS80 +towgs84=0,0,0,0,0,0,0 +units=m +no_defs",extent:[31796.5834,158846.2231,1813323.4284,2141241.0978]}]}};class he{constructor(t,n){this.configService=t,this.languageService=n,this.computeHeader()}computeHeader(){this.headerLogo=this.configService.getConfig("header.logo"),this.headerLogoPrint=this.configService.getConfig("header.logoPrint")}}he.\u0275fac=function(t){return new(t||he)(e.Y36(c.E4),e.Y36(c.TS))},he.\u0275cmp=e.Xpm({type:he,selectors:[["app-header"]],decls:21,vars:14,consts:[["role","banner","color","primary",1,"banner"],[1,"container"],[1,"row"],[1,"col-6","col-md-10","d-flex","flex-wrap","align-items-center","zone-logo-title"],["tabindex","5","routerLink","",1,"logo"],["id","header-logo","alt","Logo",3,"src"],["id","header-logo-print","alt","Logo","width","199","height","60",3,"src"],["lang","fr","id","title-desktop",1,"zone-title","d-none","d-md-block"],[1,"col-6","col-md-2","d-flex","justify-content-end","zone-links"],[1,"nav","flex-column"],["rel","noopener noreferrer","alt","('header.contactUsUrl' | translate)","target","_blank",3,"href"],["lang","fr","id","title-mobile",1,"zone-title","d-md-none","col-12"]],template:function(t,n){1&t&&(e.TgZ(0,"mat-toolbar",0)(1,"div",1)(2,"div",2)(3,"div",3)(4,"a",4),e._UZ(5,"img",5),e.qZA(),e._UZ(6,"img",6),e.TgZ(7,"p",7),e._uU(8),e.ALo(9,"translate"),e.qZA()(),e.TgZ(10,"div",8)(11,"ul",9)(12,"li")(13,"a",10),e.ALo(14,"translate"),e._uU(15),e.ALo(16,"translate"),e.qZA()()()(),e.TgZ(17,"p",11)(18,"a"),e._uU(19),e.ALo(20,"translate"),e.qZA()()()()()),2&t&&(e.xp6(5),e.s9C("src",n.headerLogo,e.LSH),e.xp6(1),e.s9C("src",n.headerLogoPrint,e.LSH),e.xp6(2),e.Oqu(e.lcZ(9,6,"header.title")),e.xp6(5),e.s9C("href",e.lcZ(14,8,"header.contactUsUrl"),e.LSH),e.xp6(2),e.Oqu(e.lcZ(16,10,"header.contactUs")),e.xp6(4),e.Oqu(e.lcZ(20,12,"header.title")))},dependencies:[_e.Ye,w.yS,k.X$],styles:[".portal-with-header{height:calc(100% - 72px)!important}@media screen and (min-width: 768px){  .portal-with-header{height:calc(100% - 72px)!important}}[_ngcontent-%COMP%]:root{--breakpoint-sm: 320px;--breakpoint-md: 768px;--breakpoint-lg: 960px;--breakpoint-xl: 1024px}html[_ngcontent-%COMP%], body[_ngcontent-%COMP%]{padding:0;margin:0!important;width:100%;font-size:16px;font-family:Open sans,sans-serif}@media (min-width: 1280px) and (orientation: landscape){body[_ngcontent-%COMP%]{margin:0!important}}html[_ngcontent-%COMP%], body[_ngcontent-%COMP%], div[_ngcontent-%COMP%], span[_ngcontent-%COMP%], a[_ngcontent-%COMP%], header[_ngcontent-%COMP%], nav[_ngcontent-%COMP%]{margin:0;padding:0;border:0;vertical-align:baseline}html[_ngcontent-%COMP%], body[_ngcontent-%COMP%]{font-family:Open sans,sans-serif}.col-6[_ngcontent-%COMP%], .col-md-2[_ngcontent-%COMP%], .col-md-10[_ngcontent-%COMP%]{position:relative;width:100%}.col-12[_ngcontent-%COMP%]{flex:0 0 100%;max-width:100%}.container[_ngcontent-%COMP%]{width:100%;margin-right:auto;margin-left:auto}.row[_ngcontent-%COMP%]{-ms-display:flex;display:flex;flex-wrap:wrap;height:100%;width:calc(100% - 32px);align-content:center;margin:auto}.col-6[_ngcontent-%COMP%]{flex:0 0 50%;max-width:50%}h1[_ngcontent-%COMP%], h2[_ngcontent-%COMP%], h3[_ngcontent-%COMP%], h4[_ngcontent-%COMP%], h5[_ngcontent-%COMP%], h6[_ngcontent-%COMP%]{font-family:Roboto,sans-serif;font-weight:700;color:#095797!important}a[_ngcontent-%COMP%]{word-break:break-word;overflow-wrap:break-word}img[_ngcontent-%COMP%]{vertical-align:middle;border-style:none}*[_ngcontent-%COMP%], *[_ngcontent-%COMP%]:before, *[_ngcontent-%COMP%]:after{box-sizing:border-box}.d-none[_ngcontent-%COMP%]{display:none}.flex-column[_ngcontent-%COMP%]{display:flex;flex-direction:column!important}.flex-wrap[_ngcontent-%COMP%]{flex-wrap:wrap!important}.d-flex[_ngcontent-%COMP%]{display:flex!important}.align-items-center[_ngcontent-%COMP%]{align-items:center!important}.justify-content-end[_ngcontent-%COMP%]{justify-content:flex-end!important}d-md-none[_ngcontent-%COMP%]{display:none}.align-self-end[_ngcontent-%COMP%]{align-self:flex-end!important}.banner[_ngcontent-%COMP%]{display:flex;width:100%;height:72px;box-sizing:border-box;font-family:Roboto,sans-serif;margin:0;padding:0;border:0;font-size:100%;vertical-align:baseline}a[_ngcontent-%COMP%]{color:#fff;text-decoration:none}.zone-logo-title[_ngcontent-%COMP%]{padding:.5rem 1.1rem .5rem 0}.zone-title[_ngcontent-%COMP%]{font-size:1rem}.zone-links[_ngcontent-%COMP%]{padding-left:1.1rem;max-width:100%;margin:auto;list-style:none;display:block;color:#fff}#header-logo[_ngcontent-%COMP%]{width:100%;min-width:7rem;max-height:28px}#header-logo-print[_ngcontent-%COMP%]{display:none}.zone-links[_ngcontent-%COMP%]   ul[_ngcontent-%COMP%]{font: .8rem/1.2rem roboto,sans-serif;-webkit-font-smoothing:antialiased;text-align:left;flex-wrap:wrap;list-style:none;padding:0;margin:0}ul[_ngcontent-%COMP%]   li[_ngcontent-%COMP%]:last-child{padding:0}.zone-links[_ngcontent-%COMP%]   ul[_ngcontent-%COMP%]   a[_ngcontent-%COMP%]:hover, .zone-links[_ngcontent-%COMP%]   ul[_ngcontent-%COMP%]   a[_ngcontent-%COMP%]:focus{text-decoration:underline;cursor:pointer}.buttonLanguage[_ngcontent-%COMP%]{background:none;border-style:none;padding:0;font: .8rem/1rem roboto,sans-serif;color:inherit}#title-mobile[_ngcontent-%COMP%]{margin:auto 0;display:block}#title-desktop[_ngcontent-%COMP%]{display:none;color:#fff;margin:auto 0;padding:0}@media screen and (min-width: 576px){.zone-logo-title[_ngcontent-%COMP%], .zone-links[_ngcontent-%COMP%]{flex:0 0 50%;max-width:50%}}@media screen and (min-width: 768px){.col-md-10[_ngcontent-%COMP%]{flex:0 0 83.33333%;max-width:83.33333%}.zone-links[_ngcontent-%COMP%]{flex:0 0 16.66667%;max-width:16.66667%}}@media screen and (min-width: 824px){#header-logo[_ngcontent-%COMP%]{max-height:39px;padding-right:3.75rem}.banner[_ngcontent-%COMP%]{height:72px}.d-md-block[_ngcontent-%COMP%]{display:block!important}.d-md-none[_ngcontent-%COMP%]{display:none!important}.zone-logo-title[_ngcontent-%COMP%]{flex:0 0 83.33333%;max-width:83.33333%}}"]});const nn=function(){return{exact:!0}};class ge{constructor(){this.color="accent"}}ge.\u0275fac=function(t){return new(t||ge)},ge.\u0275cmp=e.Xpm({type:ge,selectors:[["app-menu"]],decls:15,vars:2,consts:[["color","accent",1,"container","headline"],[1,"col-12","align-self-end"],[1,"navbar"],["href","#menu-left","routerLinkActive","active",1,"nav-link","nav-arrow","left"],[1,"main-nav","slick-track"],["routerLink","/","routerLinkActive","active","id","menu-left",1,"nav-link",3,"routerLinkActiveOptions"],["routerLink","/carte","routerLinkActive","active",1,"nav-link"],["routerLink","/en-savoir-plus","id","menu-right","routerLinkActive","active",1,"nav-link"],["color","accent","href","#menu-right","routerLinkActive","active",1,"nav-link","nav-arrow","right"]],template:function(t,n){1&t&&(e.TgZ(0,"mat-toolbar",0)(1,"div",1)(2,"nav",2)(3,"a",3),e._uU(4,"\u276e"),e.qZA(),e.TgZ(5,"div",4)(6,"a",5),e._uU(7,"Accueil"),e.qZA(),e.TgZ(8,"a",6),e._uU(9,"Carte"),e.qZA(),e.TgZ(10,"a",7),e._uU(11,"En savoir plus"),e.qZA()(),e.TgZ(12,"a",8),e._uU(13,"\u276f"),e.qZA()()()(),e._UZ(14,"router-outlet")),2&t&&(e.xp6(6),e.Q6J("routerLinkActiveOptions",e.DdM(1,nn)))},dependencies:[w.lC,w.yS,w.Od,_e.Ye],styles:['.navbar[_ngcontent-%COMP%]{position:relative;display:flex;flex-wrap:wrap;align-items:flex-end;flex-direction:row;flex-flow:row nowrap;justify-content:flex-start;height:40px;width:100%;margin:0 auto;padding:0}.nav-link[_ngcontent-%COMP%]{display:block;padding:0 2rem;text-decoration:none;font-family:Open sans,sans-serif;margin-right:.4rem;padding:0 0 1.6rem}a.nav-link[_ngcontent-%COMP%]{color:#fff;text-decoration:none;letter-spacing:0;font-size:1.1rem;padding:0 .5rem 0rem!important}a.nav-link[_ngcontent-%COMP%]:focus, a.nav-link.active[_ngcontent-%COMP%]{content:"";display:block;margin:0;border-bottom:4px solid #c5cad2;padding-bottom:calc(.6rem - 4px)}.active[_ngcontent-%COMP%]{font-weight:600!important}.main-nav[_ngcontent-%COMP%]{display:block;-webkit-margin-start:0px;margin-inline-start:0px;-webkit-margin-end:0px;margin-inline-end:0px;width:85%;margin:0 auto}.headline[_ngcontent-%COMP%]{padding:0}div.slick-track[_ngcontent-%COMP%]{overflow-x:auto;white-space:nowrap;display:flex}.navbar[_ngcontent-%COMP%]   [_ngcontent-%COMP%]::-webkit-scrollbar{display:none}.nav-arrow[_ngcontent-%COMP%]{color:#f09686!important;font-weight:1000;position:absolute;z-index:100;background-color:#223654c5;margin:0;bottom:5px}.right[_ngcontent-%COMP%]{right:0;padding:5px 5px 5px 15px!important}.left[_ngcontent-%COMP%]{left:0;padding:5px 15px 5px 5px!important}@media (min-width: 400px){.nav-arrow[_ngcontent-%COMP%]{display:none}.main-nav[_ngcontent-%COMP%]{width:98%}}@media (min-width: 768px){.navbar[_ngcontent-%COMP%]{height:72px}.navbar[_ngcontent-%COMP%]   a[_ngcontent-%COMP%]{padding:1rem 1.2rem!important}.navbar[_ngcontent-%COMP%]   a[_ngcontent-%COMP%]:focus, .navbar[_ngcontent-%COMP%]   a.active[_ngcontent-%COMP%]{padding-bottom:calc(1rem - 4px)!important}}']});const on=["searchBar"];function an(a,t){1&a&&e._UZ(0,"app-header",null,3)}function rn(a,t){1&a&&e._UZ(0,"app-menu")}function sn(a,t){if(1&a&&e._UZ(0,"app-portal",4),2&a){const n=e.oxw();e.Q6J("ngClass",n.hasHeader?"portal-hasHeader":"portal")}}class fe{constructor(t,n,o,i,r,l,p){this.languageService=t,this.configService=n,this.renderer=o,this.titleService=i,this.metaService=r,this.messageService=l,this.pwaService=p,this.themeClass="qcca-theme",this.hasHeader=!0,this.hasFooter=!0,this.hasMenu=!1,this.readTitleConfig(),this.readThemeConfig(),this.readDescriptionConfig(),this.detectOldBrowser(),this.hasHeader=void 0!==this.configService.getConfig("header.hasHeader")&&this.configService.getConfig("header.hasHeader"),this.hasFooter=void 0!==this.configService.getConfig("hasFooter")&&this.configService.getConfig("hasFooter"),this.hasMenu=void 0!==this.configService.getConfig("hasMenu")&&this.configService.getConfig("hasMenu"),this.setManifest(),this.installPrompt(),this.pwaService.checkForUpdates()}readTitleConfig(){this.languageService.translate.get(this.configService.getConfig("title")).subscribe(t=>{t&&(this.titleService.setTitle(t),this.metaService.addTag({name:"title",content:t}))})}setManifest(){var t;const n=this.configService.getConfig("app");if(null!==(t=null==n?void 0:n.install)&&void 0!==t&&t.enabled){const o=n.install.manifestPath||"manifest.webmanifest";document.querySelector("#igoManifestByConfig").setAttribute("href",o)}}installPrompt(){var t,n;const o=this.configService.getConfig("app");(null===(t=null==o?void 0:o.install)||void 0===t?void 0:t.enabled)&&(null===(n=null==o?void 0:o.install)||void 0===n?void 0:n.promote)&&"iOS"!==oe.WE.getOSName()&&window.addEventListener("beforeinstallprompt",i=>{i.preventDefault(),this.promptEvent=i,window.addEventListener("click",()=>{setTimeout(()=>{this.promptEvent.prompt(),this.promptEvent=void 0},750)},{once:!0})},{once:!0})}readThemeConfig(){const t=this.configService.getConfig("theme")||this.themeClass;t&&this.renderer.addClass(document.body,t)}readDescriptionConfig(){const t=this.configService.getConfig("description");t&&this.metaService.addTag({name:"description",content:t})}detectOldBrowser(){oe.WE.satisfies({ie:"<=11",chrome:"<64",firefox:"<60",safari:"<=11"})&&this.messageService.alert("oldBrowser.message","oldBrowser.title",{timeOut:15e3})}}fe.\u0275fac=function(t){return new(t||fe)(e.Y36(c.TS),e.Y36(c.E4),e.Y36(e.Qsj),e.Y36(O.Dx),e.Y36(O.h_),e.Y36(c.ez),e.Y36(Q))},fe.\u0275cmp=e.Xpm({type:fe,selectors:[["app-root"]],viewQuery:function(t,n){if(1&t&&e.Gf(on,7,e.SBq),2&t){let o;e.iGM(o=e.CRH())&&(n.searchBar=o.first)}},decls:4,vars:3,consts:[["igoSpinnerActivity",""],[4,"ngIf"],[3,"ngClass",4,"ngIf"],["header",""],[3,"ngClass"]],template:function(t,n){1&t&&(e._UZ(0,"igo-spinner",0),e.YNc(1,an,2,0,"app-header",1),e.YNc(2,rn,1,0,"app-menu",1),e.YNc(3,sn,1,1,"app-portal",2)),2&t&&(e.xp6(1),e.Q6J("ngIf",n.hasHeader),e.xp6(1),e.Q6J("ngIf",n.hasMenu),e.xp6(1),e.Q6J("ngIf",!n.hasMenu))},dependencies:[m.mk,m.O5,d.Ft,d.OR,N,he,ge],styles:["[_nghost-%COMP%]{font-family:Roboto,Helvetica Neue,sans-serif}igo-message-center[_ngcontent-%COMP%]     simple-notifications   div.simple-notification-wrapper{right:10px}  .portal-hasHeader{height:calc(100% - 72px)!important;display:block}  .portal{height:100%}@media (min-width: 768px){  .portal-hasHeader{height:calc(100% - 72px)!important;display:block}}igo-spinner[_ngcontent-%COMP%]{position:absolute;top:50%!important;right:50%;z-index:100}  .mat-tooltip-hide{display:none!important}  .mat-form-field-suffix   mat-icon{width:auto!important;height:-webkit-fill-available!important}"]});var ln=u(80155),cn=u(63853);class ee{}ee.\u0275fac=function(t){return new(t||ee)},ee.\u0275mod=e.oAB({type:ee,bootstrap:[fe]}),ee.\u0275inj=e.cJS({providers:[(0,c.TQ)({default:Ce.igo,path:"./config/config.json"}),(0,s.jxb)(),(0,s.cmn)(),(0,s.ZsY)(),(0,s.PIH)(),(0,s.c43)(),(0,s.MG6)(),(0,s.HAL)(),s.IDv,(0,s.pCg)(),(0,s.hqu)(),(0,s.XBb)(),s.oDG,s.S3c,(0,s.rQG)({path:"./assets/list-style.json"}),c.MZ,(0,s.YVN)(),{provide:e.ip1,useFactory:function un(a,t){return()=>new Promise(n=>{t.isStable.pipe((0,ln.P)(o=>!0===o),(0,cn.b)(()=>{const o=a.get(c.TS),i=o.getLanguage();return o.translate.getTranslation(i)})).subscribe(o=>{const i=a.get(c.TS),r=i.getLanguage();i.translate.setTranslation(r,o),n()})})},deps:[e.zs3,e.z2F],multi:!0},(0,s.rQG)({path:"./assets/list-style.json"}),{provide:S.Jm,useValue:{showDelay:500,hideDelay:0,touchendHideDelay:0,disableTooltipInteractivity:!0}}],imports:[O.b2,R.PW,w.Bz.forRoot([]),c.u4.forRoot(),c.zZ,d.d3,d.Po,q,O.t6,E,I,W,Le.Wr.register("ngsw-worker.js",{enabled:Ce.igo.app.pwa.enabled,registrationStrategy:"registerWithDelay:5000"})]});u(15977);Ce.production&&(0,e.G48)(),O.q6().bootstrapModule(ee).catch(a=>console.log(a))},46700:(Z,xe,u)=>{var O={"./af":58685,"./af.js":58685,"./ar":254,"./ar-dz":4312,"./ar-dz.js":4312,"./ar-kw":32614,"./ar-kw.js":32614,"./ar-ly":18630,"./ar-ly.js":18630,"./ar-ma":28674,"./ar-ma.js":28674,"./ar-sa":49032,"./ar-sa.js":49032,"./ar-tn":24730,"./ar-tn.js":24730,"./ar.js":254,"./az":53052,"./az.js":53052,"./be":60150,"./be.js":60150,"./bg":63069,"./bg.js":63069,"./bm":13466,"./bm.js":13466,"./bn":18516,"./bn-bd":90557,"./bn-bd.js":90557,"./bn.js":18516,"./bo":26273,"./bo.js":26273,"./br":9588,"./br.js":9588,"./bs":19815,"./bs.js":19815,"./ca":83331,"./ca.js":83331,"./cs":21320,"./cs.js":21320,"./cv":72219,"./cv.js":72219,"./cy":68266,"./cy.js":68266,"./da":66427,"./da.js":66427,"./de":67435,"./de-at":52871,"./de-at.js":52871,"./de-ch":12994,"./de-ch.js":12994,"./de.js":67435,"./dv":82357,"./dv.js":82357,"./el":95649,"./el.js":95649,"./en-au":59961,"./en-au.js":59961,"./en-ca":19878,"./en-ca.js":19878,"./en-gb":3924,"./en-gb.js":3924,"./en-ie":70864,"./en-ie.js":70864,"./en-il":91579,"./en-il.js":91579,"./en-in":30940,"./en-in.js":30940,"./en-nz":16181,"./en-nz.js":16181,"./en-sg":44301,"./en-sg.js":44301,"./eo":85291,"./eo.js":85291,"./es":54529,"./es-do":53764,"./es-do.js":53764,"./es-mx":12584,"./es-mx.js":12584,"./es-us":63425,"./es-us.js":63425,"./es.js":54529,"./et":35203,"./et.js":35203,"./eu":70678,"./eu.js":70678,"./fa":83483,"./fa.js":83483,"./fi":96262,"./fi.js":96262,"./fil":52521,"./fil.js":52521,"./fo":34555,"./fo.js":34555,"./fr":63131,"./fr-ca":88239,"./fr-ca.js":88239,"./fr-ch":21702,"./fr-ch.js":21702,"./fr.js":63131,"./fy":267,"./fy.js":267,"./ga":23821,"./ga.js":23821,"./gd":71753,"./gd.js":71753,"./gl":4074,"./gl.js":4074,"./gom-deva":92762,"./gom-deva.js":92762,"./gom-latn":5969,"./gom-latn.js":5969,"./gu":82809,"./gu.js":82809,"./he":45402,"./he.js":45402,"./hi":315,"./hi.js":315,"./hr":10410,"./hr.js":10410,"./hu":38288,"./hu.js":38288,"./hy-am":67928,"./hy-am.js":67928,"./id":71334,"./id.js":71334,"./is":86959,"./is.js":86959,"./it":34864,"./it-ch":51124,"./it-ch.js":51124,"./it.js":34864,"./ja":36141,"./ja.js":36141,"./jv":29187,"./jv.js":29187,"./ka":42136,"./ka.js":42136,"./kk":94332,"./kk.js":94332,"./km":18607,"./km.js":18607,"./kn":84305,"./kn.js":84305,"./ko":70234,"./ko.js":70234,"./ku":16003,"./ku.js":16003,"./ky":75061,"./ky.js":75061,"./lb":32786,"./lb.js":32786,"./lo":66183,"./lo.js":66183,"./lt":50029,"./lt.js":50029,"./lv":24169,"./lv.js":24169,"./me":68577,"./me.js":68577,"./mi":68177,"./mi.js":68177,"./mk":50337,"./mk.js":50337,"./ml":65260,"./ml.js":65260,"./mn":52325,"./mn.js":52325,"./mr":14695,"./mr.js":14695,"./ms":75334,"./ms-my":37151,"./ms-my.js":37151,"./ms.js":75334,"./mt":63570,"./mt.js":63570,"./my":97963,"./my.js":97963,"./nb":88028,"./nb.js":88028,"./ne":86638,"./ne.js":86638,"./nl":50302,"./nl-be":66782,"./nl-be.js":66782,"./nl.js":50302,"./nn":33501,"./nn.js":33501,"./oc-lnc":50563,"./oc-lnc.js":50563,"./pa-in":50869,"./pa-in.js":50869,"./pl":65302,"./pl.js":65302,"./pt":49687,"./pt-br":74884,"./pt-br.js":74884,"./pt.js":49687,"./ro":79107,"./ro.js":79107,"./ru":33627,"./ru.js":33627,"./sd":30355,"./sd.js":30355,"./se":83427,"./se.js":83427,"./si":11848,"./si.js":11848,"./sk":54590,"./sk.js":54590,"./sl":20184,"./sl.js":20184,"./sq":56361,"./sq.js":56361,"./sr":78965,"./sr-cyrl":81287,"./sr-cyrl.js":81287,"./sr.js":78965,"./ss":25456,"./ss.js":25456,"./sv":70451,"./sv.js":70451,"./sw":77558,"./sw.js":77558,"./ta":51356,"./ta.js":51356,"./te":73693,"./te.js":73693,"./tet":21243,"./tet.js":21243,"./tg":42500,"./tg.js":42500,"./th":55768,"./th.js":55768,"./tk":77761,"./tk.js":77761,"./tl-ph":35780,"./tl-ph.js":35780,"./tlh":29590,"./tlh.js":29590,"./tr":33807,"./tr.js":33807,"./tzl":93857,"./tzl.js":93857,"./tzm":60654,"./tzm-latn":8806,"./tzm-latn.js":8806,"./tzm.js":60654,"./ug-cn":30845,"./ug-cn.js":30845,"./uk":19232,"./uk.js":19232,"./ur":47052,"./ur.js":47052,"./uz":77967,"./uz-latn":32233,"./uz-latn.js":32233,"./uz.js":77967,"./vi":98615,"./vi.js":98615,"./x-pseudo":12320,"./x-pseudo.js":12320,"./yo":31313,"./yo.js":31313,"./zh-cn":64490,"./zh-cn.js":64490,"./zh-hk":55910,"./zh-hk.js":55910,"./zh-mo":98262,"./zh-mo.js":98262,"./zh-tw":44223,"./zh-tw.js":44223};function e(R){var m=w(R);return u(m)}function w(R){if(!u.o(O,R)){var m=new Error("Cannot find module '"+R+"'");throw m.code="MODULE_NOT_FOUND",m}return O[R]}e.keys=function(){return Object.keys(O)},e.resolve=w,Z.exports=e,e.id=46700}},Z=>{Z.O(0,[736],()=>{return O=38185,Z(Z.s=O);var O});Z.O()}]);
//# sourceMappingURL=main.30522392607841c3.js.map