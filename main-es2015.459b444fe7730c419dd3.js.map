{"version":3,"mappings":"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MAAMjoB,EAAIgoB,QAAShoB,EAAIgK,MAAO,CAChDke,QAAS,iDAhFRC,IAAY1oB,oGAAZ0oB,GAAY3oB,mEAOSC,yMDvBlCA,yBAEAA,+BAEAA,6BAEAA,sCAJaA,mCAEFA,iCAEEA,83BE6CN,iDAAM2oB,iCAASxE,WAFRuE,oCAVD,IACThe,MAAqB,CACnBke,QAAS1D,OACTnH,KAAM,yBAERrT,QACAxG,OAAwB,CACtB6Z,KAAM,8BAETwG,SAvBQ,CACP7kB,KACAmpB,KACA3K,aAAqB,IACrBxT,eACAA,KACA3H,KACAA,KACAme,GACAxhB,KACA2e,GACAG,GACAyG,gBC7BAC,kBACFllB,SAGFN,OACGopB,gBAAgBH,IAChBI,MAAMrF,GAAOsF,QAAQC,IAAIvF,2BCd5B,OACA,uBACA,yBACA,yBACA,sBACA,sBACA,8BACA,kBACA,uBACA,yBACA,0BACA,uBACA,sBACA,8BACA,mBAIA,cACA,WACA,YAEA,cACA,cACA,8CACA,gCACApF,EAEA,YAEAte,kBACA,uBAEAA,YACAJ,YACAI,kCCnCA,OACA,aACA,gBACA,aACA,gBACA,mBACA,gBACA,mBACA,gBACA,mBACA,gBACA,mBACA,gBACA,mBACA,gBACA,mBACA,gBACA,aACA,gBACA,aACA,gBACA,aACA,gBACA,aACA,gBACA,aACA,gBACA,mBACA,gBACA,aACA,gBACA,aACA,gBACA,aACA,gBACA,aACA,gBACA,aACA,gBACA,aACA,gBACA,aACA,gBACA,YACA,eACA,aACA,gBACA,mBACA,gBACA,mBACA,gBACA,aACA,gBACA,YACA,eACA,gBACA,mBACA,gBACA,mBACA,gBACA,mBACA,gBACA,mBACA,gBACA,mBACA,gBACA,mBACA,gBACA,mBACA,gBACA,mBACA,aACA,gBACA,aACA,gBACA,mBACA,gBACA,mBACA,gBACA,mBACA,gBACA,aACA,gBACA,aACA,gBACA,aACA,gBACA,aACA,gBACA,cACA,iBACA,aACA,gBACA,aACA,gBACA,mBACA,gBACA,mBACA,gBACA,aACA,gBACA,aACA,gBACA,aACA,gBACA,aACA,gBACA,mBACA,sBACA,mBACA,sBACA,aACA,gBACA,aACA,gBACA,aACA,gBACA,aACA,gBACA,aACA,gBACA,gBACA,mBACA,aACA,gBACA,aACA,gBACA,aACA,eACA,kBACA,gBACA,aACA,gBACA,WACA,cACA,aACA,gBACA,aACA,gBACA,aACA,gBACA,aACA,gBACA,aACA,gBACA,aACA,gBACA,aACA,gBACA,aACA,gBACA,aACA,gBACA,aACA,gBACA,aACA,gBACA,aACA,gBACA,aACA,gBACA,aACA,gBACA,aACA,gBACA,aACA,gBACA,aACA,gBACA,aACA,gBACA,mBACA,gBACA,YACA,eACA,YACA,eACA,YACA,eACA,aACA,gBACA,aACA,gBACA,mBACA,gBACA,aACA,gBACA,iBACA,oBACA,gBACA,mBACA,aACA,gBACA,aACA,gBACA,mBACA,gBACA,aACA,gBACA,aACA,gBACA,aACA,gBACA,aACA,gBACA,aACA,gBACA,aACA,gBACA,aACA,gBACA,aACA,gBACA,aACA,kBACA,qBACA,gBACA,aACA,gBACA,aACA,gBACA,YACA,eACA,aACA,gBACA,aACA,gBACA,cACA,iBACA,aACA,gBACA,aACA,gBACA,aACA,gBACA,gBACA,mBACA,cACA,iBACA,aACA,gBACA,cACA,iBACA,cACA,mBACA,sBACA,iBACA,gBACA,mBACA,aACA,gBACA,aACA,gBACA,aACA,kBACA,qBACA,gBACA,aACA,gBACA,mBACA,sBACA,aACA,gBACA,gBACA,mBACA,gBACA,mBACA,gBACA,mBACA,gBACA,oBAIA,cACA,WACA,YAEA,cACA,cACA,8CACA,gCACAse,EAEA,YAEAte,kBACA,uBAEAA,YACAJ,YACAI","names":["b","Z","_","constructor","ne","selectors","e","ae","B","t","o","i","n","a","l","this","v","_e","hasFeatureEmphasisOnSelection","getConfig","searchState","store","mapState","map","feature","stateView","firstBy$","state","focused","pipe","be","entity","data","topPanelState$","next","value","searchTermSplitter$","ngOnInit","searchTerm$$","searchTerm$","subscribe","term","all$","get","selected","topPanelState","searchSettingsChange$","settingsChange$","topPanelState$$","computeElementRef","setTimeout","isScrolledIntoView","adjustTopPanel","d","focusedOrResolution$$","se","focusedResult$","viewController","resolution$","buildResultEmphasis","selectedOrResolution$$","selectedResult$","monitorResultOutOfView","showResultsGeometries$$","searchResultsGeometryEnabled$","clearFeatureEmphasis","shownResultsGeometries","queryResultsOverlay","removeFeature","filter","meta","dataType","r","geometry","style","Object","assign","searchOverlayStyle","base","push","addFeature","debouncedEmpty$$","empty$","I","debouncedEmpty$","isSelectedResultOutOfView$$","state$","projection","isSelectedResultOutOfView$","p","getGeometry","getExtent","g","x","P","ie","Fe","name","Ae","O","T","U","searchOverlayStyleFocus","focus","searchOverlayStyleSelection","selection","setZIndex","searchResultsOverlay","abstractFocusedResult","abstractSelectedResult","shownResultsEmphasisGeometries","ngOnDestroy","unsubscribe","getRoute$$","onResultFocus","dataSource","ol","getFeatureById","id","setStyle","onResultUnfocus","onResultSelect","clear","tryAddFeatureToMap","onSearch","results","entities$","source","research","concat","load","all","update","elRef","nativeElement","querySelector","request","getId","scrollTop","offsetTop","offsetHeight","clientHeight","document","getElementsByTagName","length","className","includes","children","toggleTopPanel","zoomToFeatureExtent","format","readFeature","dataProjection","featureProjection","getRoute","toolState","toolbox","activateTool","directionState","stopsStore","clearStops","storeInitialized$","find","position","type","coordinates","text","featureTitle","geolocationController","position$","xe","join","Ee","title","icon","f","u","center","zoom","mapService","setMap","showMenuButton","configService","hasToolbox","layerService","createAsyncLayer","sourceOptions","osmLayer","_map","_opened","openedChange","emit","mediaService","isTouchScreen","onPointerSummaryStatusChange","igoSearchPointerSummaryEnabled","onSearchTermChange","replace","trim","searchStore","selectedFeature","updateAll","updateMany","onSearchSettingsChange","setFeatures","activeTool$$","activeTool$","catalogState","catalogStore","title$","layers","options","active","toolChange","handler","onSearchCoordinate","bind","onOpenGoogleMaps","args","onOpenGoogleStreetView","destroy","onPreviousButtonClick","activatePreviousTool","onUnselectButtonClick","deactivateTool","removeFeatureFromMap","onContextMenuOpen","mapPosition","getMap","getCoordinateFromPixel","mapProjection","lonlat","y","mapBrowser","getBoundingClientRect","top","window","scrollY","left","scrollX","onPointerSearch","searchService","reverseSearch","open","le","toggle","ngAfterViewInit","context$$","contextService","context$","handleContextChange","context","media$$","media$","mapOverlay","media","getMedia","ce","toggleDialog","dialog","getDialogById","dialogRef","close","Y","hasBackdrop","closeOnNavigation","Q","pe","ye","Se","yt","St","Ct","_t","wt","Ot","storageService","pageSize","pageSizeOptions","hasFooter","hasLegendButton","hasSideSearch","showSearchBar","hasExpansionPanel","hasHomeExtentButton","hasGeolocateButton","showRotationButtonIfNoRotation","forceCoordsNA","getBaseLayersUseStaticIcon","sidenavOpened$","isMobile","isTablet","isLandscape","getOrientation","isPortrait","sidenavOpened","workspaceState","workspacePanelExpanded","setPadding","bottom","expansionPanelExpanded","toastPanelForExpansionOpened","workspace$","actionbarMode","IGO","once","tracking","termSplitter","authService","authenticate$","contextLoaded","contextState","onChangeContext","searchCoordinate","contextMenuCoord","openGoogleMaps","openGoogleStreetView","contextMenuStore","readQueryParams","onSettingsChange$","setSearchSettingsChange","closeSidenav","workspaceEnabled$","updateMapBrowserClass","selectedWorkspace$","layer","workspace","paginatorOptions","activeWidget$$","activeWorkspaceWidget$","openToastPanelForExpansion","showToastPanelForExpansionToggle","closeToastPanelForExpansion","openSidenav$$","openSidenav$","openSidenav","sidenavMediaAndOrientation$$","orientation$","computeToastPanelOffsetX","Promise","resolve","then","toastPanelOffsetX$","getToastPanelExtent","createFeatureProperties","sourceFields","forEach","primary","visible","entitySortChange","workspaceEntitySortChange$","workspaceMaximize$$","cancelOngoingAddLayer","addedLayers$$","onBackdropClick","onToggleSidenavClick","toggleSidenav","routeParams","search","deactivateCustomFilterTermStrategy","setSearchTerm","onClearSearch","onBeforeSearch","searchSourceService","getEnabledSources","padding","toolChanged","searchBar","computeHomeExtentValues","view","homeExtent","extent","homeCenter","homeZoom","entityStore","empty","queryState","softClear","route","queryParams","uri","readLayersQueryParams","getTool","toolToOpenOnContextChange","setSelectedResult","getClickCoordinate","pageYOffset","pageXOffset","searchBarTerm","toFixed","classList","add","remove","workspaceMaximize$","toastPanelHtmlDisplay","isDesktop","fullExtent","set","getControlsOffsetY","readToolParams","readSearchParams","readFocusFirst","computeZoomToExtent","zoomExtent","split","zoomToExtent","computeFocusFirst","item","click","sf","termDefinedInUrl","z","termDefinedInUrlTriggered","exactMatch","activateCustomFilterTermStrategy","searchGeom","tool","matDialogRef$","sidenav","routing","routingOptions","parseInt","debounceTime","routesFeatureStore","count$","zoomToActiveRoute$","properties","readLayersQueryParamsByType","readVectorQueryParams","getQueryParam","E","fromString","wmsLayers","wmsUrl","wmtsLayers","wmtsUrl","arcgisLayers","arcgisUrl","iarcgisLayers","iarcgisUrl","tarcgisLayers","tarcgisUrl","extractLayersByService","H","url","params","LAYERS","computeLayerVisibilityFromUrl","addLayerFromURL","vector","lastIndexOf","slice","http","responseType","File","lastModified","Date","now","importService","import","onFileImportSuccess","onFileImportError","messageService","languageService","startsWith","substr","endsWith","optionsFromCapabilities","optionsFromApi","crossOrigin","version","queryable","queryFormat","VERSION","zIndex","addLayer","visiblelayers","invisiblelayers","indexOf","toString","N","h","hasHeader","ue","nt","path","component","F","C","onSameUrlNavigation","relativeLinkResolution","L","m","ge","A","formatResult","j","factory","encodeKey","encodeURIComponent","encodeValue","decodeKey","decodeURIComponent","decodeValue","super","translate","ve","settings","getAllowedTypes","getValue","getType","getDefaultOptions","limit","Number","ecmax","toLowerCase","searchUrl","values","enabled","hashtags","available","computeRequestParams","page","extractResults","error","toDisplay","instant","Pe","RegExp","test","hashtagsLieuxToKeep","Set","reduce","setParamFromSetting","bbox","computeOptionsParam","q","computeTerm","loc","fromObject","encoder","st","features","formatter","dataToResult","computeProperties","code","highlight","nom","title2","title3","titleHtml","score","nextPage","propertiesBlacklist","index","GoogleMaps","municipalite","GoogleStreetView","Route","match","some","substring","normalize","getHashtagsValid","Ze","Me","maxCacheCount","Te","w","distance","bufferInput","sort","getSubtitle","computeExtent","pointerSummaryTitle","s","V","X","R","k","G","D","$","W","bootstrap","provide","useValue","M","imports","K","ht","ee","dt","useFactory","ct","multi","deps","rt","te","je","production","igo","app","language","prefix","optionsApi","projections","alias","def","searchSources","nominatim","storedqueries","icherche","order","coordinatesreverse","showInPointerSummary","icherchereverse","ilayer","cadastre","markerColor","markerOpacity","markerOutlineColor","fillColor","fillOpacity","strokeColor","strokeOpacity","strokeWidth","queryOverlayStyle","computeHeader","headerLogo","headerLogoPrint","he","de","getTranslation","getLanguage","readTitleConfig","readThemeConfig","readDescriptionConfig","detectOldBrowser","hasMenu","titleService","setTitle","metaService","addTag","content","themeClass","renderer","addClass","body","chrome","firefox","safari","message","alert","timeOut","me","oe","default","S","bootstrapModule","catch","console","log"],"sources":["webpack:///$_lazy_route_resources|lazy|groupOptions:%20%7B%7D|namespace%20object","webpack:///src/app/pages/menu/menu-pages/home/home.component.ts","webpack:///src/app/pages/menu/menu-pages/home/home.component.html","webpack:///src/app/pages/menu/menu-pages/about/about.component.ts","webpack:///src/app/pages/menu/menu-pages/about/about.component.html","webpack:///src/app/pages/portal/sideresult/search-results-tool/search-results-tool.component.html","webpack:///src/app/pages/portal/sideresult/search-results-tool/search-results-tool.component.ts","webpack:///src/app/pages/portal/sideresult/sideresult.component.html","webpack:///src/app/pages/portal/sideresult/sideresult.component.ts","webpack:///src/app/pages/portal/map-overlay/map-overlay.component.html","webpack:///src/app/pages/portal/map-overlay/map-overlay.component.ts","webpack:///src/app/pages/portal/legend-button/legend-button.component.ts","webpack:///src/app/pages/portal/legend-button/legend-button.component.html","webpack:///src/app/pages/portal/legend-button/legend-button-dialog.component.html","webpack:///src/app/pages/footer/footer.component.ts","webpack:///src/app/pages/footer/footer.component.html","webpack:///src/app/pages/portal/portal.component.html","webpack:///src/app/pages/portal/portal.component.ts","webpack:///src/app/pages/portal/portal.animation.ts","webpack:///src/app/pages/menu/menu-pages/map/map.component.ts","webpack:///src/app/pages/menu/menu-pages/map/map.component.html","webpack:///src/app/pages/menu/menu-routing/menu-routing.module.ts","webpack:///src/app/pages/header/header.module.ts","webpack:///src/app/pages/footer/footer.module.ts","webpack:///src/app/pages/portal/icherche/icherche.ts","webpack:///src/app/pages/portal/icherche/icherche.providers.ts","webpack:///src/app/pages/portal/map-overlay/map-overlay.module.ts","webpack:///src/app/pages/portal/sidenav/sidenav.module.ts","webpack:///src/app/pages/portal/legend-button/legend-button.module.ts","webpack:///src/app/pages/portal/sideresult/search-results-tool/search-results-tool.module.ts","webpack:///src/app/pages/portal/sideresult/sideresult.module.ts","webpack:///src/app/pages/portal/portal.module.ts","webpack:///src/app/pages/menu/menu.module.ts","webpack:///src/environments/environment.prod.ts","webpack:///src/app/pages/header/header.component.ts","webpack:///src/app/pages/header/header.component.html","webpack:///src/app/pages/menu/menu.component.ts","webpack:///src/app/pages/menu/menu.component.html","webpack:///src/app/app.component.html","webpack:///src/app/app.component.ts","webpack:///src/app/app.module.ts","webpack:///src/main.ts","webpack:///node_modules/@igo2/core/locale|sync|/^/.*/.json$","webpack:///node_modules/moment/locale|sync|/^/.*$"],"sourcesContent":["function webpackEmptyAsyncContext(req) {\n\t// Here Promise.resolve().then() is used instead of new Promise() to prevent\n\t// uncaught exception popping up in devtools\n\treturn Promise.resolve().then(function() {\n\t\tvar e = new Error(\"Cannot find module '\" + req + \"'\");\n\t\te.code = 'MODULE_NOT_FOUND';\n\t\tthrow e;\n\t});\n}\nwebpackEmptyAsyncContext.keys = function() { return []; };\nwebpackEmptyAsyncContext.resolve = webpackEmptyAsyncContext;\nwebpackEmptyAsyncContext.id = 98255;\nmodule.exports = webpackEmptyAsyncContext;","import { Component } from '@angular/core';\n\n@Component({\n  selector: 'app-menu-home',\n  templateUrl: './home.component.html'\n})\nexport class HomeComponent {\n  getHomeComponent: any;\n\n  constructor() { }\n\n}\n","<div class=\"container-fluid page\">\n    <div class=\"container\">\n        <div class=\"row\">\n            <h1 class=\"d-block themeTitre\">Accueil</h1>\n            <h2>Infrastructure géomatique ouverte 2.0 (IGO2) / Open GIS Infrastructure 2.0</h2>\n            <h4>Qu'est-ce qu'IGO?</h4>\n            <p>IGO2 est une solution Web gratuite en géomatique basée sur Angular - Material, OpenLayers et IGO2lib. IGO2 permet de tirer profit d’une multitude de données géographiques grâce à une interface cartographique accessible par un navigateur Web sur un poste de travail et par un appareil mobile. IGO2 a été initié par l'administration publique du Québec (Canada) et issu d’un travail collaboratif basé sur la philosophie des logiciels libres et ouverts (« open source »). Les membres du public en géomatique et du Web qui soumettent des contributions conservent leurs droits d'auteur s'ils partagent leur code source selon la LICENCE LiLiQ-R de type LGPL.</p>\n            <p style=\"display:inline;\">Téléchargement et code source : <a style=\"display:inline;\" href=\"https://github.com/infra-geo-ouverte/igo2\" target=\"_blank\" rel=\"noreferrer\">https://github.com/infra-geo-ouverte/igo2<!--img class=\"linkExtImg\" src=\"../../../../../assets/images/lien-externe.svg\" alt=\"Cet hyperlien s'ouvrira dans une nouvelle fenêtre.\"--></a></p>\n        </div>\n    </div>\n</div>\n\n","import { Component } from '@angular/core';\n\n@Component({\n  selector: 'app-about',\n  templateUrl: './about.component.html'\n})\nexport class AboutComponent {\n\n  constructor() { }\n\n}\n","<div class=\"container-fluid page\">\n    <div class=\"container\">\n        <div class=\"row\">\n            <h1 class=\"d-block themeTitre\">En savoir plus</h1>\n            <h2>Titre</h2>\n\n            <p>Paragraphe : Lorem ipsum dolor sit amet, consectetur adipiscing elit. Tu enim ista lenius, hic Stoicorum more nos vexat. Quo studio Aristophanem putamus aetatem in litteris duxisse? Honesta oratio, Socratica, Platonis etiam. Vitiosum est enim in dividendo partem in genere numerare. <i>Non est igitur voluptas bonum.</i> Duo Reges: constructio interrete. Non autem hoc: igitur ne illud quidem. <b>Magna laus.</b> <b>Quis istum dolorem timet?</b> Quod autem satis est, eo quicquid accessit, nimium est; <b>Sed ille, ut dixi, vitiose.</b> </p>\n\n            <p>Cur tantas regiones barbarorum pedibus obiit, tot maria transmisit? <a href=\"http://loripsum.net/\" target=\"_blank\">Nulla erit controversia.</a> Prave, nequiter, turpiter cenabat; <code>Multoque hoc melius nos veriusque quam Stoici.</code> Contineo me ab exemplis. <b>Sed nimis multa.</b> <code>Nos vero, inquit ille;</code> <mark>Occultum facinus esse potuerit, gaudebit;</mark> </p>\n\n            <blockquote cite=\"http://loripsum.net\">\n                Blockquote Non quam nostram quidem, inquit Pomponius iocans;\n            </blockquote>\n\n\n            <ul>\n                <li>Iam doloris medicamenta illa Epicurea tamquam de narthecio proment: Si gravis, brevis;</li>\n                <li>Ergo et avarus erit, sed finite, et adulter, verum habebit modum, et luxuriosus eodem modo.</li>\n                <li>Sedulo, inquam, faciam.</li>\n                <li>Quid enim tanto opus est instrumento in optimis artibus comparandis?</li>\n                <li>Sic, et quidem diligentius saepiusque ista loquemur inter nos agemusque communiter.</li>\n            </ul>\n\n\n            <p><b> Bold Inde igitur, inquit, ordiendum est.</b> Quis hoc dicit? Quamquam te quidem video minime esse deterritum. <i>Bonum incolumis acies: misera caecitas.</i> Indicant pueri, in quibus ut in speculis natura cernitur. Duae sunt enim res quoque, ne tu verba solum putes. <code>Est enim effectrix multarum et magnarum voluptatum.</code> </p>\n\n            <pre> Pre Corporis igitur nostri partes totaque figura et forma et\n            statura quam apta ad naturam sit, apparet, neque est dubium,\n            quin frons, oculi, aures et reliquae partes quales propriae\n            sint hominis intellegatur.\n\n            Pungunt quasi aculeis interrogatiunculis angustis, quibus\n            etiam qui assentiuntur nihil commutantur animo et idem\n            abeunt, qui venerant.\n            </pre>\n\n\n            <ol>\n                <li>Atqui perspicuum est hominem e corpore animoque constare, cum primae sint animi partes, secundae corporis.</li>\n                <li>Nonne videmus quanta perturbatio rerum omnium consequatur, quanta confusio?</li>\n            </ol>\n\n\n            <dl>\n                <dt><dfn>Stoicos roga.</dfn></dt>\n                <dd>Quid enim de amicitia statueris utilitatis causa expetenda vides.</dd>\n                <dt><dfn>Qui convenit?</dfn></dt>\n                <dd>Que Manilium, ab iisque M.</dd>\n                <dt><dfn>Paria sunt igitur.</dfn></dt>\n                <dd>Quamquam ab iis philosophiam et omnes ingenuas disciplinas habemus;</dd>\n                <dt><dfn>Confecta res esset.</dfn></dt>\n                <dd>Cupiditates non Epicuri divisione finiebat, sed sua satietate.</dd>\n            </dl>\n        </div>\n    </div>\n</div>\n","<div *ngIf=\"(!store || store.stateView.empty) && (debouncedEmpty$ | async) \" style=\"margin: 10px;\">\n  <section class=\"mat-typography\">\n    <h4><strong>{{ 'igo.integration.searchResultsTool.noResults' | translate }}</strong></h4>\n    <p><strong>{{ 'igo.integration.searchResultsTool.doSearch' | translate }}</strong></p>\n    <div [innerHTML]=\"'igo.integration.searchResultsTool.examples' | translate | sanitizeHtml\"></div>\n</section>\n</div>\n\n<igo-flexible\n  *ngIf=\"store && (store.stateView.empty$ | async)===false\"\n  #topPanel\n  initial=\"100%\"\n  initialMobile=\"100%\"\n  collapsed=\"calc(100% - 58px)\"\n  collapsedMobile=\"calc(100% - 58px)\"\n  expanded=\"60%\"\n  expandedMobile=\"60%\"\n  [state]=\"(feature$ | async) ? topPanelState : 'initial'\">\n\n  <div class=\"igo-content\">\n    <igo-search-results\n      [store]=\"store\"\n      [showIcons]=\"showIcons\"\n      [term]=\"term\"\n      [termSplitter]=\"termSplitter\"\n      [settingsChange$]=\"settingsChange$\"\n      placeholder=\"false\"\n      (resultFocus)=\"onResultFocus($event)\"\n      (resultSelect)=\"onResultSelect($event)\"\n      (resultUnfocus)=\"onResultUnfocus($event)\"\n      (resultMouseenter)=\"onResultFocus($event)\"\n      (resultMouseleave)=\"onResultUnfocus($event)\"\n      (moreResults)=\"onSearch($event)\">\n      <ng-template #igoSearchItemToolbar let-result=\"result\">\n        <igo-search-add-button\n          [map]=\"map\"\n          [layer]=\"result\">\n        </igo-search-add-button>\n      </ng-template>\n    </igo-search-results>\n  </div>\n\n  <!--div igoFlexibleFill class=\"igo-content\">\n    <igo-panel [title]=\"featureTitle\" *ngIf=\"feature$ | async\">\n\n      <button\n        mat-icon-button\n        panelLeftButton\n        class=\"igo-icon-button\"\n        (click)=\"toggleTopPanel()\">\n        <mat-icon [svgIcon]=\"(topPanelState$ | async) === 'collapsed' ? 'arrow-up' : 'arrow-down'\"></mat-icon>\n      </button>\n\n      <button\n        *ngIf=\"feature.geometry\"\n        mat-icon-button\n        panelRightButton\n        class=\"igo-icon-button\"\n        [matTooltip]=\"((isSelectedResultOutOfView$ | async) ? 'igo.integration.searchResultsTool.zoomOnFeatureTooltipOutOfView' : 'igo.integration.searchResultsTool.zoomOnFeatureTooltip') | translate\"\n        matTooltipShowDelay=\"500\"\n        (click)=\"zoomToFeatureExtent()\">\n        <mat-icon\n        [matBadge]=\"(isSelectedResultOutOfView$ | async) ? '!' : ''\"\n        matBadgeColor=\"accent\"\n        matBadgeSize=\"small\"\n        [matBadgeHidden]=\"(isSelectedResultOutOfView$ | async)===false\"     \n        svgIcon=\"magnify-plus-outline\"></mat-icon>\n      </button>\n\n      <igo-feature-details\n        igoFeatureDetailsDirective\n        [feature]=\"feature$ | async\"\n        [map]=\"map\"\n        [toolbox]=\"toolState.toolbox\"\n        (routingEvent)=\"getRoute()\">\n      </igo-feature-details>\n    </igo-panel>\n  </div-->\n\n</igo-flexible>\n","import {\n  Component,\n  ChangeDetectionStrategy,\n  Input,\n  OnInit,\n  ElementRef,\n  OnDestroy\n} from '@angular/core';\nimport { Observable, BehaviorSubject, Subscription, combineLatest } from 'rxjs';\nimport { debounceTime, map } from 'rxjs/operators';\nimport olFormatGeoJSON from 'ol/format/GeoJSON';\nimport olFeature from 'ol/Feature';\nimport olPoint from 'ol/geom/Point';\nimport type { default as OlGeometry } from 'ol/geom/Geometry';\n\nimport pointOnFeature from '@turf/point-on-feature';\nimport * as olProj from 'ol/proj';\nimport { ConfigService } from '@igo2/core';\n\nimport {\n  EntityStore,\n  ToolComponent,\n  FlexibleState,\n  getEntityTitle,\n  FlexibleComponent,\n  EntityState\n} from '@igo2/common';\n\nimport {\n  FEATURE,\n  Feature,\n  FeatureMotion,\n  SearchResult,\n  IgoMap,\n  moveToOlFeatures,\n  Research,\n  featuresAreTooDeepInView,\n  featureToOl,\n  featureFromOl,\n  getCommonVectorStyle,\n  getCommonVectorSelectedStyle,\n  computeOlFeaturesExtent,\n  featuresAreOutOfView,\n  roundCoordTo\n} from '@igo2/geo';\n\nimport { MapState, SearchState, ToolState, DirectionState } from '@igo2/integration';\n\n/**\n * Tool to browse the search results\n */\n@ToolComponent({\n  name: 'searchResults',\n  title: 'igo.integration.tools.searchResults',\n  icon: 'magnify'\n})\n@Component({\n  selector: 'app-search-results-tool',\n  templateUrl: './search-results-tool.component.html',\n  changeDetection: ChangeDetectionStrategy.OnPush\n})\nexport class SearchResultsToolComponent implements OnInit, OnDestroy {\n  /**\n   * to show hide results icons\n   */\n  @Input() showIcons: boolean = true;\n\n  /**\n   * Determine the top panel default state\n   */\n  @Input() topPanelStateDefault: string = 'expanded';\n\n  private hasFeatureEmphasisOnSelection: boolean = false;\n\n  private showResultsGeometries$$: Subscription;\n  private getRoute$$: Subscription;\n  private shownResultsGeometries: Feature[] = [];\n  private shownResultsEmphasisGeometries: Feature[] = [];\n  private focusedResult$: BehaviorSubject<SearchResult> = new BehaviorSubject(\n    undefined\n  );\n  public isSelectedResultOutOfView$ = new BehaviorSubject(false);\n  private isSelectedResultOutOfView$$: Subscription;\n  private abstractFocusedResult: Feature;\n  private abstractSelectedResult: Feature;\n\n  public debouncedEmpty$ :BehaviorSubject<boolean> = new BehaviorSubject(true);\n  private debouncedEmpty$$: Subscription;\n\n  /**\n   * Store holding the search results\n   * @internal\n   */\n  get store(): EntityStore<SearchResult> {\n    return this.searchState.store;\n  }\n\n  /**\n   * Map to display the results on\n   * @internal\n   */\n  get map(): IgoMap {\n    return this.mapState.map;\n  }\n\n  get featureTitle(): string {\n    return this.feature ? getEntityTitle(this.feature) : undefined;\n  }\n\n  get feature$(): Observable<Feature> {\n    return this.store.stateView\n      .firstBy$((e) => e.state.focused)\n      .pipe(\n        map(\n          (element) =>\n          (this.feature = element\n            ? (element.entity.data as Feature)\n            : undefined)\n        )\n      );\n  }\n\n  public feature: Feature;\n\n  public term = '';\n  private searchTerm$$: Subscription;\n\n  public settingsChange$ = new BehaviorSubject<boolean>(undefined);\n\n  public topPanelState$ = new BehaviorSubject<FlexibleState>('initial');\n  private topPanelState$$: Subscription;\n\n  @Input()\n  set topPanelState(value: FlexibleState) {\n    this.topPanelState$.next(value);\n  }\n  get topPanelState(): FlexibleState {\n    return this.topPanelState$.value;\n  }\n\n  get termSplitter(): string {\n    return this.searchState.searchTermSplitter$.value;\n  }\n\n  private format = new olFormatGeoJSON();\n\n  constructor(\n    private mapState: MapState,\n    private searchState: SearchState,\n    private elRef: ElementRef,\n    public toolState: ToolState,\n    private directionState: DirectionState,\n    configService: ConfigService\n  ) {\n    this.hasFeatureEmphasisOnSelection = configService.getConfig(\n      'hasFeatureEmphasisOnSelection'\n    );\n  }\n\n  ngOnInit() {\n    this.searchTerm$$ = this.searchState.searchTerm$.subscribe(\n      (searchTerm: string) => {\n        if (searchTerm !== undefined && searchTerm !== null) {\n          this.term = searchTerm;\n        }\n      }\n    );\n\n    for (const res of this.store.stateView.all$().value) {\n      if (this.store.state.get(res.entity).selected === true) {\n        this.topPanelState = 'expanded';\n      }\n    }\n\n    this.searchState.searchSettingsChange$.subscribe(() => {\n      this.settingsChange$.next(true);\n    });\n\n    this.topPanelState$$ = this.topPanelState$.subscribe(() => {\n      const igoList = this.computeElementRef()[0];\n      const selected = this.computeElementRef()[1];\n      if (selected) {\n        setTimeout(() => {\n          // To be sure the flexible component has been displayed yet\n          if (!this.isScrolledIntoView(igoList, selected)) {\n            this.adjustTopPanel(igoList, selected);\n          }\n        }, FlexibleComponent.transitionTime + 50);\n      }\n    });\n\n    if (this.hasFeatureEmphasisOnSelection) {\n      if (!this.searchState.focusedOrResolution$$) {\n        this.searchState.focusedOrResolution$$ = combineLatest([\n          this.focusedResult$,\n          this.map.viewController.resolution$\n        ]).subscribe((bunch: [SearchResult<Feature>, number]) =>\n          this.buildResultEmphasis(bunch[0], 'focused')\n        );\n      }\n\n      if (!this.searchState.selectedOrResolution$$) {\n        this.searchState.selectedOrResolution$$ = combineLatest([\n          this.searchState.selectedResult$,\n          this.map.viewController.resolution$\n        ]).subscribe((bunch: [SearchResult<Feature>, number]) =>\n          this.buildResultEmphasis(bunch[0], 'selected')\n        );\n      }\n    }\n    this.monitorResultOutOfView();\n\n    this.showResultsGeometries$$ = combineLatest([\n      this.searchState.searchResultsGeometryEnabled$,\n      this.store.stateView.all$(),\n      this.focusedResult$,\n      this.searchState.selectedResult$,\n      this.searchState.searchTerm$,\n      this.map.viewController.resolution$\n    ]).subscribe((bunch: [boolean, { entity: SearchResult, state: EntityState }[], SearchResult, SearchResult, string, number]) => {\n\n      const searchResultsGeometryEnabled = bunch[0];\n      const searchResults = bunch[1];\n\n      if (this.hasFeatureEmphasisOnSelection) {\n        this.clearFeatureEmphasis('shown');\n      }\n      this.shownResultsGeometries.map(result => this.map.queryResultsOverlay.removeFeature(result));\n      const featureToHandleGeom = searchResults\n        .filter(result =>\n          result.entity.meta.dataType === FEATURE &&\n          result.entity.data.geometry &&\n          !result.state.selected &&\n          !result.state.focused);\n\n      featureToHandleGeom.map(result => {\n        if (searchResultsGeometryEnabled) {\n          result.entity.data.meta.style =\n            getCommonVectorStyle(\n              Object.assign(\n                {},\n                { feature: result.entity.data as Feature | olFeature<OlGeometry> },\n                this.searchState.searchOverlayStyle,\n                result.entity.style?.base ? result.entity.style.base : {}\n              ));\n          this.shownResultsGeometries.push(result.entity.data as Feature);\n          this.map.queryResultsOverlay.addFeature(result.entity.data as Feature, FeatureMotion.None);\n          if (this.hasFeatureEmphasisOnSelection) {\n            this.buildResultEmphasis(result.entity as SearchResult<Feature>, 'shown');\n          }\n        }\n      });\n    });\n\n    this.debouncedEmpty$$ = this.store.stateView.empty$.pipe(debounceTime(1500)).subscribe(empty => this.debouncedEmpty$.next(empty));\n  }\n\n  private monitorResultOutOfView() {\n    this.isSelectedResultOutOfView$$ = combineLatest([\n      this.map.viewController.state$,\n      this.searchState.selectedResult$\n    ])\n      .pipe(debounceTime(100))\n      .subscribe((bunch) => {\n        const selectedResult = bunch[1] as SearchResult<Feature>;\n        if (!selectedResult) {\n          this.isSelectedResultOutOfView$.next(false);\n          return;\n        }\n        if (selectedResult.data.geometry) {\n          const selectedOlFeature = featureToOl(\n            selectedResult.data,\n            this.map.projection\n          );\n          const selectedOlFeatureExtent = computeOlFeaturesExtent(this.map, [\n            selectedOlFeature\n          ]);\n          this.isSelectedResultOutOfView$.next(\n            featuresAreOutOfView(this.map, selectedOlFeatureExtent)\n          );\n        }\n      });\n  }\n\n  private buildResultEmphasis(\n    result: SearchResult<Feature>,\n    trigger: 'selected' | 'focused' | 'shown' | undefined\n  ) {\n    if (trigger !== 'shown') {\n      this.clearFeatureEmphasis(trigger);\n    }\n    if (!result || !result.data.geometry) {\n      return;\n    }\n    const myOlFeature = featureToOl(result.data, this.map.projection);\n    const olGeometry = myOlFeature.getGeometry();\n    if (featuresAreTooDeepInView(this.map, olGeometry.getExtent() as [number, number, number, number], 0.0025)) {\n      const extent = olGeometry.getExtent();\n      const x = extent[0] + (extent[2] - extent[0]) / 2;\n      const y = extent[1] + (extent[3] - extent[1]) / 2;\n      const feature1 = new olFeature({\n        name: `${trigger}AbstractResult'`,\n        geometry: new olPoint([x, y])\n      });\n      const abstractResult = featureFromOl(feature1, this.map.projection);\n\n      let computedStyle;\n      let zIndexOffset = 0;\n\n      switch (trigger) {\n        case 'focused':\n          computedStyle = getCommonVectorSelectedStyle(\n            Object.assign({},\n              { feature: abstractResult },\n              this.searchState.searchOverlayStyleFocus,\n              result.style?.focus ? result.style.focus : {}));\n          zIndexOffset = 2;\n          break;\n        case 'shown':\n          computedStyle = getCommonVectorStyle(Object.assign({},\n            { feature: abstractResult },\n            this.searchState.searchOverlayStyle,\n            result.style?.base ? result.style.base : {}));\n          break;\n        case 'selected':\n          computedStyle = getCommonVectorSelectedStyle(\n            Object.assign({},\n              { feature: abstractResult },\n              this.searchState.searchOverlayStyleSelection,\n              result.style?.selection ? result.style.selection : {}));\n          zIndexOffset = 1;\n          break;\n      }\n      abstractResult.meta.style = computedStyle;\n      abstractResult.meta.style.setZIndex(2000 + zIndexOffset);\n      this.map.searchResultsOverlay.addFeature(abstractResult, FeatureMotion.None);\n      if (trigger === 'focused') {\n        this.abstractFocusedResult = abstractResult;\n      }\n      if (trigger === 'selected') {\n        this.abstractSelectedResult = abstractResult;\n      }\n      if (trigger === 'shown') {\n        this.shownResultsEmphasisGeometries.push(abstractResult);\n      }\n    } else {\n      this.clearFeatureEmphasis(trigger);\n    }\n  }\n\n  private clearFeatureEmphasis(trigger: 'selected' | 'focused' | 'shown') {\n    if (trigger === 'focused' && this.abstractFocusedResult) {\n      this.map.searchResultsOverlay.removeFeature(this.abstractFocusedResult);\n      this.abstractFocusedResult = undefined;\n    }\n    if (trigger === 'selected' && this.abstractSelectedResult) {\n      this.map.searchResultsOverlay.removeFeature(this.abstractSelectedResult);\n      this.abstractSelectedResult = undefined;\n    }\n    if (trigger === 'shown') {\n      this.shownResultsEmphasisGeometries.map(shownResult => this.map.searchResultsOverlay.removeFeature(shownResult));\n      this.shownResultsEmphasisGeometries = [];\n    }\n  }\n\n  ngOnDestroy() {\n    this.topPanelState$$.unsubscribe();\n    this.searchTerm$$.unsubscribe();\n    if (this.isSelectedResultOutOfView$$) {\n      this.isSelectedResultOutOfView$$.unsubscribe();\n    }\n    if (this.showResultsGeometries$$) {\n      this.showResultsGeometries$$.unsubscribe();\n    }\n    if (this.getRoute$$) {\n      this.getRoute$$.unsubscribe();\n    }\n    if (this.debouncedEmpty$$) {\n      this.debouncedEmpty$$.unsubscribe();\n    }\n  }\n\n  /**\n   * Try to add a feature to the map when it's being focused\n   * @internal\n   * @param result A search result that could be a feature\n   */\n  onResultFocus(result: SearchResult) {\n    this.focusedResult$.next(result);\n    if (result.meta.dataType === FEATURE && result.data.geometry) {\n      result.data.meta.style = getCommonVectorSelectedStyle(\n        Object.assign({},\n          { feature: result.data as Feature | olFeature<OlGeometry> },\n          this.searchState.searchOverlayStyleFocus,\n          result.style?.focus ? result.style.focus : {}));\n\n      const feature = this.map.searchResultsOverlay.dataSource.ol.getFeatureById(result.meta.id);\n      if (feature) {\n        feature.setStyle(result.data.meta.style);\n        return;\n      }\n      this.map.searchResultsOverlay.addFeature(result.data as Feature, FeatureMotion.None);\n    }\n  }\n\n  onResultUnfocus(result: SearchResult) {\n    this.focusedResult$.next(undefined);\n    if (result.meta.dataType !== FEATURE) {\n      return;\n    }\n\n    if (this.store.state.get(result).selected === true) {\n      const feature = this.map.searchResultsOverlay.dataSource.ol.getFeatureById(result.meta.id);\n      if (feature) {\n        const style = getCommonVectorSelectedStyle(\n          Object.assign({},\n            { feature: result.data as Feature | olFeature<OlGeometry> },\n            this.searchState.searchOverlayStyleFocus,\n            result.style?.focus ? result.style.focus : {}));\n        feature.setStyle(style);\n      }\n      return;\n    }\n    this.map.searchResultsOverlay.removeFeature(result.data as Feature);\n  }\n\n  /**\n   * Try to add a feature to the map when it's being selected\n   * @internal\n   * @param result A search result that could be a feature or some layer options\n   */\n  onResultSelect(result: SearchResult) {\n    this.map.searchResultsOverlay.dataSource.ol.clear();\n    this.tryAddFeatureToMap(result);\n    //this.searchState.setSelectedResult(result);\n    /*\n    if (this.topPanelState === 'initial') {\n      if (this.topPanelStateDefault !== 'collapsed') {\n        this.topPanelState = 'expanded';\n      } else {\n        this.topPanelState = 'collapsed';\n      }\n    }*/\n    /*\n    if (this.topPanelState === 'expanded') {\n      const igoList = this.computeElementRef()[0];\n      const selected = this.computeElementRef()[1];\n      if (!this.isScrolledIntoView(igoList, selected)) {\n        this.adjustTopPanel(igoList, selected);\n      }\n    }*/\n  }\n\n  onSearch(event: { research: Research; results: SearchResult[] }) {\n    const results = event.results;\n    const newResults = this.store.entities$.value\n      .filter((result: SearchResult) => result.source !== event.research.source)\n      .concat(results);\n\n    this.store.load(newResults);\n\n    for (const res of this.store.all()) {\n      if (\n        this.store.state.get(res).focused === true &&\n        this.store.state.get(res).selected !== true\n      ) {\n        this.store.state.update(res, { focused: false }, true);\n      }\n    }\n\n    setTimeout(() => {\n      const igoList = this.elRef.nativeElement.querySelector('igo-list');\n      let moreResults;\n      event.research.request.subscribe((source) => {\n        if (!source[0] || !source[0].source) {\n          moreResults = null;\n        } else if (source[0].source.getId() === 'icherche') {\n          moreResults = igoList.querySelector('.icherche .moreResults');\n        } else if (source[0].source.getId() === 'ilayer') {\n          moreResults = igoList.querySelector('.ilayer .moreResults');\n        } else if (source[0].source.getId() === 'nominatim') {\n          moreResults = igoList.querySelector('.nominatim .moreResults');\n        } else {\n          moreResults = igoList.querySelector('.' + source[0].source.getId() + ' .moreResults');\n        }\n\n        if (\n          moreResults !== null &&\n          !this.isScrolledIntoView(igoList, moreResults)\n        ) {\n          igoList.scrollTop =\n            moreResults.offsetTop +\n            moreResults.offsetHeight -\n            igoList.clientHeight;\n        }\n      });\n    }, 250);\n  }\n\n  computeElementRef() {\n    const items = document.getElementsByTagName('igo-search-results-item');\n    const igoList = this.elRef.nativeElement.getElementsByTagName(\n      'igo-list'\n    )[0];\n    let selectedItem;\n    // eslint-disable-next-line\n    for (let i = 0; i < items.length; i++) {\n      if (items[i].className.includes('igo-list-item-selected')) {\n        selectedItem = items[i];\n      }\n    }\n    return [igoList, selectedItem];\n  }\n\n  adjustTopPanel(elemSource, elem) {\n    if (!this.isScrolledIntoView(elemSource, elem)) {\n      elemSource.scrollTop =\n        elem.offsetTop +\n        elem.children[0].offsetHeight -\n        elemSource.clientHeight;\n    }\n  }\n\n  toggleTopPanel() {\n    if (this.topPanelState === 'expanded') {\n      this.topPanelState = 'collapsed';\n    } else {\n      this.topPanelState = 'expanded';\n    }\n  }\n\n  zoomToFeatureExtent() {\n    if (this.feature.geometry) {\n      const localOlFeature = this.format.readFeature(this.feature, {\n        dataProjection: this.feature.projection,\n        featureProjection: this.map.projection\n      });\n      moveToOlFeatures(this.map, [localOlFeature], FeatureMotion.Zoom);\n    }\n  }\n\n  /**\n   * Try to add a feature to the map overlay\n   * @param result A search result that could be a feature\n   */\n  private tryAddFeatureToMap(result: SearchResult) {\n    if (result.meta.dataType !== FEATURE) {\n      return undefined;\n    }\n    const feature = (result as SearchResult<Feature>).data;\n\n    // Somethimes features have no geometry. It happens with some GetFeatureInfo\n    if (!feature.geometry) {\n      return;\n    }\n\n    feature.meta.style = getCommonVectorSelectedStyle(\n      Object.assign({},\n        { feature },\n        this.searchState.searchOverlayStyleSelection,\n        result.style?.selection ? result.style.selection : {}));\n\n    this.map.searchResultsOverlay.addFeature(feature);\n  }\n\n  isScrolledIntoView(elemSource, elem) {\n    const padding = 6;\n    const docViewTop = elemSource.scrollTop;\n    const docViewBottom = docViewTop + elemSource.clientHeight;\n\n    const elemTop = elem.offsetTop;\n    const elemBottom = elemTop + elem.clientHeight + padding;\n    return elemBottom <= docViewBottom && elemTop >= docViewTop;\n  }\n\n  getRoute() {\n    this.toolState.toolbox.activateTool('directions');\n    this.directionState.stopsStore.clearStops();\n    setTimeout(() => {\n      let routingCoordLoaded = false;\n      if (this.getRoute$$) { this.getRoute$$.unsubscribe(); }\n      this.getRoute$$ = this.directionState.stopsStore.storeInitialized$.subscribe((init: boolean) => {\n        if (this.directionState.stopsStore.storeInitialized$.value && !routingCoordLoaded) {\n          routingCoordLoaded = true;\n          const stop = this.directionState.stopsStore.all().find((e) => e.position === 1);\n          let coord;\n          if (this.feature.geometry) {\n            if (this.feature.geometry.type === 'Point') {\n              coord = [this.feature.geometry.coordinates[0], this.feature.geometry.coordinates[1]];\n            } else {\n              const point = pointOnFeature(this.feature.geometry);\n              coord = [point.geometry.coordinates[0], point.geometry.coordinates[1]];\n            }\n          }\n          stop.text = this.featureTitle;\n          stop.coordinates = coord;\n          this.directionState.stopsStore.update(stop);\n          if (this.map.geolocationController.position$.value) {\n            const currentPos = this.map.geolocationController.position$.value;\n            const stop = this.directionState.stopsStore.all().find((e) => e.position === 0);\n            const currentCoord = olProj.transform(currentPos.position, currentPos.projection, 'EPSG:4326');\n            const coord: [number,number] = roundCoordTo([currentCoord[0], currentCoord[1]], 6);\n            stop.text = coord.join(',');\n            stop.coordinates = coord;\n            this.directionState.stopsStore.update(stop);\n          }\n\n        }\n      });\n    }, 250);\n  }\n}\n","<mat-sidenav\n  #sidenav\n  mode=\"side\"\n  [autoFocus]=\"false\"\n  [(opened)]=\"opened\">\n\n  <div #content class=\"app-sidenav-content\">\n\n          <app-search-results-tool>  \n            #searchresults\n            [store]=\"searchStore\"\n            [term]=\"term\"\n            [showIcons]=\"true\"\n            [termSplitter]=\"termSplitter\"\n            placeholder=\"false\"\n            [settingsChange$]=\"settingsChange$\"\n            (resultFocus)=\"onResultFocus($event)\"\n            (resultSelect)=\"onResultFocus($event)\"\n            (moreResults)=\"onSearch($event)\">\n          </app-search-results-tool>\n\n  </div>\n</mat-sidenav>\n<button\n  [ngClass]=\" sidenav.opened? 'sideresult-opened' : 'sideresult-closed' \"\n  #sidenavbutton\n  mat-raised-button\n  id=\"sideresult-button\"\n  isRoundButton=false\n  isIconButton=true\n  MatDrawerMode=\"push\"\n  (click)=\"sidenav.toggle()\">\n  <mat-icon *ngIf=\"sidenav.opened\" [matTooltip]=\"'sideresult.close' | translate\" matTooltipShowDelay=\"500\" tooltip-position=\"after\"svgIcon=\"menu-left\"></mat-icon>\n  <mat-icon *ngIf=\"!sidenav.opened\" [matTooltip]=\"'sideresult.open' | translate\" matTooltipShowDelay=\"500\" tooltip-position=\"after\" svgIcon=\"menu-right\"></mat-icon>\n</button>\n","import {\n  Component,\n  Input,\n  Output,\n  OnInit,\n  OnDestroy,\n  EventEmitter,\n  ChangeDetectionStrategy,\n  ElementRef,\n  ViewChild\n} from '@angular/core';\nimport * as proj from 'ol/proj';\n\nimport { LanguageService, MediaService } from '@igo2/core';\nimport { EntityStore, ActionStore } from '@igo2/common';\n\nimport { BehaviorSubject, Subscription } from 'rxjs';\n\nimport { Tool, Toolbox } from '@igo2/common';\nimport { IgoMap, FEATURE,\n  Feature,\n  FeatureMotion,\n  GoogleLinks,\n  LayerService,\n  MapService,\n  Layer,\n  ProjectionService,\n  Research,\n  SearchResult,\n  SearchService } from '@igo2/geo';\nimport { ToolState, CatalogState, SearchState } from '@igo2/integration';\nimport { ConfigService } from '@igo2/core';\n\n@Component({\n  selector: 'app-sideresult',\n  templateUrl: './sideresult.component.html',\n  styleUrls: ['./sideresult.component.scss'],\n  changeDetection: ChangeDetectionStrategy.OnPush\n})\nexport class SideResultComponent implements OnInit, OnDestroy {\n  title$: BehaviorSubject<string> = new BehaviorSubject<string>(undefined);\n  @Input() hasSearchQuery: boolean = undefined;\n  private activeTool$$: Subscription;\n\n  @Input()\n  get map(): IgoMap {\n    return this._map;\n  }\n  set map(value: IgoMap) {\n    this._map = value;\n  }\n  private _map: IgoMap;\n\n  @Input()\n  get opened(): boolean {\n    return this._opened;\n  }\n  set opened(value: boolean) {\n    if (value === this._opened) {\n      return;\n    }\n\n    this._opened = value;\n    this.openedChange.emit(this._opened);\n  }\n  private _opened: boolean;\n\n  @Output() openedChange = new EventEmitter<boolean>();\n  @Output() toolChange = new EventEmitter<Tool>();\n\n  get toolbox(): Toolbox {\n    return this.toolState.toolbox;\n  }\n\n  // SEARCH\n  events: string[] = [];\n  public showMenuButton: boolean = undefined;\n  public hasToolbox: boolean = undefined;\n  public store = new ActionStore([]);\n\n\n  public igoSearchPointerSummaryEnabled: boolean = false;\n\n  public termSplitter: string = '|';\n/*\n  public map = new IgoMap({\n    overlay: true,\n    controls: {\n      attribution: {\n        collapsed: true\n      }\n    }\n  });*/\n\n  public view = {\n    center: [-73, 47.2],\n    zoom: 7\n  };\n\n  public osmLayer: Layer;\n\n  @ViewChild('mapBrowser', { read: ElementRef, static: true }) mapBrowser: ElementRef;\n\n  public lonlat;\n  public mapProjection: string;\n  public term: string;\n  public settingsChange$ = new BehaviorSubject<boolean>(undefined);\n  get searchStore(): EntityStore<SearchResult> {\n    return this.searchState.store;\n  }\n\n  get isTouchScreen(): boolean {\n    return this.mediaService.isTouchScreen();\n  }\n\n  public selectedFeature: Feature;\n\n  constructor(\n    private toolState: ToolState,\n    private configService: ConfigService,\n    private catalogState: CatalogState,\n    //SEARCH\n    private languageService: LanguageService,\n    private projectionService: ProjectionService,\n    private mapService: MapService,\n    private layerService: LayerService,\n    private searchState: SearchState,\n    private searchService: SearchService,\n    private mediaService: MediaService\n    ) {\n      // SEARCH\n      this.mapService.setMap(this.map);\n      this.showMenuButton = this.configService.getConfig('showMenuButton') === undefined ? false :\n        this.configService.getConfig('showMenuButton');\n      this.hasToolbox = this.configService.getConfig('hasToolbox') === undefined ? false :\n        this.configService.getConfig('hasToolbox');\n\n    this.layerService\n      .createAsyncLayer({\n        title: 'OSM',\n        sourceOptions: {\n          type: 'osm'\n        }\n      })\n      .subscribe(layer => {\n        this.osmLayer = layer;\n        //this.map.addLayer(layer);\n      });\n    }\n\n    //SEARCH\n\n    onPointerSummaryStatusChange(value) {\n      this.igoSearchPointerSummaryEnabled = value;\n    }\n\n    onSearchTermChange(term = '') {\n      this.term = term;\n      const termWithoutHashtag = term.replace(/(#[^\\s]*)/g, '').trim();\n      if (termWithoutHashtag.length < 2) {\n        this.searchStore.clear();\n        this.selectedFeature = undefined;\n      }\n    }\n\n    onSearch(event: { research: Research; results: SearchResult[] }) {\n      const results = event.results;\n      this.searchStore.state.updateAll({ focused: false, selected: false });\n      const newResults = this.searchStore.entities$.value\n        .filter((result: SearchResult) => result.source !== event.research.source)\n        .concat(results);\n      this.searchStore.updateMany(newResults);\n    }\n\n    onSearchSettingsChange() {\n      this.settingsChange$.next(true);\n    }\n\n    /**\n     * Try to add a feature to the map when it's being focused\n     * @internal\n     * @param result A search result that could be a feature\n     */\n    onResultFocus(result: SearchResult) {\n      this.tryAddFeatureToMap(result);\n      this.selectedFeature = (result as SearchResult<Feature>).data;\n    }\n\n    /**\n     * Try to add a feature to the map overlay\n     * @param layer A search result that could be a feature\n     */\n    private tryAddFeatureToMap(layer: SearchResult) {\n      if (layer.meta.dataType !== FEATURE) {\n        return undefined;\n      }\n\n      // Somethimes features have no geometry. It happens with some GetFeatureInfo\n      if (layer.data.geometry === undefined) {\n        return;\n      }\n\n      this.map.searchResultsOverlay.setFeatures(\n        [layer.data] as Feature[],\n        FeatureMotion.Default\n      );\n    }\n\n  ngOnInit() {\n    this.activeTool$$ = this.toolbox.activeTool$.subscribe((tool: Tool) => {\n      const sidenavTitle = this.configService.getConfig('sidenavTitle') || 'IGO';\n      if (tool) {\n        if (tool.name === 'catalogBrowser') {\n          for (const catalog of this.catalogState.catalogStore.all()) {\n            if (this.catalogState.catalogStore.state.get(catalog).selected === true) {\n              this.title$.next(catalog.title);\n            }\n          }\n        } else if (tool.name === 'activeTimeFilter' || tool.name === 'activeOgcFilter') {\n          for (const layer of this.map.layers) {\n            if (layer.options.active === true) {\n              this.title$.next(layer.title);\n            }\n          }\n        } else {\n          this.title$.next(tool.title);\n        }\n      } else {\n        this.title$.next(sidenavTitle);\n      }\n      this.toolChange.emit(tool);\n    });\n    //SEARCH\n    this.store.load([\n      {\n        id: 'coordinates',\n        title: 'coordinates',\n        handler: this.onSearchCoordinate.bind(this)\n      },\n      {\n        id: 'googleMaps',\n        title: 'googleMap',\n        handler: this.onOpenGoogleMaps.bind(this),\n        args: ['1']\n      },\n      {\n        id: 'googleStreetView',\n        title: 'googleStreetView',\n        handler: this.onOpenGoogleStreetView.bind(this)\n      }\n    ]);\n  }\n\n  ngOnDestroy() {\n    this.activeTool$$.unsubscribe();\n    // SEARCH\n    this.store.destroy();\n  }\n\n  onPreviousButtonClick() {\n    this.toolbox.activatePreviousTool();\n  }\n\n  onUnselectButtonClick() {\n    this.toolbox.deactivateTool();\n  }\n\n  //SEARCH\n  /*\n   * Remove a feature to the map overlay\n   */\n  removeFeatureFromMap() {\n    this.map.searchResultsOverlay.clear();\n  }\n\n  onContextMenuOpen(event: { x: number; y: number }) {\n    const position = this.mapPosition(event);\n    const coord = this.mapService.getMap().ol.getCoordinateFromPixel(position);\n    this.mapProjection = this.mapService.getMap().projection;\n    this.lonlat = proj.transform(coord, this.mapProjection, 'EPSG:4326');\n  }\n\n  mapPosition(event: { x: number; y: number }) {\n    const contextmenuPoint = event;\n    contextmenuPoint.y =\n      contextmenuPoint.y -\n      this.mapBrowser.nativeElement.getBoundingClientRect().top +\n      window.scrollY;\n    contextmenuPoint.x =\n      contextmenuPoint.x -\n      this.mapBrowser.nativeElement.getBoundingClientRect().left +\n      window.scrollX;\n    const position = [contextmenuPoint.x, contextmenuPoint.y];\n    return position;\n  }\n\n  onPointerSearch(event) {\n    this.lonlat = event;\n    this.onSearchCoordinate();\n  }\n\n  onSearchCoordinate() {\n    this.searchStore.clear();\n    const results = this.searchService.reverseSearch(this.lonlat);\n\n    for (const i in results) {\n      if (results.length > 0) {\n        results[i].request.subscribe((_results: SearchResult<Feature>[]) => {\n          this.onSearch({ research: results[i], results: _results });\n        });\n      }\n    }\n  }\n\n  onOpenGoogleMaps() {\n    window.open(GoogleLinks.getGoogleMapsCoordLink(this.lonlat[0], this.lonlat[1]));\n  }\n\n  onOpenGoogleStreetView() {\n    window.open(\n      GoogleLinks.getGoogleStreetViewLink(this.lonlat[0], this.lonlat[1])\n    );\n  }\n}\n","<ng-container *ngFor=\"let element of mapOverlay; let i = index\">\n  <div class=\"mapOverlayDefault\" [ngClass]=\"element.cssClass\"\n       [style.position]=\"element.fixed ? 'fixed' : 'absolute'\"\n       [style.marginLeft]=\"element.marginLeft\"\n       [style.marginRight]=\"element.marginRight\"\n       [style.marginTop]=\"element.marginTop\"\n       [style.marginBottom]=\"element.marginBottom\"\n       [style.fontSize]=\"element.fontSize\">\n    <a *ngIf=\"element.link; else templateNoLink\"\n        target=\"_blank\" [href]='element.link'>\n        {{ element.text }}\n        <ng-container *ngIf=\"element.imgSrc\">\n          <img [src]=\"element.imgSrc\"\n               [alt]=\"element.alt\"\n               [ngStyle]=\"{ 'width': element.imgSize }\">\n        </ng-container>\n    </a>\n\n\n  <ng-template #templateNoLink>\n    {{ element.text }}\n    <ng-container *ngIf=\"element.imgSrc\">\n      <img [src]=\"element.imgSrc\" [alt]=\"element.alt\" [ngStyle]=\"{ 'width': element.imgSize }\">\n    </ng-container>\n\n  </ng-template>\n  </div>\n</ng-container>\n","import { Component, AfterViewInit, OnDestroy } from '@angular/core';\nimport { Subscription } from 'rxjs';\nimport { Context, ContextService } from '@igo2/context';\nimport { MediaService, ConfigService } from '@igo2/core';\nimport { MapOverlay } from './map-overlay.interface';\n\n@Component({\n  selector: 'app-map-overlay',\n  templateUrl: './map-overlay.component.html',\n  styleUrls: ['./map-overlay.component.scss']\n})\n\nexport class MapOverlayComponent implements AfterViewInit, OnDestroy {\n  public mapOverlay: MapOverlay[] = [];\n  private context$$: Subscription;\n  private media$$: Subscription;\n  private context: Context;\n\n  constructor(\n    private contextService: ContextService,\n    private mediaService: MediaService,\n    private configService: ConfigService\n  ) { }\n\n  ngAfterViewInit() {\n    this.context$$ = this.contextService.context$.subscribe(context => {\n        this.handleContextChange(context);\n        this.context = context;\n        }\n    );\n    this.media$$ = this.mediaService.media$.subscribe(media =>\n      this.handleContextChange(this.context)\n    );\n  }\n\n  ngOnDestroy() {\n    this.context$$.unsubscribe();\n    this.media$$.unsubscribe();\n  }\n\n  private handleContextChange(context: Context) {\n    let mapOverlay = [];\n    if (context !== undefined) {\n      this.mapOverlay = [];\n\n      if (context['mapOverlay']) {\n        mapOverlay = context['mapOverlay'];\n      } else if (this.configService.getConfig('mapOverlay')) {\n        mapOverlay = this.configService.getConfig('mapOverlay');\n      }\n      for (const overlay of mapOverlay) {\n\n        // If no media define use default to desktop, display only if current media is on context definition\n        if ((!overlay.media && this.mediaService.getMedia() === 'desktop') ||\n        (overlay.media && overlay.media.includes(this.mediaService.getMedia()))) {\n          this.mapOverlay.push(overlay);\n        }\n      }\n    }\n\n  }\n}\n","import { Component } from '@angular/core';\nimport { MatDialog, MatDialogState } from '@angular/material/dialog';\nimport { IgoMap } from '@igo2/geo';\nimport { MapState } from '@igo2/integration';\n\n@Component({\n  selector: 'app-legend-button',\n  templateUrl: './legend-button.component.html',\n  styleUrls: ['./legend-button.component.scss']\n})\n\nexport class LegendButtonComponent {\n\n  public dialogRef = null;\n\n  constructor(public dialog: MatDialog) {}\n\n  toggleDialog() {\n    const dialogOpened = this.dialog.getDialogById('legend-button-dialog-container');\n      if (!dialogOpened) {\n        this.dialogRef = this.dialog.open(LegendButtonDialogComponent, {\n          id: 'legend-button-dialog-container',\n          hasBackdrop: false,\n          closeOnNavigation: true\n        });\n      } else {\n        this.dialogRef.close();\n      }\n  }\n}\n\n@Component({\n  selector: 'app-legend-button-dialog',\n  templateUrl: 'legend-button-dialog.component.html'\n})\nexport class LegendButtonDialogComponent {\n\n  public getState: MatDialogState\n\n  get map(): IgoMap {\n    return this.mapState.map;\n  }\n\n  constructor(\n    private mapState: MapState,\n    public dialog: MatDialog\n    ) { }\n\n}\n","<button mat-raised-button qcca-buttons color=\"basic\" mat-button class=\"igo-legend-button\" (click)=\"toggleDialog()\">Légende</button>\n","<div mat-dialog-actions><button mat-button mat-icon-button mat-dialog-close class=\"close\"><mat-icon svgIcon = \"close\"></mat-icon></button></div>\n<h4 mat-dialog-title>Légende</h4>\n<igo-layer-legend-list\n  [layers]=\"map.layers\"\n  [excludeBaseLayers]=\"true\"\n  [allowShowAllLegends]=\"false\"\n  [updateLegendOnResolutionChange]=\"false\"\n  [showAllLegendsValue]=\"false\">\n</igo-layer-legend-list>\n","import { Component } from '@angular/core';\nimport { LanguageService } from '@igo2/core';\n\n@Component({\n  selector: 'app-footer',\n  templateUrl: './footer.component.html',\n  styleUrls: ['./footer.component.scss']\n})\nexport class FooterComponent {\n\n  constructor(protected languageService: LanguageService) {}\n\n}\n","<div class=\"footer-right\" id=\"footer-id\">\n    <span class=\"order2\">\n        <span class=\"footer-text\">\n            <a rel=\"noopener noreferrer\" alt=\"('externallinks' | translate)\" href=\"{{'footer.url-conditions' | translate}}\"\n            target=\"_blank\">{{'footer.conditions' | translate}}</a>\n        </span>\n        <span class=\"footer-text\">  |  </span>\n        <span class=\"footer-text\">\n            <a rel=\"noopener noreferrer\" alt=\"('externallinks' | translate)\" href=\"{{'footer.url-ministry' | translate}}\"\n            target=\"_blank\">{{'footer.ministry' | translate}}</a>\n        </span>\n        <span class=\"footer-text\">  |  </span>\n        <span class=\"footer-text\">\n            <a rel=\"noopener noreferrer\" alt=\"('externallinks' | translate)\" href=\"{{'footer.url-gov' | translate}}\"\n            target=\"_blank\">{{'footer.gov' | translate}}</a>\n        </span>\n    </span>\n</div>\n","<mat-sidenav-container *ngIf=\"!hasToolbox\">\n  <mat-sidenav-content position=\"end\">\n\n    <igo-backdrop\n      [shown]=\"backdropShown\"\n      (click)=\"onBackdropClick()\">\n    </igo-backdrop>\n\n    <igo-menu-button *ngIf=\"showMenuButton\"\n      [sidenavOpened]=\"sidenavOpened\"\n      (openSidenav)=\"onToggleSidenavClick()\">\n    </igo-menu-button>\n\n    <igo-search-bar *ngIf=\"showSearchBar\"\n      #searchbar\n      (pointerSummaryStatus)=\"onPointerSummaryStatusChange($event)\"\n      appearance=\"outline\"\n      searchIcon =\"magnify\"\n      [matTooltip]=\"'search-bar' | translate\"\n      matTooltipShowDelay=\"500\"\n      tooltip-position=\"after\"\n      [searchSettings]=\"false\"\n      color=\"primary\"\n      [store]=\"searchStore\"\n      [termSplitter]=\"termSplitter\"\n      (searchTermChange)=\"onSearchTermChange($event)\"\n      (search)=\"onSearch($event)\"\n      (clearFeature)=\"removeFeatureFromMap()\"\n      (searchSettingsChange)=\"onSearchSettingsChange()\">\n    </igo-search-bar>\n\n    <app-sideresult\n      [map]=\"map\"\n      [(opened)]=\"sidenavOpened\"\n      (toolChange)=\"toolChanged($event)\">\n    </app-sideresult>\n\n    <igo-map-browser\n      igoHoverFeature\n      [igoHoverFeatureDelay]=\"250\"\n      [igoHoverFeatureEnabled]=\"true\"\n      #mapBrowser\n      igoMapContext\n      igoLayerContext\n      igoDropGeoFile\n      [map]=\"map\"\n      [ngClass]=\"{'map-hasfooter': hasFooter}\">\n      <igo-baselayers-switcher\n        [ngClass]=\"sidenavOpened? 'baselayers-pushed' : 'baselayers'\"\n        [map]=\"map\"\n        [useStaticIcon]=\"getBaseLayersUseStaticIcon()\">\n      </igo-baselayers-switcher>\n      <div id=\"map-buttons\">\n        <igo-geolocate-button *ngIf=\"hasGeolocateButton\" [map]=\"map\" color=\"primary\"></igo-geolocate-button>\n        <igo-zoom-button [map]=\"map\" color=\"primary\"></igo-zoom-button>\n        <igo-rotation-button [showIfNoRotation]=\"showRotationButtonIfNoRotation\" [map]=\"map\" color=\"primary\"></igo-rotation-button>\n        <app-legend-button *ngIf=\"hasLegendButton\"></app-legend-button>\n      </div>\n    </igo-map-browser>\n    <app-footer *ngIf=\"hasFooter\" ></app-footer>\n\n    <app-map-overlay\n    [@controlStateY]=\"getControlsOffsetY()\"\n    [@controlStateX]=\"(mediaService.media$ | async) !== 'mobile' &&\n                            sidenavOpened ? 'right' : 'left'\">\n    </app-map-overlay>\n\n  </mat-sidenav-content>\n\n  \n</mat-sidenav-container>\n","import {\n  Component,\n  OnInit,\n  OnDestroy,\n  ViewChild,\n  ElementRef\n} from '@angular/core';\nimport { ActivatedRoute, Params } from '@angular/router';\nimport { Subscription, BehaviorSubject, combineLatest } from 'rxjs';\nimport { debounceTime, take, skipWhile, first } from 'rxjs/operators';\nimport { MatDialog, MatDialogRef } from '@angular/material/dialog';\nimport * as olProj from 'ol/proj';\nimport { MatPaginator } from '@angular/material/paginator';\nimport { AuthOptions, AuthService } from '@igo2/auth';\nimport { HttpClient, HttpParams } from '@angular/common/http';\nimport olFormatGeoJSON from 'ol/format/GeoJSON';\n\nimport { ObjectUtils } from '@igo2/utils';\n\nimport {\n  MediaService,\n  Media,\n  MediaOrientation,\n  ConfigService,\n  LanguageService,\n  MessageService,\n  StorageService\n  } from '@igo2/core';\n\n  import {\n    ActionbarMode,\n    Workspace,\n    WorkspaceStore,\n    ActionStore,\n    EntityStore,\n    // getEntityTitle,\n    Toolbox,\n    Tool,\n    Widget,\n    EntityTablePaginatorOptions,\n    EntityRecord\n  } from '@igo2/common';\n\n  import { DetailedContext } from '@igo2/context';\n\n  import {\n  FEATURE,\n  Feature,\n  GoogleLinks,\n  LayerService,\n  Research,\n  SearchResult,\n  SearchSourceService,\n  CapabilitiesService,\n  sourceCanSearch,\n  sourceCanReverseSearch,\n  ImportService,\n  handleFileImportError,\n  handleFileImportSuccess,\n  WfsWorkspace,\n  FeatureWorkspace,\n  EditionWorkspace,\n  generateIdFromSourceOptions,\n  computeOlFeaturesExtent,\n  addStopToStore,\n  ImageLayer,\n  VectorLayer,\n  MapExtent,\n  IgoMap,\n  DataSourceService\n  } from '@igo2/geo';\n\nimport {\n  MapState,\n  WorkspaceState,\n  QueryState,\n  ContextState,\n  SearchState,\n  ToolState,\n  DirectionState\n} from '@igo2/integration';\n\nimport {\n  controlsAnimations, controlSlideX, controlSlideY\n} from './portal.animation';\n\n@Component({\n  selector: 'app-portal',\n  templateUrl: './portal.component.html',\n  styleUrls: ['./portal.component.scss'],\n  animations: [\n    controlsAnimations(),\n    controlSlideX(),\n    controlSlideY()\n  ]\n})\n\nexport class PortalComponent implements OnInit, OnDestroy {\n  public showRotationButtonIfNoRotation: boolean = undefined;\n  public hasFooter: boolean = true;\n  public hasLegendButton: boolean = true;\n  public hasGeolocateButton: boolean = true;\n  public hasExpansionPanel: boolean = undefined;\n  public hasToolbox: boolean = false;\n  public workspaceNotAvailableMessage: String = 'workspace.disabled.resolution';\n  public workspaceEntitySortChange$: BehaviorSubject<boolean> = new BehaviorSubject(false);\n  private workspaceMaximize$$: Subscription[] = [];\n  readonly workspaceMaximize$: BehaviorSubject<boolean> = new BehaviorSubject(\n    this.storageService.get('workspaceMaximize') as boolean\n  );\n  public selectedWorkspace$: BehaviorSubject<Workspace> = new BehaviorSubject(undefined);;\n  public hasSideSearch = true;\n  public showSearchBar = true;\n  public showMenuButton = true;\n  public sidenavOpened$: BehaviorSubject<boolean> = new BehaviorSubject(false);\n\n  @ViewChild('mapBrowser', { read: ElementRef, static: true })\n  mapBrowser: ElementRef;\n\n  public term: string;\n  public settingsChange$ = new BehaviorSubject<boolean>(undefined);\n\n  getBaseLayersUseStaticIcon(): Boolean {\n    return this.configService.getConfig('useStaticIcon');\n  }\n\n  public toastPanelOffsetX$: BehaviorSubject<string> = new BehaviorSubject(undefined);\n  public minSearchTermLength = 2;\n  public hasHomeExtentButton = false;\n  public hasFeatureEmphasisOnSelection: Boolean = false;\n  public workspacePaginator: MatPaginator;\n  public workspaceSwitchDisabled = false;\n  public paginatorOptions: EntityTablePaginatorOptions = {\n    pageSize: 50, // Number of items to display on a page.\n    pageSizeOptions: [1, 5, 10, 20, 50, 100, 500] // The set of provided page size options to display to the user.\n  };\n  public workspaceMenuClass = 'workspace-menu';\n\n  public fullExtent = this.storageService.get('fullExtent') as boolean;\n\n  public matDialogRef$ = new BehaviorSubject<MatDialogRef<any>>(undefined);\n  public searchBarTerm = '';\n  public onSettingsChange$ = new BehaviorSubject<boolean>(undefined);\n  public termDefinedInUrl = false;\n  public termSplitter = '|';\n  public termDefinedInUrlTriggered = false;\n  private addedLayers$$: Subscription[] = [];\n  public forceCoordsNA = false;\n\n  public contextMenuStore = new ActionStore([]);\n  private contextMenuCoord: [number, number];\n\n  private contextLoaded = false;\n  private context$$: Subscription;\n  private openSidenav$$: Subscription;\n  private sidenavMediaAndOrientation$$: Subscription;\n\n  public igoSearchPointerSummaryEnabled: boolean;\n\n  public toastPanelForExpansionOpened = true;\n  private activeWidget$$: Subscription;\n  public showToastPanelForExpansionToggle = false;\n  private routeParams: Params;\n  public toastPanelHtmlDisplay = false;\n\n  public homeExtent: MapExtent;\n  public homeCenter: [number, number];\n  public homeZoom: number;\n  @ViewChild('searchBar', { read: ElementRef, static: true })\n  searchBar: ElementRef;\n\n  public dialogOpened = this.dialog.getDialogById('legend-button-dialog-container');\n\n  get map(): IgoMap {\n    return this.mapState.map;\n  }\n\n  get sidenavOpened(): boolean {\n    return this.sidenavOpened$.value;\n  }\n\n  set sidenavOpened(value: boolean) {\n    this.sidenavOpened$.next(value);\n  }\n\n  get auth(): AuthOptions {\n    return this.configService.getConfig('auth') || [];\n  }\n\n  isMobile(): boolean {\n    return this.mediaService.getMedia() === Media.Mobile;\n  }\n\n  isTablet(): boolean {\n    return this.mediaService.getMedia() === Media.Tablet;\n  }\n\n  isLandscape(): boolean {\n    return this.mediaService.getOrientation() === MediaOrientation.Landscape;\n  }\n\n  isPortrait(): boolean {\n    return this.mediaService.getOrientation() === MediaOrientation.Portrait;\n  }\n\n  get backdropShown(): boolean {\n    return (\n      (this.isMobile() || (this.isTablet() && this.isPortrait())) &&\n      this.sidenavOpened\n    );\n  }\n\n  get expansionPanelExpanded(): boolean {\n    return this.workspaceState.workspacePanelExpanded;\n  }\n  set expansionPanelExpanded(value: boolean) {\n    this.workspaceState.workspacePanelExpanded = value;\n    if (value === true) {\n      this.map.viewController.setPadding({bottom: 280});\n    } else {\n      this.map.viewController.setPadding({bottom: 0});\n    }\n  }\n\n  get toastPanelShown(): boolean {\n    return true;\n  }\n\n  get expansionPanelBackdropShown(): boolean {\n    return this.expansionPanelExpanded && this.toastPanelForExpansionOpened;\n  }\n\n  get workspace(): Workspace {\n    return this.workspaceState.workspace$.value;\n  }\n\n  get actionbarMode(): ActionbarMode {\n    return ActionbarMode.Overlay;\n  }\n\n  get actionbarWithTitle(): boolean {\n    return this.actionbarMode === ActionbarMode.Overlay;\n  }\n\n  get searchStore(): EntityStore<SearchResult> {\n    return this.searchState.store;\n  }\n\n  get searchResultsGeometryEnabled(): boolean {\n    return this.searchState.searchResultsGeometryEnabled$.value;\n  }\n\n  get toolbox(): Toolbox {\n    return this.toolState.toolbox;\n  }\n\n  get workspaceStore(): WorkspaceStore {\n    return this.workspaceState.store;\n  }\n\n  constructor(\n    private route: ActivatedRoute,\n    public workspaceState: WorkspaceState,\n    public authService: AuthService,\n    public mediaService: MediaService,\n    public layerService: LayerService,\n    public dataSourceService: DataSourceService,\n    public capabilitiesService: CapabilitiesService,\n    private contextState: ContextState,\n    private mapState: MapState,\n    private searchState: SearchState,\n    private queryState: QueryState,\n    private toolState: ToolState,\n    private searchSourceService: SearchSourceService,\n    private configService: ConfigService,\n    private importService: ImportService,\n    private http: HttpClient,\n    private languageService: LanguageService,\n    private messageService: MessageService,\n    public dialogWindow: MatDialog,\n    private storageService: StorageService,\n    private directionState: DirectionState,\n    public dialog: MatDialog\n  ) {\n      this.hasFooter = this.configService.getConfig('hasFooter') === undefined ? false :\n        this.configService.getConfig('hasFooter');\n      this.hasLegendButton = this.configService.getConfig('hasLegendButton') === undefined ? false :\n        this.configService.getConfig('hasLegendButton');\n      this.hasSideSearch = this.configService.getConfig('hasSideSearch') === undefined ? true :\n        this.configService.getConfig('hasSideSearch');\n      this.showSearchBar = this.configService.getConfig('showSearchBar') === undefined ? true :\n        this.configService.getConfig('showSearchBar');\n      this.hasToolbox = this.configService.getConfig('hasToolbox') === undefined ? true :\n        this.configService.getConfig('hasToolbox');\n      this.showMenuButton = this.configService.getConfig('showMenuButton') === undefined ? true :\n      this.configService.getConfig('showMenuButton');\n      this.hasExpansionPanel = this.configService.getConfig('hasExpansionPanel');\n      this.hasHomeExtentButton =\n        this.configService.getConfig('homeExtentButton') === undefined ? false : true;\n      this.hasGeolocateButton = this.configService.getConfig('hasGeolocateButton') === undefined ? true :\n        this.configService.getConfig('hasGeolocateButton');\n      this.showRotationButtonIfNoRotation = this.configService.getConfig('showRotationButtonIfNoRotation') === undefined ? false :\n        this.configService.getConfig('showRotationButtonIfNoRotation');\n      this.forceCoordsNA = this.configService.getConfig('app.forceCoordsNA');\n      this.hasFeatureEmphasisOnSelection = this.configService.getConfig('hasFeatureEmphasisOnSelection');\n      this.igoSearchPointerSummaryEnabled = this.configService.getConfig('hasSearchPointerSummary');\n      if (this.igoSearchPointerSummaryEnabled === undefined) {\n        this.igoSearchPointerSummaryEnabled = this.storageService.get('searchPointerSummaryEnabled') as boolean || false;\n      }\n  }\n\n  ngOnInit() {\n    window['IGO'] = this;\n    this.hasGeolocateButton = this.configService.getConfig('hasGeolocateButton') === undefined ? true :\n      this.configService.getConfig('hasGeolocateButton');\n\n    this.map.ol.once('rendercomplete', () => {\n      if (this.configService.getConfig('geolocate.activateDefault') !== undefined) {\n        this.map.geolocationController.tracking = this.configService.getConfig('geolocate.activateDefault');\n      }\n\n    });\n\n    this.searchState.searchTermSplitter$.next(this.termSplitter);\n\n    this.authService.authenticate$.subscribe((authenticated) => {\n      this.contextLoaded = false;\n    });\n\n    this.context$$ = this.contextState.context$.subscribe(\n      (context: DetailedContext) => this.onChangeContext(context)\n    );\n\n    const contextActions = [{\n      id: 'coordinates',\n      title: 'coordinates',\n      handler: () => this.searchCoordinate(this.contextMenuCoord)\n    },\n    {\n      id: 'googleMaps',\n      title: 'googleMap',\n      handler: () => this.openGoogleMaps(this.contextMenuCoord)\n    },\n    {\n      id: 'googleStreetView',\n      title: 'googleStreetView',\n      handler: () => this.openGoogleStreetView(this.contextMenuCoord)\n    }];\n\n    this.contextMenuStore.load(contextActions);\n\n    this.map.ol.once('rendercomplete', () => {\n      this.readQueryParams();\n    });\n\n    this.onSettingsChange$.subscribe(() => {\n      this.searchState.setSearchSettingsChange();\n    });\n\n    this.searchState.selectedResult$.subscribe((result) => {\n      if (result && this.isMobile()) {\n        this.closeSidenav();\n      }\n    });\n\n    this.workspaceState.workspaceEnabled$.next(this.hasExpansionPanel);\n    this.workspaceState.store.empty$.subscribe((workspaceEmpty) => {\n      if (!this.hasExpansionPanel) {\n        return;\n      }\n      this.workspaceState.workspaceEnabled$.next(workspaceEmpty ? false : true);\n      if (workspaceEmpty) {\n        this.expansionPanelExpanded = false;\n      }\n      this.updateMapBrowserClass();\n    });\n\n    this.workspaceState.workspace$.subscribe((activeWks: WfsWorkspace | FeatureWorkspace | EditionWorkspace) => {\n      if (activeWks) {\n        this.selectedWorkspace$.next(activeWks);\n        this.expansionPanelExpanded = true;\n\n        if (activeWks.layer.options.workspace?.pageSize && activeWks.layer.options.workspace?.pageSizeOptions) {\n          this.paginatorOptions = {\n            pageSize: activeWks.layer.options.workspace?.pageSize,\n            pageSizeOptions: activeWks.layer.options.workspace?.pageSizeOptions\n          };\n        } else {\n          this.paginatorOptions = {\n            pageSize: 50,\n            pageSizeOptions: [1, 5, 10, 20, 50, 100, 500]\n          };\n        }\n      } else {\n        this.expansionPanelExpanded = false;\n      }\n    });\n\n    this.activeWidget$$ = this.workspaceState.activeWorkspaceWidget$.subscribe(\n      (widget: Widget) => {\n        if (widget !== undefined) {\n          this.openToastPanelForExpansion();\n          this.showToastPanelForExpansionToggle = true;\n        } else {\n          this.closeToastPanelForExpansion();\n          this.showToastPanelForExpansionToggle = false;\n        }\n      }\n    );\n\n    this.openSidenav$$ = this.toolState.openSidenav$.subscribe(\n      (openSidenav: boolean) => {\n        if (openSidenav) {\n          this.openSidenav();\n          this.toolState.openSidenav$.next(false);\n        }\n      }\n    );\n\n    this.sidenavMediaAndOrientation$$ =\n      combineLatest([\n        this.sidenavOpened$,\n        this.mediaService.media$,\n        this.mediaService.orientation$]\n      ).pipe(\n        debounceTime(50)\n      ).subscribe(() => {\n        this.computeToastPanelOffsetX();\n      });\n  }\n\n  computeToastPanelOffsetX() {\n    if (this.isMobile() || !this.isLandscape()) {\n      Promise.resolve().then(() => this.toastPanelOffsetX$.next(undefined));\n    } else {\n      Promise.resolve().then(() => this.toastPanelOffsetX$.next(this.getToastPanelExtent()));\n    }\n  }\n\n  createFeatureProperties(layer: ImageLayer | VectorLayer) {\n    let properties = {};\n    layer.options.sourceOptions.sourceFields.forEach(field => {\n      if (!field.primary && field.visible) {\n        properties[field.name] = '';\n      }\n    });\n    return properties;\n  }\n\n  entitySortChange() {\n    this.workspaceEntitySortChange$.next(true);\n  }\n\n  ngOnDestroy() {\n    this.context$$.unsubscribe();\n    this.activeWidget$$.unsubscribe();\n    this.openSidenav$$.unsubscribe();\n    this.workspaceMaximize$$.map(f => f.unsubscribe());\n    this.sidenavMediaAndOrientation$$.unsubscribe();\n  }\n\n  removeFeatureFromMap() {\n    this.map.searchResultsOverlay.clear();\n  }\n\n  /**\n   * Cancel ongoing add layer, if any\n   */\n   private cancelOngoingAddLayer() {\n    this.addedLayers$$.forEach((sub: Subscription) => sub.unsubscribe());\n    this.addedLayers$$ = [];\n  }\n\n  onBackdropClick() {\n    this.closeSidenav();\n  }\n\n  onToggleSidenavClick() {\n    this.toggleSidenav();\n  }\n\n  closeToastPanelForExpansion() {\n    this.toastPanelForExpansionOpened = false;\n  }\n\n  openToastPanelForExpansion() {\n    this.toastPanelForExpansionOpened = true;\n  }\n\n  onSearchTermChange(term?: string) {\n    if (this.routeParams?.search && term !== this.routeParams.search) {\n      this.searchState.deactivateCustomFilterTermStrategy();\n    }\n\n    this.searchState.setSearchTerm(term);\n    const termWithoutHashtag = term.replace(/(#[^\\s]*)/g, '').trim();\n    if (termWithoutHashtag.length < 2) {\n      this.onClearSearch();\n      return;\n    }\n    this.onBeforeSearch();\n  }\n\n  onSearch(event: { research: Research; results: SearchResult[] }) {\n    const results = event.results;\n\n    const isReverseSearch = !sourceCanSearch(event.research.source);\n\n    let enabledSources;\n    if (isReverseSearch) {\n      enabledSources = this.searchSourceService\n        .getEnabledSources()\n        .filter(sourceCanReverseSearch);\n    } else {\n      enabledSources = this.searchSourceService\n        .getEnabledSources()\n        .filter(sourceCanSearch);\n    }\n\n    const newResults = this.searchStore.entities$.value\n      .filter(\n        (result: SearchResult) =>\n          result.source !== event.research.source &&\n          enabledSources.includes(result.source)\n      )\n      .concat(results);\n    this.searchStore.updateMany(newResults);\n  }\n\n  onSearchSettingsChange() {\n    this.onSettingsChange$.next(true);\n  }\n\n  private closeSidenav() {\n    this.sidenavOpened = false;\n    this.map.viewController.padding[3] = 0;\n  }\n\n  private openSidenav() {\n    this.sidenavOpened = true;\n    this.map.viewController.padding[3] = this.isMobile() ? 0 : 400;\n  }\n\n  private toggleSidenav() {\n    this.sidenavOpened ? this.closeSidenav() : this.openSidenav();\n    this.computeToastPanelOffsetX();\n  }\n\n  public toolChanged(tool: Tool) {\n    if (tool && tool.name === 'searchResults' && this.searchBar) {\n      this.searchBar.nativeElement.getElementsByTagName('input')[0].focus();\n    }\n  }\n\n  private computeHomeExtentValues(context: DetailedContext) {\n    if (context?.map?.view?.homeExtent) {\n      this.homeExtent = context.map.view.homeExtent.extent;\n      this.homeCenter = context.map.view.homeExtent.center;\n      this.homeZoom = context.map.view.homeExtent.zoom;\n    } else {\n      this.homeExtent = undefined;\n      this.homeCenter = undefined;\n      this.homeZoom = undefined;\n    }\n\n  }\n\n  private onChangeContext(context: DetailedContext) {\n    this.cancelOngoingAddLayer();\n    if (context === undefined) {\n      return;\n    }\n    if (this.workspace && !this.workspace.entityStore.empty) {\n      this.workspace.entityStore.clear();\n    }\n    if (!this.queryState.store.empty) {\n      this.queryState.store.softClear();\n    }\n\n    this.computeHomeExtentValues(context);\n\n    this.route.queryParams.pipe(debounceTime(250)).subscribe((qParams) => {\n      if (!qParams['context'] || qParams['context'] === context.uri) {\n        this.readLayersQueryParams(qParams);\n      }\n    });\n\n    if (this.contextLoaded) {\n      const contextManager = this.toolbox.getTool('contextManager');\n      const contextManagerOptions = contextManager\n        ? contextManager.options\n        : {};\n      let toolToOpen = contextManagerOptions.toolToOpenOnContextChange;\n\n      if (!toolToOpen) {\n        const toolOrderToOpen = ['mapTools', 'map', 'mapDetails', 'mapLegend'];\n        for (const toolName of toolOrderToOpen) {\n          if (this.toolbox.getTool(toolName)) {\n            toolToOpen = toolName;\n            break;\n          }\n        }\n      }\n\n      if (toolToOpen) {\n        this.toolbox.activateTool(toolToOpen);\n      }\n    }\n\n    this.contextLoaded = true;\n  }\n\n  private onBeforeSearch() {\n    if (\n      !this.toolbox.activeTool$.value ||\n      this.toolbox.activeTool$.value.name !== 'searchResults'\n    ) {\n      this.toolbox.activateTool('searchResults');\n    }\n    this.openSidenav();\n  }\n\n  public onClearSearch() {\n    this.map.searchResultsOverlay.clear();\n    this.searchStore.clear();\n    this.searchState.setSelectedResult(undefined);\n    this.searchState.deactivateCustomFilterTermStrategy();\n  }\n\n  onContextMenuOpen(event: { x: number; y: number }) {\n    this.contextMenuCoord = this.getClickCoordinate(event) as [number, number];\n  }\n\n  private getClickCoordinate(event: { x: number; y: number }) {\n    const contextmenuPoint = event;\n    const boundingMapBrowser = this.mapBrowser.nativeElement.getBoundingClientRect();\n    contextmenuPoint.y =\n      contextmenuPoint.y -\n      boundingMapBrowser.top +\n      (window.scrollY || window.pageYOffset);\n    contextmenuPoint.x =\n      contextmenuPoint.x -\n      boundingMapBrowser.left +\n      (window.scrollX || window.pageXOffset);\n    const pixel = [contextmenuPoint.x, contextmenuPoint.y];\n\n    const coord = this.map.ol.getCoordinateFromPixel(pixel);\n    const proj = this.map.projection;\n    return olProj.transform(coord, proj, 'EPSG:4326');\n  }\n\n  private openGoogleMaps(coord: [number, number]) {\n    window.open(GoogleLinks.getGoogleMapsCoordLink(coord[0], coord[1]));\n  }\n\n  private openGoogleStreetView(coord: [number, number]) {\n    window.open(GoogleLinks.getGoogleStreetViewLink(coord[0], coord[1]));\n  }\n\n  searchCoordinate(coord: [number, number]) {\n    this.searchBarTerm = coord.map((c) => c.toFixed(6)).join(', ');\n  }\n\n  updateMapBrowserClass() {\n    const header = this.queryState.store.entities$.value.length > 0;\n    if (this.hasExpansionPanel && this.workspaceState.workspaceEnabled$.value) {\n      this.mapBrowser.nativeElement.classList.add('has-expansion-panel');\n    } else {\n      this.mapBrowser.nativeElement.classList.remove('has-expansion-panel');\n    }\n\n    if (this.hasExpansionPanel && this.expansionPanelExpanded) {\n      if (this.workspaceMaximize$.value) {\n        this.mapBrowser.nativeElement.classList.add('expansion-offset-maximized');\n        this.mapBrowser.nativeElement.classList.remove('expansion-offset');\n      } else {\n        this.mapBrowser.nativeElement.classList.add('expansion-offset');\n        this.mapBrowser.nativeElement.classList.remove('expansion-offset-maximized');\n      }\n    } else {\n      if (this.workspaceMaximize$.value) {\n        this.mapBrowser.nativeElement.classList.remove('expansion-offset-maximized');\n      } else {\n        this.mapBrowser.nativeElement.classList.remove('expansion-offset');\n      }\n    }\n\n    if (this.sidenavOpened) {\n      this.mapBrowser.nativeElement.classList.add('sidenav-offset');\n    } else {\n      this.mapBrowser.nativeElement.classList.remove('sidenav-offset');\n    }\n\n    if (this.sidenavOpened && !this.isMobile()) {\n      this.mapBrowser.nativeElement.classList.add('sidenav-offset-baselayers');\n    } else {\n      this.mapBrowser.nativeElement.classList.remove(\n        'sidenav-offset-baselayers'\n      );\n    }\n\n    if (\n      header &&\n      (this.isMobile() || this.isTablet() || this.sidenavOpened) &&\n      !this.expansionPanelExpanded\n    ) {\n      this.mapBrowser.nativeElement.classList.add('toast-offset-attribution');\n    } else {\n      this.mapBrowser.nativeElement.classList.remove(\n        'toast-offset-attribution'\n      );\n    }\n  }\n\n  getToastPanelExtent() {\n    if (!this.sidenavOpened) {\n      if (this.toastPanelHtmlDisplay && this.mediaService.isDesktop()) {\n        return 'htmlDisplay';\n      }\n      if (this.fullExtent) {\n        return 'fullStandard';\n      } else {\n        return 'standard';\n      }\n    } else if (this.sidenavOpened) {\n      if (this.toastPanelHtmlDisplay && this.mediaService.isDesktop()) {\n        return 'htmlDisplayOffsetX';\n      }\n      if (this.fullExtent) {\n        return 'fullOffsetX';\n      } else {\n        return 'standardOffsetX';\n      }\n    }\n  }\n\n  onPointerSummaryStatusChange(value) {\n    this.storageService.set('searchPointerSummaryEnabled', value);\n    this.igoSearchPointerSummaryEnabled = value;\n  }\n\n  getControlsOffsetY() {\n    return this.expansionPanelExpanded ?\n      this.workspaceMaximize$.value ? 'firstRowFromBottom-expanded-maximized' : 'firstRowFromBottom-expanded' :\n      'firstRowFromBottom';\n  }\n\n  private readQueryParams() {\n    this.route.queryParams.subscribe((params) => {\n      this.routeParams = params;\n      this.readToolParams();\n      this.readSearchParams();\n      this.readFocusFirst();\n      this.computeZoomToExtent();\n    });\n  }\n\n  private computeZoomToExtent() {\n    if (this.routeParams['zoomExtent']) {\n      const extentParams = this.routeParams['zoomExtent'].split(',');\n      const olExtent = olProj.transformExtent(\n        extentParams,\n        'EPSG:4326',\n        this.map.projection\n      );\n      this.map.viewController.zoomToExtent(olExtent as [number, number, number, number]);\n    }\n  }\n\n  private computeFocusFirst() {\n    setTimeout(() => {\n      const resultItem: any = document\n        .getElementsByTagName('igo-search-results-item')\n        .item(0);\n      if (resultItem) {\n        resultItem.click();\n      }\n    }, 1);\n  }\n\n  private readFocusFirst() {\n    if (this.routeParams['sf'] === '1' && this.termDefinedInUrl) {\n      const entities$$ = this.searchStore.stateView.all$()\n        .pipe(\n          skipWhile((entities) => entities.length === 0),\n          debounceTime(500),\n          take(1)\n        )\n        .subscribe((entities) => {\n          entities$$.unsubscribe();\n          if (entities.length && !this.termDefinedInUrlTriggered) {\n            this.computeFocusFirst();\n            this.termDefinedInUrlTriggered = true;\n          }\n        });\n    }\n  }\n\n  private readSearchParams() {\n    if (this.routeParams['search']) {\n      this.termDefinedInUrl = true;\n      if (this.routeParams['exactMatch'] === '1') {\n        this.searchState.activateCustomFilterTermStrategy();\n      }\n      if (this.routeParams['search'] && !this.routeParams['zoom'] && this.routeParams['sf'] !== '1') {\n        const entities$$ = this.searchStore.stateView.all$()\n          .pipe(\n            skipWhile((entities) => entities.length === 0),\n            debounceTime(500),\n            take(1)\n          )\n          .subscribe((entities) => {\n            entities$$.unsubscribe();\n            const searchResultsOlFeatures = entities\n              .filter(e => e.entity.meta.dataType === FEATURE)\n              .map((entity: EntityRecord<SearchResult>) =>\n                new olFormatGeoJSON().readFeature(entity.entity.data, {\n                  dataProjection: entity.entity.data.projection,\n                  featureProjection: this.map.projection\n                })\n              );\n            const totalExtent = computeOlFeaturesExtent(this.map, searchResultsOlFeatures);\n            this.map.viewController.zoomToExtent(totalExtent);\n          });\n      }\n      this.searchBarTerm = this.routeParams['search'];\n    }\n    if (this.routeParams['searchGeom'] === '1') {\n      this.searchState.searchResultsGeometryEnabled$.next(true);\n    }\n  }\n\n  private readToolParams() {\n    if (this.routeParams['tool']) {\n      this.matDialogRef$.pipe(\n        skipWhile(r => r !== undefined),\n        first()\n      ).subscribe(matDialogOpened => {\n        if (!matDialogOpened) {\n          this.toolbox.activateTool(this.routeParams['tool']);\n        }\n      });\n    }\n\n    if (this.routeParams['sidenav'] === '1') {\n      setTimeout(() => {\n        this.openSidenav();\n      }, 250);\n    }\n\n    if (this.routeParams['routing']) {\n      let routingCoordLoaded = false;\n      const stopCoords = this.routeParams['routing'].split(';');\n      const routingOptions = this.routeParams['routingOptions'];\n      let resultSelection: number;\n      if (routingOptions) {\n        resultSelection = parseInt(routingOptions.split('result:')[1], 10);\n      }\n      this.directionState.stopsStore.storeInitialized$\n        .pipe(skipWhile(init => !init), first())\n        .subscribe((init: boolean) => {\n          if (init && !routingCoordLoaded) {\n            routingCoordLoaded = true;\n            stopCoords.map((coord, i) => {\n              if (i > 1) {\n                addStopToStore(this.directionState.stopsStore);\n              }\n            });\n            setTimeout(() => {\n              stopCoords.map((coord, i) => {\n                const stop = this.directionState.stopsStore.all().find(e => e.position === i);\n                stop.text = coord;\n                stop.coordinates = coord.split(',');\n                this.directionState.stopsStore.update(stop);\n              });\n            }, this.directionState.debounceTime * 1.25); // this delay is due to the default component debounce time\n          }\n        });\n      // zoom to active route\n      this.directionState.routesFeatureStore.count$\n        .pipe(skipWhile(c => c < 1), first())\n        .subscribe(c => {\n          if (c >= 1) {\n            this.directionState.zoomToActiveRoute$.next();\n          }\n        });\n      // select the active route by url controls\n      this.directionState.routesFeatureStore.count$\n        .pipe(skipWhile(c => c < 2), first())\n        .subscribe(() => {\n          if (resultSelection) {\n            this.directionState.routesFeatureStore.entities$.value.map(d => d.properties.active = false);\n            this.directionState.routesFeatureStore.entities$.value[resultSelection].properties.active = true;\n            this.directionState.zoomToActiveRoute$.next();\n          }\n        });\n    }\n  }\n\n  private readLayersQueryParams(params: Params) {\n    this.readLayersQueryParamsByType(params, 'wms');\n    this.readLayersQueryParamsByType(params, 'wmts');\n    this.readLayersQueryParamsByType(params, 'arcgisrest');\n    this.readLayersQueryParamsByType(params, 'imagearcgisrest');\n    this.readLayersQueryParamsByType(params, 'tilearcgisrest');\n    this.readVectorQueryParams(params);\n  }\n\n  getQueryParam(name, url) {\n    let paramValue;\n    if (url.includes('?')) {\n      const httpParams = new HttpParams({ fromString: url.split('?')[1] });\n      paramValue = httpParams.get(name);\n    }\n    return paramValue;\n  }\n\n  private readLayersQueryParamsByType(params: Params, type) {\n    let nameParamLayersKey;\n    let urlsKey;\n    switch (type) {\n      case 'wms':\n        if ((params['layers'] || params['wmsLayers']) && params['wmsUrl']) {\n          urlsKey = 'wmsUrl';\n          nameParamLayersKey = params['wmsLayers'] ? 'wmsLayers' : 'layers'; // for maintain compatibility\n        }\n        break;\n      case 'wmts':\n        if (params['wmtsLayers'] && params['wmtsUrl']) {\n          urlsKey = 'wmtsUrl';\n          nameParamLayersKey = 'wmtsLayers';\n        }\n        break;\n      case 'arcgisrest':\n        if (params['arcgisLayers'] && params['arcgisUrl']) {\n          urlsKey = 'arcgisUrl';\n          nameParamLayersKey = 'arcgisLayers';\n        }\n        break;\n      case 'imagearcgisrest':\n        if (params['iarcgisLayers'] && params['iarcgisUrl']) {\n          urlsKey = 'iarcgisUrl';\n          nameParamLayersKey = 'iarcgisLayers';\n        }\n        break;\n      case 'tilearcgisrest':\n        if (params['tarcgisLayers'] && params['tarcgisUrl']) {\n          urlsKey = 'tarcgisUrl';\n          nameParamLayersKey = 'tarcgisLayers';\n        }\n        break;\n    }\n    if (!nameParamLayersKey || !urlsKey) {\n      return;\n    }\n    const layersByService = params[nameParamLayersKey].split('),(');\n    const urls = params[urlsKey].split(',');\n\n    let cnt = 0;\n    urls.forEach((urlSrc) => {\n      let url = urlSrc;\n      const version =\n        this.getQueryParam('VERSION', url) ||\n        this.getQueryParam('version', url) ||\n        undefined;\n      if (version) {\n        url = url.replace('VERSION=' + version, '').replace('version=' + version, '');\n      }\n\n      const currentLayersByService = this.extractLayersByService(\n        layersByService[cnt]\n      );\n      currentLayersByService.forEach((layer) => {\n        const layerFromUrl = layer.split(':igoz');\n        const layerOptions = ObjectUtils.removeUndefined({\n          type,\n          url: url,\n          layer: layerFromUrl[0],\n          params: type === 'wms' ? { LAYERS: layerFromUrl[0] } : undefined\n        });\n        const id = generateIdFromSourceOptions(layerOptions);\n        const visibility = this.computeLayerVisibilityFromUrl(params, id);\n        this.addLayerFromURL(\n          url,\n          layerFromUrl[0],\n          type,\n          version,\n          visibility,\n          layerFromUrl[1] ? parseInt(layerFromUrl[1], 10) : undefined\n        );\n      });\n      cnt += 1;\n    });\n  }\n\n  private readVectorQueryParams(params: Params) {\n    if (params['vector']) {\n      const url = params['vector'] as string;\n      const lastIndex = url.lastIndexOf('/');\n      const fileName = url.slice(lastIndex + 1, url.length);\n\n      this.http.get(`${url}`, { responseType: 'blob' }).subscribe((data) => {\n        const file = new File([data], fileName, {\n          type: data.type,\n          lastModified: Date.now()\n        });\n        this.importService.import(file).subscribe(\n          (features: Feature[]) => this.onFileImportSuccess(file, features),\n          (error: Error) => this.onFileImportError(file, error)\n        );\n      });\n    }\n  }\n\n  private onFileImportSuccess(file: File, features: Feature[]) {\n    handleFileImportSuccess(\n      file,\n      features,\n      this.map,\n      this.messageService,\n      this.languageService\n    );\n  }\n\n  private onFileImportError(file: File, error: Error) {\n    handleFileImportError(\n      file,\n      error,\n      this.messageService,\n      this.languageService\n    );\n  }\n\n  private extractLayersByService(layersByService: string): any[] {\n    let outLayersByService = layersByService;\n    outLayersByService = outLayersByService.startsWith('(')\n      ? outLayersByService.substr(1)\n      : outLayersByService;\n    outLayersByService = outLayersByService.endsWith(')')\n      ? outLayersByService.slice(0, -1)\n      : outLayersByService;\n    return outLayersByService.split(',');\n  }\n  private addLayerFromURL(\n    url: string,\n    name: string,\n    type: 'wms' | 'wmts' | 'arcgisrest' | 'imagearcgisrest' | 'tilearcgisrest',\n    version: string,\n    visibility: boolean = true,\n    zIndex: number\n  ) {\n    if (!this.contextLoaded) {\n      return;\n    }\n    const commonSourceOptions = {\n      optionsFromCapabilities: true,\n      optionsFromApi: true,\n      crossOrigin: true,\n      type,\n      url\n    };\n    const arcgisClause = (type === 'arcgisrest' || type === 'imagearcgisrest' || type === 'tilearcgisrest');\n    let sourceOptions = {\n      version: type === 'wmts' ? '1.0.0' : undefined,\n      queryable: arcgisClause ? true : false,\n      queryFormat: arcgisClause ? 'esrijson' : undefined,\n      layer: name\n    };\n    if (type === 'wms') {\n      sourceOptions = { params: { LAYERS: name, VERSION: version } } as any;\n    }\n\n    sourceOptions = ObjectUtils.removeUndefined(Object.assign({}, sourceOptions, commonSourceOptions));\n\n    this.addedLayers$$.push(\n      this.layerService\n        .createAsyncLayer({\n          zIndex: zIndex,\n          visible: visibility,\n          sourceOptions\n        })\n        .subscribe((l) => {\n          this.map.addLayer(l);\n        })\n    );\n  }\n\n  private computeLayerVisibilityFromUrl(\n    params: Params,\n    currentLayerid: string\n  ): boolean {\n    const queryParams = params;\n    let visible = true;\n    if (!queryParams || !currentLayerid) {\n      return visible;\n    }\n    let visibleOnLayersParams = '';\n    let visibleOffLayersParams = '';\n    let visiblelayers: string[] = [];\n    let invisiblelayers: string[] = [];\n    if (queryParams['visiblelayers']) {\n      visibleOnLayersParams = queryParams['visiblelayers'];\n    }\n    if (queryParams['invisiblelayers']) {\n      visibleOffLayersParams = queryParams['invisiblelayers'];\n    }\n\n    /* This order is important because to control whichever\n     the order of * param. First whe open and close everything.*/\n    if (visibleOnLayersParams === '*') {\n      visible = true;\n    }\n    if (visibleOffLayersParams === '*') {\n      visible = false;\n    }\n\n    // After, managing named layer by id (context.json OR id from datasource)\n    visiblelayers = visibleOnLayersParams.split(',');\n    invisiblelayers = visibleOffLayersParams.split(',');\n    if (visiblelayers.indexOf(currentLayerid) > -1 || visiblelayers.indexOf(currentLayerid.toString()) > -1) {\n      visible = true;\n    }\n    if (invisiblelayers.indexOf(currentLayerid) > -1 || invisiblelayers.indexOf(currentLayerid.toString()) > -1) {\n      visible = false;\n    }\n    return visible;\n  }\n}\n","import './portal.variables.scss';\n\nimport {\n  trigger,\n  state,\n  style,\n  transition,\n  animate,\n  AnimationTriggerMetadata\n} from '@angular/animations';\n\nexport function controlSlideX(): AnimationTriggerMetadata {\n  return trigger('controlStateX', [\n    state(\n      'left',\n      style({\n        left: '60px'\n      })\n    ),\n    state(\n      'right',\n      style({\n        left: '465px'\n      })\n    ),\n    transition('* => *', animate('200ms'))\n  ]);\n}\n\nexport function controlSlideY(): AnimationTriggerMetadata {\n  return trigger('controlStateY', [\n    state('close', style({})),\n    state(\n      'firstRowFromBottom',\n      style({\n        bottom: '2px',\n        'margin-left': '0px'\n      })\n    ),\n    state(\n      'firstRowFromBottom-expanded',\n      style({\n        bottom: '285px',\n        'margin-left': '-55px'\n      })\n    ),\n    state(\n      'firstRowFromBottom-expanded-maximized',\n      style({\n        bottom: '500px', // workspace full size\n        'margin-left': '-55px'\n      })\n    ),\n    transition('* => *', animate('200ms'))\n  ]);\n}\n\nexport function controlsAnimations(): AnimationTriggerMetadata[] {\n  return [\n    trigger('controlsOffsetY', [\n      state('close', style({})),\n      state(\n        'firstRowFromBottom',\n        style({\n          bottom: '5px'\n        })\n      ),\n      state(\n        'firstRowFromBottom-expanded',\n        style({\n          bottom: '5px'\n        })\n      ),\n      state(\n        'firstRowFromBottom-expanded-maximized',\n        style({\n          bottom: '500px'\n        })\n      ),\n      state(\n        'secondRowFromBottom',\n        style({\n          bottom: '47px'\n        })\n      ),\n      state(\n        'thirdRowFromBottom',\n        style({\n          bottom: '104px'\n        })\n      ),\n      state(\n        '',\n        style({\n          bottom: 'calc(285px)'\n        })\n      ),\n      state(\n        'secondRowFromBottom-expanded',\n        style({\n          bottom: 'calc(285px + 52px)'\n        })\n      ),\n      state(\n        'thirdRowFromBottom-expanded',\n        style({\n          bottom: 'calc(285px + 104px)'\n        })\n      ),\n      transition('* => *', animate('200ms'))\n    ])\n  ];\n}\n","import { Component } from '@angular/core';\nimport { ConfigService } from '@igo2/core';\n\n@Component({\n  selector: 'app-map',\n  templateUrl: './map.component.html',\n  styleUrls: ['./map.component.scss']\n})\nexport class MapComponent {\n  public hasHeader = true;\n\n  constructor(private configService: ConfigService) {\n\n    this.hasHeader = this.configService.getConfig('header.hasHeader') === undefined ? false :\n      this.configService.getConfig('header.hasHeader');\n   }\n\n}\n","<app-portal \n    [ngClass]=\" hasHeader? 'portal-hasHeader-hasMenu' : 'portal-hasMenu' \">\n</app-portal>\n","import { HomeComponent } from '../menu-pages/home/home.component';\nimport { AboutComponent } from '../menu-pages/about/about.component';\nimport { MapComponent } from '../menu-pages/map/map.component';\n\nimport { NgModule } from '@angular/core';\nimport { Routes, RouterModule } from '@angular/router';\n\nconst routes: Routes = [\n    { path: '', component: HomeComponent },\n    { path: 'carte', component: MapComponent },\n    { path: 'en-savoir-plus', component: AboutComponent }\n  ];\n\n\n@NgModule({\n    imports: [RouterModule.forRoot(routes, {\n      onSameUrlNavigation: 'reload',\n      relativeLinkResolution: 'legacy'\n  })],\n    exports: [RouterModule],\n  })\n  export class MenuRoutingModule { }\n","import { NgModule } from '@angular/core';\nimport { CommonModule } from '@angular/common';\nimport { HeaderComponent } from './header.component';\nimport { IgoLanguageModule } from '@igo2/core';\nimport { MatToolbarModule } from '@angular/material/toolbar';\nimport { MenuRoutingModule } from '../menu/menu-routing/menu-routing.module';\n\n@NgModule({\n  declarations: [\n    HeaderComponent\n  ],\n  imports: [\n    CommonModule,\n    IgoLanguageModule,\n    MatToolbarModule,\n    MenuRoutingModule\n    ],\n  exports: [\n    HeaderComponent\n  ]\n})\nexport class HeaderModule { }\n","import { NgModule } from '@angular/core';\nimport { CommonModule } from '@angular/common';\nimport { FooterComponent } from './footer.component';\nimport { IgoLanguageModule } from '@igo2/core';\n\n@NgModule({\n  declarations: [\n    FooterComponent\n  ],\n  imports: [\n    CommonModule,\n    IgoLanguageModule\n  ],\n  exports: [\n    FooterComponent\n  ]\n})\nexport class FooterModule { }\n","import { Injectable, Inject, Injector } from '@angular/core';\nimport { HttpClient, HttpParams, HttpParameterCodec } from '@angular/common/http';\n\nimport { Observable, of, BehaviorSubject } from 'rxjs';\nimport { map, catchError } from 'rxjs/operators';\n\nimport { AuthService } from '@igo2/auth';\nimport { LanguageService, StorageService } from '@igo2/core';\nimport { ObjectUtils } from '@igo2/utils';\n\nimport pointOnFeature from '@turf/point-on-feature';\n\nimport {\n  FEATURE,\n  Feature,\n  GoogleLinks,\n  SearchResult,\n  SearchSource, TextSearch, ReverseSearch,\n  SearchSourceOptions,\n  TextSearchOptions,\n  ReverseSearchOptions,\n  computeTermSimilarity\n} from '@igo2/geo';\n\nimport {\n  IChercheData,\n  IChercheResponse,\n  IChercheReverseData,\n  IChercheReverseResponse\n} from './icherche.interfaces';\n\nimport { Cacheable } from 'ts-cacheable';\n\n@Injectable()\nexport class IChercheSearchResultFormatter {\n  constructor(private languageService: LanguageService) {}\n\n  formatResult(result: SearchResult<Feature>): SearchResult<Feature> {\n    return result;\n  }\n}\n\n// Fix the \"+\" is replaced with space \" \" in a query string\n// https://github.com/angular/angular/issues/11058\nexport class IgoHttpParameterCodec implements HttpParameterCodec {\n  encodeKey(key: string): string {\n    return encodeURIComponent(key);\n  }\n\n  encodeValue(value: string): string {\n    return encodeURIComponent(value);\n  }\n\n  decodeKey(key: string): string {\n    return decodeURIComponent(key);\n  }\n\n  decodeValue(value: string): string {\n    return decodeURIComponent(value);\n  }\n}\n\n/**\n * ICherche search source\n */\n@Injectable()\nexport class IChercheSearchSource extends SearchSource implements TextSearch {\n  static id = 'icherche';\n  static type = FEATURE;\n  static propertiesBlacklist: string[] = [];\n  title$: BehaviorSubject<string> = new BehaviorSubject<string>('');\n\n  private hashtagsLieuxToKeep = [];\n\n  get title(): string {\n    return this.title$.getValue();\n  }\n\n  constructor(\n    private http: HttpClient,\n    private languageService: LanguageService,\n    storageService: StorageService,\n    @Inject('options') options: SearchSourceOptions,\n    @Inject(IChercheSearchResultFormatter)\n    private formatter: IChercheSearchResultFormatter,\n    injector: Injector\n  ) {\n    super(options, storageService);\n\n    this.languageService.translate\n      .get(this.options.title)\n      .subscribe((title) => this.title$.next(title));\n\n    const authService = injector.get(AuthService);\n    if (this.settings.length) {\n      if (!authService) {\n        this.getAllowedTypes();\n      } else {\n        authService.authenticate$.subscribe(() => {\n          this.getAllowedTypes();\n        });\n      }\n    }\n  }\n\n  getId(): string {\n    return IChercheSearchSource.id;\n  }\n\n  getType(): string {\n    return IChercheSearchSource.type;\n  }\n\n  protected getDefaultOptions(): SearchSourceOptions {\n    const limit =\n      this.options.params && this.options.params.limit\n        ? Number(this.options.params.limit)\n        : undefined;\n    const ecmax =\n      this.options.params && this.options.params.ecmax\n        ? Number(this.options.params.ecmax)\n        : undefined;\n\n    const types = this.options.params?.type\n        ? this.options.params.type.replace(/\\s/g, '').toLowerCase().split(',')\n        : [\n            'adresses',\n            'codes-postaux',\n            'routes',\n            'intersections',\n            'municipalites',\n            'mrc',\n            'regadmin',\n            'lieux'\n          ];\n\n    return {\n      title: 'igo.geo.search.icherche.name',\n      searchUrl: 'https://geoegl.msp.gouv.qc.ca/apis/icherche',\n      settings: [\n        {\n          type: 'checkbox',\n          title: 'results type',\n          name: 'type',\n          values: [\n            {\n              title: 'igo.geo.search.icherche.type.address',\n              value: 'adresses',\n              enabled: types.indexOf('adresses') !== -1,\n              hashtags: ['adresse']\n            },\n            {\n              title: 'igo.geo.search.icherche.type.oldAddress',\n              value: 'anciennes-adresses',\n              enabled: types.indexOf('anciennes-adresses') !== -1,\n              hashtags: ['anciennes-adresses']\n            },\n            {\n              title: 'igo.geo.search.icherche.type.postalCode',\n              value: 'codes-postaux',\n              enabled: types.indexOf('codes-postaux') !== -1,\n              hashtags: ['code-postal']\n            },\n            {\n              title: 'igo.geo.search.icherche.type.road',\n              value: 'routes',\n              enabled: types.indexOf('routes') !== -1,\n              hashtags: ['route']\n            },\n            {\n              title: 'igo.geo.search.icherche.type.intersection',\n              value: 'intersections',\n              enabled: types.indexOf('intersections') !== -1,\n              hashtags: ['intersection', '+']\n            },\n            {\n              title: 'igo.geo.search.icherche.type.city',\n              value: 'municipalites',\n              enabled: types.indexOf('municipalites') !== -1,\n              hashtags: ['municipalité', 'mun']\n            },\n            {\n              title: 'igo.geo.search.icherche.type.oldCity',\n              value: 'anciennes-municipalites',\n              enabled: types.indexOf('anciennes-municipalites') !== -1,\n              hashtags: ['anciennes-municipalites']\n            },\n            {\n              title: 'igo.geo.search.icherche.type.mrc',\n              value: 'mrc',\n              enabled: types.indexOf('mrc') !== -1,\n              hashtags: ['mrc']\n            },\n            {\n              title: 'igo.geo.search.icherche.type.regadmin',\n              value: 'regadmin',\n              enabled: types.indexOf('regadmin') !== -1,\n              hashtags: ['région-administrative', 'regadmin']\n            },\n            {\n              title: 'igo.geo.search.icherche.type.entreprise',\n              value: 'entreprises',\n              enabled: types.indexOf('entreprises') !== -1,\n              available: false,\n              hashtags: ['entreprise']\n            },\n            {\n              title: 'igo.geo.search.icherche.type.place',\n              value: 'lieux',\n              enabled: types.indexOf('lieux') !== -1,\n              hashtags: ['lieu']\n            },\n            {\n              title: 'igo.geo.search.icherche.type.exit',\n              value: 'sorties-autoroute',\n              enabled: types.indexOf('sorties-autoroute') !== -1,\n              hashtags: ['sortie', 'sorties', 'exit']\n            },\n            {\n              title: 'igo.geo.search.icherche.type.km',\n              value: 'bornes-km',\n              enabled: types.indexOf('bornes-km') !== -1,\n              hashtags: ['borne', 'bornes', 'repère', 'km']\n            },\n            {\n              title: 'igo.geo.search.icherche.type.gcc',\n              value: 'bornes-gcc',\n              enabled: types.indexOf('bornes-gcc') !== -1,\n              hashtags: ['borne', 'bornes', 'repère', 'gcc', 'ccg']\n            },\n            {\n              title: 'igo.geo.search.icherche.type.cn',\n              value: 'bornes-cn',\n              enabled: types.indexOf('bornes-cn') !== -1,\n              hashtags: ['borne', 'bornes', 'cn']\n            },\n            {\n              title: 'igo.geo.search.icherche.type.sumi',\n              value: 'bornes-sumi',\n              enabled: types.indexOf('bornes-sumi') !== -1,\n              hashtags: ['borne', 'bornes', 'sumi']\n            },\n            {\n              title: 'igo.geo.search.icherche.type.hq',\n              value: 'hq',\n              enabled: types.indexOf('hq') !== -1,\n              hashtags: ['hq']\n            },\n            {\n              title: 'igo.geo.search.icherche.type.cadastre',\n              value: 'cadastre',\n              enabled: types.indexOf('cadastre') !== -1,\n              hashtags: ['cadastre']\n            }\n          ]\n        },\n        {\n          type: 'radiobutton',\n          title: 'results limit',\n          name: 'limit',\n          values: [\n            {\n              title: '1',\n              value: 1,\n              enabled: limit === 1\n            },\n            {\n              title: '5',\n              value: 5,\n              enabled: limit === 5 || !limit\n            },\n            {\n              title: '10',\n              value: 10,\n              enabled: limit === 10\n            },\n            {\n              title: '25',\n              value: 25,\n              enabled: limit === 25\n            },\n            {\n              title: '50',\n              value: 50,\n              enabled: limit === 50\n            }\n          ]\n        },\n        {\n          type: 'radiobutton',\n          title: 'ecmax',\n          name: 'ecmax',\n          values: [\n            {\n              title: '10 %',\n              value: 10,\n              enabled: ecmax === 10\n            },\n            {\n              title: '30 %',\n              value: 30,\n              enabled: ecmax === 30 || !ecmax\n            },\n            {\n              title: '50 %',\n              value: 50,\n              enabled: ecmax === 50\n            },\n            {\n              title: '75 %',\n              value: 75,\n              enabled: ecmax === 75\n            },\n            {\n              title: '100 %',\n              value: 100,\n              enabled: ecmax === 100\n            }\n          ]\n        },\n        {\n          type: 'radiobutton',\n          title: 'restrictExtent',\n          name: 'loc',\n          values: [\n            {\n              title: 'igo.geo.search.icherche.restrictExtent.map',\n              value: 'true',\n              enabled: false\n            },\n            {\n              title: 'igo.geo.search.icherche.restrictExtent.quebec',\n              value: 'false',\n              enabled: true\n            }\n          ]\n        }\n      ]\n    };\n  }\n\n  /**\n   * Search a location by name or keyword\n   * @param term Location name or keyword\n   * @returns Observable of <SearchResult<Feature>[]\n   */\n  @Cacheable({\n    maxCacheCount: 20\n  })\n  search(\n    term: string,\n    options?: TextSearchOptions\n  ): Observable<SearchResult<Feature>[]> {\n    const params = this.computeRequestParams(term, options || {});\n    if (!params.get('type').length) {\n      return of([]);\n    }\n    this.options.params.page = params.get('page') || '1';\n\n    return this.http.get(`${this.searchUrl}/geocode`, { params }).pipe(\n      map((response: IChercheResponse) => this.extractResults(response, term)),\n      catchError((err) => {\n        err.error.toDisplay = true;\n        err.error.title = this.languageService.translate.instant(\n          this.getDefaultOptions().title\n        );\n        throw err;\n      })\n    );\n  }\n\n  private getAllowedTypes() {\n    return this.http\n      .get(`${this.searchUrl}/types`)\n      .subscribe((types: string[]) => {\n        const typeSetting = this.settings.find((s) => s.name === 'type');\n        typeSetting.values.forEach((v) => {\n          const regex = new RegExp(`^${v.value}(\\\\.|$)`);\n          const typesMatched = types.filter((value) => regex.test(value));\n          v.available = typesMatched.length > 0;\n          if (v.value === 'lieux') {\n            this.hashtagsLieuxToKeep = [\n              ...(new Set(\n                typesMatched\n                  .map((t) => t.split('.'))\n                  .reduce((a, b) => a.concat(b))\n                  .filter((t) => t !== 'lieux')\n              ) as any)\n            ];\n          }\n        });\n        this.setParamFromSetting(typeSetting, false);\n      });\n  }\n\n  private computeRequestParams(\n    term: string,\n    options: TextSearchOptions\n  ): HttpParams {\n    const queryParams: any = Object.assign(\n      {\n        geometry: true,\n        bbox: true,\n        icon: true,\n        type:\n          //'adresses,codes-postaux,municipalites,mrc,regadmin,lieux,entreprises,bornes-sumi'\n          ['adresses','codes-postaux','routes','municipalites','mrc','regadmin',\n          'lieux.toponyme.geographie', 'lieux.toponyme.hydro', 'lieux.toponyme.parc', 'lieux.toponyme.secteur']\n      },\n      this.params,\n      this.computeOptionsParam(term, options || {}).params,\n      {\n        q: this.computeTerm(term),\n        page: options.page\n      }\n    );\n\n    if (queryParams.loc === 'true') {\n      const [xMin, yMin, xMax, yMax] = options.extent;\n      queryParams.loc = `${xMin},${yMin};${xMax},${yMin};${xMax},${yMax};${xMin},${yMax};${xMin},${yMin}`;\n    } else if (queryParams.loc === 'false') {\n      delete queryParams.loc;\n    }\n\n    if (/#[A-Za-z]+/.test(queryParams.q)) {\n      queryParams.type = 'lieux';\n    }\n\n    return new HttpParams({\n      fromObject: ObjectUtils.removeUndefined(queryParams),\n      encoder: new IgoHttpParameterCodec()\n    });\n  }\n\n  private extractResults(response: IChercheResponse, term: string): SearchResult<Feature>[] {\n    return response.features.map((data: IChercheData) => {\n      return this.formatter.formatResult(this.dataToResult(data, term, response));\n    });\n  }\n\n  private dataToResult(\n    data: IChercheData,\n    term: string,\n    response?: IChercheResponse\n  ): SearchResult<Feature> {\n    const properties = this.computeProperties(data);\n    const id = [this.getId(), properties.type, properties.code].join('.');\n\n    const titleHtml = data.highlight.title || data.properties.nom;\n    const subtitleHtml = data.highlight.title2\n      ? ' <small> ' + data.highlight.title2 + '</small>'\n      : '';\n    const subtitleHtml2 = data.highlight.title3\n      ? '<br><small> ' + data.highlight.title3 + '</small>'\n      : '';\n\n    return {\n      source: this,\n      data: {\n        type: FEATURE,\n        projection: 'EPSG:4326',\n        geometry: data.geometry,\n        extent: data.bbox,\n        properties,\n        meta: {\n          id,\n          title: data.properties.nom\n        }\n      },\n      meta: {\n        dataType: FEATURE,\n        id,\n        title: data.properties.nom,\n        titleHtml: titleHtml + subtitleHtml + subtitleHtml2,\n        icon: data.icon || 'map-marker',\n        score: data.score || computeTermSimilarity(term.trim(), data.properties.nom),\n        nextPage:\n          response.features.length % +this.options.params.limit === 0 &&\n          +this.options.params.page < 10\n      }\n    };\n  }\n\n  private computeProperties(data: IChercheData): { [key: string]: any } {\n    const properties = ObjectUtils.removeKeys(\n      data.properties,\n      IChercheSearchSource.propertiesBlacklist\n    );\n\n    if (!data.geometry) {\n      return Object.assign({ type: data.index }, properties);\n    }\n\n    const googleLinksProperties: {\n      GoogleMaps: string;\n      GoogleStreetView?: string;\n    } = {\n      GoogleMaps: ''\n    };\n\n    let googleMaps;\n    if (data.geometry.type === 'Point') {\n      googleMaps = GoogleLinks.getGoogleMapsCoordLink(\n        data.geometry.coordinates[0],\n        data.geometry.coordinates[1]\n      );\n    } else {\n      const point = pointOnFeature(data.geometry);\n      googleMaps = GoogleLinks.getGoogleMapsCoordLink(\n        point.geometry.coordinates[0],\n        point.geometry.coordinates[1]\n      );\n    }\n\n    let googleMapsNom;\n    if (data.index === 'routes') {\n      googleMapsNom = GoogleLinks.getGoogleMapsNameLink(\n        data.properties.nom + ', ' + data.properties.municipalite\n      );\n    } else if (data.index === 'municipalites') {\n      googleMapsNom = GoogleLinks.getGoogleMapsNameLink(\n        data.properties.nom + ', ' + 'ville'\n      );\n    } else if (data.index === 'mrc') {\n      googleMapsNom = GoogleLinks.getGoogleMapsNameLink(\n        'mrc+' + data.properties.nom\n      );\n    } else if (data.index === 'regadmin') {\n      googleMapsNom = GoogleLinks.getGoogleMapsNameLink(\n        data.properties.nom + ',+QC'\n      );\n    } else {\n      googleMapsNom = GoogleLinks.getGoogleMapsNameLink(\n        data.properties.nom || data.highlight.title\n      );\n    }\n\n    googleLinksProperties.GoogleMaps =\n      '<a href=' +\n      googleMaps +\n      ' target=\"_blank\">' +\n      this.languageService.translate.instant('igo.geo.searchByCoord') +\n      '</a> <br /> <a href=' +\n      googleMapsNom +\n      ' target=\"_blank\">' +\n      this.languageService.translate.instant('igo.geo.searchByName') +\n      '</a>';\n\n    if (data.geometry.type === 'Point') {\n      googleLinksProperties.GoogleStreetView = GoogleLinks.getGoogleStreetViewLink(\n        data.geometry.coordinates[0],\n        data.geometry.coordinates[1]\n      );\n    }\n\n    const routing: {\n      Route: string;\n    } = {\n      Route:\n        '<span class=\"routing\"> <u>' +\n        this.languageService.translate.instant('igo.geo.seeRouting') +\n        '</u> </span>'\n    };\n\n    return Object.assign(\n      { type: data.index },\n      properties,\n      googleLinksProperties,\n      routing\n    );\n  }\n\n  /**\n   * Remove hashtag from query\n   * @param term Query with hashtag\n   */\n  private computeTerm(term: string): string {\n    // Keep hashtags for \"lieux\"\n    const hashtags = term.match(/(#[A-Za-z]+)/g) || [];\n    let keep = false;\n    keep = hashtags.some((hashtag) => {\n      const hashtagKey = hashtag.substring(1);\n      return this.hashtagsLieuxToKeep.some(\n        (h) =>\n          h\n            .toLowerCase()\n            .normalize('NFD')\n            .replace(/[\\u0300-\\u036f]/g, '') ===\n          hashtagKey\n            .toLowerCase()\n            .normalize('NFD')\n            .replace(/[\\u0300-\\u036f]/g, '')\n      );\n    });\n\n    if (!keep) {\n      term = term.replace(/(#[A-Za-z]+)/g, '');\n    }\n\n    return term.replace(/[^\\wÀ-ÿ !\\-\\+\\(\\)\\.\\/½¼¾,'#]+/g, '');\n  }\n\n  /**\n   * Add hashtag to param if valid\n   * @param term Query with hashtag\n   * @param options TextSearchOptions\n   */\n  private computeOptionsParam(\n    term: string,\n    options: TextSearchOptions\n  ): TextSearchOptions {\n    const hashtags = super.getHashtagsValid(term, 'type');\n    if (hashtags) {\n      options.params = Object.assign(options.params || {}, {\n        type: hashtags.join(',')\n      });\n    }\n\n    return options;\n  }\n}\n\n/**\n * IChercheReverse search source\n */\n@Injectable()\nexport class IChercheReverseSearchSource extends SearchSource\n  implements ReverseSearch {\n  static id = 'icherchereverse';\n  static type = FEATURE;\n  static propertiesBlacklist: string[] = [];\n\n  title$: BehaviorSubject<string> = new BehaviorSubject<string>('');\n\n  get title(): string {\n    return this.title$.getValue();\n  }\n\n  constructor(\n    private http: HttpClient,\n    private languageService: LanguageService,\n    storageService: StorageService,\n    @Inject('options') options: SearchSourceOptions,\n    injector: Injector,\n  ) {\n    super(options, storageService);\n\n    this.languageService.translate\n      .get(this.options.title)\n      .subscribe((title) => this.title$.next(title));\n\n    const authService = injector.get(AuthService);\n    if (this.settings.length) {\n      if (!authService) {\n        this.getAllowedTypes();\n      } else {\n        authService.authenticate$.subscribe(() => {\n          this.getAllowedTypes();\n        });\n      }\n    }\n  }\n\n  getId(): string {\n    return IChercheReverseSearchSource.id;\n  }\n\n  getType(): string {\n    return IChercheReverseSearchSource.type;\n  }\n\n  protected getDefaultOptions(): SearchSourceOptions {\n    const types =\n      this.options.params && this.options.params.type\n        ? this.options.params.type.replace(/\\s/g, '').toLowerCase().split(',')\n        : ['adresses', 'municipalites', 'mrc', 'regadmin'];\n\n    return {\n      title: 'igo.geo.search.ichercheReverse.name',\n      searchUrl: 'https://geoegl.msp.gouv.qc.ca/apis/terrapi',\n      settings: [\n        {\n          type: 'checkbox',\n          title: 'results type',\n          name: 'type',\n          values: [\n            {\n              title: 'igo.geo.search.icherche.type.address',\n              value: 'adresses',\n              enabled: types.indexOf('adresses') !== -1\n            },\n            {\n              title: 'igo.geo.search.icherche.type.road',\n              value: 'routes',\n              enabled: types.indexOf('routes') !== -1,\n              available: false\n            },\n            {\n              title: 'igo.geo.search.icherche.type.district',\n              value: 'arrondissements',\n              enabled: types.indexOf('arrondissements') !== -1\n            },\n            {\n              title: 'igo.geo.search.icherche.type.city',\n              value: 'municipalites',\n              enabled: types.indexOf('municipalites') !== -1\n            },\n            {\n              title: 'igo.geo.search.icherche.type.mrc',\n              value: 'mrc',\n              enabled: types.indexOf('mrc') !== -1\n            },\n            {\n              title: 'igo.geo.search.icherche.type.regadmin',\n              value: 'regadmin',\n              enabled: types.indexOf('regadmin') !== -1\n            }\n          ]\n        },\n        {\n          type: 'radiobutton',\n          title: 'radius',\n          name: 'bufferInput',\n          values: [\n            {\n              title: '100 m',\n              value: 100,\n              enabled: !this.options.distance || this.options.distance === 100\n            },\n            {\n              title: '500 m',\n              value: 500,\n              enabled: this.options.distance === 500\n            },\n            {\n              title: '1 km',\n              value: 1000,\n              enabled: this.options.distance === 1000\n            },\n            {\n              title: '2 km',\n              value: 2000,\n              enabled: this.options.distance === 2000\n            },\n            {\n              title: '5 km',\n              value: 5000,\n              enabled: this.options.distance === 5000\n            }\n          ]\n        }\n      ]\n    };\n  }\n\n  /**\n   * Search a location by coordinates\n   * @param lonLat Location coordinates\n   * @param distance Search raidus around lonLat\n   * @returns Observable of <SearchResult<Feature>[]\n   */\n  @Cacheable({\n    maxCacheCount: 20\n  })\n  reverseSearch(\n    lonLat: [number, number],\n    options?: ReverseSearchOptions\n  ): Observable<SearchResult<Feature>[]> {\n    const params = this.computeRequestParams(lonLat, options || {});\n    if (!params.get('type').length) {\n      return of([]);\n    }\n    return this.http.get(`${this.searchUrl}/locate`, { params }).pipe(\n      map((response: IChercheReverseResponse) => {\n        return this.extractResults(response);\n      })\n    );\n  }\n\n  private getAllowedTypes() {\n    return this.http\n      .get(`${this.searchUrl}/types`)\n      .subscribe((types: string[]) => {\n        const typeSetting = this.settings.find((s) => s.name === 'type');\n        typeSetting.values.forEach((v) => {\n          v.available = types.indexOf(v.value as string) > -1;\n        });\n        this.setParamFromSetting(typeSetting, false);\n      });\n  }\n\n  private computeRequestParams(\n    lonLat: [number, number],\n    options?: ReverseSearchOptions\n  ): HttpParams {\n    if (options.distance || this.options.distance) {\n      options.params = Object.assign(options.params || {}, {\n        bufferInput: options.distance || this.options.distance\n      });\n    }\n\n    return new HttpParams({\n      fromObject: Object.assign(\n        {\n          loc: lonLat.join(','),\n          sort: 'distance',\n          geometry: true,\n          icon: true\n        },\n        options.params || {},\n        this.params\n      )\n    });\n  }\n\n  private extractResults(\n    response: IChercheReverseResponse\n  ): SearchResult<Feature>[] {\n    return response.features.map((data: IChercheReverseData) => {\n      return this.dataToResult(data);\n    });\n  }\n\n  private getSubtitle(data: IChercheReverseData) {\n    if (!this.settings.length) {\n      return '';\n    }\n    let subtitle = '';\n    switch (data.properties.type) {\n      case 'arrondissements':\n        subtitle = data.properties.municipalite + ' (Arrondissement)';\n        break;\n      default:\n        const typeSetting = this.settings.find((s) => s.name === 'type');\n        const type = typeSetting.values.find(\n          (t) => t.value === data.properties.type\n        );\n        if (type) {\n          subtitle = this.languageService.translate.instant(type.title);\n        }\n    }\n    return subtitle;\n  }\n\n  private dataToResult(data: IChercheReverseData): SearchResult<Feature> {\n    const properties = this.computeProperties(data);\n    const extent = this.computeExtent(data);\n    const id = [this.getId(), properties.type, properties.code].join('.');\n\n    const titleHtml = data.properties.nom;\n    const subtitleHtml = ' <small> ' + this.getSubtitle(data) + '</small>';\n\n    return {\n      source: this,\n      data: {\n        type: FEATURE,\n        projection: 'EPSG:4326',\n        geometry: data.geometry,\n        extent,\n        properties,\n        meta: {\n          id,\n          title: data.properties.nom\n        }\n      },\n      meta: {\n        dataType: FEATURE,\n        id,\n        title: data.properties.nom,\n        titleHtml: titleHtml + subtitleHtml,\n        icon: data.icon || 'map-marker',\n        pointerSummaryTitle: this.getSubtitle(data)+ ': ' + data.properties.nom\n      }\n    };\n  }\n\n  private computeProperties(data: IChercheReverseData): { [key: string]: any } {\n    const properties = ObjectUtils.removeKeys(\n      data.properties,\n      IChercheReverseSearchSource.propertiesBlacklist\n    );\n\n    const routing: {\n      Route: string;\n    } = {\n      Route:\n        '<span class=\"routing\"> <u>' +\n        this.languageService.translate.instant('igo.geo.seeRouting') +\n        '</u> </span>'\n    };\n\n    return Object.assign(properties, routing);\n  }\n\n  private computeExtent(\n    data: IChercheReverseData\n  ): [number, number, number, number] | undefined {\n    return data.bbox\n      ? [data.bbox[0], data.bbox[2], data.bbox[1], data.bbox[3]]\n      : undefined;\n  }\n}\n","import { Injector } from '@angular/core';\nimport { HttpClient } from '@angular/common/http';\n\nimport { ConfigService, LanguageService, StorageService } from '@igo2/core';\n\nimport { SearchSource } from '@igo2/geo';\nimport {\n  IChercheSearchSource,\n  IChercheSearchResultFormatter,\n  IChercheReverseSearchSource\n} from './icherche';\n\n/**\n * ICherche search result formatter factory\n * @ignore\n */\nexport function defaultIChercheSearchResultFormatterFactory(\n  languageService: LanguageService\n) {\n  return new IChercheSearchResultFormatter(languageService);\n}\n\n/**\n * Function that returns a provider for the ICherche search result formatter\n */\nexport function provideDefaultIChercheSearchResultFormatter() {\n  return {\n    provide: IChercheSearchResultFormatter,\n    useFactory: defaultIChercheSearchResultFormatterFactory,\n    deps: [LanguageService]\n  };\n}\n\n/**\n * ICherche search source factory\n * @ignore\n */\nexport function ichercheSearchSourceFactory(\n  http: HttpClient,\n  languageService: LanguageService,\n  storageService: StorageService,\n  config: ConfigService,\n  formatter: IChercheSearchResultFormatter,\n  injector: Injector\n) {\n  return new IChercheSearchSource(\n    http,\n    languageService,\n    storageService,\n    config.getConfig(`searchSources.${IChercheSearchSource.id}`),\n    formatter,\n    injector\n  );\n}\n\n/**\n * Function that returns a provider for the ICherche search source\n */\nexport function provideIChercheSearchSource() {\n  return {\n    provide: SearchSource,\n    useFactory: ichercheSearchSourceFactory,\n    multi: true,\n    deps: [\n      HttpClient,\n      LanguageService,\n      StorageService,\n      ConfigService,\n      IChercheSearchResultFormatter,\n      Injector\n    ]\n  };\n}\n\n/**\n * IChercheReverse search source factory\n * @ignore\n */\nexport function ichercheReverseSearchSourceFactory(\n  http: HttpClient,\n  languageService: LanguageService,\n  storageService: StorageService,\n  config: ConfigService,\n  injector: Injector\n) {\n  return new IChercheReverseSearchSource(\n    http,\n    languageService,\n    storageService,\n    config.getConfig(`searchSources.${IChercheReverseSearchSource.id}`),\n    injector\n  );\n}\n\n/**\n * Function that returns a provider for the IChercheReverse search source\n */\nexport function provideIChercheReverseSearchSource() {\n  return {\n    provide: SearchSource,\n    useFactory: ichercheReverseSearchSourceFactory,\n    multi: true,\n    deps: [HttpClient, LanguageService, StorageService, ConfigService, Injector]\n  };\n}\n","import { NgModule } from '@angular/core';\nimport { CommonModule } from '@angular/common';\n\n\nimport { MapOverlayComponent } from './map-overlay.component';\n\n@NgModule({\n  imports: [\n    CommonModule\n  ],\n  exports: [MapOverlayComponent],\n  declarations: [MapOverlayComponent]\n})\nexport class MapOverlayModule {}\n","import { NgModule } from '@angular/core';\nimport { CommonModule } from '@angular/common';\nimport { MatButtonModule } from '@angular/material/button';\nimport { MatIconModule } from '@angular/material/icon';\nimport { MatSidenavModule } from '@angular/material/sidenav';\nimport { MatTooltipModule } from '@angular/material/tooltip';\n\nimport { IgoLanguageModule } from '@igo2/core';\nimport {\n  IgoPanelModule,\n  IgoFlexibleModule,\n  IgoToolModule,\n  IgoHomeButtonModule\n} from '@igo2/common';\nimport { IgoFeatureModule } from '@igo2/geo';\nimport { IgoContextManagerModule } from '@igo2/context';\n\nimport { SidenavComponent } from './sidenav.component';\n\n@NgModule({\n  imports: [\n    CommonModule,\n    MatIconModule,\n    MatButtonModule,\n    MatSidenavModule,\n    MatTooltipModule,\n    IgoLanguageModule,\n    IgoPanelModule,\n    IgoFlexibleModule,\n    IgoContextManagerModule,\n    IgoToolModule,\n    IgoFeatureModule,\n    IgoHomeButtonModule\n  ],\n  exports: [SidenavComponent],\n  declarations: [SidenavComponent]\n})\nexport class AppSidenavModule {}\n","import { LegendButtonComponent, LegendButtonDialogComponent } from './legend-button.component';\nimport { NgModule } from '@angular/core';\nimport { MatIconModule } from '@angular/material/icon';\nimport { MatButtonModule } from '@angular/material/button';\nimport { IgoMapModule, IgoLayerModule } from '@igo2/geo';\nimport {MAT_DIALOG_DATA, MatDialogModule, MatDialogRef} from '@angular/material/dialog';\n\n@NgModule({\n  declarations: [LegendButtonComponent, LegendButtonDialogComponent],\n  imports: [\n    MatIconModule,\n    MatDialogModule,\n    IgoLayerModule,\n    IgoMapModule,\n    MatButtonModule\n  ],\n  providers:\n  [{\n    provide: 'app-legend-button-dialog',\n    useValue: LegendButtonDialogComponent,\n},\n      {provide:MatDialogRef , useValue:{} },\n\n      { provide: MAT_DIALOG_DATA, useValue: {} }\n\n],\n  exports: [\n    LegendButtonComponent,\n    LegendButtonDialogComponent,\n    MatIconModule\n  ],\n  bootstrap: [LegendButtonComponent],\n})\nexport class LegendButtonModule { }\n","import { NgModule, CUSTOM_ELEMENTS_SCHEMA } from '@angular/core';\nimport { CommonModule } from '@angular/common';\n\nimport { MatButtonModule } from '@angular/material/button';\nimport { MatIconModule } from '@angular/material/icon';\nimport { MatBadgeModule } from '@angular/material/badge';\nimport { MatTooltipModule } from '@angular/material/tooltip';\n\nimport { IgoLanguageModule } from '@igo2/core';\nimport { IgoFlexibleModule, IgoCustomHtmlModule, IgoPanelModule } from '@igo2/common';\nimport {\n  IgoFeatureModule,\n  IgoSearchModule,\n  IgoFeatureDetailsModule\n} from '@igo2/geo';\n\nimport { SearchResultsToolComponent } from './search-results-tool.component';\n\n/**\n * @ignore\n */\n@NgModule({\n  imports: [\n    CommonModule,\n    MatIconModule,\n    MatBadgeModule,\n    MatTooltipModule,\n    MatButtonModule,\n    IgoLanguageModule,\n    IgoFeatureModule,\n    IgoSearchModule,\n    IgoFlexibleModule,\n    IgoPanelModule,\n    IgoFeatureDetailsModule,\n    IgoCustomHtmlModule\n  ],\n  declarations: [SearchResultsToolComponent],\n  exports: [SearchResultsToolComponent],\n  schemas: [CUSTOM_ELEMENTS_SCHEMA]\n})\nexport class IgoAppSearchResultsToolModule {}\n","import { IgoAppSearchModule } from '@igo2/integration';\nimport { IgoAppSearchResultsToolModule } from './search-results-tool/search-results-tool.module';\nimport { MatCardModule } from '@angular/material/card';\nimport { NgModule } from '@angular/core';\nimport { CommonModule } from '@angular/common';\nimport { MatButtonModule } from '@angular/material/button';\nimport { MatIconModule } from '@angular/material/icon';\nimport { MatSidenavModule } from '@angular/material/sidenav';\nimport { MatTooltipModule } from '@angular/material/tooltip';\n\nimport { IgoLanguageModule, IgoMessageModule } from '@igo2/core';\nimport {\n  IgoPanelModule,\n  IgoFlexibleModule,\n  IgoToolModule,\n  IgoActionbarModule,\n  IgoContextMenuModule\n} from '@igo2/common';\nimport {\n  IgoFeatureModule,\n  IgoMapModule,\n  IgoSearchModule\n} from '@igo2/geo';\nimport { IgoContextManagerModule } from '@igo2/context';\nimport { SideResultComponent } from './sideresult.component';\n\n@NgModule({\n  imports: [\n    CommonModule,\n    MatIconModule,\n    MatButtonModule,\n    MatSidenavModule,\n    MatTooltipModule,\n    IgoLanguageModule,\n    IgoPanelModule,\n    IgoFlexibleModule,\n    IgoContextManagerModule,\n    IgoToolModule,\n    IgoFeatureModule,\n    //SEARCH\n    MatCardModule,\n    IgoMessageModule,\n    IgoMapModule,\n    IgoSearchModule,\n    IgoActionbarModule,\n    IgoContextMenuModule,\n    IgoAppSearchModule,\n    IgoSearchModule.forRoot(),\n    IgoAppSearchResultsToolModule\n  ],\n  exports: [SideResultComponent ],\n  //SEARCH\n  declarations: [SideResultComponent]\n})\nexport class AppSideResultModule {}\n","\nimport { provideIChercheSearchSource, provideDefaultIChercheSearchResultFormatter } from './icherche/icherche.providers';\nimport { IChercheSearchSource } from './icherche/icherche';\nimport { IgoAppSearchBarModule, IgoAppSearchModule, IgoAppSearchResultsToolModule, IgoAppToolModule } from '@igo2/integration';\nimport { NgModule } from '@angular/core';\nimport { CommonModule } from '@angular/common';\n\nimport { MatButtonModule } from '@angular/material/button';\nimport { MatIconModule } from '@angular/material/icon';\nimport { MatSidenavModule } from '@angular/material/sidenav';\nimport { MatTooltipModule } from '@angular/material/tooltip';\nimport { MatDialogModule } from '@angular/material/dialog';\n\nimport { IgoCoreModule } from '@igo2/core';\nimport {\n  IgoActionModule,\n  IgoWorkspaceModule,\n  IgoEntityModule,\n  IgoPanelModule,\n  IgoBackdropModule,\n  IgoFlexibleModule,\n  IgoContextMenuModule,\n  IgoToolModule,\n  IgoEntityTableModule,\n  IgoEntityTablePaginatorModule\n} from '@igo2/common';\n\nimport {\n  IgoGeoWorkspaceModule,\n  IgoFeatureModule,\n  IgoImportExportModule,\n  IgoMapModule,\n  IgoQueryModule,\n  IgoSearchModule,\n  IgoLayerModule,\n  //IgoSearchBarModule\n  provideIChercheReverseSearchSource,\n  provideNominatimSearchSource,\n  provideCoordinatesReverseSearchSource,\n  provideILayerSearchSource,\n  provideOsrmDirectionsSource,\n  provideOptionsApi,\n  //provideCadastreSearchSource,\n  provideStyleListOptions,\n  provideDefaultCoordinatesSearchResultFormatter,\n  CoordinatesSearchResultFormatter,\n  provideSearchSourceService,\n  SearchService\n} from '@igo2/geo';\nimport {\n  IgoContextManagerModule,\n  IgoContextMapButtonModule\n} from '@igo2/context';\n\nimport { IgoIntegrationModule } from '@igo2/integration';\nimport { MapOverlayModule } from './map-overlay/map-overlay.module';\nimport { AppSidenavModule } from './sidenav/sidenav.module';\n\nimport { PortalComponent } from './portal.component';\n\nimport { LegendButtonModule } from './legend-button/legend-button.module';\nimport { FooterModule } from './../footer/footer.module';\nimport { AppSideResultModule } from './sideresult/sideresult.module';\n\n@NgModule({\n  imports: [\n    CommonModule,\n    MatTooltipModule,\n    MatButtonModule,\n    MatIconModule,\n    IgoCoreModule,\n    IgoFeatureModule,\n    IgoMapModule,\n    IgoEntityModule,\n    IgoFlexibleModule,\n    IgoIntegrationModule,\n    IgoContextManagerModule,\n    IgoContextMapButtonModule,\n    FooterModule,\n    LegendButtonModule,\n    IgoLayerModule,\n    IgoWorkspaceModule,\n    IgoGeoWorkspaceModule,\n    IgoQueryModule.forRoot(),\n    IgoSearchModule.forRoot(),\n    IgoContextMapButtonModule,\n    MatSidenavModule,\n    MatDialogModule,\n    IgoActionModule,\n    IgoImportExportModule,\n    MapOverlayModule,\n    AppSidenavModule,\n    AppSideResultModule,\n    IgoPanelModule,\n    IgoBackdropModule,\n    IgoContextMenuModule,\n    IgoToolModule,\n    IgoEntityTableModule,\n    IgoEntityTablePaginatorModule,\n    //IgoSearchBarModule,\n    IgoAppSearchBarModule,\n    IgoAppSearchModule,\n    IgoAppSearchResultsToolModule,\n    IgoAppToolModule\n  ],\n  providers: [\n    provideCoordinatesReverseSearchSource(),\n    provideIChercheSearchSource(),\n    provideNominatimSearchSource(),\n    provideIChercheReverseSearchSource(),\n    provideNominatimSearchSource(),\n    provideIChercheReverseSearchSource(),\n    provideCoordinatesReverseSearchSource(),\n    provideILayerSearchSource(),\n    provideOsrmDirectionsSource(),\n    provideOptionsApi(),\n    //provideCadastreSearchSource(),\n    CoordinatesSearchResultFormatter,\n    provideDefaultCoordinatesSearchResultFormatter(),\n    provideDefaultIChercheSearchResultFormatter(),\n    provideSearchSourceService(),\n    SearchService,\n    IChercheSearchSource,\n    provideStyleListOptions({\n      path: './assets/list-style.json'\n    })\n  ],\n  exports: [PortalComponent],\n  declarations: [PortalComponent]\n})\nexport class PortalModule {}\n","import { NgModule } from '@angular/core';\nimport { CommonModule } from '@angular/common';\nimport { MenuComponent } from './menu.component';\nimport { HomeComponent } from './menu-pages/home/home.component';\nimport { MenuRoutingModule } from './menu-routing/menu-routing.module';\nimport { AboutComponent } from './menu-pages/about/about.component';\nimport { MapComponent } from './menu-pages/map/map.component';\nimport { HeaderModule } from '../header/header.module';\nimport { FooterModule } from '../footer/footer.module';\nimport { PortalModule } from '../portal';\nimport { MatToolbarModule } from '@angular/material/toolbar';\n@NgModule({\n  declarations: [\n    MenuComponent,\n    HomeComponent,\n    AboutComponent,\n    MapComponent\n  ],\n  imports: [\n    CommonModule,\n    MenuRoutingModule,\n    PortalModule,\n    HeaderModule,\n    FooterModule,\n    MatToolbarModule\n  ],\n  exports:[\n    MenuComponent,\n    MenuRoutingModule\n  ]\n})\nexport class MenuModule { }\n","import { LanguageOptions } from '@igo2/core';\nimport {\n  OptionsApiOptions,\n  Projection,\n  SearchSourceOptions,\n  CommonVectorStyleOptions\n} from '@igo2/geo';\n\ninterface Environment {\n  production: boolean;\n  igo: {\n    app: {\n      forceCoordsNA: boolean;\n    };\n    language?: LanguageOptions;\n    optionsApi?: OptionsApiOptions;\n    projections?: Projection[];\n    searchSources?: { [key: string]: SearchSourceOptions };\n    searchOverlayStyle?: {\n      base?: CommonVectorStyleOptions,\n      selection?: CommonVectorStyleOptions,\n      focus?: CommonVectorStyleOptions\n    };\n    queryOverlayStyle?: {\n      base?: CommonVectorStyleOptions,\n      selection?: CommonVectorStyleOptions,\n      focus?: CommonVectorStyleOptions\n    };\n  };\n}\n\nexport const environment: Environment = {\n  production: true,\n  igo: {\n    app: {\n      forceCoordsNA: true\n    },\n    language: {\n      prefix: ['./locale/', './particular/locale/']\n    },\n    optionsApi: {\n      url: '/apis/igo2/layers/options'\n    },\n    projections: [\n      {\n        code: 'EPSG:32198',\n        alias: 'Quebec Lambert',\n        def:\n          '+proj=lcc +lat_1=60 +lat_2=46 +lat_0=44 +lon_0=-68.5 +x_0=0 +y_0=0 \\\n          +ellps=GRS80 +towgs84=0,0,0,0,0,0,0 +units=m +no_defs',\n        extent: [-799574, 45802, 891595.4, 1849567.5]\n      },\n      {\n        code: 'EPSG:3798',\n        alias: 'MTQ Lambert',\n        def:\n          '+proj=lcc +lat_1=50 +lat_2=46 +lat_0=44 +lon_0=-70 +x_0=800000 +y_0=0 \\\n          +ellps=GRS80 +towgs84=0,0,0,0,0,0,0 +units=m +no_defs',\n        extent: [31796.5834, 158846.2231, 1813323.4284, 2141241.0978]\n      }\n    ],\n    searchSources: {\n      nominatim: {\n        available: false\n      },\n      storedqueries: {\n        enabled: false,\n        available: false\n      },\n      icherche: {\n        searchUrl: '/apis/icherche/',\n        order: 2,\n        params: {\n          limit: '8'\n        }\n      },\n      coordinatesreverse: {\n        showInPointerSummary: true\n      },\n      icherchereverse: {\n        showInPointerSummary: true,\n        searchUrl: '/apis/terrapi',\n        order: 3,\n        enabled: true\n      },\n      ilayer: {\n        searchUrl: '/apis/icherche/layers',\n        order: 4,\n        params: {\n          limit: '3'\n        }\n      },\n      cadastre: {\n        available: false\n      }\n    },\n    searchOverlayStyle: {\n      base: {\n        markerColor: '#5ed0fb', // marker fill\n        markerOpacity: 0.8, // marker opacity not applied if a rgba markerColor is provided\n        markerOutlineColor: '#a7e7ff', // marker contour\n        fillColor: '#5ed0fb', // poly\n        fillOpacity: 0.2, // poly fill opacity not applied if a rgba fillColor is provided\n        strokeColor: '#5ed0fb', // line and poly\n        strokeOpacity: 0.7, // line and poly not applied if a rgba strokeColor is provided\n        strokeWidth: 2 // line and poly\n      },\n      focus: {\n        markerColor: '#5ed0fb', // marker fill\n        markerOpacity: 1, // marker opacity not applied if a rgba markerColor is provided\n        markerOutlineColor: '#DFF7FF', // marker contour\n        fillColor: '#5ed0fb', // poly\n        fillOpacity: 0.3, // poly fill opacity not applied if a rgba fillColor is provided\n        strokeColor: '#DFF7FF', // line and poly\n        strokeOpacity: 1, // line and poly not applied if a rgba strokeColor is provided\n        strokeWidth: 2 // line and poly\n      },\n      selection: {\n        markerColor: '#00a1de', // marker fill\n        markerOpacity: 1, // marker opacity not applied if a rgba markerColor is provided\n        markerOutlineColor: '#ffffff', // marker contour\n        fillColor: '#00a1de', // poly\n        fillOpacity: 0.3, // poly fill opacity not applied if a rgba fillColor is provided\n        strokeColor: '#00A1DE', // line and poly\n        strokeOpacity: 1, // line and poly not applied if a rgba strokeColor is provided\n        strokeWidth: 2 // line and poly\n      }\n    },\n    queryOverlayStyle: {\n      base: {\n        markerColor: '#5ed0fb', // marker fill\n        markerOpacity: 0.8, // marker opacity not applied if a rgba markerColor is provided\n        markerOutlineColor: '#a7e7ff', // marker contour\n        fillColor: '#5ed0fb', // poly\n        fillOpacity: 0.2, // poly fill opacity not applied if a rgba fillColor is provided\n        strokeColor: '#5ed0fb', // line and poly\n        strokeOpacity: 0.7, // line and poly not applied if a rgba strokeColor is provided\n        strokeWidth: 2 // line and poly\n      },\n      focus: {\n        markerColor: '#5ed0fb', // marker fill\n        markerOpacity: 1, // marker opacity not applied if a rgba markerColor is provided\n        markerOutlineColor: '#DFF7FF', // marker contour\n        fillColor: '#5ed0fb', // poly\n        fillOpacity: 0.3, // poly fill opacity not applied if a rgba fillColor is provided\n        strokeColor: '#DFF7FF', // line and poly\n        strokeOpacity: 1, // line and poly not applied if a rgba strokeColor is provided\n        strokeWidth: 2 // line and poly\n      },\n      selection: {\n        markerColor: '#00a1de', // marker fill\n        markerOpacity: 1, // marker opacity not applied if a rgba markerColor is provided\n        markerOutlineColor: '#ffffff', // marker contour\n        fillColor: '#00a1de', // poly\n        fillOpacity: 0.3, // poly fill opacity not applied if a rgba fillColor is provided\n        strokeColor: '#00A1DE', // line and poly\n        strokeOpacity: 1, // line and poly not applied if a rgba strokeColor is provided\n        strokeWidth: 2 // line and poly\n      }\n    }\n  }\n};\n","import { Component } from '@angular/core';\nimport { ConfigService, LanguageService } from '@igo2/core';\n\n@Component({\n  selector: 'app-header',\n  templateUrl: './header.component.html',\n  styleUrls: ['./header.component.scss']\n})\nexport class HeaderComponent {\n\n  public headerLogo: string;\n  public headerLogoPrint: string;\n\n  constructor(\n    private configService: ConfigService,\n    protected languageService: LanguageService) {\n      this.computeHeader();\n    }\n\n  computeHeader() {\n    this.headerLogo = this.configService.getConfig('header.logo');\n    this.headerLogoPrint = this.configService.getConfig('header.logoPrint');\n  }\n\n  // Future translation system\n  /*changeLanguage() {\n    if (this.languageService.getLanguage() === 'fr'){\n      this.languageService.setLanguage('en');\n    } else {\n      this.languageService.setLanguage('fr');\n    }\n  }*/\n\n}\n","<mat-toolbar class = banner role = banner color=\"primary\">\n\t<div class=\"container\">\n\t\t<div class=\"row\">\n\t\t\t<div class=\"col-6 col-md-10 d-flex flex-wrap align-items-center zone-logo-title\">\n\t\t\t\t<a class=\"logo\" tabindex=\"5\" routerLink=\"\">\n                    <img id=\"header-logo\" alt=\"Logo\" src=\"{{headerLogo}}\">\n\t\t\t\t\t\n                </a>\n\t\t\t\t<img id=\"header-logo-print\" alt=\"Logo\" src=\"{{headerLogoPrint}}\" width=\"199\" height=\"60\" />\n\t\t\t\t<p lang=\"fr\" id=\"title-desktop\" class=\"zone-title  d-none d-md-block\">{{'header.title' | translate}}</p>\n\t\t\t</div>\n\t\t\t<div class=\"col-6 col-md-2 d-flex justify-content-end zone-links\">\n\t\t\t\t<ul class=\"nav flex-column\">\n\t\t\t\t\t<!--<li><button class=\"buttonLanguage\" disabled (click)=\"changeLanguage()\">{{'header.language'}}</button></li>-->\n\t\t\t\t\t<li><a rel=\"noopener noreferrer\" alt=\"('header.contactUsUrl' | translate)\" href=\"{{'header.contactUsUrl' | translate}}\" target=\"_blank\">{{'header.contactUs' | translate}}</a></li>\n\t\t\t\t</ul>\n\t\t\t</div>\n\t\t\t<p lang=\"fr\" id=\"title-mobile\" class=\"zone-title d-md-none col-12\"><a>{{'header.title' | translate}}</a></p>\n\t\t</div>\n\t</div>\n</mat-toolbar>","import { Component } from '@angular/core';\n\n@Component({\n  selector: 'app-menu',\n  templateUrl: './menu.component.html',\n  styleUrls: ['./menu.component.scss']\n})\nexport class MenuComponent {\n  public color = 'accent';\n\n  constructor() { }\n\n}\n","<mat-toolbar class=\"container headline\" color=\"accent\">\n  <div class=\"col-12 align-self-end\">\n    <nav class=\"navbar\">\n      <a class=\"nav-link nav-arrow left\" href=\"#menu-left\" routerLinkActive=\"active\">❮</a>\n      <div class=\"main-nav slick-track\">\n          <a class=\"nav-link\" routerLink=\"/\" routerLinkActive=\"active\" id=\"menu-left\" [routerLinkActiveOptions]=\"{exact:true}\">Accueil</a>\n          <a class=\"nav-link\" routerLink=\"/carte\" routerLinkActive=\"active\">Carte</a>\n          <a class=\"nav-link\" routerLink=\"/en-savoir-plus\" id=\"menu-right\" routerLinkActive=\"active\">En savoir plus</a>\n      </div>\n      <a class=\"nav-link nav-arrow right\" color=\"accent\" href=\"#menu-right\" routerLinkActive=\"active\">❯</a>\n    </nav>\n  </div>\n</mat-toolbar>\n<router-outlet></router-outlet>\n","<igo-spinner igoSpinnerActivity></igo-spinner>\n\n<app-header *ngIf=\"hasHeader\" #header></app-header>\n\n<app-menu *ngIf=\"hasMenu\"></app-menu>\n\n<app-portal *ngIf=\"!hasMenu\" [ngClass]=\"hasHeader? 'portal-hasHeader': 'portal'\"></app-portal>","import { Component, ElementRef, Renderer2, ViewChild } from '@angular/core';\nimport { Title, Meta } from '@angular/platform-browser';\nimport { zip } from 'rxjs';\nimport { map } from 'rxjs/operators';\nimport { userAgent } from '@igo2/utils';\nimport {\n  LanguageService,\n  ConfigService,\n  MessageService\n} from '@igo2/core';\nimport { AuthOptions } from '@igo2/auth';\n@Component({\n  selector: 'app-root',\n  templateUrl: './app.component.html',\n  styleUrls: ['./app.component.scss']\n})\nexport class AppComponent {\n  public authConfig: AuthOptions;\n  private themeClass = 'qcca-theme';\n  public hasHeader: boolean = true;\n  public hasFooter: boolean = true;\n  public hasMenu: boolean = false;\n\n  @ViewChild('searchBar', { read: ElementRef, static: true })\n  searchBar: ElementRef;\n\n  constructor(\n    protected languageService: LanguageService,\n    private configService: ConfigService,\n    private renderer: Renderer2,\n    private titleService: Title,\n    private metaService: Meta,\n    private messageService: MessageService\n  ) {\n   this.languageService.translate.getTranslation(this.languageService.getLanguage()).subscribe();\n\n    this.readTitleConfig();\n    this.readThemeConfig();\n    this.readDescriptionConfig();\n\n    this.detectOldBrowser();\n\n    this.hasHeader = this.configService.getConfig('header.hasHeader') === undefined ? false :\n      this.configService.getConfig('header.hasHeader');\n\n    this.hasFooter = this.configService.getConfig('hasFooter') === undefined ? false :\n      this.configService.getConfig('hasFooter');\n\n    this.hasMenu = this.configService.getConfig('hasMenu') === undefined ? false :\n      this.configService.getConfig('hasMenu');\n  }\n\n  private readTitleConfig() {\n    this.languageService.translate.get(this.configService.getConfig('title')).subscribe(title => {\n      if (title) {\n        this.titleService.setTitle(title);\n        this.metaService.addTag({ name: 'title', content: title });\n      }\n    });\n  }\n\n  private readThemeConfig() {\n    const theme = this.configService.getConfig('theme') || this.themeClass;\n    if (theme) {\n      this.renderer.addClass(document.body, theme);\n    }\n  }\n\n  private readDescriptionConfig() {\n    const description = this.configService.getConfig('description');\n    if (description) {\n      this.metaService.addTag({ name: 'description', content: description });\n    }\n  }\n\n  private detectOldBrowser() {\n    const oldBrowser = userAgent.satisfies({\n      ie: '<=11',\n      chrome: '<64',\n      firefox: '<60',\n      safari: '<=11'\n    });\n\n    if (oldBrowser) {\n      const translate = this.languageService.translate;\n      const title$ = translate.get('oldBrowser.title');\n      const message$ = translate.get('oldBrowser.message');\n      zip(title$, message$)\n        .pipe(\n          map(([title, message]) => ({\n            title,\n            message\n          }))\n        )\n        .subscribe((rep) =>\n          this.messageService.alert(rep.message, rep.title, {\n            timeOut: 15000\n          })\n        );\n    }\n  }\n}\n","import { BrowserModule, HammerModule } from '@angular/platform-browser';\nimport { NgModule } from '@angular/core';\nimport { RouterModule } from '@angular/router';\nimport { BrowserAnimationsModule } from '@angular/platform-browser/animations';\nimport { HeaderModule } from './pages/header/header.module';\nimport { FooterModule } from './pages/footer/footer.module';\nimport { MenuModule } from './pages/menu/menu.module';\n\nimport {\n  provideConfigOptions,\n  IgoMessageModule,\n  IgoGestureModule,\n  RouteService\n} from '@igo2/core';\nimport { IgoSpinnerModule, IgoStopPropagationModule } from '@igo2/common';\nimport {\n  provideStyleListOptions\n} from '@igo2/geo';\n\nimport { environment } from '../environments/environment';\nimport { PortalModule } from './pages';\nimport { AppComponent } from './app.component';\n\n@NgModule({\n  declarations: [AppComponent],\n  imports: [\n    BrowserModule,\n    BrowserAnimationsModule,\n    RouterModule.forRoot([]),\n    IgoGestureModule.forRoot(),\n    IgoMessageModule,\n    IgoSpinnerModule,\n    IgoStopPropagationModule,\n    PortalModule,\n    HammerModule,\n    HeaderModule,\n    FooterModule,\n    MenuModule\n    ],\n  providers: [\n    provideConfigOptions({\n      default: environment.igo,\n      path: './config/config.json'\n    }),\n    RouteService,\n    provideStyleListOptions({\n      path: './assets/list-style.json'\n    })\n  ],\n  bootstrap: [AppComponent]\n})\nexport class AppModule {}\n","import { enableProdMode } from '@angular/core';\nimport { platformBrowserDynamic } from '@angular/platform-browser-dynamic';\n\nimport { AppModule } from './app/app.module';\nimport { environment } from './environments/environment';\n\nimport 'hammerjs';\n\nif (environment.production) {\n  enableProdMode();\n}\n\nplatformBrowserDynamic()\n  .bootstrapModule(AppModule)\n  .catch(err => console.log(err));\n","var map = {\n\t\"./en.auth.json\": 44505,\n\t\"./en.common.json\": 13841,\n\t\"./en.context.json\": 2977,\n\t\"./en.core.json\": 8982,\n\t\"./en.geo.json\": 49853,\n\t\"./en.integration.json\": 38430,\n\t\"./en.json\": 90642,\n\t\"./fr.auth.json\": 13788,\n\t\"./fr.common.json\": 55144,\n\t\"./fr.context.json\": 65742,\n\t\"./fr.core.json\": 38783,\n\t\"./fr.geo.json\": 78405,\n\t\"./fr.integration.json\": 66409,\n\t\"./fr.json\": 60863\n};\n\n\nfunction webpackContext(req) {\n\tvar id = webpackContextResolve(req);\n\treturn __webpack_require__(id);\n}\nfunction webpackContextResolve(req) {\n\tif(!__webpack_require__.o(map, req)) {\n\t\tvar e = new Error(\"Cannot find module '\" + req + \"'\");\n\t\te.code = 'MODULE_NOT_FOUND';\n\t\tthrow e;\n\t}\n\treturn map[req];\n}\nwebpackContext.keys = function webpackContextKeys() {\n\treturn Object.keys(map);\n};\nwebpackContext.resolve = webpackContextResolve;\nmodule.exports = webpackContext;\nwebpackContext.id = 22356;","var map = {\n\t\"./af\": 62275,\n\t\"./af.js\": 62275,\n\t\"./ar\": 90857,\n\t\"./ar-dz\": 11218,\n\t\"./ar-dz.js\": 11218,\n\t\"./ar-kw\": 14754,\n\t\"./ar-kw.js\": 14754,\n\t\"./ar-ly\": 66680,\n\t\"./ar-ly.js\": 66680,\n\t\"./ar-ma\": 92178,\n\t\"./ar-ma.js\": 92178,\n\t\"./ar-sa\": 56522,\n\t\"./ar-sa.js\": 56522,\n\t\"./ar-tn\": 95682,\n\t\"./ar-tn.js\": 95682,\n\t\"./ar.js\": 90857,\n\t\"./az\": 70164,\n\t\"./az.js\": 70164,\n\t\"./be\": 79774,\n\t\"./be.js\": 79774,\n\t\"./bg\": 60947,\n\t\"./bg.js\": 60947,\n\t\"./bm\": 21832,\n\t\"./bm.js\": 21832,\n\t\"./bn\": 89650,\n\t\"./bn-bd\": 74477,\n\t\"./bn-bd.js\": 74477,\n\t\"./bn.js\": 89650,\n\t\"./bo\": 66005,\n\t\"./bo.js\": 66005,\n\t\"./br\": 98492,\n\t\"./br.js\": 98492,\n\t\"./bs\": 70534,\n\t\"./bs.js\": 70534,\n\t\"./ca\": 52061,\n\t\"./ca.js\": 52061,\n\t\"./cs\": 84737,\n\t\"./cs.js\": 84737,\n\t\"./cv\": 61167,\n\t\"./cv.js\": 61167,\n\t\"./cy\": 77996,\n\t\"./cy.js\": 77996,\n\t\"./da\": 9528,\n\t\"./da.js\": 9528,\n\t\"./de\": 14540,\n\t\"./de-at\": 49430,\n\t\"./de-at.js\": 49430,\n\t\"./de-ch\": 67978,\n\t\"./de-ch.js\": 67978,\n\t\"./de.js\": 14540,\n\t\"./dv\": 83426,\n\t\"./dv.js\": 83426,\n\t\"./el\": 6616,\n\t\"./el.js\": 6616,\n\t\"./en-au\": 63816,\n\t\"./en-au.js\": 63816,\n\t\"./en-ca\": 32162,\n\t\"./en-ca.js\": 32162,\n\t\"./en-gb\": 83305,\n\t\"./en-gb.js\": 83305,\n\t\"./en-ie\": 61954,\n\t\"./en-ie.js\": 61954,\n\t\"./en-il\": 43060,\n\t\"./en-il.js\": 43060,\n\t\"./en-in\": 59923,\n\t\"./en-in.js\": 59923,\n\t\"./en-nz\": 13540,\n\t\"./en-nz.js\": 13540,\n\t\"./en-sg\": 16505,\n\t\"./en-sg.js\": 16505,\n\t\"./eo\": 41907,\n\t\"./eo.js\": 41907,\n\t\"./es\": 86640,\n\t\"./es-do\": 41246,\n\t\"./es-do.js\": 41246,\n\t\"./es-mx\": 56131,\n\t\"./es-mx.js\": 56131,\n\t\"./es-us\": 36430,\n\t\"./es-us.js\": 36430,\n\t\"./es.js\": 86640,\n\t\"./et\": 62551,\n\t\"./et.js\": 62551,\n\t\"./eu\": 32711,\n\t\"./eu.js\": 32711,\n\t\"./fa\": 54572,\n\t\"./fa.js\": 54572,\n\t\"./fi\": 33390,\n\t\"./fi.js\": 33390,\n\t\"./fil\": 87860,\n\t\"./fil.js\": 87860,\n\t\"./fo\": 48216,\n\t\"./fo.js\": 48216,\n\t\"./fr\": 99291,\n\t\"./fr-ca\": 98527,\n\t\"./fr-ca.js\": 98527,\n\t\"./fr-ch\": 58407,\n\t\"./fr-ch.js\": 58407,\n\t\"./fr.js\": 99291,\n\t\"./fy\": 47054,\n\t\"./fy.js\": 47054,\n\t\"./ga\": 49540,\n\t\"./ga.js\": 49540,\n\t\"./gd\": 73917,\n\t\"./gd.js\": 73917,\n\t\"./gl\": 51486,\n\t\"./gl.js\": 51486,\n\t\"./gom-deva\": 56245,\n\t\"./gom-deva.js\": 56245,\n\t\"./gom-latn\": 48868,\n\t\"./gom-latn.js\": 48868,\n\t\"./gu\": 59652,\n\t\"./gu.js\": 59652,\n\t\"./he\": 89019,\n\t\"./he.js\": 89019,\n\t\"./hi\": 42040,\n\t\"./hi.js\": 42040,\n\t\"./hr\": 63402,\n\t\"./hr.js\": 63402,\n\t\"./hu\": 79322,\n\t\"./hu.js\": 79322,\n\t\"./hy-am\": 27609,\n\t\"./hy-am.js\": 27609,\n\t\"./id\": 57942,\n\t\"./id.js\": 57942,\n\t\"./is\": 98275,\n\t\"./is.js\": 98275,\n\t\"./it\": 73053,\n\t\"./it-ch\": 4378,\n\t\"./it-ch.js\": 4378,\n\t\"./it.js\": 73053,\n\t\"./ja\": 46176,\n\t\"./ja.js\": 46176,\n\t\"./jv\": 679,\n\t\"./jv.js\": 679,\n\t\"./ka\": 92726,\n\t\"./ka.js\": 92726,\n\t\"./kk\": 72953,\n\t\"./kk.js\": 72953,\n\t\"./km\": 86957,\n\t\"./km.js\": 86957,\n\t\"./kn\": 59181,\n\t\"./kn.js\": 59181,\n\t\"./ko\": 47148,\n\t\"./ko.js\": 47148,\n\t\"./ku\": 27752,\n\t\"./ku.js\": 27752,\n\t\"./ky\": 65675,\n\t\"./ky.js\": 65675,\n\t\"./lb\": 41263,\n\t\"./lb.js\": 41263,\n\t\"./lo\": 65746,\n\t\"./lo.js\": 65746,\n\t\"./lt\": 11143,\n\t\"./lt.js\": 11143,\n\t\"./lv\": 38753,\n\t\"./lv.js\": 38753,\n\t\"./me\": 44054,\n\t\"./me.js\": 44054,\n\t\"./mi\": 31573,\n\t\"./mi.js\": 31573,\n\t\"./mk\": 30202,\n\t\"./mk.js\": 30202,\n\t\"./ml\": 68523,\n\t\"./ml.js\": 68523,\n\t\"./mn\": 79794,\n\t\"./mn.js\": 79794,\n\t\"./mr\": 56681,\n\t\"./mr.js\": 56681,\n\t\"./ms\": 56975,\n\t\"./ms-my\": 39859,\n\t\"./ms-my.js\": 39859,\n\t\"./ms.js\": 56975,\n\t\"./mt\": 3691,\n\t\"./mt.js\": 3691,\n\t\"./my\": 5152,\n\t\"./my.js\": 5152,\n\t\"./nb\": 7607,\n\t\"./nb.js\": 7607,\n\t\"./ne\": 21526,\n\t\"./ne.js\": 21526,\n\t\"./nl\": 86368,\n\t\"./nl-be\": 40076,\n\t\"./nl-be.js\": 40076,\n\t\"./nl.js\": 86368,\n\t\"./nn\": 68420,\n\t\"./nn.js\": 68420,\n\t\"./oc-lnc\": 51906,\n\t\"./oc-lnc.js\": 51906,\n\t\"./pa-in\": 94504,\n\t\"./pa-in.js\": 94504,\n\t\"./pl\": 54721,\n\t\"./pl.js\": 54721,\n\t\"./pt\": 74645,\n\t\"./pt-br\": 54548,\n\t\"./pt-br.js\": 54548,\n\t\"./pt.js\": 74645,\n\t\"./ro\": 71977,\n\t\"./ro.js\": 71977,\n\t\"./ru\": 26042,\n\t\"./ru.js\": 26042,\n\t\"./sd\": 78849,\n\t\"./sd.js\": 78849,\n\t\"./se\": 27739,\n\t\"./se.js\": 27739,\n\t\"./si\": 50084,\n\t\"./si.js\": 50084,\n\t\"./sk\": 92449,\n\t\"./sk.js\": 92449,\n\t\"./sl\": 23086,\n\t\"./sl.js\": 23086,\n\t\"./sq\": 33139,\n\t\"./sq.js\": 33139,\n\t\"./sr\": 30607,\n\t\"./sr-cyrl\": 30063,\n\t\"./sr-cyrl.js\": 30063,\n\t\"./sr.js\": 30607,\n\t\"./ss\": 40131,\n\t\"./ss.js\": 40131,\n\t\"./sv\": 21665,\n\t\"./sv.js\": 21665,\n\t\"./sw\": 5642,\n\t\"./sw.js\": 5642,\n\t\"./ta\": 33622,\n\t\"./ta.js\": 33622,\n\t\"./te\": 74825,\n\t\"./te.js\": 74825,\n\t\"./tet\": 48336,\n\t\"./tet.js\": 48336,\n\t\"./tg\": 39238,\n\t\"./tg.js\": 39238,\n\t\"./th\": 99463,\n\t\"./th.js\": 99463,\n\t\"./tk\": 39986,\n\t\"./tk.js\": 39986,\n\t\"./tl-ph\": 29672,\n\t\"./tl-ph.js\": 29672,\n\t\"./tlh\": 40043,\n\t\"./tlh.js\": 40043,\n\t\"./tr\": 51212,\n\t\"./tr.js\": 51212,\n\t\"./tzl\": 50110,\n\t\"./tzl.js\": 50110,\n\t\"./tzm\": 80482,\n\t\"./tzm-latn\": 38309,\n\t\"./tzm-latn.js\": 38309,\n\t\"./tzm.js\": 80482,\n\t\"./ug-cn\": 42495,\n\t\"./ug-cn.js\": 42495,\n\t\"./uk\": 54157,\n\t\"./uk.js\": 54157,\n\t\"./ur\": 80984,\n\t\"./ur.js\": 80984,\n\t\"./uz\": 64141,\n\t\"./uz-latn\": 43662,\n\t\"./uz-latn.js\": 43662,\n\t\"./uz.js\": 64141,\n\t\"./vi\": 12607,\n\t\"./vi.js\": 12607,\n\t\"./x-pseudo\": 66460,\n\t\"./x-pseudo.js\": 66460,\n\t\"./yo\": 92948,\n\t\"./yo.js\": 92948,\n\t\"./zh-cn\": 62658,\n\t\"./zh-cn.js\": 62658,\n\t\"./zh-hk\": 39352,\n\t\"./zh-hk.js\": 39352,\n\t\"./zh-mo\": 38274,\n\t\"./zh-mo.js\": 38274,\n\t\"./zh-tw\": 98451,\n\t\"./zh-tw.js\": 98451\n};\n\n\nfunction webpackContext(req) {\n\tvar id = webpackContextResolve(req);\n\treturn __webpack_require__(id);\n}\nfunction webpackContextResolve(req) {\n\tif(!__webpack_require__.o(map, req)) {\n\t\tvar e = new Error(\"Cannot find module '\" + req + \"'\");\n\t\te.code = 'MODULE_NOT_FOUND';\n\t\tthrow e;\n\t}\n\treturn map[req];\n}\nwebpackContext.keys = function webpackContextKeys() {\n\treturn Object.keys(map);\n};\nwebpackContext.resolve = webpackContextResolve;\nmodule.exports = webpackContext;\nwebpackContext.id = 46700;"]}