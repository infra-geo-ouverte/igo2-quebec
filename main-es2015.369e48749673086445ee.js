(self.webpackChunkigo2_quebec=self.webpackChunkigo2_quebec||[]).push([[179],{98255:function(e){function t(e){return Promise.resolve().then(function(){var t=new Error("Cannot find module '"+e+"'");throw t.code="MODULE_NOT_FOUND",t})}t.keys=function(){return[]},t.resolve=t,t.id=98255,e.exports=t},78382:function(e,t,i){"use strict";var o=i(4919),n=i(91477),a=i(3259),s=i(99613),r=i(40093),c=i(51503),l=i(63266);class p{constructor(){}}p.\u0275fac=function(e){return new(e||p)},p.\u0275cmp=n.Xpm({type:p,selectors:[["app-menu-home"]],decls:15,vars:0,consts:[[1,"container-fluid","page"],[1,"container"],[1,"row"],[1,"d-block","themeTitre"],[2,"display","inline"],["href","https://github.com/infra-geo-ouverte/igo2","target","_blank","rel","noreferrer",2,"display","inline"]],template:function(e,t){1&e&&(n.TgZ(0,"div",0),n.TgZ(1,"div",1),n.TgZ(2,"div",2),n.TgZ(3,"h1",3),n._uU(4,"Accueil"),n.qZA(),n.TgZ(5,"h2"),n._uU(6,"Infrastructure g\xe9omatique ouverte 2.0 (IGO2) / Open GIS Infrastructure 2.0"),n.qZA(),n.TgZ(7,"h4"),n._uU(8,"Qu'est-ce qu'IGO?"),n.qZA(),n.TgZ(9,"p"),n._uU(10,"IGO2 est une solution Web gratuite en g\xe9omatique bas\xe9e sur Angular - Material, OpenLayers et IGO2lib. IGO2 permet de tirer profit d\u2019une multitude de donn\xe9es g\xe9ographiques gr\xe2ce \xe0 une interface cartographique accessible par un navigateur Web sur un poste de travail et par un appareil mobile. IGO2 a \xe9t\xe9 initi\xe9 par l'administration publique du Qu\xe9bec (Canada) et issu d\u2019un travail collaboratif bas\xe9 sur la philosophie des logiciels libres et ouverts (\xab open source \xbb). Les membres du public en g\xe9omatique et du Web qui soumettent des contributions conservent leurs droits d'auteur s'ils partagent leur code source selon la LICENCE LiLiQ-R de type LGPL."),n.qZA(),n.TgZ(11,"p",4),n._uU(12,"T\xe9l\xe9chargement et code source : "),n.TgZ(13,"a",5),n._uU(14,"https://github.com/infra-geo-ouverte/igo2"),n.qZA(),n.qZA(),n.qZA(),n.qZA(),n.qZA())},encapsulation:2});class h{constructor(){}}h.\u0275fac=function(e){return new(e||h)},h.\u0275cmp=n.Xpm({type:h,selectors:[["app-about"]],decls:83,vars:0,consts:[[1,"container-fluid","page"],[1,"container"],[1,"row"],[1,"d-block","themeTitre"],["href","http://loripsum.net/","target","_blank"],["cite","http://loripsum.net"]],template:function(e,t){1&e&&(n.TgZ(0,"div",0),n.TgZ(1,"div",1),n.TgZ(2,"div",2),n.TgZ(3,"h1",3),n._uU(4,"En savoir plus"),n.qZA(),n.TgZ(5,"h2"),n._uU(6,"Titre"),n.qZA(),n.TgZ(7,"p"),n._uU(8,"Paragraphe : Lorem ipsum dolor sit amet, consectetur adipiscing elit. Tu enim ista lenius, hic Stoicorum more nos vexat. Quo studio Aristophanem putamus aetatem in litteris duxisse? Honesta oratio, Socratica, Platonis etiam. Vitiosum est enim in dividendo partem in genere numerare. "),n.TgZ(9,"i"),n._uU(10,"Non est igitur voluptas bonum."),n.qZA(),n._uU(11," Duo Reges: constructio interrete. Non autem hoc: igitur ne illud quidem. "),n.TgZ(12,"b"),n._uU(13,"Magna laus."),n.qZA(),n.TgZ(14,"b"),n._uU(15,"Quis istum dolorem timet?"),n.qZA(),n._uU(16," Quod autem satis est, eo quicquid accessit, nimium est; "),n.TgZ(17,"b"),n._uU(18,"Sed ille, ut dixi, vitiose."),n.qZA(),n.qZA(),n.TgZ(19,"p"),n._uU(20,"Cur tantas regiones barbarorum pedibus obiit, tot maria transmisit? "),n.TgZ(21,"a",4),n._uU(22,"Nulla erit controversia."),n.qZA(),n._uU(23," Prave, nequiter, turpiter cenabat; "),n.TgZ(24,"code"),n._uU(25,"Multoque hoc melius nos veriusque quam Stoici."),n.qZA(),n._uU(26," Contineo me ab exemplis. "),n.TgZ(27,"b"),n._uU(28,"Sed nimis multa."),n.qZA(),n.TgZ(29,"code"),n._uU(30,"Nos vero, inquit ille;"),n.qZA(),n.TgZ(31,"mark"),n._uU(32,"Occultum facinus esse potuerit, gaudebit;"),n.qZA(),n.qZA(),n.TgZ(33,"blockquote",5),n._uU(34," Blockquote Non quam nostram quidem, inquit Pomponius iocans; "),n.qZA(),n.TgZ(35,"ul"),n.TgZ(36,"li"),n._uU(37,"Iam doloris medicamenta illa Epicurea tamquam de narthecio proment: Si gravis, brevis;"),n.qZA(),n.TgZ(38,"li"),n._uU(39,"Ergo et avarus erit, sed finite, et adulter, verum habebit modum, et luxuriosus eodem modo."),n.qZA(),n.TgZ(40,"li"),n._uU(41,"Sedulo, inquam, faciam."),n.qZA(),n.TgZ(42,"li"),n._uU(43,"Quid enim tanto opus est instrumento in optimis artibus comparandis?"),n.qZA(),n.TgZ(44,"li"),n._uU(45,"Sic, et quidem diligentius saepiusque ista loquemur inter nos agemusque communiter."),n.qZA(),n.qZA(),n.TgZ(46,"p"),n.TgZ(47,"b"),n._uU(48," Bold Inde igitur, inquit, ordiendum est."),n.qZA(),n._uU(49," Quis hoc dicit? Quamquam te quidem video minime esse deterritum. "),n.TgZ(50,"i"),n._uU(51,"Bonum incolumis acies: misera caecitas."),n.qZA(),n._uU(52," Indicant pueri, in quibus ut in speculis natura cernitur. Duae sunt enim res quoque, ne tu verba solum putes. "),n.TgZ(53,"code"),n._uU(54,"Est enim effectrix multarum et magnarum voluptatum."),n.qZA(),n.qZA(),n.TgZ(55,"pre"),n._uU(56," Pre Corporis igitur nostri partes totaque figura et forma et\n            statura quam apta ad naturam sit, apparet, neque est dubium,\n            quin frons, oculi, aures et reliquae partes quales propriae\n            sint hominis intellegatur.\n\n            Pungunt quasi aculeis interrogatiunculis angustis, quibus\n            etiam qui assentiuntur nihil commutantur animo et idem\n            abeunt, qui venerant.\n            "),n.qZA(),n.TgZ(57,"ol"),n.TgZ(58,"li"),n._uU(59,"Atqui perspicuum est hominem e corpore animoque constare, cum primae sint animi partes, secundae corporis."),n.qZA(),n.TgZ(60,"li"),n._uU(61,"Nonne videmus quanta perturbatio rerum omnium consequatur, quanta confusio?"),n.qZA(),n.qZA(),n.TgZ(62,"dl"),n.TgZ(63,"dt"),n.TgZ(64,"dfn"),n._uU(65,"Stoicos roga."),n.qZA(),n.qZA(),n.TgZ(66,"dd"),n._uU(67,"Quid enim de amicitia statueris utilitatis causa expetenda vides."),n.qZA(),n.TgZ(68,"dt"),n.TgZ(69,"dfn"),n._uU(70,"Qui convenit?"),n.qZA(),n.qZA(),n.TgZ(71,"dd"),n._uU(72,"Que Manilium, ab iisque M."),n.qZA(),n.TgZ(73,"dt"),n.TgZ(74,"dfn"),n._uU(75,"Paria sunt igitur."),n.qZA(),n.qZA(),n.TgZ(76,"dd"),n._uU(77,"Quamquam ab iis philosophiam et omnes ingenuas disciplinas habemus;"),n.qZA(),n.TgZ(78,"dt"),n.TgZ(79,"dfn"),n._uU(80,"Confecta res esset."),n.qZA(),n.qZA(),n.TgZ(81,"dd"),n._uU(82,"Cupiditates non Epicuri divisione finiebat, sed sua satietate."),n.qZA(),n.qZA(),n.qZA(),n.qZA(),n.qZA())},encapsulation:2});var d=i(76491),u=i(79097),g=i(80639),m=i(78767),f=i(53466),b=i(20088),v=i(91191),x=i(34301),y=i(5883),S=i(66739),w=i(47150),O=i(2240),C=(i(97223),i(82458));var P=i(30536),M=i(58180),T=i(18931),k=i(80902),Z=i(33927),_=i(33697),j=i(32475),$=i(59791),q=i(13828);function R(e,t){1&e&&(n.TgZ(0,"div",2),n.TgZ(1,"section",3),n.TgZ(2,"h4"),n.TgZ(3,"strong"),n._uU(4),n.ALo(5,"translate"),n.qZA(),n.qZA(),n.TgZ(6,"p"),n.TgZ(7,"strong"),n._uU(8),n.ALo(9,"translate"),n.qZA(),n.qZA(),n._UZ(10,"div",4),n.ALo(11,"sanitizeHtml"),n.ALo(12,"translate"),n.qZA(),n.qZA()),2&e&&(n.xp6(4),n.Oqu(n.lcZ(5,3,"igo.integration.searchResultsTool.noResults")),n.xp6(4),n.Oqu(n.lcZ(9,5,"igo.integration.searchResultsTool.doSearch")),n.xp6(2),n.Q6J("innerHTML",n.lcZ(11,7,n.lcZ(12,9,"igo.integration.searchResultsTool.examples")),n.oJD))}function A(e,t){if(1&e&&n._UZ(0,"igo-search-add-button",10),2&e){const e=t.result,i=n.oxw(2);n.Q6J("map",i.map)("layer",e)}}function E(e,t){if(1&e){const e=n.EpF();n.TgZ(0,"igo-flexible",5,6),n.ALo(2,"async"),n.TgZ(3,"div",7),n.TgZ(4,"igo-search-results",8),n.NdJ("resultFocus",function(t){return n.CHM(e),n.oxw().onResultFocus(t)})("resultSelect",function(t){return n.CHM(e),n.oxw().onResultSelect(t)})("resultUnfocus",function(t){return n.CHM(e),n.oxw().onResultUnfocus(t)})("resultMouseenter",function(t){return n.CHM(e),n.oxw().onResultFocus(t)})("resultMouseleave",function(t){return n.CHM(e),n.oxw().onResultUnfocus(t)})("moreResults",function(t){return n.CHM(e),n.oxw().onSearch(t)}),n.YNc(5,A,1,2,"ng-template",null,9,n.W1O),n.qZA(),n.qZA(),n.qZA()}if(2&e){const e=n.oxw();n.Q6J("state",n.lcZ(2,6,e.feature$)?e.topPanelState:"initial"),n.xp6(4),n.Q6J("store",e.store)("showIcons",e.showIcons)("term",e.term)("termSplitter",e.termSplitter)("settingsChange$",e.settingsChange$)}}let F=class{constructor(e,t,i,o,n,a){this.mapState=e,this.searchState=t,this.elRef=i,this.toolState=o,this.directionState=n,this.showIcons=!0,this.topPanelStateDefault="expanded",this.hasFeatureEmphasisOnSelection=!1,this.shownResultsGeometries=[],this.shownResultsEmphasisGeometries=[],this.focusedResult$=new d.X(void 0),this.isSelectedResultOutOfView$=new d.X(!1),this.debouncedEmpty$=new d.X(!0),this.term="",this.settingsChange$=new d.X(void 0),this.topPanelState$=new d.X("initial"),this.format=new y.Z,this.hasFeatureEmphasisOnSelection=a.getConfig("hasFeatureEmphasisOnSelection")}get store(){return this.searchState.store}get map(){return this.mapState.map}get featureTitle(){return this.feature?(0,w.TF)(this.feature):void 0}get feature$(){return this.store.stateView.firstBy$(e=>e.state.focused).pipe((0,Z.U)(e=>this.feature=e?e.entity.data:void 0))}set topPanelState(e){this.topPanelState$.next(e)}get topPanelState(){return this.topPanelState$.value}get termSplitter(){return this.searchState.searchTermSplitter$.value}ngOnInit(){this.searchTerm$$=this.searchState.searchTerm$.subscribe(e=>{null!=e&&(this.term=e)});for(const e of this.store.stateView.all$().value)!0===this.store.state.get(e.entity).selected&&(this.topPanelState="expanded");this.searchState.searchSettingsChange$.subscribe(()=>{this.settingsChange$.next(!0)}),this.topPanelState$$=this.topPanelState$.subscribe(()=>{const e=this.computeElementRef()[0],t=this.computeElementRef()[1];t&&setTimeout(()=>{this.isScrolledIntoView(e,t)||this.adjustTopPanel(e,t)},w.dF.transitionTime+50)}),this.hasFeatureEmphasisOnSelection&&(this.searchState.focusedOrResolution$$||(this.searchState.focusedOrResolution$$=(0,u.aj)([this.focusedResult$,this.map.viewController.resolution$]).subscribe(e=>this.buildResultEmphasis(e[0],"focused"))),this.searchState.selectedOrResolution$$||(this.searchState.selectedOrResolution$$=(0,u.aj)([this.searchState.selectedResult$,this.map.viewController.resolution$]).subscribe(e=>this.buildResultEmphasis(e[0],"selected")))),this.monitorResultOutOfView(),this.showResultsGeometries$$=(0,u.aj)([this.searchState.searchResultsGeometryEnabled$,this.store.stateView.all$(),this.focusedResult$,this.searchState.selectedResult$,this.searchState.searchTerm$,this.map.viewController.resolution$]).subscribe(e=>{const t=e[0],i=e[1];this.hasFeatureEmphasisOnSelection&&this.clearFeatureEmphasis("shown"),this.shownResultsGeometries.map(e=>this.map.queryResultsOverlay.removeFeature(e)),i.filter(e=>e.entity.meta.dataType===O.D97&&e.entity.data.geometry&&!e.state.selected&&!e.state.focused).map(e=>{var i;t&&(e.entity.data.meta.style=(0,O.eU6)(Object.assign({},{feature:e.entity.data},this.searchState.searchOverlayStyle,(null===(i=e.entity.style)||void 0===i?void 0:i.base)?e.entity.style.base:{})),this.shownResultsGeometries.push(e.entity.data),this.map.queryResultsOverlay.addFeature(e.entity.data,O.bAZ.None),this.hasFeatureEmphasisOnSelection&&this.buildResultEmphasis(e.entity,"shown"))})}),this.debouncedEmpty$$=this.store.stateView.empty$.pipe((0,g.b)(1500)).subscribe(e=>this.debouncedEmpty$.next(e))}monitorResultOutOfView(){this.isSelectedResultOutOfView$$=(0,u.aj)([this.map.viewController.state$,this.searchState.selectedResult$]).pipe((0,g.b)(100)).subscribe(e=>{const t=e[1];if(t){if(t.data.geometry){const e=(0,O.zMd)(t.data,this.map.projection),i=(0,O.HgW)(this.map,[e]);this.isSelectedResultOutOfView$.next((0,O.brJ)(this.map,i))}}else this.isSelectedResultOutOfView$.next(!1)})}buildResultEmphasis(e,t){var i,o,n;if("shown"!==t&&this.clearFeatureEmphasis(t),!e||!e.data.geometry)return;const a=(0,O.zMd)(e.data,this.map.projection).getGeometry();if((0,O.fle)(this.map,a.getExtent(),.0025)){const s=a.getExtent(),r=s[0]+(s[2]-s[0])/2,c=s[1]+(s[3]-s[1])/2,l=new _.Z({name:`${t}AbstractResult'`,geometry:new j.Z([r,c])}),p=(0,O.ve2)(l,this.map.projection);let h,d=0;switch(t){case"focused":h=(0,O.DQ6)(Object.assign({},{feature:p},this.searchState.searchOverlayStyleFocus,(null===(i=e.style)||void 0===i?void 0:i.focus)?e.style.focus:{})),d=2;break;case"shown":h=(0,O.eU6)(Object.assign({},{feature:p},this.searchState.searchOverlayStyle,(null===(o=e.style)||void 0===o?void 0:o.base)?e.style.base:{}));break;case"selected":h=(0,O.DQ6)(Object.assign({},{feature:p},this.searchState.searchOverlayStyleSelection,(null===(n=e.style)||void 0===n?void 0:n.selection)?e.style.selection:{})),d=1}p.meta.style=h,p.meta.style.setZIndex(2e3+d),this.map.searchResultsOverlay.addFeature(p,O.bAZ.None),"focused"===t&&(this.abstractFocusedResult=p),"selected"===t&&(this.abstractSelectedResult=p),"shown"===t&&this.shownResultsEmphasisGeometries.push(p)}else this.clearFeatureEmphasis(t)}clearFeatureEmphasis(e){"focused"===e&&this.abstractFocusedResult&&(this.map.searchResultsOverlay.removeFeature(this.abstractFocusedResult),this.abstractFocusedResult=void 0),"selected"===e&&this.abstractSelectedResult&&(this.map.searchResultsOverlay.removeFeature(this.abstractSelectedResult),this.abstractSelectedResult=void 0),"shown"===e&&(this.shownResultsEmphasisGeometries.map(e=>this.map.searchResultsOverlay.removeFeature(e)),this.shownResultsEmphasisGeometries=[])}ngOnDestroy(){this.topPanelState$$.unsubscribe(),this.searchTerm$$.unsubscribe(),this.isSelectedResultOutOfView$$&&this.isSelectedResultOutOfView$$.unsubscribe(),this.showResultsGeometries$$&&this.showResultsGeometries$$.unsubscribe(),this.getRoute$$&&this.getRoute$$.unsubscribe(),this.debouncedEmpty$$&&this.debouncedEmpty$$.unsubscribe()}onResultFocus(e){var t;if(this.focusedResult$.next(e),e.meta.dataType===O.D97&&e.data.geometry){e.data.meta.style=(0,O.DQ6)(Object.assign({},{feature:e.data},this.searchState.searchOverlayStyleFocus,(null===(t=e.style)||void 0===t?void 0:t.focus)?e.style.focus:{}));const i=this.map.searchResultsOverlay.dataSource.ol.getFeatureById(e.meta.id);if(i)return void i.setStyle(e.data.meta.style);this.map.searchResultsOverlay.addFeature(e.data,O.bAZ.None)}}onResultUnfocus(e){var t;if(this.focusedResult$.next(void 0),e.meta.dataType===O.D97){if(!0===this.store.state.get(e).selected){const i=this.map.searchResultsOverlay.dataSource.ol.getFeatureById(e.meta.id);if(i){const o=(0,O.DQ6)(Object.assign({},{feature:e.data},this.searchState.searchOverlayStyleFocus,(null===(t=e.style)||void 0===t?void 0:t.focus)?e.style.focus:{}));i.setStyle(o)}return}this.map.searchResultsOverlay.removeFeature(e.data)}}onResultSelect(e){this.map.searchResultsOverlay.dataSource.ol.clear(),this.tryAddFeatureToMap(e)}onSearch(e){const t=e.results,i=this.store.entities$.value.filter(t=>t.source!==e.research.source).concat(t);this.store.load(i);for(const o of this.store.all())!0===this.store.state.get(o).focused&&!0!==this.store.state.get(o).selected&&this.store.state.update(o,{focused:!1},!0);setTimeout(()=>{const t=this.elRef.nativeElement.querySelector("igo-list");let i;e.research.request.subscribe(e=>{i=e[0]&&e[0].source?"icherche"===e[0].source.getId()?t.querySelector(".icherche .moreResults"):"ilayer"===e[0].source.getId()?t.querySelector(".ilayer .moreResults"):"nominatim"===e[0].source.getId()?t.querySelector(".nominatim .moreResults"):t.querySelector("."+e[0].source.getId()+" .moreResults"):null,null!==i&&!this.isScrolledIntoView(t,i)&&(t.scrollTop=i.offsetTop+i.offsetHeight-t.clientHeight)})},250)}computeElementRef(){const e=document.getElementsByTagName("igo-search-results-item"),t=this.elRef.nativeElement.getElementsByTagName("igo-list")[0];let i;for(let o=0;o<e.length;o++)e[o].className.includes("igo-list-item-selected")&&(i=e[o]);return[t,i]}adjustTopPanel(e,t){this.isScrolledIntoView(e,t)||(e.scrollTop=t.offsetTop+t.children[0].offsetHeight-e.clientHeight)}toggleTopPanel(){"expanded"===this.topPanelState?this.topPanelState="collapsed":this.topPanelState="expanded"}zoomToFeatureExtent(){if(this.feature.geometry){const e=this.format.readFeature(this.feature,{dataProjection:this.feature.projection,featureProjection:this.map.projection});(0,O.ybU)(this.map,[e],O.bAZ.Zoom)}}tryAddFeatureToMap(e){var t;if(e.meta.dataType!==O.D97)return;const i=e.data;!i.geometry||(i.meta.style=(0,O.DQ6)(Object.assign({},{feature:i},this.searchState.searchOverlayStyleSelection,(null===(t=e.style)||void 0===t?void 0:t.selection)?e.style.selection:{})),this.map.searchResultsOverlay.addFeature(i))}isScrolledIntoView(e,t){const i=e.scrollTop,o=i+e.clientHeight,n=t.offsetTop;return n+t.clientHeight+6<=o&&n>=i}getRoute(){this.toolState.toolbox.activateTool("directions"),this.directionState.stopsStore.clearStops(),setTimeout(()=>{let e=!1;this.getRoute$$&&this.getRoute$$.unsubscribe(),this.getRoute$$=this.directionState.stopsStore.storeInitialized$.subscribe(t=>{if(this.directionState.stopsStore.storeInitialized$.value&&!e){e=!0;const t=this.directionState.stopsStore.all().find(e=>1===e.position);let i;if(this.feature.geometry)if("Point"===this.feature.geometry.type)i=[this.feature.geometry.coordinates[0],this.feature.geometry.coordinates[1]];else{const e=(0,$.Z)(this.feature.geometry);i=[e.geometry.coordinates[0],e.geometry.coordinates[1]]}if(t.text=this.featureTitle,t.coordinates=i,this.directionState.stopsStore.update(t),this.map.geolocationController.position$.value){const e=this.map.geolocationController.position$.value,t=this.directionState.stopsStore.all().find(e=>0===e.position),i=v.vs(e.position,e.projection,"EPSG:4326"),o=(0,O.lQj)([i[0],i[1]],6);t.text=o.join(","),t.coordinates=o,this.directionState.stopsStore.update(t)}}})},250)}};F.\u0275fac=function(e){return new(e||F)(n.Y36(P.U5),n.Y36(P.po),n.Y36(n.SBq),n.Y36(P.EH),n.Y36(P.Nw),n.Y36(c.E4))},F.\u0275cmp=n.Xpm({type:F,selectors:[["app-search-results-tool"]],inputs:{showIcons:"showIcons",topPanelStateDefault:"topPanelStateDefault",topPanelState:"topPanelState"},decls:4,vars:6,consts:[["style","margin: 10px;",4,"ngIf"],["initial","100%","initialMobile","100%","collapsed","calc(100% - 58px)","collapsedMobile","calc(100% - 58px)","expanded","60%","expandedMobile","60%",3,"state",4,"ngIf"],[2,"margin","10px"],[1,"mat-typography"],[3,"innerHTML"],["initial","100%","initialMobile","100%","collapsed","calc(100% - 58px)","collapsedMobile","calc(100% - 58px)","expanded","60%","expandedMobile","60%",3,"state"],["topPanel",""],[1,"igo-content"],["placeholder","false",3,"store","showIcons","term","termSplitter","settingsChange$","resultFocus","resultSelect","resultUnfocus","resultMouseenter","resultMouseleave","moreResults"],["igoSearchItemToolbar",""],[3,"map","layer"]],template:function(e,t){1&e&&(n.YNc(0,R,13,11,"div",0),n.ALo(1,"async"),n.YNc(2,E,7,8,"igo-flexible",1),n.ALo(3,"async")),2&e&&(n.Q6J("ngIf",(!t.store||t.store.stateView.empty)&&n.lcZ(1,2,t.debouncedEmpty$)),n.xp6(2),n.Q6J("ngIf",t.store&&!1===n.lcZ(3,4,t.store.stateView.empty$)))},directives:[r.O5,w.dF,O.GYD,O.Uk0],pipes:[r.Ov,q.X$,w.A],encapsulation:2,changeDetection:0}),F=function(e,t,i,o){var n,a=arguments.length,s=a<3?t:null===o?o=Object.getOwnPropertyDescriptor(t,i):o;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(e,t,i,o);else for(var r=e.length-1;r>=0;r--)(n=e[r])&&(s=(a<3?n(s):a>3?n(t,i,s):n(t,i))||s);return a>3&&s&&Object.defineProperty(t,i,s),s}([(0,w.$9)({name:"searchResults",title:"igo.integration.tools.searchResults",icon:"magnify"}),function(e,t){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(e,t)}("design:paramtypes",[P.U5,P.po,n.SBq,P.EH,P.Nw,c.E4])],F);var L=i(45159),B=i(3323),U=i(30620);const z=["mapBrowser"];function I(e,t){1&e&&(n._UZ(0,"mat-icon",8),n.ALo(1,"translate")),2&e&&n.Q6J("matTooltip",n.lcZ(1,1,"sideresult.close"))}function G(e,t){1&e&&(n._UZ(0,"mat-icon",9),n.ALo(1,"translate")),2&e&&n.Q6J("matTooltip",n.lcZ(1,1,"sideresult.open"))}class D{constructor(e,t,i,o,a,s,r,c,l,p){this.toolState=e,this.configService=t,this.catalogState=i,this.languageService=o,this.projectionService=a,this.mapService=s,this.layerService=r,this.searchState=c,this.searchService=l,this.mediaService=p,this.title$=new d.X(void 0),this.hasSearchQuery=void 0,this.openedChange=new n.vpe,this.toolChange=new n.vpe,this.events=[],this.showMenuButton=void 0,this.hasToolbox=void 0,this.store=new w.Dn([]),this.igoSearchPointerSummaryEnabled=!1,this.termSplitter="|",this.view={center:[-73,47.2],zoom:7},this.settingsChange$=new d.X(void 0),this.mapService.setMap(this.map),this.showMenuButton=void 0!==this.configService.getConfig("showMenuButton")&&this.configService.getConfig("showMenuButton"),this.hasToolbox=void 0!==this.configService.getConfig("hasToolbox")&&this.configService.getConfig("hasToolbox"),this.layerService.createAsyncLayer({title:"OSM",sourceOptions:{type:"osm"}}).subscribe(e=>{this.osmLayer=e})}get map(){return this._map}set map(e){this._map=e}get opened(){return this._opened}set opened(e){e!==this._opened&&(this._opened=e,this.openedChange.emit(this._opened))}get toolbox(){return this.toolState.toolbox}get searchStore(){return this.searchState.store}get isTouchScreen(){return this.mediaService.isTouchScreen()}onPointerSummaryStatusChange(e){this.igoSearchPointerSummaryEnabled=e}onSearchTermChange(e=""){this.term=e,e.replace(/(#[^\s]*)/g,"").trim().length<2&&(this.searchStore.clear(),this.selectedFeature=void 0)}onSearch(e){const t=e.results;this.searchStore.state.updateAll({focused:!1,selected:!1});const i=this.searchStore.entities$.value.filter(t=>t.source!==e.research.source).concat(t);this.searchStore.updateMany(i)}onSearchSettingsChange(){this.settingsChange$.next(!0)}onResultFocus(e){this.tryAddFeatureToMap(e),this.selectedFeature=e.data}tryAddFeatureToMap(e){e.meta.dataType===O.D97&&void 0!==e.data.geometry&&this.map.searchResultsOverlay.setFeatures([e.data],O.bAZ.Default)}ngOnInit(){this.activeTool$$=this.toolbox.activeTool$.subscribe(e=>{const t=this.configService.getConfig("sidenavTitle")||"IGO";if(e)if("catalogBrowser"===e.name)for(const i of this.catalogState.catalogStore.all())!0===this.catalogState.catalogStore.state.get(i).selected&&this.title$.next(i.title);else if("activeTimeFilter"===e.name||"activeOgcFilter"===e.name)for(const i of this.map.layers)!0===i.options.active&&this.title$.next(i.title);else this.title$.next(e.title);else this.title$.next(t);this.toolChange.emit(e)}),this.store.load([{id:"coordinates",title:"coordinates",handler:this.onSearchCoordinate.bind(this)},{id:"googleMaps",title:"googleMap",handler:this.onOpenGoogleMaps.bind(this),args:["1"]},{id:"googleStreetView",title:"googleStreetView",handler:this.onOpenGoogleStreetView.bind(this)}])}ngOnDestroy(){this.activeTool$$.unsubscribe(),this.store.destroy()}onPreviousButtonClick(){this.toolbox.activatePreviousTool()}onUnselectButtonClick(){this.toolbox.deactivateTool()}removeFeatureFromMap(){this.map.searchResultsOverlay.clear()}onContextMenuOpen(e){const t=this.mapPosition(e),i=this.mapService.getMap().ol.getCoordinateFromPixel(t);this.mapProjection=this.mapService.getMap().projection,this.lonlat=v.vs(i,this.mapProjection,"EPSG:4326")}mapPosition(e){const t=e;return t.y=t.y-this.mapBrowser.nativeElement.getBoundingClientRect().top+window.scrollY,t.x=t.x-this.mapBrowser.nativeElement.getBoundingClientRect().left+window.scrollX,[t.x,t.y]}onPointerSearch(e){this.lonlat=e,this.onSearchCoordinate()}onSearchCoordinate(){this.searchStore.clear();const e=this.searchService.reverseSearch(this.lonlat);for(const t in e)e.length>0&&e[t].request.subscribe(i=>{this.onSearch({research:e[t],results:i})})}onOpenGoogleMaps(){window.open(O.Gij.getGoogleMapsCoordLink(this.lonlat[0],this.lonlat[1]))}onOpenGoogleStreetView(){window.open(O.Gij.getGoogleStreetViewLink(this.lonlat[0],this.lonlat[1]))}}D.\u0275fac=function(e){return new(e||D)(n.Y36(P.EH),n.Y36(c.E4),n.Y36(P.Yy),n.Y36(c.TS),n.Y36(O.tU_),n.Y36(O.SM5),n.Y36(O.ITu),n.Y36(P.po),n.Y36(O.oDG),n.Y36(c.yJ))},D.\u0275cmp=n.Xpm({type:D,selectors:[["app-sideresult"]],viewQuery:function(e,t){if(1&e&&n.Gf(z,7,n.SBq),2&e){let e;n.iGM(e=n.CRH())&&(t.mapBrowser=e.first)}},inputs:{hasSearchQuery:"hasSearchQuery",map:"map",opened:"opened"},outputs:{openedChange:"openedChange",toolChange:"toolChange"},decls:10,vars:5,consts:[["mode","side",3,"autoFocus","opened","openedChange"],["sidenav",""],[1,"app-sidenav-content"],["content",""],["mat-raised-button","","id","sideresult-button","isRoundButton","false","isIconButton","true","MatDrawerMode","push",3,"ngClass","click"],["sidenavbutton",""],["matTooltipShowDelay","500","tooltip-position","after","svgIcon","menu-left",3,"matTooltip",4,"ngIf"],["matTooltipShowDelay","500","tooltip-position","after","svgIcon","menu-right",3,"matTooltip",4,"ngIf"],["matTooltipShowDelay","500","tooltip-position","after","svgIcon","menu-left",3,"matTooltip"],["matTooltipShowDelay","500","tooltip-position","after","svgIcon","menu-right",3,"matTooltip"]],template:function(e,t){if(1&e){const e=n.EpF();n.TgZ(0,"mat-sidenav",0,1),n.NdJ("openedChange",function(e){return t.opened=e}),n.TgZ(2,"div",2,3),n.TgZ(4,"app-search-results-tool"),n._uU(5,' #searchresults [store]="searchStore" [term]="term" [showIcons]="true" [termSplitter]="termSplitter" placeholder="false" [settingsChange$]="settingsChange$" (resultFocus)="onResultFocus($event)" (resultSelect)="onResultFocus($event)" (moreResults)="onSearch($event)"> '),n.qZA(),n.qZA(),n.qZA(),n.TgZ(6,"button",4,5),n.NdJ("click",function(){return n.CHM(e),n.MAs(1).toggle()}),n.YNc(8,I,2,3,"mat-icon",6),n.YNc(9,G,2,3,"mat-icon",7),n.qZA()}if(2&e){const e=n.MAs(1);n.Q6J("autoFocus",!1)("opened",t.opened),n.xp6(6),n.Q6J("ngClass",e.opened?"sideresult-opened":"sideresult-closed"),n.xp6(2),n.Q6J("ngIf",e.opened),n.xp6(1),n.Q6J("ngIf",!e.opened)}},directives:[k.JX,F,L.lW,r.mk,r.O5,B.Hw,U.gM],pipes:[q.X$],styles:["mat-sidenav[_ngcontent-%COMP%]{-o-box-shadow:2px 2px 2px 0px #dddddd;box-shadow:2px 2px 2px #ddd}[_nghost-%COMP%]{background-color:#fff}[_nghost-%COMP%]     mat-sidenav{z-index:3!important}mat-sidenav[_ngcontent-%COMP%]{height:calc(100% - 29px - 4px);width:400px;overflow:visible}@media only screen and (orientation:portrait) and (max-width: 599px),only screen and (orientation:landscape) and (max-width: 959px){mat-sidenav[_ngcontent-%COMP%]{width:calc(100% - 40px - 4px);max-width:400px}}.app-content[_ngcontent-%COMP%], igo-panel[_ngcontent-%COMP%]{height:100%}.app-sidenav-content[_ngcontent-%COMP%]{top:60px;height:calc(100% - 60px - 29px);display:block;position:relative}@media only screen and (orientation:portrait) and (max-width: 599px),only screen and (orientation:landscape) and (max-width: 959px){.app-sidenav-content[_ngcontent-%COMP%]{height:calc(100% - 60px)}}app-sideresult[_ngcontent-%COMP%]{width:400px}  igo-search-results{position:relative;left:16px!important;width:calc(calc(calc(400px) - 40px) - (2 * 4px));display:contents;height:calc(100% - 40px - 4px)}igo-search-results-tool[_ngcontent-%COMP%]{display:block;position:relative;margin:0 calc(4 * 4px);top:calc(2 * 4px);height:100%}#sideresult-button[_ngcontent-%COMP%]{display:block;position:absolute;top:50%;left:calc(400px + 1px);z-index:1;padding:0;min-width:12px!important;-webkit-animation-duration:3s;animation-duration:3s;visibility:visible;opacity:1;opacity:0;-webkit-animation:fadeIn .9s;animation:fadeIn .9s;-webkit-animation-delay:.5s;animation-delay:.5s;-webkit-animation-fill-mode:forwards;animation-fill-mode:forwards;width:24px}.sideresult-closed[_ngcontent-%COMP%]{left:0!important;position:absolute}@-webkit-keyframes fadeIn{0%{opacity:0}to{opacity:1}}@keyframes fadeIn{0%{opacity:0}to{opacity:1}}mat-sidenav[_ngcontent-%COMP%]::-webkit-backdrop{z-index:999}mat-sidenav[_ngcontent-%COMP%]::backdrop{z-index:999}app-search-results-tool[_ngcontent-%COMP%]{width:100%;padding:0 16px;display:flex;margin:auto}  app-search-results-tool>div>section>h4>strong{font-size:21px!important}"],changeDetection:0});var Q=i(83156);const Y=function(e){return{width:e}};function H(e,t){if(1&e&&(n.ynx(0),n._UZ(1,"img",6),n.BQk()),2&e){const e=n.oxw(2).$implicit;n.xp6(1),n.Q6J("src",e.imgSrc,n.LSH)("alt",e.alt)("ngStyle",n.VKq(3,Y,e.imgSize))}}function N(e,t){if(1&e&&(n.TgZ(0,"a",4),n._uU(1),n.YNc(2,H,2,5,"ng-container",5),n.qZA()),2&e){const e=n.oxw().$implicit;n.Q6J("href",e.link,n.LSH),n.xp6(1),n.hij(" ",e.text," "),n.xp6(1),n.Q6J("ngIf",e.imgSrc)}}function J(e,t){if(1&e&&(n.ynx(0),n._UZ(1,"img",6),n.BQk()),2&e){const e=n.oxw(2).$implicit;n.xp6(1),n.Q6J("src",e.imgSrc,n.LSH)("alt",e.alt)("ngStyle",n.VKq(3,Y,e.imgSize))}}function V(e,t){if(1&e&&(n._uU(0),n.YNc(1,J,2,5,"ng-container",5)),2&e){const e=n.oxw().$implicit;n.hij(" ",e.text," "),n.xp6(1),n.Q6J("ngIf",e.imgSrc)}}function X(e,t){if(1&e&&(n.ynx(0),n.TgZ(1,"div",1),n.YNc(2,N,3,3,"a",2),n.YNc(3,V,2,2,"ng-template",null,3,n.W1O),n.qZA(),n.BQk()),2&e){const e=t.$implicit,i=n.MAs(4);n.xp6(1),n.Udp("position",e.fixed?"fixed":"absolute")("margin-left",e.marginLeft)("margin-right",e.marginRight)("margin-top",e.marginTop)("margin-bottom",e.marginBottom)("font-size",e.fontSize),n.Q6J("ngClass",e.cssClass),n.xp6(1),n.Q6J("ngIf",e.link)("ngIfElse",i)}}class W{constructor(e,t,i){this.contextService=e,this.mediaService=t,this.configService=i,this.mapOverlay=[]}ngAfterViewInit(){this.context$$=this.contextService.context$.subscribe(e=>{this.handleContextChange(e),this.context=e}),this.media$$=this.mediaService.media$.subscribe(e=>this.handleContextChange(this.context))}ngOnDestroy(){this.context$$.unsubscribe(),this.media$$.unsubscribe()}handleContextChange(e){let t=[];if(void 0!==e){this.mapOverlay=[],e.mapOverlay?t=e.mapOverlay:this.configService.getConfig("mapOverlay")&&(t=this.configService.getConfig("mapOverlay"));for(const e of t)(!e.media&&"desktop"===this.mediaService.getMedia()||e.media&&e.media.includes(this.mediaService.getMedia()))&&this.mapOverlay.push(e)}}}W.\u0275fac=function(e){return new(e||W)(n.Y36(Q.Ob),n.Y36(c.yJ),n.Y36(c.E4))},W.\u0275cmp=n.Xpm({type:W,selectors:[["app-map-overlay"]],decls:1,vars:1,consts:[[4,"ngFor","ngForOf"],[1,"mapOverlayDefault",3,"ngClass"],["target","_blank",3,"href",4,"ngIf","ngIfElse"],["templateNoLink",""],["target","_blank",3,"href"],[4,"ngIf"],[3,"src","alt","ngStyle"]],template:function(e,t){1&e&&n.YNc(0,X,5,15,"ng-container",0),2&e&&n.Q6J("ngForOf",t.mapOverlay)},directives:[r.sg,r.mk,r.O5,r.PC],styles:["[_nghost-%COMP%]{height:100%;top:0;left:0;right:0;position:fixed;pointer-events:none}.mapOverlayDefault[_ngcontent-%COMP%]{position:absolute;white-space:nowrap;pointer-events:auto}.bottom-right[_ngcontent-%COMP%]{bottom:0;right:0}.top-right[_ngcontent-%COMP%]{top:0;right:0}.bottom-left[_ngcontent-%COMP%]{bottom:0;left:0}.top-left[_ngcontent-%COMP%]{top:0;left:0}.bottom-center[_ngcontent-%COMP%]{bottom:0;left:50%;transform:translate(-50%)}.top-center[_ngcontent-%COMP%]{top:0;left:50%;transform:translate(-50%)}.center-center[_ngcontent-%COMP%]{top:50%;left:50%;transform:translate(-50%)}.center-right[_ngcontent-%COMP%]{top:50%;right:0}.center-left[_ngcontent-%COMP%]{top:50%;left:0}"]});class K{constructor(e){this.dialog=e,this.dialogRef=null}toggleDialog(){this.dialog.getDialogById("legend-button-dialog-container")?this.dialogRef.close():this.dialogRef=this.dialog.open(ee,{id:"legend-button-dialog-container",hasBackdrop:!1,closeOnNavigation:!0})}}K.\u0275fac=function(e){return new(e||K)(n.Y36(T.uw))},K.\u0275cmp=n.Xpm({type:K,selectors:[["app-legend-button"]],decls:2,vars:0,consts:[["mat-raised-button","","qcca-buttons","","color","basic","mat-button","",1,"igo-legend-button",3,"click"]],template:function(e,t){1&e&&(n.TgZ(0,"button",0),n.NdJ("click",function(){return t.toggleDialog()}),n._uU(1,"L\xe9gende"),n.qZA())},directives:[L.lW],styles:["app-legend-button[_ngcontent-%COMP%],   .mat-raised-button{font-size:.9rem!important;font-weight:500!important;margin:0;min-width:8px;border:0px;border-radius:0!important}  .qcca-theme app-legend-button button,   .qcca-theme .mat-raised-button{color:#095797!important;border-color:#095797!important}  #legend-button-dialog-container{top:calc(72px + 4px);width:-webkit-fit-content!important;width:-moz-fit-content!important;width:fit-content!important;height:-webkit-fit-content!important;height:-moz-fit-content!important;height:fit-content!important;z-index:10;position:fixed;right:.5%;max-width:99%!important;padding:8px!important;max-height:calc(100% - 72px - 29px - 100px)!important}  #legend-button-dialog-container igo-layer-legend-item{flex-wrap:wrap;width:-webkit-min-content;width:-moz-min-content;width:min-content;display:flex;flex-direction:column}  #legend-button-dialog-container .igo-layer-legend-container{padding-left:0!important;width:-webkit-max-content!important;width:-moz-max-content!important;width:max-content!important}@media (min-width: 768px){  #legend-button-dialog-container{max-height:calc(100% - 72px - 29px - 180px)!important}}  app-legend-button-dialog .mat-list-base .mat-list-item .mat-list-item-content{padding:0!important}  app-legend-button-dialog .mat-dialog-title{margin:0;display:block}  app-legend-button-dialog .igo-layer-list-item{height:-webkit-fit-content!important;height:-moz-fit-content!important;height:fit-content!important}  app-legend-button-dialog .mat-icon,   app-legend-button-dialog mat-button-wrapper,   app-legend-button-dialog .mat-icon-button .mat-icon,   app-legend-button-dialog .mat-icon-button{line-height:26px;height:24px;width:24px}  app-legend-button-dialog .mat-icon svg{height:20px;width:20px}  app-legend-button-dialog div.mat-dialog-content.legend>img{max-height:100%;max-width:100%}  app-legend-button-dialog div.mat-dialog-actions{float:right;padding:0;min-height:auto}"]});class ee{constructor(e,t){this.mapState=e,this.dialog=t}get map(){return this.mapState.map}}ee.\u0275fac=function(e){return new(e||ee)(n.Y36(P.U5),n.Y36(T.uw))},ee.\u0275cmp=n.Xpm({type:ee,selectors:[["app-legend-button-dialog"]],decls:6,vars:5,consts:[["mat-dialog-actions",""],["mat-button","","mat-icon-button","","mat-dialog-close","",1,"close"],["svgIcon","close"],["mat-dialog-title",""],[3,"layers","excludeBaseLayers","allowShowAllLegends","updateLegendOnResolutionChange","showAllLegendsValue"]],template:function(e,t){1&e&&(n.TgZ(0,"div",0),n.TgZ(1,"button",1),n._UZ(2,"mat-icon",2),n.qZA(),n.qZA(),n.TgZ(3,"h4",3),n._uU(4,"L\xe9gende"),n.qZA(),n._UZ(5,"igo-layer-legend-list",4)),2&e&&(n.xp6(5),n.Q6J("layers",t.map.layers)("excludeBaseLayers",!0)("allowShowAllLegends",!1)("updateLegendOnResolutionChange",!1)("showAllLegendsValue",!1))},directives:[T.H8,L.lW,T.ZT,B.Hw,T.uh,O.exk],encapsulation:2});class te{constructor(e){this.languageService=e}}te.\u0275fac=function(e){return new(e||te)(n.Y36(c.TS))},te.\u0275cmp=n.Xpm({type:te,selectors:[["app-footer"]],decls:21,vars:18,consts:[["id","footer-id",1,"footer-right"],[1,"order2"],[1,"footer-text"],["rel","noopener noreferrer","alt","('externallinks' | translate)","target","_blank",3,"href"]],template:function(e,t){1&e&&(n.TgZ(0,"div",0),n.TgZ(1,"span",1),n.TgZ(2,"span",2),n.TgZ(3,"a",3),n.ALo(4,"translate"),n._uU(5),n.ALo(6,"translate"),n.qZA(),n.qZA(),n.TgZ(7,"span",2),n._uU(8," | "),n.qZA(),n.TgZ(9,"span",2),n.TgZ(10,"a",3),n.ALo(11,"translate"),n._uU(12),n.ALo(13,"translate"),n.qZA(),n.qZA(),n.TgZ(14,"span",2),n._uU(15," | "),n.qZA(),n.TgZ(16,"span",2),n.TgZ(17,"a",3),n.ALo(18,"translate"),n._uU(19),n.ALo(20,"translate"),n.qZA(),n.qZA(),n.qZA(),n.qZA()),2&e&&(n.xp6(3),n.s9C("href",n.lcZ(4,6,"footer.url-conditions"),n.LSH),n.xp6(2),n.Oqu(n.lcZ(6,8,"footer.conditions")),n.xp6(5),n.s9C("href",n.lcZ(11,10,"footer.url-ministry"),n.LSH),n.xp6(2),n.Oqu(n.lcZ(13,12,"footer.ministry")),n.xp6(5),n.s9C("href",n.lcZ(18,14,"footer.url-gov"),n.LSH),n.xp6(2),n.Oqu(n.lcZ(20,16,"footer.gov")))},pipes:[q.X$],styles:[".order2[_ngcontent-%COMP%]{order:2;margin-right:.5%;display:flex;justify-content:flex-end;right:0;margin-left:140px;text-align:right!important;width:100%}.footer-right[_ngcontent-%COMP%]{z-index:666;background:#ffffffa3;font-size:.7rem;align-items:center;height:29px;display:flex;margin-left:auto}span.footer-text[_ngcontent-%COMP%]{color:#095797;align-self:center;margin-left:.5rem}span.footer-text[_ngcontent-%COMP%]   a[_ngcontent-%COMP%]{color:#095797;text-decoration:none}  div.ol-scale-line{position:fixed!important;display:flex;flex-direction:row;left:70px!important;bottom:3px!important}  .map-hasFooter{height:calc(100% - 29px)!important}  .ol-scale-line-inner{border:1px solid black;color:#000;border-top:none;order:1}"]});const ie=["mapBrowser"],oe=["searchBar"];function ne(e,t){if(1&e){const e=n.EpF();n.TgZ(0,"igo-menu-button",13),n.NdJ("openSidenav",function(){return n.CHM(e),n.oxw(2).onToggleSidenavClick()}),n.qZA()}if(2&e){const e=n.oxw(2);n.Q6J("sidenavOpened",e.sidenavOpened)}}function ae(e,t){if(1&e){const e=n.EpF();n.TgZ(0,"igo-search-bar",14,15),n.NdJ("pointerSummaryStatus",function(t){return n.CHM(e),n.oxw(2).onPointerSummaryStatusChange(t)})("searchTermChange",function(t){return n.CHM(e),n.oxw(2).onSearchTermChange(t)})("search",function(t){return n.CHM(e),n.oxw(2).onSearch(t)})("clearFeature",function(){return n.CHM(e),n.oxw(2).removeFeatureFromMap()})("searchSettingsChange",function(){return n.CHM(e),n.oxw(2).onSearchSettingsChange()}),n.ALo(2,"translate"),n.qZA()}if(2&e){const e=n.oxw(2);n.Q6J("matTooltip",n.lcZ(2,4,"search-bar"))("searchSettings",!1)("store",e.searchStore)("termSplitter",e.termSplitter)}}function se(e,t){if(1&e&&n._UZ(0,"igo-geolocate-button",11),2&e){const e=n.oxw(2);n.Q6J("map",e.map)}}function re(e,t){1&e&&n._UZ(0,"app-legend-button")}function ce(e,t){1&e&&n._UZ(0,"app-footer")}const le=function(e){return{"map-hasfooter":e}};function pe(e,t){if(1&e){const e=n.EpF();n.TgZ(0,"mat-sidenav-container"),n.TgZ(1,"mat-sidenav-content",1),n.TgZ(2,"igo-backdrop",2),n.NdJ("click",function(){return n.CHM(e),n.oxw().onBackdropClick()}),n.qZA(),n.YNc(3,ne,1,1,"igo-menu-button",3),n.YNc(4,ae,3,6,"igo-search-bar",4),n.TgZ(5,"app-sideresult",5),n.NdJ("openedChange",function(t){n.CHM(e);return n.oxw().sidenavOpened=t})("toolChange",function(t){return n.CHM(e),n.oxw().toolChanged(t)}),n.qZA(),n.TgZ(6,"igo-map-browser",6,7),n._UZ(8,"igo-baselayers-switcher",8),n.TgZ(9,"div",9),n.YNc(10,se,1,1,"igo-geolocate-button",10),n._UZ(11,"igo-zoom-button",11),n._UZ(12,"igo-rotation-button",12),n.YNc(13,re,1,0,"app-legend-button",0),n.qZA(),n.qZA(),n.YNc(14,ce,1,0,"app-footer",0),n._UZ(15,"app-map-overlay"),n.ALo(16,"async"),n.qZA(),n.qZA()}if(2&e){const e=n.oxw();n.xp6(2),n.Q6J("shown",e.backdropShown),n.xp6(1),n.Q6J("ngIf",e.showMenuButton),n.xp6(1),n.Q6J("ngIf",e.showSearchBar),n.xp6(1),n.Q6J("map",e.map)("opened",e.sidenavOpened),n.xp6(1),n.Q6J("igoHoverFeatureDelay",250)("igoHoverFeatureEnabled",!0)("map",e.map)("ngClass",n.VKq(22,le,e.hasFooter)),n.xp6(2),n.Q6J("ngClass",e.sidenavOpened?"baselayers-pushed":"baselayers")("map",e.map)("useStaticIcon",e.getBaseLayersUseStaticIcon()),n.xp6(2),n.Q6J("ngIf",e.hasGeolocateButton),n.xp6(1),n.Q6J("map",e.map),n.xp6(1),n.Q6J("showIfNoRotation",e.showRotationButtonIfNoRotation)("map",e.map),n.xp6(1),n.Q6J("ngIf",e.hasLegendButton),n.xp6(1),n.Q6J("ngIf",e.hasFooter),n.xp6(1),n.Q6J("@controlStateY",e.getControlsOffsetY())("@controlStateX","mobile"!==n.lcZ(16,20,e.mediaService.media$)&&e.sidenavOpened?"right":"left")}}class he{constructor(e,t,i,o,n,a,s,r,c,l,p,h,u,g,m,f,b,v,x,y,S,O){this.route=e,this.workspaceState=t,this.authService=i,this.mediaService=o,this.layerService=n,this.dataSourceService=a,this.capabilitiesService=s,this.contextState=r,this.mapState=c,this.searchState=l,this.queryState=p,this.toolState=h,this.searchSourceService=u,this.configService=g,this.importService=m,this.http=f,this.languageService=b,this.messageService=v,this.dialogWindow=x,this.storageService=y,this.directionState=S,this.dialog=O,this.showRotationButtonIfNoRotation=void 0,this.hasFooter=!0,this.hasLegendButton=!0,this.hasGeolocateButton=!0,this.hasExpansionPanel=void 0,this.hasToolbox=!1,this.workspaceNotAvailableMessage="workspace.disabled.resolution",this.workspaceEntitySortChange$=new d.X(!1),this.workspaceMaximize$$=[],this.workspaceMaximize$=new d.X(this.storageService.get("workspaceMaximize")),this.selectedWorkspace$=new d.X(void 0),this.hasSideSearch=!0,this.showSearchBar=!0,this.showMenuButton=!0,this.sidenavOpened$=new d.X(!1),this.settingsChange$=new d.X(void 0),this.toastPanelOffsetX$=new d.X(void 0),this.minSearchTermLength=2,this.hasHomeExtentButton=!1,this.hasFeatureEmphasisOnSelection=!1,this.workspaceSwitchDisabled=!1,this.paginatorOptions={pageSize:50,pageSizeOptions:[1,5,10,20,50,100,500]},this.workspaceMenuClass="workspace-menu",this.fullExtent=this.storageService.get("fullExtent"),this.matDialogRef$=new d.X(void 0),this.searchBarTerm="",this.onSettingsChange$=new d.X(void 0),this.termDefinedInUrl=!1,this.termSplitter="|",this.termDefinedInUrlTriggered=!1,this.addedLayers$$=[],this.forceCoordsNA=!1,this.contextMenuStore=new w.Dn([]),this.contextLoaded=!1,this.toastPanelForExpansionOpened=!0,this.showToastPanelForExpansionToggle=!1,this.toastPanelHtmlDisplay=!1,this.dialogOpened=this.dialog.getDialogById("legend-button-dialog-container"),this.hasFooter=void 0!==this.configService.getConfig("hasFooter")&&this.configService.getConfig("hasFooter"),this.hasLegendButton=void 0!==this.configService.getConfig("hasLegendButton")&&this.configService.getConfig("hasLegendButton"),this.hasSideSearch=void 0===this.configService.getConfig("hasSideSearch")||this.configService.getConfig("hasSideSearch"),this.showSearchBar=void 0===this.configService.getConfig("showSearchBar")||this.configService.getConfig("showSearchBar"),this.hasToolbox=void 0===this.configService.getConfig("hasToolbox")||this.configService.getConfig("hasToolbox"),this.showMenuButton=void 0===this.configService.getConfig("showMenuButton")||this.configService.getConfig("showMenuButton"),this.hasExpansionPanel=this.configService.getConfig("hasExpansionPanel"),this.hasHomeExtentButton=void 0!==this.configService.getConfig("homeExtentButton"),this.hasGeolocateButton=void 0===this.configService.getConfig("hasGeolocateButton")||this.configService.getConfig("hasGeolocateButton"),this.showRotationButtonIfNoRotation=void 0!==this.configService.getConfig("showRotationButtonIfNoRotation")&&this.configService.getConfig("showRotationButtonIfNoRotation"),this.forceCoordsNA=this.configService.getConfig("app.forceCoordsNA"),this.hasFeatureEmphasisOnSelection=this.configService.getConfig("hasFeatureEmphasisOnSelection"),this.igoSearchPointerSummaryEnabled=this.configService.getConfig("hasSearchPointerSummary"),void 0===this.igoSearchPointerSummaryEnabled&&(this.igoSearchPointerSummaryEnabled=this.storageService.get("searchPointerSummaryEnabled")||!1)}getBaseLayersUseStaticIcon(){return this.configService.getConfig("useStaticIcon")}get map(){return this.mapState.map}get sidenavOpened(){return this.sidenavOpened$.value}set sidenavOpened(e){this.sidenavOpened$.next(e)}get auth(){return this.configService.getConfig("auth")||[]}isMobile(){return this.mediaService.getMedia()===c.pU.Mobile}isTablet(){return this.mediaService.getMedia()===c.pU.Tablet}isLandscape(){return this.mediaService.getOrientation()===c.pC.Landscape}isPortrait(){return this.mediaService.getOrientation()===c.pC.Portrait}get backdropShown(){return(this.isMobile()||this.isTablet()&&this.isPortrait())&&this.sidenavOpened}get expansionPanelExpanded(){return this.workspaceState.workspacePanelExpanded}set expansionPanelExpanded(e){this.workspaceState.workspacePanelExpanded=e,!0===e?this.map.viewController.setPadding({bottom:280}):this.map.viewController.setPadding({bottom:0})}get toastPanelShown(){return!0}get expansionPanelBackdropShown(){return this.expansionPanelExpanded&&this.toastPanelForExpansionOpened}get workspace(){return this.workspaceState.workspace$.value}get actionbarMode(){return w.rO.Overlay}get actionbarWithTitle(){return this.actionbarMode===w.rO.Overlay}get searchStore(){return this.searchState.store}get searchResultsGeometryEnabled(){return this.searchState.searchResultsGeometryEnabled$.value}get toolbox(){return this.toolState.toolbox}get workspaceStore(){return this.workspaceState.store}ngOnInit(){window.IGO=this,this.hasGeolocateButton=void 0===this.configService.getConfig("hasGeolocateButton")||this.configService.getConfig("hasGeolocateButton"),this.map.ol.once("rendercomplete",()=>{void 0!==this.configService.getConfig("geolocate.activateDefault")&&(this.map.geolocationController.tracking=this.configService.getConfig("geolocate.activateDefault"))}),this.searchState.searchTermSplitter$.next(this.termSplitter),this.authService.authenticate$.subscribe(e=>{this.contextLoaded=!1}),this.context$$=this.contextState.context$.subscribe(e=>this.onChangeContext(e));const e=[{id:"coordinates",title:"coordinates",handler:()=>this.searchCoordinate(this.contextMenuCoord)},{id:"googleMaps",title:"googleMap",handler:()=>this.openGoogleMaps(this.contextMenuCoord)},{id:"googleStreetView",title:"googleStreetView",handler:()=>this.openGoogleStreetView(this.contextMenuCoord)}];this.contextMenuStore.load(e),this.map.ol.once("rendercomplete",()=>{this.readQueryParams()}),this.onSettingsChange$.subscribe(()=>{this.searchState.setSearchSettingsChange()}),this.searchState.selectedResult$.subscribe(e=>{e&&this.isMobile()&&this.closeSidenav()}),this.workspaceState.workspaceEnabled$.next(this.hasExpansionPanel),this.workspaceState.store.empty$.subscribe(e=>{!this.hasExpansionPanel||(this.workspaceState.workspaceEnabled$.next(!e),e&&(this.expansionPanelExpanded=!1),this.updateMapBrowserClass())}),this.workspaceState.workspace$.subscribe(e=>{var t,i,o,n;e?(this.selectedWorkspace$.next(e),this.expansionPanelExpanded=!0,(null===(t=e.layer.options.workspace)||void 0===t?void 0:t.pageSize)&&(null===(i=e.layer.options.workspace)||void 0===i?void 0:i.pageSizeOptions)?this.paginatorOptions={pageSize:null===(o=e.layer.options.workspace)||void 0===o?void 0:o.pageSize,pageSizeOptions:null===(n=e.layer.options.workspace)||void 0===n?void 0:n.pageSizeOptions}:this.paginatorOptions={pageSize:50,pageSizeOptions:[1,5,10,20,50,100,500]}):this.expansionPanelExpanded=!1}),this.activeWidget$$=this.workspaceState.activeWorkspaceWidget$.subscribe(e=>{void 0!==e?(this.openToastPanelForExpansion(),this.showToastPanelForExpansionToggle=!0):(this.closeToastPanelForExpansion(),this.showToastPanelForExpansionToggle=!1)}),this.openSidenav$$=this.toolState.openSidenav$.subscribe(e=>{e&&(this.openSidenav(),this.toolState.openSidenav$.next(!1))}),this.sidenavMediaAndOrientation$$=(0,u.aj)([this.sidenavOpened$,this.mediaService.media$,this.mediaService.orientation$]).pipe((0,g.b)(50)).subscribe(()=>{this.computeToastPanelOffsetX()})}computeToastPanelOffsetX(){this.isMobile()||!this.isLandscape()?Promise.resolve().then(()=>this.toastPanelOffsetX$.next(void 0)):Promise.resolve().then(()=>this.toastPanelOffsetX$.next(this.getToastPanelExtent()))}createFeatureProperties(e){let t={};return e.options.sourceOptions.sourceFields.forEach(e=>{!e.primary&&e.visible&&(t[e.name]="")}),t}entitySortChange(){this.workspaceEntitySortChange$.next(!0)}ngOnDestroy(){this.context$$.unsubscribe(),this.activeWidget$$.unsubscribe(),this.openSidenav$$.unsubscribe(),this.workspaceMaximize$$.map(e=>e.unsubscribe()),this.sidenavMediaAndOrientation$$.unsubscribe()}removeFeatureFromMap(){this.map.searchResultsOverlay.clear()}cancelOngoingAddLayer(){this.addedLayers$$.forEach(e=>e.unsubscribe()),this.addedLayers$$=[]}onBackdropClick(){this.closeSidenav()}onToggleSidenavClick(){this.toggleSidenav()}closeToastPanelForExpansion(){this.toastPanelForExpansionOpened=!1}openToastPanelForExpansion(){this.toastPanelForExpansionOpened=!0}onSearchTermChange(e){var t;(null===(t=this.routeParams)||void 0===t?void 0:t.search)&&e!==this.routeParams.search&&this.searchState.deactivateCustomFilterTermStrategy(),this.searchState.setSearchTerm(e),e.replace(/(#[^\s]*)/g,"").trim().length<2?this.onClearSearch():this.onBeforeSearch()}onSearch(e){const t=e.results,i=!(0,O.OcM)(e.research.source);let o;o=i?this.searchSourceService.getEnabledSources().filter(O._iF):this.searchSourceService.getEnabledSources().filter(O.OcM);const n=this.searchStore.entities$.value.filter(t=>t.source!==e.research.source&&o.includes(t.source)).concat(t);this.searchStore.updateMany(n)}onSearchSettingsChange(){this.onSettingsChange$.next(!0)}closeSidenav(){this.sidenavOpened=!1,this.map.viewController.padding[3]=0}openSidenav(){this.sidenavOpened=!0,this.map.viewController.padding[3]=this.isMobile()?0:400}toggleSidenav(){this.sidenavOpened?this.closeSidenav():this.openSidenav(),this.computeToastPanelOffsetX()}toolChanged(e){e&&"searchResults"===e.name&&this.searchBar&&this.searchBar.nativeElement.getElementsByTagName("input")[0].focus()}computeHomeExtentValues(e){var t,i;(null===(i=null===(t=null==e?void 0:e.map)||void 0===t?void 0:t.view)||void 0===i?void 0:i.homeExtent)?(this.homeExtent=e.map.view.homeExtent.extent,this.homeCenter=e.map.view.homeExtent.center,this.homeZoom=e.map.view.homeExtent.zoom):(this.homeExtent=void 0,this.homeCenter=void 0,this.homeZoom=void 0)}onChangeContext(e){if(this.cancelOngoingAddLayer(),void 0!==e){if(this.workspace&&!this.workspace.entityStore.empty&&this.workspace.entityStore.clear(),this.queryState.store.empty||this.queryState.store.softClear(),this.computeHomeExtentValues(e),this.route.queryParams.pipe((0,g.b)(250)).subscribe(t=>{(!t.context||t.context===e.uri)&&this.readLayersQueryParams(t)}),this.contextLoaded){const e=this.toolbox.getTool("contextManager");let t=(e?e.options:{}).toolToOpenOnContextChange;if(!t){const e=["mapTools","map","mapDetails","mapLegend"];for(const i of e)if(this.toolbox.getTool(i)){t=i;break}}t&&this.toolbox.activateTool(t)}this.contextLoaded=!0}}onBeforeSearch(){(!this.toolbox.activeTool$.value||"searchResults"!==this.toolbox.activeTool$.value.name)&&this.toolbox.activateTool("searchResults"),this.openSidenav()}onClearSearch(){this.map.searchResultsOverlay.clear(),this.searchStore.clear(),this.searchState.setSelectedResult(void 0),this.searchState.deactivateCustomFilterTermStrategy()}onContextMenuOpen(e){this.contextMenuCoord=this.getClickCoordinate(e)}getClickCoordinate(e){const t=e,i=this.mapBrowser.nativeElement.getBoundingClientRect();t.y=t.y-i.top+(window.scrollY||window.pageYOffset),t.x=t.x-i.left+(window.scrollX||window.pageXOffset);const o=[t.x,t.y],n=this.map.ol.getCoordinateFromPixel(o),a=this.map.projection;return v.vs(n,a,"EPSG:4326")}openGoogleMaps(e){window.open(O.Gij.getGoogleMapsCoordLink(e[0],e[1]))}openGoogleStreetView(e){window.open(O.Gij.getGoogleStreetViewLink(e[0],e[1]))}searchCoordinate(e){this.searchBarTerm=e.map(e=>e.toFixed(6)).join(", ")}updateMapBrowserClass(){const e=this.queryState.store.entities$.value.length>0;this.hasExpansionPanel&&this.workspaceState.workspaceEnabled$.value?this.mapBrowser.nativeElement.classList.add("has-expansion-panel"):this.mapBrowser.nativeElement.classList.remove("has-expansion-panel"),this.hasExpansionPanel&&this.expansionPanelExpanded?this.workspaceMaximize$.value?(this.mapBrowser.nativeElement.classList.add("expansion-offset-maximized"),this.mapBrowser.nativeElement.classList.remove("expansion-offset")):(this.mapBrowser.nativeElement.classList.add("expansion-offset"),this.mapBrowser.nativeElement.classList.remove("expansion-offset-maximized")):this.workspaceMaximize$.value?this.mapBrowser.nativeElement.classList.remove("expansion-offset-maximized"):this.mapBrowser.nativeElement.classList.remove("expansion-offset"),this.sidenavOpened?this.mapBrowser.nativeElement.classList.add("sidenav-offset"):this.mapBrowser.nativeElement.classList.remove("sidenav-offset"),this.sidenavOpened&&!this.isMobile()?this.mapBrowser.nativeElement.classList.add("sidenav-offset-baselayers"):this.mapBrowser.nativeElement.classList.remove("sidenav-offset-baselayers"),e&&(this.isMobile()||this.isTablet()||this.sidenavOpened)&&!this.expansionPanelExpanded?this.mapBrowser.nativeElement.classList.add("toast-offset-attribution"):this.mapBrowser.nativeElement.classList.remove("toast-offset-attribution")}getToastPanelExtent(){return this.sidenavOpened?this.sidenavOpened?this.toastPanelHtmlDisplay&&this.mediaService.isDesktop()?"htmlDisplayOffsetX":this.fullExtent?"fullOffsetX":"standardOffsetX":void 0:this.toastPanelHtmlDisplay&&this.mediaService.isDesktop()?"htmlDisplay":this.fullExtent?"fullStandard":"standard"}onPointerSummaryStatusChange(e){this.storageService.set("searchPointerSummaryEnabled",e),this.igoSearchPointerSummaryEnabled=e}getControlsOffsetY(){return this.expansionPanelExpanded?this.workspaceMaximize$.value?"firstRowFromBottom-expanded-maximized":"firstRowFromBottom-expanded":"firstRowFromBottom"}readQueryParams(){this.route.queryParams.subscribe(e=>{this.routeParams=e,this.readToolParams(),this.readSearchParams(),this.readFocusFirst(),this.computeZoomToExtent()})}computeZoomToExtent(){if(this.routeParams.zoomExtent){const e=this.routeParams.zoomExtent.split(","),t=v.$A(e,"EPSG:4326",this.map.projection);this.map.viewController.zoomToExtent(t)}}computeFocusFirst(){setTimeout(()=>{const e=document.getElementsByTagName("igo-search-results-item").item(0);e&&e.click()},1)}readFocusFirst(){if("1"===this.routeParams.sf&&this.termDefinedInUrl){const e=this.searchStore.stateView.all$().pipe((0,m.n)(e=>0===e.length),(0,g.b)(500),(0,f.q)(1)).subscribe(t=>{e.unsubscribe(),t.length&&!this.termDefinedInUrlTriggered&&(this.computeFocusFirst(),this.termDefinedInUrlTriggered=!0)})}}readSearchParams(){if(this.routeParams.search){if(this.termDefinedInUrl=!0,"1"===this.routeParams.exactMatch&&this.searchState.activateCustomFilterTermStrategy(),this.routeParams.search&&!this.routeParams.zoom&&"1"!==this.routeParams.sf){const e=this.searchStore.stateView.all$().pipe((0,m.n)(e=>0===e.length),(0,g.b)(500),(0,f.q)(1)).subscribe(t=>{e.unsubscribe();const i=t.filter(e=>e.entity.meta.dataType===O.D97).map(e=>(new y.Z).readFeature(e.entity.data,{dataProjection:e.entity.data.projection,featureProjection:this.map.projection})),o=(0,O.HgW)(this.map,i);this.map.viewController.zoomToExtent(o)})}this.searchBarTerm=this.routeParams.search}"1"===this.routeParams.searchGeom&&this.searchState.searchResultsGeometryEnabled$.next(!0)}readToolParams(){if(this.routeParams.tool&&this.matDialogRef$.pipe((0,m.n)(e=>void 0!==e),(0,b.P)()).subscribe(e=>{e||this.toolbox.activateTool(this.routeParams.tool)}),"1"===this.routeParams.sidenav&&setTimeout(()=>{this.openSidenav()},250),this.routeParams.routing){let e=!1;const t=this.routeParams.routing.split(";"),i=this.routeParams.routingOptions;let o;i&&(o=parseInt(i.split("result:")[1],10)),this.directionState.stopsStore.storeInitialized$.pipe((0,m.n)(e=>!e),(0,b.P)()).subscribe(i=>{i&&!e&&(e=!0,t.map((e,t)=>{t>1&&(0,O.yLv)(this.directionState.stopsStore)}),setTimeout(()=>{t.map((e,t)=>{const i=this.directionState.stopsStore.all().find(e=>e.position===t);i.text=e,i.coordinates=e.split(","),this.directionState.stopsStore.update(i)})},1.25*this.directionState.debounceTime))}),this.directionState.routesFeatureStore.count$.pipe((0,m.n)(e=>e<1),(0,b.P)()).subscribe(e=>{e>=1&&this.directionState.zoomToActiveRoute$.next()}),this.directionState.routesFeatureStore.count$.pipe((0,m.n)(e=>e<2),(0,b.P)()).subscribe(()=>{o&&(this.directionState.routesFeatureStore.entities$.value.map(e=>e.properties.active=!1),this.directionState.routesFeatureStore.entities$.value[o].properties.active=!0,this.directionState.zoomToActiveRoute$.next())})}}readLayersQueryParams(e){this.readLayersQueryParamsByType(e,"wms"),this.readLayersQueryParamsByType(e,"wmts"),this.readLayersQueryParamsByType(e,"arcgisrest"),this.readLayersQueryParamsByType(e,"imagearcgisrest"),this.readLayersQueryParamsByType(e,"tilearcgisrest"),this.readVectorQueryParams(e)}getQueryParam(e,t){let i;return t.includes("?")&&(i=new x.LE({fromString:t.split("?")[1]}).get(e)),i}readLayersQueryParamsByType(e,t){let i,o;switch(t){case"wms":(e.layers||e.wmsLayers)&&e.wmsUrl&&(o="wmsUrl",i=e.wmsLayers?"wmsLayers":"layers");break;case"wmts":e.wmtsLayers&&e.wmtsUrl&&(o="wmtsUrl",i="wmtsLayers");break;case"arcgisrest":e.arcgisLayers&&e.arcgisUrl&&(o="arcgisUrl",i="arcgisLayers");break;case"imagearcgisrest":e.iarcgisLayers&&e.iarcgisUrl&&(o="iarcgisUrl",i="iarcgisLayers");break;case"tilearcgisrest":e.tarcgisLayers&&e.tarcgisUrl&&(o="tarcgisUrl",i="tarcgisLayers")}if(!i||!o)return;const n=e[i].split("),("),a=e[o].split(",");let s=0;a.forEach(i=>{let o=i;const a=this.getQueryParam("VERSION",o)||this.getQueryParam("version",o)||void 0;a&&(o=o.replace("VERSION="+a,"").replace("version="+a,"")),this.extractLayersByService(n[s]).forEach(i=>{const n=i.split(":igoz"),s=S.gb.removeUndefined({type:t,url:o,layer:n[0],params:"wms"===t?{LAYERS:n[0]}:void 0}),r=(0,O.lZj)(s),c=this.computeLayerVisibilityFromUrl(e,r);this.addLayerFromURL(o,n[0],t,a,c,n[1]?parseInt(n[1],10):void 0)}),s+=1})}readVectorQueryParams(e){if(e.vector){const t=e.vector,i=t.lastIndexOf("/"),o=t.slice(i+1,t.length);this.http.get(`${t}`,{responseType:"blob"}).subscribe(e=>{const t=new File([e],o,{type:e.type,lastModified:Date.now()});this.importService.import(t).subscribe(e=>this.onFileImportSuccess(t,e),e=>this.onFileImportError(t,e))})}}onFileImportSuccess(e,t){(0,O.xrF)(e,t,this.map,this.messageService,this.languageService)}onFileImportError(e,t){(0,O.jDn)(e,t,this.messageService,this.languageService)}extractLayersByService(e){let t=e;return t=t.startsWith("(")?t.substr(1):t,t=t.endsWith(")")?t.slice(0,-1):t,t.split(",")}addLayerFromURL(e,t,i,o,n=!0,a){if(!this.contextLoaded)return;const s={optionsFromCapabilities:!0,optionsFromApi:!0,crossOrigin:!0,type:i,url:e},r="arcgisrest"===i||"imagearcgisrest"===i||"tilearcgisrest"===i;let c={version:"wmts"===i?"1.0.0":void 0,queryable:!!r,queryFormat:r?"esrijson":void 0,layer:t};"wms"===i&&(c={params:{LAYERS:t,VERSION:o}}),c=S.gb.removeUndefined(Object.assign({},c,s)),this.addedLayers$$.push(this.layerService.createAsyncLayer({zIndex:a,visible:n,sourceOptions:c}).subscribe(e=>{this.map.addLayer(e)}))}computeLayerVisibilityFromUrl(e,t){const i=e;let o=!0;if(!i||!t)return o;let n="",a="",s=[],r=[];return i.visiblelayers&&(n=i.visiblelayers),i.invisiblelayers&&(a=i.invisiblelayers),"*"===n&&(o=!0),"*"===a&&(o=!1),s=n.split(","),r=a.split(","),(s.indexOf(t)>-1||s.indexOf(t.toString())>-1)&&(o=!0),(r.indexOf(t)>-1||r.indexOf(t.toString())>-1)&&(o=!1),o}}he.\u0275fac=function(e){return new(e||he)(n.Y36(a.gz),n.Y36(P.gV),n.Y36(M.e8),n.Y36(c.yJ),n.Y36(O.ITu),n.Y36(O.LvN),n.Y36(O.neU),n.Y36(P.sz),n.Y36(P.U5),n.Y36(P.po),n.Y36(P.Tb),n.Y36(P.EH),n.Y36(O.gS3),n.Y36(c.E4),n.Y36(O.Y5R),n.Y36(x.eN),n.Y36(c.TS),n.Y36(c.ez),n.Y36(T.uw),n.Y36(c.V1),n.Y36(P.Nw),n.Y36(T.uw))},he.\u0275cmp=n.Xpm({type:he,selectors:[["app-portal"]],viewQuery:function(e,t){if(1&e&&(n.Gf(ie,7,n.SBq),n.Gf(oe,7,n.SBq)),2&e){let e;n.iGM(e=n.CRH())&&(t.mapBrowser=e.first),n.iGM(e=n.CRH())&&(t.searchBar=e.first)}},decls:1,vars:1,consts:[[4,"ngIf"],["position","end"],[3,"shown","click"],[3,"sidenavOpened","openSidenav",4,"ngIf"],["appearance","outline","searchIcon","magnify","matTooltipShowDelay","500","tooltip-position","after","color","primary",3,"matTooltip","searchSettings","store","termSplitter","pointerSummaryStatus","searchTermChange","search","clearFeature","searchSettingsChange",4,"ngIf"],[3,"map","opened","openedChange","toolChange"],["igoHoverFeature","","igoMapContext","","igoLayerContext","","igoDropGeoFile","",3,"igoHoverFeatureDelay","igoHoverFeatureEnabled","map","ngClass"],["mapBrowser",""],[3,"ngClass","map","useStaticIcon"],["id","map-buttons"],["color","primary",3,"map",4,"ngIf"],["color","primary",3,"map"],["color","primary",3,"showIfNoRotation","map"],[3,"sidenavOpened","openSidenav"],["appearance","outline","searchIcon","magnify","matTooltipShowDelay","500","tooltip-position","after","color","primary",3,"matTooltip","searchSettings","store","termSplitter","pointerSummaryStatus","searchTermChange","search","clearFeature","searchSettingsChange"],["searchbar",""]],template:function(e,t){1&e&&n.YNc(0,pe,17,24,"mat-sidenav-container",0),2&e&&n.Q6J("ngIf",!t.hasToolbox)},directives:[r.O5,k.TM,k.Rh,w.qv,D,O.ExE,O.Ej2,Q.b3,Q.mH,O.V$T,r.mk,O.AIr,O.PUQ,O.fwr,W,O.pyf,O.NBD,U.gM,O.u$Y,K,te],pipes:[r.Ov,q.X$],styles:["[_nghost-%COMP%]{width:100%;height:100%;display:block}mat-icon.disabled[_ngcontent-%COMP%]{color:#00000061}mat-sidenav-container[_ngcontent-%COMP%]{height:100%;width:100%;background-color:#efefef;z-index:5;display:unset}@media only screen and (orientation:portrait) and (max-width: 599px),only screen and (orientation:landscape) and (max-width: 959px){mat-sidenav-content[_ngcontent-%COMP%]{z-index:auto}}.spacer[_ngcontent-%COMP%]{flex:1 1 auto}igo-search-bar[_ngcontent-%COMP%]{background-color:#fff;font-size:16px;position:absolute;top:calc(4 * 4px);z-index:4;height:40px;margin:0 4px}igo-search-bar[_ngcontent-%COMP%]{width:calc(calc(400px) - 40px)}@media only screen and (orientation:portrait) and (max-width: 599px),only screen and (orientation:landscape) and (max-width: 959px){igo-search-bar[_ngcontent-%COMP%]{width:calc(100% - 40px - 40px - (3 * 4px));max-width:350px}}igo-search-bar[_ngcontent-%COMP%], igo-search-results[_ngcontent-%COMP%]   igo-list[_ngcontent-%COMP%], .baselayers[_ngcontent-%COMP%]{left:16px!important}  .baselayers-pushed{left:calc(400px + 4px)!important;-webkit-animation-duration:3s;animation-duration:3s;visibility:visible;opacity:1;opacity:0;-webkit-animation:fadeIn .1s;animation:fadeIn .1s;-webkit-animation-delay:0s;animation-delay:0s;-webkit-animation-fill-mode:forwards;animation-fill-mode:forwards}  igo-search-bar{height:100%}igo-search-bar[_ngcontent-%COMP%]   svg[_ngcontent-%COMP%]{color:#fff;height:40px;width:40px}  .search-bar-buttons{height:100%;margin-top:.25em;background:#4E5662}  igo-search-bar .mat-form-field-outline-end,   igo-search-bar .mat-form-field-outline-start{border-color:#4e5662;height:40px!important}  igo-search-bar .mat-form-field-appearance-outline .mat-form-field-outline{top:0}  igo-search-bar .mat-form-field-appearance-outline .mat-form-field-wrapper,   .search-bar-buttons{margin-top:0}  .igo-search-bar-container{height:40px!important}  igo-search-bar .mat-form-field-appearance-outline .mat-form-field-infix input{line-height:40px;vertical-align:middle;border-top:0;padding:0;margin-top:0}  igo-search-bar .mat-form-field-appearance-outline .mat-form-field-infix{padding:0;border-top:0!important}  igo-search-bar .mat-form-field-appearance-outline .mat-form-field-wrapper, .search-bar-buttons[_ngcontent-%COMP%],   igo-search-bar .mat-form-field-outline-end,   igo-search-bar .mat-form-field-outline-start{height:40px;padding:0;margin-top:0}  igo-search-bar .mat-form-field-appearance-outline .mat-form-field-flex{padding:0 8px;margin-top:0!important;height:40px}  .igo-search-bar-container>mat-form-field{padding:0!important}  igo-search-bar .mat-form-field-outline-start{border-radius:0!important}  igo-search-bar .mat-form-field-outline-end{border-radius:0!important}  .search-bar-buttons .mat-icon{width:40px!important;display:inline-block!important}igo-map-browser[_ngcontent-%COMP%]{width:100%;height:100%;position:relative;display:block}igo-map-browser[_ngcontent-%COMP%]     .ol-attribution{left:50px;bottom:4px;text-align:left;padding:0;margin-right:90px;background-color:#fff0;width:calc(100% - 500px)}igo-map-browser[_ngcontent-%COMP%]     .ol-attribution.ol-logo-only{height:inherit}igo-map-browser[_ngcontent-%COMP%]     .ol-attribution.ol-collapsed{background:none}igo-map-browser[_ngcontent-%COMP%]     .ol-attribution.ol-collapsed button{transform:none}igo-map-browser[_ngcontent-%COMP%]     .ol-attribution button{transform:rotate(180deg);background-color:#fff;cursor:pointer}igo-map-browser[_ngcontent-%COMP%]     .ol-attribution.ol-uncollapsible{height:auto}igo-map-browser[_ngcontent-%COMP%]     .ol-attribution ul{background-color:#fff9;padding:2px .5em}igo-map-browser[_ngcontent-%COMP%]     .ol-overlaycontainer-stopevent{position:absolute;width:100%;left:0;bottom:0}igo-map-browser.toast-offset-scale-line[_ngcontent-%COMP%]     .ol-overlaycontainer-stopevent   .ol-scale-line{bottom:50px}@media only screen and (orientation:portrait) and (max-width: 599px),only screen and (orientation:landscape) and (max-width: 959px){igo-map-browser.toast-offset-attribution[_ngcontent-%COMP%]     .ol-overlaycontainer-stopevent   .ol-attribution{bottom:50px}}#map-buttons[_ngcontent-%COMP%]{display:flex;flex-direction:column;margin-bottom:5px;z-index:10;position:absolute;right:5px;bottom:0;max-height:50%}.igo-zoom-button-container[_ngcontent-%COMP%], button[_ngcontent-%COMP%], app-legend-button[_ngcontent-%COMP%], igo-zoom-button[_ngcontent-%COMP%], igo-offline-button[_ngcontent-%COMP%], igo-geolocate-button[_ngcontent-%COMP%], igo-home-extent-button[_ngcontent-%COMP%], #app-legend-button-dialog[_ngcontent-%COMP%], mat-dialog-container[_ngcontent-%COMP%]   app-legend-button-dialog[_ngcontent-%COMP%], app-legend-button-dialog[_ngcontent-%COMP%]{margin-top:4px!important;position:unset!important;bottom:unset!important;margin-left:auto;align-self:flex-end;margin-top:auto}  igo-zoom-button{box-shadow:0 3px 1px -2px #0003,0 2px 2px #00000024,0 1px 5px #0000001f}@media only screen and (orientation:portrait) and (min-width: 600px) and (max-width: 839px),only screen and (orientation:landscape) and (min-width: 960px) and (max-width: 1279px){igo-zoom-button[_ngcontent-%COMP%]{display:none}}  .map-hasfooter{height:calc(100% - 29px)!important}  #legend-button-dialog-container{top:calc(72px + 4px);max-height:calc(100% - 72px - 29px - 100px)}@media (min-width: 768px){  #legend-button-dialog-container{top:calc(72px + 4px);max-height:calc(100% - 72px - 29px - 180px)}}"],data:{animation:[[(0,C.X$)("controlsOffsetY",[(0,C.SB)("close",(0,C.oB)({})),(0,C.SB)("firstRowFromBottom",(0,C.oB)({bottom:"5px"})),(0,C.SB)("firstRowFromBottom-expanded",(0,C.oB)({bottom:"5px"})),(0,C.SB)("firstRowFromBottom-expanded-maximized",(0,C.oB)({bottom:"500px"})),(0,C.SB)("secondRowFromBottom",(0,C.oB)({bottom:"47px"})),(0,C.SB)("thirdRowFromBottom",(0,C.oB)({bottom:"104px"})),(0,C.SB)("",(0,C.oB)({bottom:"calc(285px)"})),(0,C.SB)("secondRowFromBottom-expanded",(0,C.oB)({bottom:"calc(285px + 52px)"})),(0,C.SB)("thirdRowFromBottom-expanded",(0,C.oB)({bottom:"calc(285px + 104px)"})),(0,C.eR)("* => *",(0,C.jt)("200ms"))])],(0,C.X$)("controlStateX",[(0,C.SB)("left",(0,C.oB)({left:"60px"})),(0,C.SB)("right",(0,C.oB)({left:"465px"})),(0,C.eR)("* => *",(0,C.jt)("200ms"))]),(0,C.X$)("controlStateY",[(0,C.SB)("close",(0,C.oB)({})),(0,C.SB)("firstRowFromBottom",(0,C.oB)({bottom:"2px","margin-left":"0px"})),(0,C.SB)("firstRowFromBottom-expanded",(0,C.oB)({bottom:"285px","margin-left":"-55px"})),(0,C.SB)("firstRowFromBottom-expanded-maximized",(0,C.oB)({bottom:"500px","margin-left":"-55px"})),(0,C.eR)("* => *",(0,C.jt)("200ms"))])]}});class de{constructor(e){this.configService=e,this.hasHeader=!0,this.hasHeader=void 0!==this.configService.getConfig("header.hasHeader")&&this.configService.getConfig("header.hasHeader")}}de.\u0275fac=function(e){return new(e||de)(n.Y36(c.E4))},de.\u0275cmp=n.Xpm({type:de,selectors:[["app-map"]],decls:1,vars:1,consts:[[3,"ngClass"]],template:function(e,t){1&e&&n._UZ(0,"app-portal",0),2&e&&n.Q6J("ngClass",t.hasHeader?"portal-hasHeader-hasMenu":"portal-hasMenu")},directives:[he,r.mk],styles:[".portal-hasMenu{height:calc(100% - 40px)!important}  .portal-hasHeader-hasMenu{height:calc(100% - 72px - 40px)!important}  #legend-button-dialog-container{top:calc(72px + 40px + 4px)!important;max-height:calc(100% - 72px - 40px - 29px - 100px)!important}@media (min-width: 768px){  .portal-hasMenu{height:calc(100% - 72px)!important}  .portal-hasHeader-hasMenu{height:calc(100% - 72px - 72px)!important}  #legend-button-dialog-container{top:calc(72px + 72px + 4px)!important;max-height:calc(100% - 72px - 72px - 29px - 180px)!important}}"]});const ue=[{path:"",component:p},{path:"carte",component:de},{path:"en-savoir-plus",component:h}];class ge{}ge.\u0275fac=function(e){return new(e||ge)},ge.\u0275mod=n.oAB({type:ge}),ge.\u0275inj=n.cJS({imports:[[a.Bz.forRoot(ue,{onSameUrlNavigation:"reload",relativeLinkResolution:"legacy"})],a.Bz]});class me{}me.\u0275fac=function(e){return new(e||me)},me.\u0275mod=n.oAB({type:me}),me.\u0275inj=n.cJS({imports:[[r.ez,c.yR,l.g0,ge]]});class fe{}fe.\u0275fac=function(e){return new(e||fe)},fe.\u0275mod=n.oAB({type:fe}),fe.\u0275inj=n.cJS({imports:[[r.ez,c.yR]]});var be=i(81134),ve=i(89544),xe=i(18293),ye=i(94757),Se=function(e,t,i,o){var n,a=arguments.length,s=a<3?t:null===o?o=Object.getOwnPropertyDescriptor(t,i):o;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(e,t,i,o);else for(var r=e.length-1;r>=0;r--)(n=e[r])&&(s=(a<3?n(s):a>3?n(t,i,s):n(t,i))||s);return a>3&&s&&Object.defineProperty(t,i,s),s},we=function(e,t){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(e,t)};class Oe{constructor(e){this.languageService=e}formatResult(e){return e}}Oe.\u0275fac=function(e){return new(e||Oe)(n.LFG(c.TS))},Oe.\u0275prov=n.Yz7({token:Oe,factory:Oe.\u0275fac});class Ce{encodeKey(e){return encodeURIComponent(e)}encodeValue(e){return encodeURIComponent(e)}decodeKey(e){return decodeURIComponent(e)}decodeValue(e){return decodeURIComponent(e)}}class Pe extends O.xHx{constructor(e,t,i,o,n,a){super(o,i),this.http=e,this.languageService=t,this.formatter=n,this.title$=new d.X(""),this.hashtagsLieuxToKeep=[],this.languageService.translate.get(this.options.title).subscribe(e=>this.title$.next(e));const s=a.get(M.e8);this.settings.length&&(s?s.authenticate$.subscribe(()=>{this.getAllowedTypes()}):this.getAllowedTypes())}get title(){return this.title$.getValue()}getId(){return Pe.id}getType(){return Pe.type}getDefaultOptions(){var e;const t=this.options.params&&this.options.params.limit?Number(this.options.params.limit):void 0,i=this.options.params&&this.options.params.ecmax?Number(this.options.params.ecmax):void 0,o=(null===(e=this.options.params)||void 0===e?void 0:e.type)?this.options.params.type.replace(/\s/g,"").toLowerCase().split(","):["adresses","codes-postaux","routes","intersections","municipalites","mrc","regadmin","lieux"];return{title:"igo.geo.search.icherche.name",searchUrl:"https://geoegl.msp.gouv.qc.ca/apis/icherche",settings:[{type:"checkbox",title:"results type",name:"type",values:[{title:"igo.geo.search.icherche.type.address",value:"adresses",enabled:-1!==o.indexOf("adresses"),hashtags:["adresse"]},{title:"igo.geo.search.icherche.type.oldAddress",value:"anciennes-adresses",enabled:-1!==o.indexOf("anciennes-adresses"),hashtags:["anciennes-adresses"]},{title:"igo.geo.search.icherche.type.postalCode",value:"codes-postaux",enabled:-1!==o.indexOf("codes-postaux"),hashtags:["code-postal"]},{title:"igo.geo.search.icherche.type.road",value:"routes",enabled:-1!==o.indexOf("routes"),hashtags:["route"]},{title:"igo.geo.search.icherche.type.intersection",value:"intersections",enabled:-1!==o.indexOf("intersections"),hashtags:["intersection","+"]},{title:"igo.geo.search.icherche.type.city",value:"municipalites",enabled:-1!==o.indexOf("municipalites"),hashtags:["municipalit\xe9","mun"]},{title:"igo.geo.search.icherche.type.oldCity",value:"anciennes-municipalites",enabled:-1!==o.indexOf("anciennes-municipalites"),hashtags:["anciennes-municipalites"]},{title:"igo.geo.search.icherche.type.mrc",value:"mrc",enabled:-1!==o.indexOf("mrc"),hashtags:["mrc"]},{title:"igo.geo.search.icherche.type.regadmin",value:"regadmin",enabled:-1!==o.indexOf("regadmin"),hashtags:["r\xe9gion-administrative","regadmin"]},{title:"igo.geo.search.icherche.type.entreprise",value:"entreprises",enabled:-1!==o.indexOf("entreprises"),available:!1,hashtags:["entreprise"]},{title:"igo.geo.search.icherche.type.place",value:"lieux",enabled:-1!==o.indexOf("lieux"),hashtags:["lieu"]},{title:"igo.geo.search.icherche.type.exit",value:"sorties-autoroute",enabled:-1!==o.indexOf("sorties-autoroute"),hashtags:["sortie","sorties","exit"]},{title:"igo.geo.search.icherche.type.km",value:"bornes-km",enabled:-1!==o.indexOf("bornes-km"),hashtags:["borne","bornes","rep\xe8re","km"]},{title:"igo.geo.search.icherche.type.gcc",value:"bornes-gcc",enabled:-1!==o.indexOf("bornes-gcc"),hashtags:["borne","bornes","rep\xe8re","gcc","ccg"]},{title:"igo.geo.search.icherche.type.cn",value:"bornes-cn",enabled:-1!==o.indexOf("bornes-cn"),hashtags:["borne","bornes","cn"]},{title:"igo.geo.search.icherche.type.sumi",value:"bornes-sumi",enabled:-1!==o.indexOf("bornes-sumi"),hashtags:["borne","bornes","sumi"]},{title:"igo.geo.search.icherche.type.hq",value:"hq",enabled:-1!==o.indexOf("hq"),hashtags:["hq"]},{title:"igo.geo.search.icherche.type.cadastre",value:"cadastre",enabled:-1!==o.indexOf("cadastre"),hashtags:["cadastre"]}]},{type:"radiobutton",title:"results limit",name:"limit",values:[{title:"1",value:1,enabled:1===t},{title:"5",value:5,enabled:5===t||!t},{title:"10",value:10,enabled:10===t},{title:"25",value:25,enabled:25===t},{title:"50",value:50,enabled:50===t}]},{type:"radiobutton",title:"ecmax",name:"ecmax",values:[{title:"10 %",value:10,enabled:10===i},{title:"30 %",value:30,enabled:30===i||!i},{title:"50 %",value:50,enabled:50===i},{title:"75 %",value:75,enabled:75===i},{title:"100 %",value:100,enabled:100===i}]},{type:"radiobutton",title:"restrictExtent",name:"loc",values:[{title:"igo.geo.search.icherche.restrictExtent.map",value:"true",enabled:!1},{title:"igo.geo.search.icherche.restrictExtent.quebec",value:"false",enabled:!0}]}]}}search(e,t){const i=this.computeRequestParams(e,t||{});return i.get("type").length?(this.options.params.page=i.get("page")||"1",this.http.get(`${this.searchUrl}/geocode`,{params:i}).pipe((0,Z.U)(t=>this.extractResults(t,e)),(0,xe.K)(e=>{throw e.error.toDisplay=!0,e.error.title=this.languageService.translate.instant(this.getDefaultOptions().title),e}))):(0,be.of)([])}getAllowedTypes(){return this.http.get(`${this.searchUrl}/types`).subscribe(e=>{const t=this.settings.find(e=>"type"===e.name);t.values.forEach(t=>{const i=new RegExp(`^${t.value}(\\.|$)`),o=e.filter(e=>i.test(e));t.available=o.length>0,"lieux"===t.value&&(this.hashtagsLieuxToKeep=[...new Set(o.map(e=>e.split(".")).reduce((e,t)=>e.concat(t)).filter(e=>"lieux"!==e))])}),this.setParamFromSetting(t,!1)})}computeRequestParams(e,t){const i=Object.assign({geometry:!0,bbox:!0,icon:!0,type:["adresses","codes-postaux","routes","municipalites","mrc","regadmin","lieux.toponyme.geographie","lieux.toponyme.hydro","lieux.toponyme.parc","lieux.toponyme.secteur"]},this.params,this.computeOptionsParam(e,t||{}).params,{q:this.computeTerm(e),page:t.page});if("true"===i.loc){const[e,o,n,a]=t.extent;i.loc=`${e},${o};${n},${o};${n},${a};${e},${a};${e},${o}`}else"false"===i.loc&&delete i.loc;return/#[A-Za-z]+/.test(i.q)&&(i.type="lieux"),new x.LE({fromObject:S.gb.removeUndefined(i),encoder:new Ce})}extractResults(e,t){return e.features.map(i=>this.formatter.formatResult(this.dataToResult(i,t,e)))}dataToResult(e,t,i){const o=this.computeProperties(e),n=[this.getId(),o.type,o.code].join("."),a=e.highlight.title||e.properties.nom,s=e.highlight.title2?" <small> "+e.highlight.title2+"</small>":"",r=e.highlight.title3?"<br><small> "+e.highlight.title3+"</small>":"";return{source:this,data:{type:O.D97,projection:"EPSG:4326",geometry:e.geometry,extent:e.bbox,properties:o,meta:{id:n,title:e.properties.nom}},meta:{dataType:O.D97,id:n,title:e.properties.nom,titleHtml:a+s+r,icon:e.icon||"map-marker",score:e.score||(0,O.TWc)(t.trim(),e.properties.nom),nextPage:i.features.length%+this.options.params.limit==0&&+this.options.params.page<10}}}computeProperties(e){const t=S.gb.removeKeys(e.properties,Pe.propertiesBlacklist);if(!e.geometry)return Object.assign({type:e.index},t);const i={GoogleMaps:""};let o,n;if("Point"===e.geometry.type)o=O.Gij.getGoogleMapsCoordLink(e.geometry.coordinates[0],e.geometry.coordinates[1]);else{const t=(0,$.Z)(e.geometry);o=O.Gij.getGoogleMapsCoordLink(t.geometry.coordinates[0],t.geometry.coordinates[1])}n="routes"===e.index?O.Gij.getGoogleMapsNameLink(e.properties.nom+", "+e.properties.municipalite):"municipalites"===e.index?O.Gij.getGoogleMapsNameLink(e.properties.nom+", ville"):"mrc"===e.index?O.Gij.getGoogleMapsNameLink("mrc+"+e.properties.nom):"regadmin"===e.index?O.Gij.getGoogleMapsNameLink(e.properties.nom+",+QC"):O.Gij.getGoogleMapsNameLink(e.properties.nom||e.highlight.title),i.GoogleMaps="<a href="+o+' target="_blank">'+this.languageService.translate.instant("igo.geo.searchByCoord")+"</a> <br /> <a href="+n+' target="_blank">'+this.languageService.translate.instant("igo.geo.searchByName")+"</a>","Point"===e.geometry.type&&(i.GoogleStreetView=O.Gij.getGoogleStreetViewLink(e.geometry.coordinates[0],e.geometry.coordinates[1]));const a={Route:'<span class="routing"> <u>'+this.languageService.translate.instant("igo.geo.seeRouting")+"</u> </span>"};return Object.assign({type:e.index},t,i,a)}computeTerm(e){let t=!1;return t=(e.match(/(#[A-Za-z]+)/g)||[]).some(e=>{const t=e.substring(1);return this.hashtagsLieuxToKeep.some(e=>e.toLowerCase().normalize("NFD").replace(/[\u0300-\u036f]/g,"")===t.toLowerCase().normalize("NFD").replace(/[\u0300-\u036f]/g,""))}),t||(e=e.replace(/(#[A-Za-z]+)/g,"")),e.replace(/[^\w\xc0-\xff !\-\+\(\)\.\/\xbd\xbc\xbe,'#]+/g,"")}computeOptionsParam(e,t){const i=super.getHashtagsValid(e,"type");return i&&(t.params=Object.assign(t.params||{},{type:i.join(",")})),t}}Pe.id="icherche",Pe.type=O.D97,Pe.propertiesBlacklist=[],Pe.\u0275fac=function(e){return new(e||Pe)(n.LFG(x.eN),n.LFG(c.TS),n.LFG(c.V1),n.LFG("options"),n.LFG(Oe),n.LFG(n.zs3))},Pe.\u0275prov=n.Yz7({token:Pe,factory:Pe.\u0275fac}),Se([(0,ye.q)({maxCacheCount:20}),we("design:type",Function),we("design:paramtypes",[String,Object]),we("design:returntype",ve.y)],Pe.prototype,"search",null);class Me extends O.xHx{constructor(e,t,i,o,n){super(o,i),this.http=e,this.languageService=t,this.title$=new d.X(""),this.languageService.translate.get(this.options.title).subscribe(e=>this.title$.next(e));const a=n.get(M.e8);this.settings.length&&(a?a.authenticate$.subscribe(()=>{this.getAllowedTypes()}):this.getAllowedTypes())}get title(){return this.title$.getValue()}getId(){return Me.id}getType(){return Me.type}getDefaultOptions(){const e=this.options.params&&this.options.params.type?this.options.params.type.replace(/\s/g,"").toLowerCase().split(","):["adresses","municipalites","mrc","regadmin"];return{title:"igo.geo.search.ichercheReverse.name",searchUrl:"https://geoegl.msp.gouv.qc.ca/apis/terrapi",settings:[{type:"checkbox",title:"results type",name:"type",values:[{title:"igo.geo.search.icherche.type.address",value:"adresses",enabled:-1!==e.indexOf("adresses")},{title:"igo.geo.search.icherche.type.road",value:"routes",enabled:-1!==e.indexOf("routes"),available:!1},{title:"igo.geo.search.icherche.type.district",value:"arrondissements",enabled:-1!==e.indexOf("arrondissements")},{title:"igo.geo.search.icherche.type.city",value:"municipalites",enabled:-1!==e.indexOf("municipalites")},{title:"igo.geo.search.icherche.type.mrc",value:"mrc",enabled:-1!==e.indexOf("mrc")},{title:"igo.geo.search.icherche.type.regadmin",value:"regadmin",enabled:-1!==e.indexOf("regadmin")}]},{type:"radiobutton",title:"radius",name:"bufferInput",values:[{title:"100 m",value:100,enabled:!this.options.distance||100===this.options.distance},{title:"500 m",value:500,enabled:500===this.options.distance},{title:"1 km",value:1e3,enabled:1e3===this.options.distance},{title:"2 km",value:2e3,enabled:2e3===this.options.distance},{title:"5 km",value:5e3,enabled:5e3===this.options.distance}]}]}}reverseSearch(e,t){const i=this.computeRequestParams(e,t||{});return i.get("type").length?this.http.get(`${this.searchUrl}/locate`,{params:i}).pipe((0,Z.U)(e=>this.extractResults(e))):(0,be.of)([])}getAllowedTypes(){return this.http.get(`${this.searchUrl}/types`).subscribe(e=>{const t=this.settings.find(e=>"type"===e.name);t.values.forEach(t=>{t.available=e.indexOf(t.value)>-1}),this.setParamFromSetting(t,!1)})}computeRequestParams(e,t){return(t.distance||this.options.distance)&&(t.params=Object.assign(t.params||{},{bufferInput:t.distance||this.options.distance})),new x.LE({fromObject:Object.assign({loc:e.join(","),sort:"distance",geometry:!0,icon:!0},t.params||{},this.params)})}extractResults(e){return e.features.map(e=>this.dataToResult(e))}getSubtitle(e){if(!this.settings.length)return"";let t="";switch(e.properties.type){case"arrondissements":t=e.properties.municipalite+" (Arrondissement)";break;default:const i=this.settings.find(e=>"type"===e.name).values.find(t=>t.value===e.properties.type);i&&(t=this.languageService.translate.instant(i.title))}return t}dataToResult(e){const t=this.computeProperties(e),i=this.computeExtent(e),o=[this.getId(),t.type,t.code].join("."),n=e.properties.nom,a=" <small> "+this.getSubtitle(e)+"</small>";return{source:this,data:{type:O.D97,projection:"EPSG:4326",geometry:e.geometry,extent:i,properties:t,meta:{id:o,title:e.properties.nom}},meta:{dataType:O.D97,id:o,title:e.properties.nom,titleHtml:n+a,icon:e.icon||"map-marker",pointerSummaryTitle:this.getSubtitle(e)+": "+e.properties.nom}}}computeProperties(e){const t=S.gb.removeKeys(e.properties,Me.propertiesBlacklist),i={Route:'<span class="routing"> <u>'+this.languageService.translate.instant("igo.geo.seeRouting")+"</u> </span>"};return Object.assign(t,i)}computeExtent(e){return e.bbox?[e.bbox[0],e.bbox[2],e.bbox[1],e.bbox[3]]:void 0}}function Te(e){return new Oe(e)}function ke(e,t,i,o,n,a){return new Pe(e,t,i,o.getConfig(`searchSources.${Pe.id}`),n,a)}Me.id="icherchereverse",Me.type=O.D97,Me.propertiesBlacklist=[],Me.\u0275fac=function(e){return new(e||Me)(n.LFG(x.eN),n.LFG(c.TS),n.LFG(c.V1),n.LFG("options"),n.LFG(n.zs3))},Me.\u0275prov=n.Yz7({token:Me,factory:Me.\u0275fac}),Se([(0,ye.q)({maxCacheCount:20}),we("design:type",Function),we("design:paramtypes",[Array,Object]),we("design:returntype",ve.y)],Me.prototype,"reverseSearch",null);class Ze{}Ze.\u0275fac=function(e){return new(e||Ze)},Ze.\u0275mod=n.oAB({type:Ze}),Ze.\u0275inj=n.cJS({imports:[[r.ez]]});class _e{}_e.\u0275fac=function(e){return new(e||_e)},_e.\u0275mod=n.oAB({type:_e}),_e.\u0275inj=n.cJS({imports:[[r.ez,B.Ps,L.ot,k.SJ,U.AV,c.yR,w.Am,w.O4,Q.Zy,w.HL,O.Ud7,w.cQ]]});class je{}je.\u0275fac=function(e){return new(e||je)},je.\u0275mod=n.oAB({type:je,bootstrap:[K]}),je.\u0275inj=n.cJS({providers:[{provide:"app-legend-button-dialog",useValue:ee},{provide:T.so,useValue:{}},{provide:T.WI,useValue:{}}],imports:[[B.Ps,T.Is,O.t1T,O.FIR,L.ot],B.Ps]});var $e=i(72012);class qe{}qe.\u0275fac=function(e){return new(e||qe)},qe.\u0275mod=n.oAB({type:qe}),qe.\u0275inj=n.cJS({imports:[[r.ez,B.Ps,$e.g,U.AV,L.ot,c.yR,O.Ud7,O.TxX,w.O4,w.Am,O.nob,w.k_]]});var Re=i(74354);class Ae{}Ae.\u0275fac=function(e){return new(e||Ae)},Ae.\u0275mod=n.oAB({type:Ae}),Ae.\u0275inj=n.cJS({imports:[[r.ez,B.Ps,L.ot,k.SJ,U.AV,c.yR,w.Am,w.O4,Q.Zy,w.HL,O.Ud7,Re.QW,c.zZ,O.FIR,O.TxX,w.gQ,w.qL,P.uL,O.TxX.forRoot(),qe]]});class Ee{}Ee.\u0275fac=function(e){return new(e||Ee)},Ee.\u0275mod=n.oAB({type:Ee}),Ee.\u0275inj=n.cJS({providers:[(0,O.jxb)(),{provide:O.xHx,useFactory:ke,multi:!0,deps:[x.eN,c.TS,c.V1,c.E4,Oe,n.zs3]},(0,O.ZsY)(),(0,O.PIH)(),(0,O.ZsY)(),(0,O.PIH)(),(0,O.jxb)(),(0,O.c43)(),(0,O.MG6)(),(0,O.HAL)(),O.IDv,(0,O.pCg)(),{provide:Oe,useFactory:Te,deps:[c.TS]},(0,O.XBb)(),O.oDG,Pe,(0,O.rQG)({path:"./assets/list-style.json"})],imports:[[r.ez,U.AV,L.ot,B.Ps,c.PV,O.Ud7,O.FIR,w.mD,w.O4,P.fZ,Q.Zy,Q.jm,fe,je,O.t1T,w.h5,O.Jpu,O.y1m.forRoot(),O.TxX.forRoot(),Q.jm,k.SJ,T.Is,w.AP,O.ybB,Ze,_e,Ae,w.Am,w.BQ,w.qL,w.HL,w.gr,w.t3,P.NX,P.uL,P.BQ,P.qk]]});class Fe{}Fe.\u0275fac=function(e){return new(e||Fe)},Fe.\u0275mod=n.oAB({type:Fe}),Fe.\u0275inj=n.cJS({imports:[[r.ez,ge,Ee,me,fe,l.g0],ge]});const Le={production:!0,igo:{app:{forceCoordsNA:!1},language:{prefix:["./locale/","./particular/locale/"]},searchSources:{nominatim:{available:!1},storedqueries:{enabled:!1,available:!1},icherche:{searchUrl:"https://geoegl.msp.gouv.qc.ca/apis/icherche",order:2,params:{limit:"8"}},coordinatesreverse:{showInPointerSummary:!0},icherchereverse:{showInPointerSummary:!0,searchUrl:"https://geoegl.msp.gouv.qc.ca/apis/terrapi",order:3,enabled:!0},ilayer:{searchUrl:"https://geoegl.msp.gouv.qc.ca/apis/icherche/layers",order:4,params:{limit:"3"}},cadastre:{enabled:!1}},projections:[{code:"EPSG:32198",alias:"Quebec Lambert",def:"+proj=lcc +lat_1=60 +lat_2=46 +lat_0=44 +lon_0=-68.5 +x_0=0 +y_0=0           +ellps=GRS80 +towgs84=0,0,0,0,0,0,0 +units=m +no_defs",extent:[-799574,45802,891595.4,1849567.5]},{code:"EPSG:3798",alias:"MTQ Lambert",def:"+proj=lcc +lat_1=50 +lat_2=46 +lat_0=44 +lon_0=-70 +x_0=800000 +y_0=0           +ellps=GRS80 +towgs84=0,0,0,0,0,0,0 +units=m +no_defs",extent:[31796.5834,158846.2231,1813323.4284,2141241.0978]}],searchOverlayStyle:{base:{markerColor:"#5ed0fb",markerOpacity:.8,markerOutlineColor:"#a7e7ff",fillColor:"#5ed0fb",fillOpacity:.2,strokeColor:"#5ed0fb",strokeOpacity:.7,strokeWidth:2},focus:{markerColor:"#5ed0fb",markerOpacity:1,markerOutlineColor:"#DFF7FF",fillColor:"#5ed0fb",fillOpacity:.3,strokeColor:"#DFF7FF",strokeOpacity:1,strokeWidth:2},selection:{markerColor:"#00a1de",markerOpacity:1,markerOutlineColor:"#ffffff",fillColor:"#00a1de",fillOpacity:.3,strokeColor:"#00A1DE",strokeOpacity:1,strokeWidth:2}},queryOverlayStyle:{base:{markerColor:"#5ed0fb",markerOpacity:.8,markerOutlineColor:"#a7e7ff",fillColor:"#5ed0fb",fillOpacity:.2,strokeColor:"#5ed0fb",strokeOpacity:.7,strokeWidth:2},focus:{markerColor:"#5ed0fb",markerOpacity:1,markerOutlineColor:"#DFF7FF",fillColor:"#5ed0fb",fillOpacity:.3,strokeColor:"#DFF7FF",strokeOpacity:1,strokeWidth:2},selection:{markerColor:"#00a1de",markerOpacity:1,markerOutlineColor:"#ffffff",fillColor:"#00a1de",fillOpacity:.3,strokeColor:"#00A1DE",strokeOpacity:1,strokeWidth:2}}}};var Be=i(90490);class Ue{constructor(e,t){this.configService=e,this.languageService=t,this.computeHeader()}computeHeader(){this.headerLogo=this.configService.getConfig("header.logo"),this.headerLogoPrint=this.configService.getConfig("header.logoPrint")}}Ue.\u0275fac=function(e){return new(e||Ue)(n.Y36(c.E4),n.Y36(c.TS))},Ue.\u0275cmp=n.Xpm({type:Ue,selectors:[["app-header"]],decls:21,vars:14,consts:[["role","banner","color","primary",1,"banner"],[1,"container"],[1,"row"],[1,"col-6","col-md-10","d-flex","flex-wrap","align-items-center","zone-logo-title"],["tabindex","5","routerLink","",1,"logo"],["id","header-logo","alt","Logo",3,"src"],["id","header-logo-print","alt","Logo","width","199","height","60",3,"src"],["lang","fr","id","title-desktop",1,"zone-title","d-none","d-md-block"],[1,"col-6","col-md-2","d-flex","justify-content-end","zone-links"],[1,"nav","flex-column"],["rel","noopener noreferrer","alt","('header.contactUsUrl' | translate)","target","_blank",3,"href"],["lang","fr","id","title-mobile",1,"zone-title","d-md-none","col-12"]],template:function(e,t){1&e&&(n.TgZ(0,"mat-toolbar",0),n.TgZ(1,"div",1),n.TgZ(2,"div",2),n.TgZ(3,"div",3),n.TgZ(4,"a",4),n._UZ(5,"img",5),n.qZA(),n._UZ(6,"img",6),n.TgZ(7,"p",7),n._uU(8),n.ALo(9,"translate"),n.qZA(),n.qZA(),n.TgZ(10,"div",8),n.TgZ(11,"ul",9),n.TgZ(12,"li"),n.TgZ(13,"a",10),n.ALo(14,"translate"),n._uU(15),n.ALo(16,"translate"),n.qZA(),n.qZA(),n.qZA(),n.qZA(),n.TgZ(17,"p",11),n.TgZ(18,"a"),n._uU(19),n.ALo(20,"translate"),n.qZA(),n.qZA(),n.qZA(),n.qZA(),n.qZA()),2&e&&(n.xp6(5),n.s9C("src",t.headerLogo,n.LSH),n.xp6(1),n.s9C("src",t.headerLogoPrint,n.LSH),n.xp6(2),n.Oqu(n.lcZ(9,6,"header.title")),n.xp6(5),n.s9C("href",n.lcZ(14,8,"header.contactUsUrl"),n.LSH),n.xp6(2),n.Oqu(n.lcZ(16,10,"header.contactUs")),n.xp6(4),n.Oqu(n.lcZ(20,12,"header.title")))},directives:[l.Ye,a.yS],pipes:[q.X$],styles:['.portal-with-header{height:calc(100% - $header-height-mobile)!important}@media screen and (min-width: 768px){  .portal-with-header{height:calc(100% - $header-height)!important}}[_ngcontent-%COMP%]:root{--breakpoint-sm: 320px;--breakpoint-md: 768px;--breakpoint-lg: 960px;--breakpoint-xl: 1024px}html[_ngcontent-%COMP%], body[_ngcontent-%COMP%]{padding:0;margin:0!important;width:100%;font-size:16px;font-family:"Open sans",sans-serif}@media (min-width: 1280px) and (orientation: landscape){body[_ngcontent-%COMP%]{margin:0!important}}html[_ngcontent-%COMP%], body[_ngcontent-%COMP%], div[_ngcontent-%COMP%], span[_ngcontent-%COMP%], a[_ngcontent-%COMP%], header[_ngcontent-%COMP%], nav[_ngcontent-%COMP%]{margin:0;padding:0;border:0;vertical-align:baseline}html[_ngcontent-%COMP%], body[_ngcontent-%COMP%]{font-family:"Open sans",sans-serif}.col-6[_ngcontent-%COMP%], .col-md-2[_ngcontent-%COMP%], .col-md-10[_ngcontent-%COMP%]{position:relative;width:100%}.col-12[_ngcontent-%COMP%]{flex:0 0 100%;max-width:100%}.container[_ngcontent-%COMP%]{width:100%;margin-right:auto;margin-left:auto}.row[_ngcontent-%COMP%]{-ms-display:flex;display:flex;flex-wrap:wrap;height:100%;width:98%;align-content:center;margin:auto}.col-6[_ngcontent-%COMP%]{flex:0 0 50%;max-width:50%}h1[_ngcontent-%COMP%], h2[_ngcontent-%COMP%], h3[_ngcontent-%COMP%], h4[_ngcontent-%COMP%], h5[_ngcontent-%COMP%], h6[_ngcontent-%COMP%]{font-family:"Roboto",sans-serif;font-weight:bold;color:#095797!important}a[_ngcontent-%COMP%]{word-break:break-word;overflow-wrap:break-word}img[_ngcontent-%COMP%]{vertical-align:middle;border-style:none}*[_ngcontent-%COMP%], *[_ngcontent-%COMP%]:before, *[_ngcontent-%COMP%]:after{box-sizing:border-box}.d-none[_ngcontent-%COMP%]{display:none}.flex-column[_ngcontent-%COMP%]{display:flex;flex-direction:column!important}.flex-wrap[_ngcontent-%COMP%]{flex-wrap:wrap!important}.d-flex[_ngcontent-%COMP%]{display:flex!important}.align-items-center[_ngcontent-%COMP%]{align-items:center!important}.justify-content-end[_ngcontent-%COMP%]{justify-content:flex-end!important}d-md-none[_ngcontent-%COMP%]{display:none}.align-self-end[_ngcontent-%COMP%]{align-self:flex-end!important}.banner[_ngcontent-%COMP%]{display:flex;width:100%;height:72px;box-sizing:border-box;font-family:"Roboto",sans-serif;margin:0;padding:0;border:0;font-size:100%;vertical-align:baseline}a[_ngcontent-%COMP%]{color:#fff;text-decoration:none}.zone-logo-title[_ngcontent-%COMP%]{padding:.5rem 1.1rem .5rem 0}.zone-title[_ngcontent-%COMP%]{font-size:1rem}.zone-links[_ngcontent-%COMP%]{padding-left:1.1rem;max-width:100%;margin:auto;list-style:none;display:block;color:#fff}#header-logo[_ngcontent-%COMP%]{width:100%;min-width:7rem;max-height:28px}#header-logo-print[_ngcontent-%COMP%]{display:none}.zone-links[_ngcontent-%COMP%]   ul[_ngcontent-%COMP%]{font:normal .8rem/1.2rem "roboto",sans-serif;-webkit-font-smoothing:antialiased;text-align:left;flex-wrap:wrap;list-style:none;padding:0;margin:0}ul[_ngcontent-%COMP%]   li[_ngcontent-%COMP%]:last-child{padding:0}.zone-links[_ngcontent-%COMP%]   ul[_ngcontent-%COMP%]   a[_ngcontent-%COMP%]:hover, .zone-links[_ngcontent-%COMP%]   ul[_ngcontent-%COMP%]   a[_ngcontent-%COMP%]:focus{text-decoration:underline;cursor:pointer}.buttonLanguage[_ngcontent-%COMP%]{background:none;border-style:none;padding:0;font:normal .8rem/1rem "roboto",sans-serif;color:unset}#title-mobile[_ngcontent-%COMP%]{margin:auto 0;display:block}#title-desktop[_ngcontent-%COMP%]{display:none;color:#fff;margin:auto 0;padding:0}@media screen and (min-width: 576px){.zone-logo-title[_ngcontent-%COMP%], .zone-links[_ngcontent-%COMP%]{flex:0 0 50%;max-width:50%}}@media screen and (min-width: 768px){.col-md-10[_ngcontent-%COMP%]{flex:0 0 83.33333%;max-width:83.33333%}.zone-links[_ngcontent-%COMP%]{flex:0 0 16.66667%;max-width:16.66667%}}@media screen and (min-width: 824px){#header-logo[_ngcontent-%COMP%]{max-height:39px;padding-right:3.75rem}.banner[_ngcontent-%COMP%]{height:72px}.d-md-block[_ngcontent-%COMP%]{display:block!important}.d-md-none[_ngcontent-%COMP%]{display:none!important}.zone-logo-title[_ngcontent-%COMP%]{flex:0 0 83.33333%;max-width:83.33333%}}']});const ze=function(){return{exact:!0}};class Ie{constructor(){this.color="accent"}}Ie.\u0275fac=function(e){return new(e||Ie)},Ie.\u0275cmp=n.Xpm({type:Ie,selectors:[["app-menu"]],decls:15,vars:2,consts:[["color","accent",1,"container","headline"],[1,"col-12","align-self-end"],[1,"navbar"],["href","#menu-left","routerLinkActive","active",1,"nav-link","nav-arrow","left"],[1,"main-nav","slick-track"],["routerLink","/","routerLinkActive","active","id","menu-left",1,"nav-link",3,"routerLinkActiveOptions"],["routerLink","/carte","routerLinkActive","active",1,"nav-link"],["routerLink","/en-savoir-plus","id","menu-right","routerLinkActive","active",1,"nav-link"],["color","accent","href","#menu-right","routerLinkActive","active",1,"nav-link","nav-arrow","right"]],template:function(e,t){1&e&&(n.TgZ(0,"mat-toolbar",0),n.TgZ(1,"div",1),n.TgZ(2,"nav",2),n.TgZ(3,"a",3),n._uU(4,"\u276e"),n.qZA(),n.TgZ(5,"div",4),n.TgZ(6,"a",5),n._uU(7,"Accueil"),n.qZA(),n.TgZ(8,"a",6),n._uU(9,"Carte"),n.qZA(),n.TgZ(10,"a",7),n._uU(11,"En savoir plus"),n.qZA(),n.qZA(),n.TgZ(12,"a",8),n._uU(13,"\u276f"),n.qZA(),n.qZA(),n.qZA(),n.qZA(),n._UZ(14,"router-outlet")),2&e&&(n.xp6(6),n.Q6J("routerLinkActiveOptions",n.DdM(1,ze)))},directives:[l.Ye,a.Od,a.yS,a.lC],styles:['.navbar[_ngcontent-%COMP%]{position:relative;display:flex;flex-wrap:wrap;align-items:flex-end;flex-direction:row;flex-flow:row nowrap;justify-content:flex-start;height:40px;width:100%;margin:0 auto;padding:0}.nav-link[_ngcontent-%COMP%]{display:block;text-decoration:none;font-family:"Open sans",sans-serif;margin-right:.4rem;padding:0 0 1.6rem}a.nav-link[_ngcontent-%COMP%]{color:#fff;text-decoration:none;letter-spacing:0;font-size:1.1rem;padding:0 .5rem .6rem}a.nav-link[_ngcontent-%COMP%]:focus, a.nav-link.active[_ngcontent-%COMP%]{content:"";display:block;margin:0;border-bottom:4px solid #c5cad2;padding-bottom:calc(.6rem - 4px)}.active[_ngcontent-%COMP%]{font-weight:600!important}.main-nav[_ngcontent-%COMP%]{display:block;-webkit-margin-start:0px;margin-inline-start:0px;-webkit-margin-end:0px;margin-inline-end:0px;width:85%;margin:0 auto}.headline[_ngcontent-%COMP%]{padding:0}div.slick-track[_ngcontent-%COMP%]{overflow-x:auto;white-space:nowrap;display:flex}.navbar[_ngcontent-%COMP%]   [_ngcontent-%COMP%]::-webkit-scrollbar{display:none}.nav-arrow[_ngcontent-%COMP%]{color:#f09686!important;font-weight:1000;position:absolute;z-index:100;background-color:#223654c5;margin:0;bottom:5px}.right[_ngcontent-%COMP%]{right:0;padding:5px 5px 5px 15px!important}.left[_ngcontent-%COMP%]{left:0;padding:5px 15px 5px 5px!important}@media (min-width: 400px){.nav-arrow[_ngcontent-%COMP%]{display:none}.main-nav[_ngcontent-%COMP%]{width:98%}}@media (min-width: 768px){.navbar[_ngcontent-%COMP%]{height:72px}.navbar[_ngcontent-%COMP%]   a[_ngcontent-%COMP%]{padding:1rem 1.2rem!important}.navbar[_ngcontent-%COMP%]   a[_ngcontent-%COMP%]:focus, .navbar[_ngcontent-%COMP%]   a.active[_ngcontent-%COMP%]{padding-bottom:calc(1rem - 4px)!important}}']});const Ge=["searchBar"];function De(e,t){1&e&&n._UZ(0,"app-header",null,3)}function Qe(e,t){1&e&&n._UZ(0,"app-menu")}function Ye(e,t){if(1&e&&n._UZ(0,"app-portal",4),2&e){const e=n.oxw();n.Q6J("ngClass",e.hasHeader?"portal-hasHeader":"portal")}}class He{constructor(e,t,i,o,n,a){this.languageService=e,this.configService=t,this.renderer=i,this.titleService=o,this.metaService=n,this.messageService=a,this.themeClass="qcca-theme",this.hasHeader=!0,this.hasFooter=!0,this.hasMenu=!1,this.languageService.translate.getTranslation(this.languageService.getLanguage()).subscribe(),this.readTitleConfig(),this.readThemeConfig(),this.readDescriptionConfig(),this.detectOldBrowser(),this.hasHeader=void 0!==this.configService.getConfig("header.hasHeader")&&this.configService.getConfig("header.hasHeader"),this.hasFooter=void 0!==this.configService.getConfig("hasFooter")&&this.configService.getConfig("hasFooter"),this.hasMenu=void 0!==this.configService.getConfig("hasMenu")&&this.configService.getConfig("hasMenu")}readTitleConfig(){this.languageService.translate.get(this.configService.getConfig("title")).subscribe(e=>{e&&(this.titleService.setTitle(e),this.metaService.addTag({name:"title",content:e}))})}readThemeConfig(){const e=this.configService.getConfig("theme")||this.themeClass;e&&this.renderer.addClass(document.body,e)}readDescriptionConfig(){const e=this.configService.getConfig("description");e&&this.metaService.addTag({name:"description",content:e})}detectOldBrowser(){if(S.WE.satisfies({ie:"<=11",chrome:"<64",firefox:"<60",safari:"<=11"})){const e=this.languageService.translate,t=e.get("oldBrowser.title"),i=e.get("oldBrowser.message");(0,Be.$R)(t,i).pipe((0,Z.U)(([e,t])=>({title:e,message:t}))).subscribe(e=>this.messageService.alert(e.message,e.title,{timeOut:15e3}))}}}He.\u0275fac=function(e){return new(e||He)(n.Y36(c.TS),n.Y36(c.E4),n.Y36(n.Qsj),n.Y36(o.Dx),n.Y36(o.h_),n.Y36(c.ez))},He.\u0275cmp=n.Xpm({type:He,selectors:[["app-root"]],viewQuery:function(e,t){if(1&e&&n.Gf(Ge,7,n.SBq),2&e){let e;n.iGM(e=n.CRH())&&(t.searchBar=e.first)}},decls:4,vars:3,consts:[["igoSpinnerActivity",""],[4,"ngIf"],[3,"ngClass",4,"ngIf"],["header",""],[3,"ngClass"]],template:function(e,t){1&e&&(n._UZ(0,"igo-spinner",0),n.YNc(1,De,2,0,"app-header",1),n.YNc(2,Qe,1,0,"app-menu",1),n.YNc(3,Ye,1,1,"app-portal",2)),2&e&&(n.xp6(1),n.Q6J("ngIf",t.hasHeader),n.xp6(1),n.Q6J("ngIf",t.hasMenu),n.xp6(1),n.Q6J("ngIf",!t.hasMenu))},directives:[w.OR,w.Ft,r.O5,Ue,Ie,he,r.mk],styles:['[_nghost-%COMP%]{font-family:Roboto,"Helvetica Neue",sans-serif}igo-message-center[_ngcontent-%COMP%]     simple-notifications   div.simple-notification-wrapper{right:10px}  .portal-hasHeader{height:calc(100% - 72px)!important;display:block}  .portal{height:100%}@media (min-width: 768px){  .portal-hasHeader{height:calc(100% - 72px)!important;display:block}}igo-spinner[_ngcontent-%COMP%]{position:absolute;top:calc(72px + 4px)!important;right:4px;z-index:100}spinner-with-legend-dialog[_ngcontent-%COMP%]{position:absolute;top:calc(72px + 4px)!important;right:345px;z-index:100}@media (min-width: 768px){igo-spinner[_ngcontent-%COMP%]{top:calc(72px + 4px)!important;right:4px;z-index:100}spinner-with-legend-dialog[_ngcontent-%COMP%]{top:calc(72px + 4px)!important;right:345px!important;z-index:100}}']});class Ne{}Ne.\u0275fac=function(e){return new(e||Ne)},Ne.\u0275mod=n.oAB({type:Ne,bootstrap:[He]}),Ne.\u0275inj=n.cJS({providers:[(0,c.TQ)({default:Le.igo,path:"./config/config.json"}),c.MZ,(0,O.rQG)({path:"./assets/list-style.json"})],imports:[[o.b2,s.PW,a.Bz.forRoot([]),c.u4.forRoot(),c.zZ,w.d3,w.Po,Ee,o.t6,me,fe,Fe]]});i(58256);Le.production&&(0,n.G48)(),o.q6().bootstrapModule(Ne).catch(e=>console.log(e))},22356:function(e,t,i){var o={"./en.auth.json":44505,"./en.common.json":13841,"./en.context.json":2977,"./en.core.json":8982,"./en.geo.json":49853,"./en.integration.json":38430,"./en.json":90642,"./fr.auth.json":13788,"./fr.common.json":55144,"./fr.context.json":65742,"./fr.core.json":38783,"./fr.geo.json":78405,"./fr.integration.json":66409,"./fr.json":60863};function n(e){var t=a(e);return i(t)}function a(e){if(!i.o(o,e)){var t=new Error("Cannot find module '"+e+"'");throw t.code="MODULE_NOT_FOUND",t}return o[e]}n.keys=function(){return Object.keys(o)},n.resolve=a,e.exports=n,n.id=22356},46700:function(e,t,i){var o={"./af":62275,"./af.js":62275,"./ar":90857,"./ar-dz":11218,"./ar-dz.js":11218,"./ar-kw":14754,"./ar-kw.js":14754,"./ar-ly":66680,"./ar-ly.js":66680,"./ar-ma":92178,"./ar-ma.js":92178,"./ar-sa":56522,"./ar-sa.js":56522,"./ar-tn":95682,"./ar-tn.js":95682,"./ar.js":90857,"./az":70164,"./az.js":70164,"./be":79774,"./be.js":79774,"./bg":60947,"./bg.js":60947,"./bm":21832,"./bm.js":21832,"./bn":89650,"./bn-bd":74477,"./bn-bd.js":74477,"./bn.js":89650,"./bo":66005,"./bo.js":66005,"./br":98492,"./br.js":98492,"./bs":70534,"./bs.js":70534,"./ca":52061,"./ca.js":52061,"./cs":84737,"./cs.js":84737,"./cv":61167,"./cv.js":61167,"./cy":77996,"./cy.js":77996,"./da":9528,"./da.js":9528,"./de":14540,"./de-at":49430,"./de-at.js":49430,"./de-ch":67978,"./de-ch.js":67978,"./de.js":14540,"./dv":83426,"./dv.js":83426,"./el":6616,"./el.js":6616,"./en-au":63816,"./en-au.js":63816,"./en-ca":32162,"./en-ca.js":32162,"./en-gb":83305,"./en-gb.js":83305,"./en-ie":61954,"./en-ie.js":61954,"./en-il":43060,"./en-il.js":43060,"./en-in":59923,"./en-in.js":59923,"./en-nz":13540,"./en-nz.js":13540,"./en-sg":16505,"./en-sg.js":16505,"./eo":41907,"./eo.js":41907,"./es":86640,"./es-do":41246,"./es-do.js":41246,"./es-mx":56131,"./es-mx.js":56131,"./es-us":36430,"./es-us.js":36430,"./es.js":86640,"./et":62551,"./et.js":62551,"./eu":32711,"./eu.js":32711,"./fa":54572,"./fa.js":54572,"./fi":33390,"./fi.js":33390,"./fil":87860,"./fil.js":87860,"./fo":48216,"./fo.js":48216,"./fr":99291,"./fr-ca":98527,"./fr-ca.js":98527,"./fr-ch":58407,"./fr-ch.js":58407,"./fr.js":99291,"./fy":47054,"./fy.js":47054,"./ga":49540,"./ga.js":49540,"./gd":73917,"./gd.js":73917,"./gl":51486,"./gl.js":51486,"./gom-deva":56245,"./gom-deva.js":56245,"./gom-latn":48868,"./gom-latn.js":48868,"./gu":59652,"./gu.js":59652,"./he":89019,"./he.js":89019,"./hi":42040,"./hi.js":42040,"./hr":63402,"./hr.js":63402,"./hu":79322,"./hu.js":79322,"./hy-am":27609,"./hy-am.js":27609,"./id":57942,"./id.js":57942,"./is":98275,"./is.js":98275,"./it":73053,"./it-ch":4378,"./it-ch.js":4378,"./it.js":73053,"./ja":46176,"./ja.js":46176,"./jv":679,"./jv.js":679,"./ka":92726,"./ka.js":92726,"./kk":72953,"./kk.js":72953,"./km":86957,"./km.js":86957,"./kn":59181,"./kn.js":59181,"./ko":47148,"./ko.js":47148,"./ku":27752,"./ku.js":27752,"./ky":65675,"./ky.js":65675,"./lb":41263,"./lb.js":41263,"./lo":65746,"./lo.js":65746,"./lt":11143,"./lt.js":11143,"./lv":38753,"./lv.js":38753,"./me":44054,"./me.js":44054,"./mi":31573,"./mi.js":31573,"./mk":30202,"./mk.js":30202,"./ml":68523,"./ml.js":68523,"./mn":79794,"./mn.js":79794,"./mr":56681,"./mr.js":56681,"./ms":56975,"./ms-my":39859,"./ms-my.js":39859,"./ms.js":56975,"./mt":3691,"./mt.js":3691,"./my":5152,"./my.js":5152,"./nb":7607,"./nb.js":7607,"./ne":21526,"./ne.js":21526,"./nl":86368,"./nl-be":40076,"./nl-be.js":40076,"./nl.js":86368,"./nn":68420,"./nn.js":68420,"./oc-lnc":51906,"./oc-lnc.js":51906,"./pa-in":94504,"./pa-in.js":94504,"./pl":54721,"./pl.js":54721,"./pt":74645,"./pt-br":54548,"./pt-br.js":54548,"./pt.js":74645,"./ro":71977,"./ro.js":71977,"./ru":26042,"./ru.js":26042,"./sd":78849,"./sd.js":78849,"./se":27739,"./se.js":27739,"./si":50084,"./si.js":50084,"./sk":92449,"./sk.js":92449,"./sl":23086,"./sl.js":23086,"./sq":33139,"./sq.js":33139,"./sr":30607,"./sr-cyrl":30063,"./sr-cyrl.js":30063,"./sr.js":30607,"./ss":40131,"./ss.js":40131,"./sv":21665,"./sv.js":21665,"./sw":5642,"./sw.js":5642,"./ta":33622,"./ta.js":33622,"./te":74825,"./te.js":74825,"./tet":48336,"./tet.js":48336,"./tg":39238,"./tg.js":39238,"./th":99463,"./th.js":99463,"./tk":39986,"./tk.js":39986,"./tl-ph":29672,"./tl-ph.js":29672,"./tlh":40043,"./tlh.js":40043,"./tr":51212,"./tr.js":51212,"./tzl":50110,"./tzl.js":50110,"./tzm":80482,"./tzm-latn":38309,"./tzm-latn.js":38309,"./tzm.js":80482,"./ug-cn":42495,"./ug-cn.js":42495,"./uk":54157,"./uk.js":54157,"./ur":80984,"./ur.js":80984,"./uz":64141,"./uz-latn":43662,"./uz-latn.js":43662,"./uz.js":64141,"./vi":12607,"./vi.js":12607,"./x-pseudo":66460,"./x-pseudo.js":66460,"./yo":92948,"./yo.js":92948,"./zh-cn":62658,"./zh-cn.js":62658,"./zh-hk":39352,"./zh-hk.js":39352,"./zh-mo":38274,"./zh-mo.js":38274,"./zh-tw":98451,"./zh-tw.js":98451};function n(e){var t=a(e);return i(t)}function a(e){if(!i.o(o,e)){var t=new Error("Cannot find module '"+e+"'");throw t.code="MODULE_NOT_FOUND",t}return o[e]}n.keys=function(){return Object.keys(o)},n.resolve=a,e.exports=n,n.id=46700},97223:function(e){"use strict";e.exports="/*** Generic ***/"}},function(e){e.O(0,[736],function(){return t=78382,e(e.s=t);var t});e.O()}]);
//# sourceMappingURL=main-es2015.369e48749673086445ee.js.map