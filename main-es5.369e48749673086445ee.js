!function(){function e(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var n=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null==n)return;var i,o,a=[],r=!0,s=!1;try{for(n=n.call(e);!(r=(i=n.next()).done)&&(a.push(i.value),!t||a.length!==t);r=!0);}catch(c){s=!0,o=c}finally{try{r||null==n.return||n.return()}finally{if(s)throw o}}return a}(e,t)||u(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function t(e){return function(e){if(Array.isArray(e))return p(e)}(e)||function(e){if("undefined"!=typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}(e)||u(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function n(){return(n="undefined"!=typeof Reflect&&Reflect.get?Reflect.get.bind():function(e,t,n){var o=i(e,t);if(o){var a=Object.getOwnPropertyDescriptor(o,t);return a.get?a.get.call(arguments.length<3?e:n):a.value}}).apply(this,arguments)}function i(e,t){for(;!Object.prototype.hasOwnProperty.call(e,t)&&null!==(e=c(e)););return e}function o(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&a(e,t)}function a(e,t){return(a=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e})(e,t)}function r(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(e){return!1}}();return function(){var n,i=c(e);if(t){var o=c(this).constructor;n=Reflect.construct(i,arguments,o)}else n=i.apply(this,arguments);return s(this,n)}}function s(e,t){if(t&&("object"==typeof t||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e)}function c(e){return(c=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function l(e,t){var n="undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(!n){if(Array.isArray(e)||(n=u(e))||t&&e&&"number"==typeof e.length){n&&(e=n);var i=0,o=function(){};return{s:o,n:function(){return i>=e.length?{done:!0}:{done:!1,value:e[i++]}},e:function(e){throw e},f:o}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var a,r=!0,s=!1;return{s:function(){n=n.call(e)},n:function(){var e=n.next();return r=e.done,e},e:function(e){s=!0,a=e},f:function(){try{r||null==n.return||n.return()}finally{if(s)throw a}}}}function u(e,t){if(e){if("string"==typeof e)return p(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?p(e,t):void 0}}function p(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,i=new Array(t);n<t;n++)i[n]=e[n];return i}function h(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}function d(e,t,n){return t&&h(e.prototype,t),n&&h(e,n),Object.defineProperty(e,"prototype",{writable:!1}),e}function g(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(self.webpackChunkigo2_quebec=self.webpackChunkigo2_quebec||[]).push([[179],{98255:function(e){function t(e){return Promise.resolve().then(function(){var t=new Error("Cannot find module '"+e+"'");throw t.code="MODULE_NOT_FOUND",t})}t.keys=function(){return[]},t.resolve=t,t.id=98255,e.exports=t},78382:function(i,a,s){"use strict";var u=s(4919),p=s(91477),h=s(3259),m=s(99613),f=s(40093),v=s(51503),y=s(63266),b=d(function e(){g(this,e)});b.\u0275fac=function(e){return new(e||b)},b.\u0275cmp=p.Xpm({type:b,selectors:[["app-menu-home"]],decls:15,vars:0,consts:[[1,"container-fluid","page"],[1,"container"],[1,"row"],[1,"d-block","themeTitre"],[2,"display","inline"],["href","https://github.com/infra-geo-ouverte/igo2","target","_blank","rel","noreferrer",2,"display","inline"]],template:function(e,t){1&e&&(p.TgZ(0,"div",0),p.TgZ(1,"div",1),p.TgZ(2,"div",2),p.TgZ(3,"h1",3),p._uU(4,"Accueil"),p.qZA(),p.TgZ(5,"h2"),p._uU(6,"Infrastructure g\xe9omatique ouverte 2.0 (IGO2) / Open GIS Infrastructure 2.0"),p.qZA(),p.TgZ(7,"h4"),p._uU(8,"Qu'est-ce qu'IGO?"),p.qZA(),p.TgZ(9,"p"),p._uU(10,"IGO2 est une solution Web gratuite en g\xe9omatique bas\xe9e sur Angular - Material, OpenLayers et IGO2lib. IGO2 permet de tirer profit d\u2019une multitude de donn\xe9es g\xe9ographiques gr\xe2ce \xe0 une interface cartographique accessible par un navigateur Web sur un poste de travail et par un appareil mobile. IGO2 a \xe9t\xe9 initi\xe9 par l'administration publique du Qu\xe9bec (Canada) et issu d\u2019un travail collaboratif bas\xe9 sur la philosophie des logiciels libres et ouverts (\xab open source \xbb). Les membres du public en g\xe9omatique et du Web qui soumettent des contributions conservent leurs droits d'auteur s'ils partagent leur code source selon la LICENCE LiLiQ-R de type LGPL."),p.qZA(),p.TgZ(11,"p",4),p._uU(12,"T\xe9l\xe9chargement et code source : "),p.TgZ(13,"a",5),p._uU(14,"https://github.com/infra-geo-ouverte/igo2"),p.qZA(),p.qZA(),p.qZA(),p.qZA(),p.qZA())},encapsulation:2});var x=d(function e(){g(this,e)});x.\u0275fac=function(e){return new(e||x)},x.\u0275cmp=p.Xpm({type:x,selectors:[["app-about"]],decls:83,vars:0,consts:[[1,"container-fluid","page"],[1,"container"],[1,"row"],[1,"d-block","themeTitre"],["href","http://loripsum.net/","target","_blank"],["cite","http://loripsum.net"]],template:function(e,t){1&e&&(p.TgZ(0,"div",0),p.TgZ(1,"div",1),p.TgZ(2,"div",2),p.TgZ(3,"h1",3),p._uU(4,"En savoir plus"),p.qZA(),p.TgZ(5,"h2"),p._uU(6,"Titre"),p.qZA(),p.TgZ(7,"p"),p._uU(8,"Paragraphe : Lorem ipsum dolor sit amet, consectetur adipiscing elit. Tu enim ista lenius, hic Stoicorum more nos vexat. Quo studio Aristophanem putamus aetatem in litteris duxisse? Honesta oratio, Socratica, Platonis etiam. Vitiosum est enim in dividendo partem in genere numerare. "),p.TgZ(9,"i"),p._uU(10,"Non est igitur voluptas bonum."),p.qZA(),p._uU(11," Duo Reges: constructio interrete. Non autem hoc: igitur ne illud quidem. "),p.TgZ(12,"b"),p._uU(13,"Magna laus."),p.qZA(),p.TgZ(14,"b"),p._uU(15,"Quis istum dolorem timet?"),p.qZA(),p._uU(16," Quod autem satis est, eo quicquid accessit, nimium est; "),p.TgZ(17,"b"),p._uU(18,"Sed ille, ut dixi, vitiose."),p.qZA(),p.qZA(),p.TgZ(19,"p"),p._uU(20,"Cur tantas regiones barbarorum pedibus obiit, tot maria transmisit? "),p.TgZ(21,"a",4),p._uU(22,"Nulla erit controversia."),p.qZA(),p._uU(23," Prave, nequiter, turpiter cenabat; "),p.TgZ(24,"code"),p._uU(25,"Multoque hoc melius nos veriusque quam Stoici."),p.qZA(),p._uU(26," Contineo me ab exemplis. "),p.TgZ(27,"b"),p._uU(28,"Sed nimis multa."),p.qZA(),p.TgZ(29,"code"),p._uU(30,"Nos vero, inquit ille;"),p.qZA(),p.TgZ(31,"mark"),p._uU(32,"Occultum facinus esse potuerit, gaudebit;"),p.qZA(),p.qZA(),p.TgZ(33,"blockquote",5),p._uU(34," Blockquote Non quam nostram quidem, inquit Pomponius iocans; "),p.qZA(),p.TgZ(35,"ul"),p.TgZ(36,"li"),p._uU(37,"Iam doloris medicamenta illa Epicurea tamquam de narthecio proment: Si gravis, brevis;"),p.qZA(),p.TgZ(38,"li"),p._uU(39,"Ergo et avarus erit, sed finite, et adulter, verum habebit modum, et luxuriosus eodem modo."),p.qZA(),p.TgZ(40,"li"),p._uU(41,"Sedulo, inquam, faciam."),p.qZA(),p.TgZ(42,"li"),p._uU(43,"Quid enim tanto opus est instrumento in optimis artibus comparandis?"),p.qZA(),p.TgZ(44,"li"),p._uU(45,"Sic, et quidem diligentius saepiusque ista loquemur inter nos agemusque communiter."),p.qZA(),p.qZA(),p.TgZ(46,"p"),p.TgZ(47,"b"),p._uU(48," Bold Inde igitur, inquit, ordiendum est."),p.qZA(),p._uU(49," Quis hoc dicit? Quamquam te quidem video minime esse deterritum. "),p.TgZ(50,"i"),p._uU(51,"Bonum incolumis acies: misera caecitas."),p.qZA(),p._uU(52," Indicant pueri, in quibus ut in speculis natura cernitur. Duae sunt enim res quoque, ne tu verba solum putes. "),p.TgZ(53,"code"),p._uU(54,"Est enim effectrix multarum et magnarum voluptatum."),p.qZA(),p.qZA(),p.TgZ(55,"pre"),p._uU(56," Pre Corporis igitur nostri partes totaque figura et forma et\n            statura quam apta ad naturam sit, apparet, neque est dubium,\n            quin frons, oculi, aures et reliquae partes quales propriae\n            sint hominis intellegatur.\n\n            Pungunt quasi aculeis interrogatiunculis angustis, quibus\n            etiam qui assentiuntur nihil commutantur animo et idem\n            abeunt, qui venerant.\n            "),p.qZA(),p.TgZ(57,"ol"),p.TgZ(58,"li"),p._uU(59,"Atqui perspicuum est hominem e corpore animoque constare, cum primae sint animi partes, secundae corporis."),p.qZA(),p.TgZ(60,"li"),p._uU(61,"Nonne videmus quanta perturbatio rerum omnium consequatur, quanta confusio?"),p.qZA(),p.qZA(),p.TgZ(62,"dl"),p.TgZ(63,"dt"),p.TgZ(64,"dfn"),p._uU(65,"Stoicos roga."),p.qZA(),p.qZA(),p.TgZ(66,"dd"),p._uU(67,"Quid enim de amicitia statueris utilitatis causa expetenda vides."),p.qZA(),p.TgZ(68,"dt"),p.TgZ(69,"dfn"),p._uU(70,"Qui convenit?"),p.qZA(),p.qZA(),p.TgZ(71,"dd"),p._uU(72,"Que Manilium, ab iisque M."),p.qZA(),p.TgZ(73,"dt"),p.TgZ(74,"dfn"),p._uU(75,"Paria sunt igitur."),p.qZA(),p.qZA(),p.TgZ(76,"dd"),p._uU(77,"Quamquam ab iis philosophiam et omnes ingenuas disciplinas habemus;"),p.qZA(),p.TgZ(78,"dt"),p.TgZ(79,"dfn"),p._uU(80,"Confecta res esset."),p.qZA(),p.qZA(),p.TgZ(81,"dd"),p._uU(82,"Cupiditates non Epicuri divisione finiebat, sed sua satietate."),p.qZA(),p.qZA(),p.qZA(),p.qZA(),p.qZA())},encapsulation:2});var S=s(76491),w=s(79097),O=s(80639),C=s(78767),k=s(53466),P=s(20088),T=s(91191),M=s(34301),_=s(5883),Z=s(66739),j=s(47150),q=s(2240),A=(s(97223),s(82458)),R=s(30536),$=s(58180),E=s(18931),F=s(80902),L=s(33927),B=s(33697),U=s(32475),I=s(59791),z=s(13828);function G(e,t){1&e&&(p.TgZ(0,"div",2),p.TgZ(1,"section",3),p.TgZ(2,"h4"),p.TgZ(3,"strong"),p._uU(4),p.ALo(5,"translate"),p.qZA(),p.qZA(),p.TgZ(6,"p"),p.TgZ(7,"strong"),p._uU(8),p.ALo(9,"translate"),p.qZA(),p.qZA(),p._UZ(10,"div",4),p.ALo(11,"sanitizeHtml"),p.ALo(12,"translate"),p.qZA(),p.qZA()),2&e&&(p.xp6(4),p.Oqu(p.lcZ(5,3,"igo.integration.searchResultsTool.noResults")),p.xp6(4),p.Oqu(p.lcZ(9,5,"igo.integration.searchResultsTool.doSearch")),p.xp6(2),p.Q6J("innerHTML",p.lcZ(11,7,p.lcZ(12,9,"igo.integration.searchResultsTool.examples")),p.oJD))}function D(e,t){if(1&e&&p._UZ(0,"igo-search-add-button",10),2&e){var n=t.result,i=p.oxw(2);p.Q6J("map",i.map)("layer",n)}}function Q(e,t){if(1&e){var n=p.EpF();p.TgZ(0,"igo-flexible",5,6),p.ALo(2,"async"),p.TgZ(3,"div",7),p.TgZ(4,"igo-search-results",8),p.NdJ("resultFocus",function(e){return p.CHM(n),p.oxw().onResultFocus(e)})("resultSelect",function(e){return p.CHM(n),p.oxw().onResultSelect(e)})("resultUnfocus",function(e){return p.CHM(n),p.oxw().onResultUnfocus(e)})("resultMouseenter",function(e){return p.CHM(n),p.oxw().onResultFocus(e)})("resultMouseleave",function(e){return p.CHM(n),p.oxw().onResultUnfocus(e)})("moreResults",function(e){return p.CHM(n),p.oxw().onSearch(e)}),p.YNc(5,D,1,2,"ng-template",null,9,p.W1O),p.qZA(),p.qZA(),p.qZA()}if(2&e){var i=p.oxw();p.Q6J("state",p.lcZ(2,6,i.feature$)?i.topPanelState:"initial"),p.xp6(4),p.Q6J("store",i.store)("showIcons",i.showIcons)("term",i.term)("termSplitter",i.termSplitter)("settingsChange$",i.settingsChange$)}}var Y=function(){function e(t,n,i,o,a,r){g(this,e),this.mapState=t,this.searchState=n,this.elRef=i,this.toolState=o,this.directionState=a,this.showIcons=!0,this.topPanelStateDefault="expanded",this.hasFeatureEmphasisOnSelection=!1,this.shownResultsGeometries=[],this.shownResultsEmphasisGeometries=[],this.focusedResult$=new S.X(void 0),this.isSelectedResultOutOfView$=new S.X(!1),this.debouncedEmpty$=new S.X(!0),this.term="",this.settingsChange$=new S.X(void 0),this.topPanelState$=new S.X("initial"),this.format=new _.Z,this.hasFeatureEmphasisOnSelection=r.getConfig("hasFeatureEmphasisOnSelection")}return d(e,[{key:"store",get:function(){return this.searchState.store}},{key:"map",get:function(){return this.mapState.map}},{key:"featureTitle",get:function(){return this.feature?(0,j.TF)(this.feature):void 0}},{key:"feature$",get:function(){var e=this;return this.store.stateView.firstBy$(function(e){return e.state.focused}).pipe((0,L.U)(function(t){return e.feature=t?t.entity.data:void 0}))}},{key:"topPanelState",get:function(){return this.topPanelState$.value},set:function(e){this.topPanelState$.next(e)}},{key:"termSplitter",get:function(){return this.searchState.searchTermSplitter$.value}},{key:"ngOnInit",value:function(){var e=this;this.searchTerm$$=this.searchState.searchTerm$.subscribe(function(t){null!=t&&(e.term=t)});var t,n=l(this.store.stateView.all$().value);try{for(n.s();!(t=n.n()).done;){var i=t.value;!0===this.store.state.get(i.entity).selected&&(this.topPanelState="expanded")}}catch(o){n.e(o)}finally{n.f()}this.searchState.searchSettingsChange$.subscribe(function(){e.settingsChange$.next(!0)}),this.topPanelState$$=this.topPanelState$.subscribe(function(){var t=e.computeElementRef()[0],n=e.computeElementRef()[1];n&&setTimeout(function(){e.isScrolledIntoView(t,n)||e.adjustTopPanel(t,n)},j.dF.transitionTime+50)}),this.hasFeatureEmphasisOnSelection&&(this.searchState.focusedOrResolution$$||(this.searchState.focusedOrResolution$$=(0,w.aj)([this.focusedResult$,this.map.viewController.resolution$]).subscribe(function(t){return e.buildResultEmphasis(t[0],"focused")})),this.searchState.selectedOrResolution$$||(this.searchState.selectedOrResolution$$=(0,w.aj)([this.searchState.selectedResult$,this.map.viewController.resolution$]).subscribe(function(t){return e.buildResultEmphasis(t[0],"selected")}))),this.monitorResultOutOfView(),this.showResultsGeometries$$=(0,w.aj)([this.searchState.searchResultsGeometryEnabled$,this.store.stateView.all$(),this.focusedResult$,this.searchState.selectedResult$,this.searchState.searchTerm$,this.map.viewController.resolution$]).subscribe(function(t){var n=t[0],i=t[1];e.hasFeatureEmphasisOnSelection&&e.clearFeatureEmphasis("shown"),e.shownResultsGeometries.map(function(t){return e.map.queryResultsOverlay.removeFeature(t)}),i.filter(function(e){return e.entity.meta.dataType===q.D97&&e.entity.data.geometry&&!e.state.selected&&!e.state.focused}).map(function(t){var i;n&&(t.entity.data.meta.style=(0,q.eU6)(Object.assign({},{feature:t.entity.data},e.searchState.searchOverlayStyle,(null===(i=t.entity.style)||void 0===i?void 0:i.base)?t.entity.style.base:{})),e.shownResultsGeometries.push(t.entity.data),e.map.queryResultsOverlay.addFeature(t.entity.data,q.bAZ.None),e.hasFeatureEmphasisOnSelection&&e.buildResultEmphasis(t.entity,"shown"))})}),this.debouncedEmpty$$=this.store.stateView.empty$.pipe((0,O.b)(1500)).subscribe(function(t){return e.debouncedEmpty$.next(t)})}},{key:"monitorResultOutOfView",value:function(){var e=this;this.isSelectedResultOutOfView$$=(0,w.aj)([this.map.viewController.state$,this.searchState.selectedResult$]).pipe((0,O.b)(100)).subscribe(function(t){var n=t[1];if(n){if(n.data.geometry){var i=(0,q.zMd)(n.data,e.map.projection),o=(0,q.HgW)(e.map,[i]);e.isSelectedResultOutOfView$.next((0,q.brJ)(e.map,o))}}else e.isSelectedResultOutOfView$.next(!1)})}},{key:"buildResultEmphasis",value:function(e,t){var n,i,o;if("shown"!==t&&this.clearFeatureEmphasis(t),e&&e.data.geometry){var a=(0,q.zMd)(e.data,this.map.projection).getGeometry();if((0,q.fle)(this.map,a.getExtent(),.0025)){var r,s=a.getExtent(),c=s[0]+(s[2]-s[0])/2,l=s[1]+(s[3]-s[1])/2,u=new B.Z({name:"".concat(t,"AbstractResult'"),geometry:new U.Z([c,l])}),p=(0,q.ve2)(u,this.map.projection),h=0;switch(t){case"focused":r=(0,q.DQ6)(Object.assign({},{feature:p},this.searchState.searchOverlayStyleFocus,(null===(n=e.style)||void 0===n?void 0:n.focus)?e.style.focus:{})),h=2;break;case"shown":r=(0,q.eU6)(Object.assign({},{feature:p},this.searchState.searchOverlayStyle,(null===(i=e.style)||void 0===i?void 0:i.base)?e.style.base:{}));break;case"selected":r=(0,q.DQ6)(Object.assign({},{feature:p},this.searchState.searchOverlayStyleSelection,(null===(o=e.style)||void 0===o?void 0:o.selection)?e.style.selection:{})),h=1}p.meta.style=r,p.meta.style.setZIndex(2e3+h),this.map.searchResultsOverlay.addFeature(p,q.bAZ.None),"focused"===t&&(this.abstractFocusedResult=p),"selected"===t&&(this.abstractSelectedResult=p),"shown"===t&&this.shownResultsEmphasisGeometries.push(p)}else this.clearFeatureEmphasis(t)}}},{key:"clearFeatureEmphasis",value:function(e){var t=this;"focused"===e&&this.abstractFocusedResult&&(this.map.searchResultsOverlay.removeFeature(this.abstractFocusedResult),this.abstractFocusedResult=void 0),"selected"===e&&this.abstractSelectedResult&&(this.map.searchResultsOverlay.removeFeature(this.abstractSelectedResult),this.abstractSelectedResult=void 0),"shown"===e&&(this.shownResultsEmphasisGeometries.map(function(e){return t.map.searchResultsOverlay.removeFeature(e)}),this.shownResultsEmphasisGeometries=[])}},{key:"ngOnDestroy",value:function(){this.topPanelState$$.unsubscribe(),this.searchTerm$$.unsubscribe(),this.isSelectedResultOutOfView$$&&this.isSelectedResultOutOfView$$.unsubscribe(),this.showResultsGeometries$$&&this.showResultsGeometries$$.unsubscribe(),this.getRoute$$&&this.getRoute$$.unsubscribe(),this.debouncedEmpty$$&&this.debouncedEmpty$$.unsubscribe()}},{key:"onResultFocus",value:function(e){var t;if(this.focusedResult$.next(e),e.meta.dataType===q.D97&&e.data.geometry){e.data.meta.style=(0,q.DQ6)(Object.assign({},{feature:e.data},this.searchState.searchOverlayStyleFocus,(null===(t=e.style)||void 0===t?void 0:t.focus)?e.style.focus:{}));var n=this.map.searchResultsOverlay.dataSource.ol.getFeatureById(e.meta.id);if(n)return void n.setStyle(e.data.meta.style);this.map.searchResultsOverlay.addFeature(e.data,q.bAZ.None)}}},{key:"onResultUnfocus",value:function(e){var t;if(this.focusedResult$.next(void 0),e.meta.dataType===q.D97){if(!0===this.store.state.get(e).selected){var n=this.map.searchResultsOverlay.dataSource.ol.getFeatureById(e.meta.id);if(n){var i=(0,q.DQ6)(Object.assign({},{feature:e.data},this.searchState.searchOverlayStyleFocus,(null===(t=e.style)||void 0===t?void 0:t.focus)?e.style.focus:{}));n.setStyle(i)}return}this.map.searchResultsOverlay.removeFeature(e.data)}}},{key:"onResultSelect",value:function(e){this.map.searchResultsOverlay.dataSource.ol.clear(),this.tryAddFeatureToMap(e)}},{key:"onSearch",value:function(e){var t=this,n=e.results,i=this.store.entities$.value.filter(function(t){return t.source!==e.research.source}).concat(n);this.store.load(i);var o,a=l(this.store.all());try{for(a.s();!(o=a.n()).done;){var r=o.value;!0===this.store.state.get(r).focused&&!0!==this.store.state.get(r).selected&&this.store.state.update(r,{focused:!1},!0)}}catch(s){a.e(s)}finally{a.f()}setTimeout(function(){var n,i=t.elRef.nativeElement.querySelector("igo-list");e.research.request.subscribe(function(e){null!==(n=e[0]&&e[0].source?"icherche"===e[0].source.getId()?i.querySelector(".icherche .moreResults"):"ilayer"===e[0].source.getId()?i.querySelector(".ilayer .moreResults"):"nominatim"===e[0].source.getId()?i.querySelector(".nominatim .moreResults"):i.querySelector("."+e[0].source.getId()+" .moreResults"):null)&&!t.isScrolledIntoView(i,n)&&(i.scrollTop=n.offsetTop+n.offsetHeight-i.clientHeight)})},250)}},{key:"computeElementRef",value:function(){for(var e,t=document.getElementsByTagName("igo-search-results-item"),n=this.elRef.nativeElement.getElementsByTagName("igo-list")[0],i=0;i<t.length;i++)t[i].className.includes("igo-list-item-selected")&&(e=t[i]);return[n,e]}},{key:"adjustTopPanel",value:function(e,t){this.isScrolledIntoView(e,t)||(e.scrollTop=t.offsetTop+t.children[0].offsetHeight-e.clientHeight)}},{key:"toggleTopPanel",value:function(){"expanded"===this.topPanelState?this.topPanelState="collapsed":this.topPanelState="expanded"}},{key:"zoomToFeatureExtent",value:function(){if(this.feature.geometry){var e=this.format.readFeature(this.feature,{dataProjection:this.feature.projection,featureProjection:this.map.projection});(0,q.ybU)(this.map,[e],q.bAZ.Zoom)}}},{key:"tryAddFeatureToMap",value:function(e){var t;if(e.meta.dataType===q.D97){var n=e.data;!n.geometry||(n.meta.style=(0,q.DQ6)(Object.assign({},{feature:n},this.searchState.searchOverlayStyleSelection,(null===(t=e.style)||void 0===t?void 0:t.selection)?e.style.selection:{})),this.map.searchResultsOverlay.addFeature(n))}}},{key:"isScrolledIntoView",value:function(e,t){var n=e.scrollTop,i=n+e.clientHeight,o=t.offsetTop;return o+t.clientHeight+6<=i&&o>=n}},{key:"getRoute",value:function(){var e=this;this.toolState.toolbox.activateTool("directions"),this.directionState.stopsStore.clearStops(),setTimeout(function(){var t=!1;e.getRoute$$&&e.getRoute$$.unsubscribe(),e.getRoute$$=e.directionState.stopsStore.storeInitialized$.subscribe(function(n){if(e.directionState.stopsStore.storeInitialized$.value&&!t){t=!0;var i,o=e.directionState.stopsStore.all().find(function(e){return 1===e.position});if(e.feature.geometry)if("Point"===e.feature.geometry.type)i=[e.feature.geometry.coordinates[0],e.feature.geometry.coordinates[1]];else{var a=(0,I.Z)(e.feature.geometry);i=[a.geometry.coordinates[0],a.geometry.coordinates[1]]}if(o.text=e.featureTitle,o.coordinates=i,e.directionState.stopsStore.update(o),e.map.geolocationController.position$.value){var r=e.map.geolocationController.position$.value,s=e.directionState.stopsStore.all().find(function(e){return 0===e.position}),c=T.vs(r.position,r.projection,"EPSG:4326"),l=(0,q.lQj)([c[0],c[1]],6);s.text=l.join(","),s.coordinates=l,e.directionState.stopsStore.update(s)}}})},250)}}]),e}();Y.\u0275fac=function(e){return new(e||Y)(p.Y36(R.U5),p.Y36(R.po),p.Y36(p.SBq),p.Y36(R.EH),p.Y36(R.Nw),p.Y36(v.E4))},Y.\u0275cmp=p.Xpm({type:Y,selectors:[["app-search-results-tool"]],inputs:{showIcons:"showIcons",topPanelStateDefault:"topPanelStateDefault",topPanelState:"topPanelState"},decls:4,vars:6,consts:[["style","margin: 10px;",4,"ngIf"],["initial","100%","initialMobile","100%","collapsed","calc(100% - 58px)","collapsedMobile","calc(100% - 58px)","expanded","60%","expandedMobile","60%",3,"state",4,"ngIf"],[2,"margin","10px"],[1,"mat-typography"],[3,"innerHTML"],["initial","100%","initialMobile","100%","collapsed","calc(100% - 58px)","collapsedMobile","calc(100% - 58px)","expanded","60%","expandedMobile","60%",3,"state"],["topPanel",""],[1,"igo-content"],["placeholder","false",3,"store","showIcons","term","termSplitter","settingsChange$","resultFocus","resultSelect","resultUnfocus","resultMouseenter","resultMouseleave","moreResults"],["igoSearchItemToolbar",""],[3,"map","layer"]],template:function(e,t){1&e&&(p.YNc(0,G,13,11,"div",0),p.ALo(1,"async"),p.YNc(2,Q,7,8,"igo-flexible",1),p.ALo(3,"async")),2&e&&(p.Q6J("ngIf",(!t.store||t.store.stateView.empty)&&p.lcZ(1,2,t.debouncedEmpty$)),p.xp6(2),p.Q6J("ngIf",t.store&&!1===p.lcZ(3,4,t.store.stateView.empty$)))},directives:[f.O5,j.dF,q.GYD,q.Uk0],pipes:[f.Ov,z.X$,j.A],encapsulation:2,changeDetection:0}),Y=function(e,t,n,i){var o,a=arguments.length,r=a<3?t:null===i?i=Object.getOwnPropertyDescriptor(t,n):i;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)r=Reflect.decorate(e,t,n,i);else for(var s=e.length-1;s>=0;s--)(o=e[s])&&(r=(a<3?o(r):a>3?o(t,n,r):o(t,n))||r);return a>3&&r&&Object.defineProperty(t,n,r),r}([(0,j.$9)({name:"searchResults",title:"igo.integration.tools.searchResults",icon:"magnify"}),function(e,t){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata("design:paramtypes",t)}(0,[R.U5,R.po,p.SBq,R.EH,R.Nw,v.E4])],Y);var H=s(45159),N=s(3323),J=s(30620),V=["mapBrowser"];function X(e,t){1&e&&(p._UZ(0,"mat-icon",8),p.ALo(1,"translate")),2&e&&p.Q6J("matTooltip",p.lcZ(1,1,"sideresult.close"))}function W(e,t){1&e&&(p._UZ(0,"mat-icon",9),p.ALo(1,"translate")),2&e&&p.Q6J("matTooltip",p.lcZ(1,1,"sideresult.open"))}var K=function(){function e(t,n,i,o,a,r,s,c,l,u){var h=this;g(this,e),this.toolState=t,this.configService=n,this.catalogState=i,this.languageService=o,this.projectionService=a,this.mapService=r,this.layerService=s,this.searchState=c,this.searchService=l,this.mediaService=u,this.title$=new S.X(void 0),this.hasSearchQuery=void 0,this.openedChange=new p.vpe,this.toolChange=new p.vpe,this.events=[],this.showMenuButton=void 0,this.hasToolbox=void 0,this.store=new j.Dn([]),this.igoSearchPointerSummaryEnabled=!1,this.termSplitter="|",this.view={center:[-73,47.2],zoom:7},this.settingsChange$=new S.X(void 0),this.mapService.setMap(this.map),this.showMenuButton=void 0!==this.configService.getConfig("showMenuButton")&&this.configService.getConfig("showMenuButton"),this.hasToolbox=void 0!==this.configService.getConfig("hasToolbox")&&this.configService.getConfig("hasToolbox"),this.layerService.createAsyncLayer({title:"OSM",sourceOptions:{type:"osm"}}).subscribe(function(e){h.osmLayer=e})}return d(e,[{key:"map",get:function(){return this._map},set:function(e){this._map=e}},{key:"opened",get:function(){return this._opened},set:function(e){e!==this._opened&&(this._opened=e,this.openedChange.emit(this._opened))}},{key:"toolbox",get:function(){return this.toolState.toolbox}},{key:"searchStore",get:function(){return this.searchState.store}},{key:"isTouchScreen",get:function(){return this.mediaService.isTouchScreen()}},{key:"onPointerSummaryStatusChange",value:function(e){this.igoSearchPointerSummaryEnabled=e}},{key:"onSearchTermChange",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"";this.term=e,e.replace(/(#[^\s]*)/g,"").trim().length<2&&(this.searchStore.clear(),this.selectedFeature=void 0)}},{key:"onSearch",value:function(e){var t=e.results;this.searchStore.state.updateAll({focused:!1,selected:!1});var n=this.searchStore.entities$.value.filter(function(t){return t.source!==e.research.source}).concat(t);this.searchStore.updateMany(n)}},{key:"onSearchSettingsChange",value:function(){this.settingsChange$.next(!0)}},{key:"onResultFocus",value:function(e){this.tryAddFeatureToMap(e),this.selectedFeature=e.data}},{key:"tryAddFeatureToMap",value:function(e){e.meta.dataType===q.D97&&void 0!==e.data.geometry&&this.map.searchResultsOverlay.setFeatures([e.data],q.bAZ.Default)}},{key:"ngOnInit",value:function(){var e=this;this.activeTool$$=this.toolbox.activeTool$.subscribe(function(t){var n=e.configService.getConfig("sidenavTitle")||"IGO";if(t)if("catalogBrowser"===t.name){var i,o=l(e.catalogState.catalogStore.all());try{for(o.s();!(i=o.n()).done;){var a=i.value;!0===e.catalogState.catalogStore.state.get(a).selected&&e.title$.next(a.title)}}catch(u){o.e(u)}finally{o.f()}}else if("activeTimeFilter"===t.name||"activeOgcFilter"===t.name){var r,s=l(e.map.layers);try{for(s.s();!(r=s.n()).done;){var c=r.value;!0===c.options.active&&e.title$.next(c.title)}}catch(u){s.e(u)}finally{s.f()}}else e.title$.next(t.title);else e.title$.next(n);e.toolChange.emit(t)}),this.store.load([{id:"coordinates",title:"coordinates",handler:this.onSearchCoordinate.bind(this)},{id:"googleMaps",title:"googleMap",handler:this.onOpenGoogleMaps.bind(this),args:["1"]},{id:"googleStreetView",title:"googleStreetView",handler:this.onOpenGoogleStreetView.bind(this)}])}},{key:"ngOnDestroy",value:function(){this.activeTool$$.unsubscribe(),this.store.destroy()}},{key:"onPreviousButtonClick",value:function(){this.toolbox.activatePreviousTool()}},{key:"onUnselectButtonClick",value:function(){this.toolbox.deactivateTool()}},{key:"removeFeatureFromMap",value:function(){this.map.searchResultsOverlay.clear()}},{key:"onContextMenuOpen",value:function(e){var t=this.mapPosition(e),n=this.mapService.getMap().ol.getCoordinateFromPixel(t);this.mapProjection=this.mapService.getMap().projection,this.lonlat=T.vs(n,this.mapProjection,"EPSG:4326")}},{key:"mapPosition",value:function(e){var t=e;return t.y=t.y-this.mapBrowser.nativeElement.getBoundingClientRect().top+window.scrollY,t.x=t.x-this.mapBrowser.nativeElement.getBoundingClientRect().left+window.scrollX,[t.x,t.y]}},{key:"onPointerSearch",value:function(e){this.lonlat=e,this.onSearchCoordinate()}},{key:"onSearchCoordinate",value:function(){var e=this;this.searchStore.clear();var t=this.searchService.reverseSearch(this.lonlat),n=function(n){t.length>0&&t[n].request.subscribe(function(i){e.onSearch({research:t[n],results:i})})};for(var i in t)n(i)}},{key:"onOpenGoogleMaps",value:function(){window.open(q.Gij.getGoogleMapsCoordLink(this.lonlat[0],this.lonlat[1]))}},{key:"onOpenGoogleStreetView",value:function(){window.open(q.Gij.getGoogleStreetViewLink(this.lonlat[0],this.lonlat[1]))}}]),e}();K.\u0275fac=function(e){return new(e||K)(p.Y36(R.EH),p.Y36(v.E4),p.Y36(R.Yy),p.Y36(v.TS),p.Y36(q.tU_),p.Y36(q.SM5),p.Y36(q.ITu),p.Y36(R.po),p.Y36(q.oDG),p.Y36(v.yJ))},K.\u0275cmp=p.Xpm({type:K,selectors:[["app-sideresult"]],viewQuery:function(e,t){var n;(1&e&&p.Gf(V,7,p.SBq),2&e)&&(p.iGM(n=p.CRH())&&(t.mapBrowser=n.first))},inputs:{hasSearchQuery:"hasSearchQuery",map:"map",opened:"opened"},outputs:{openedChange:"openedChange",toolChange:"toolChange"},decls:10,vars:5,consts:[["mode","side",3,"autoFocus","opened","openedChange"],["sidenav",""],[1,"app-sidenav-content"],["content",""],["mat-raised-button","","id","sideresult-button","isRoundButton","false","isIconButton","true","MatDrawerMode","push",3,"ngClass","click"],["sidenavbutton",""],["matTooltipShowDelay","500","tooltip-position","after","svgIcon","menu-left",3,"matTooltip",4,"ngIf"],["matTooltipShowDelay","500","tooltip-position","after","svgIcon","menu-right",3,"matTooltip",4,"ngIf"],["matTooltipShowDelay","500","tooltip-position","after","svgIcon","menu-left",3,"matTooltip"],["matTooltipShowDelay","500","tooltip-position","after","svgIcon","menu-right",3,"matTooltip"]],template:function(e,t){if(1&e){var n=p.EpF();p.TgZ(0,"mat-sidenav",0,1),p.NdJ("openedChange",function(e){return t.opened=e}),p.TgZ(2,"div",2,3),p.TgZ(4,"app-search-results-tool"),p._uU(5,' #searchresults [store]="searchStore" [term]="term" [showIcons]="true" [termSplitter]="termSplitter" placeholder="false" [settingsChange$]="settingsChange$" (resultFocus)="onResultFocus($event)" (resultSelect)="onResultFocus($event)" (moreResults)="onSearch($event)"> '),p.qZA(),p.qZA(),p.qZA(),p.TgZ(6,"button",4,5),p.NdJ("click",function(){return p.CHM(n),p.MAs(1).toggle()}),p.YNc(8,X,2,3,"mat-icon",6),p.YNc(9,W,2,3,"mat-icon",7),p.qZA()}if(2&e){var i=p.MAs(1);p.Q6J("autoFocus",!1)("opened",t.opened),p.xp6(6),p.Q6J("ngClass",i.opened?"sideresult-opened":"sideresult-closed"),p.xp6(2),p.Q6J("ngIf",i.opened),p.xp6(1),p.Q6J("ngIf",!i.opened)}},directives:[F.JX,Y,H.lW,f.mk,f.O5,N.Hw,J.gM],pipes:[z.X$],styles:["mat-sidenav[_ngcontent-%COMP%]{-o-box-shadow:2px 2px 2px 0px #dddddd;box-shadow:2px 2px 2px #ddd}[_nghost-%COMP%]{background-color:#fff}[_nghost-%COMP%]     mat-sidenav{z-index:3!important}mat-sidenav[_ngcontent-%COMP%]{height:calc(100% - 29px - 4px);width:400px;overflow:visible}@media only screen and (orientation:portrait) and (max-width: 599px),only screen and (orientation:landscape) and (max-width: 959px){mat-sidenav[_ngcontent-%COMP%]{width:calc(100% - 40px - 4px);max-width:400px}}.app-content[_ngcontent-%COMP%], igo-panel[_ngcontent-%COMP%]{height:100%}.app-sidenav-content[_ngcontent-%COMP%]{top:60px;height:calc(100% - 60px - 29px);display:block;position:relative}@media only screen and (orientation:portrait) and (max-width: 599px),only screen and (orientation:landscape) and (max-width: 959px){.app-sidenav-content[_ngcontent-%COMP%]{height:calc(100% - 60px)}}app-sideresult[_ngcontent-%COMP%]{width:400px}  igo-search-results{position:relative;left:16px!important;width:calc(calc(calc(400px) - 40px) - (2 * 4px));display:contents;height:calc(100% - 40px - 4px)}igo-search-results-tool[_ngcontent-%COMP%]{display:block;position:relative;margin:0 calc(4 * 4px);top:calc(2 * 4px);height:100%}#sideresult-button[_ngcontent-%COMP%]{display:block;position:absolute;top:50%;left:calc(400px + 1px);z-index:1;padding:0;min-width:12px!important;-webkit-animation-duration:3s;animation-duration:3s;visibility:visible;opacity:1;opacity:0;-webkit-animation:fadeIn .9s;animation:fadeIn .9s;-webkit-animation-delay:.5s;animation-delay:.5s;-webkit-animation-fill-mode:forwards;animation-fill-mode:forwards;width:24px}.sideresult-closed[_ngcontent-%COMP%]{left:0!important;position:absolute}@-webkit-keyframes fadeIn{0%{opacity:0}to{opacity:1}}@keyframes fadeIn{0%{opacity:0}to{opacity:1}}mat-sidenav[_ngcontent-%COMP%]::-webkit-backdrop{z-index:999}mat-sidenav[_ngcontent-%COMP%]::backdrop{z-index:999}app-search-results-tool[_ngcontent-%COMP%]{width:100%;padding:0 16px;display:flex;margin:auto}  app-search-results-tool>div>section>h4>strong{font-size:21px!important}"],changeDetection:0});var ee=s(83156),te=function(e){return{width:e}};function ne(e,t){if(1&e&&(p.ynx(0),p._UZ(1,"img",6),p.BQk()),2&e){var n=p.oxw(2).$implicit;p.xp6(1),p.Q6J("src",n.imgSrc,p.LSH)("alt",n.alt)("ngStyle",p.VKq(3,te,n.imgSize))}}function ie(e,t){if(1&e&&(p.TgZ(0,"a",4),p._uU(1),p.YNc(2,ne,2,5,"ng-container",5),p.qZA()),2&e){var n=p.oxw().$implicit;p.Q6J("href",n.link,p.LSH),p.xp6(1),p.hij(" ",n.text," "),p.xp6(1),p.Q6J("ngIf",n.imgSrc)}}function oe(e,t){if(1&e&&(p.ynx(0),p._UZ(1,"img",6),p.BQk()),2&e){var n=p.oxw(2).$implicit;p.xp6(1),p.Q6J("src",n.imgSrc,p.LSH)("alt",n.alt)("ngStyle",p.VKq(3,te,n.imgSize))}}function ae(e,t){if(1&e&&(p._uU(0),p.YNc(1,oe,2,5,"ng-container",5)),2&e){var n=p.oxw().$implicit;p.hij(" ",n.text," "),p.xp6(1),p.Q6J("ngIf",n.imgSrc)}}function re(e,t){if(1&e&&(p.ynx(0),p.TgZ(1,"div",1),p.YNc(2,ie,3,3,"a",2),p.YNc(3,ae,2,2,"ng-template",null,3,p.W1O),p.qZA(),p.BQk()),2&e){var n=t.$implicit,i=p.MAs(4);p.xp6(1),p.Udp("position",n.fixed?"fixed":"absolute")("margin-left",n.marginLeft)("margin-right",n.marginRight)("margin-top",n.marginTop)("margin-bottom",n.marginBottom)("font-size",n.fontSize),p.Q6J("ngClass",n.cssClass),p.xp6(1),p.Q6J("ngIf",n.link)("ngIfElse",i)}}var se=function(){function e(t,n,i){g(this,e),this.contextService=t,this.mediaService=n,this.configService=i,this.mapOverlay=[]}return d(e,[{key:"ngAfterViewInit",value:function(){var e=this;this.context$$=this.contextService.context$.subscribe(function(t){e.handleContextChange(t),e.context=t}),this.media$$=this.mediaService.media$.subscribe(function(t){return e.handleContextChange(e.context)})}},{key:"ngOnDestroy",value:function(){this.context$$.unsubscribe(),this.media$$.unsubscribe()}},{key:"handleContextChange",value:function(e){var t=[];if(void 0!==e){this.mapOverlay=[],e.mapOverlay?t=e.mapOverlay:this.configService.getConfig("mapOverlay")&&(t=this.configService.getConfig("mapOverlay"));var n,i=l(t);try{for(i.s();!(n=i.n()).done;){var o=n.value;(!o.media&&"desktop"===this.mediaService.getMedia()||o.media&&o.media.includes(this.mediaService.getMedia()))&&this.mapOverlay.push(o)}}catch(a){i.e(a)}finally{i.f()}}}}]),e}();se.\u0275fac=function(e){return new(e||se)(p.Y36(ee.Ob),p.Y36(v.yJ),p.Y36(v.E4))},se.\u0275cmp=p.Xpm({type:se,selectors:[["app-map-overlay"]],decls:1,vars:1,consts:[[4,"ngFor","ngForOf"],[1,"mapOverlayDefault",3,"ngClass"],["target","_blank",3,"href",4,"ngIf","ngIfElse"],["templateNoLink",""],["target","_blank",3,"href"],[4,"ngIf"],[3,"src","alt","ngStyle"]],template:function(e,t){1&e&&p.YNc(0,re,5,15,"ng-container",0),2&e&&p.Q6J("ngForOf",t.mapOverlay)},directives:[f.sg,f.mk,f.O5,f.PC],styles:["[_nghost-%COMP%]{height:100%;top:0;left:0;right:0;position:fixed;pointer-events:none}.mapOverlayDefault[_ngcontent-%COMP%]{position:absolute;white-space:nowrap;pointer-events:auto}.bottom-right[_ngcontent-%COMP%]{bottom:0;right:0}.top-right[_ngcontent-%COMP%]{top:0;right:0}.bottom-left[_ngcontent-%COMP%]{bottom:0;left:0}.top-left[_ngcontent-%COMP%]{top:0;left:0}.bottom-center[_ngcontent-%COMP%]{bottom:0;left:50%;transform:translate(-50%)}.top-center[_ngcontent-%COMP%]{top:0;left:50%;transform:translate(-50%)}.center-center[_ngcontent-%COMP%]{top:50%;left:50%;transform:translate(-50%)}.center-right[_ngcontent-%COMP%]{top:50%;right:0}.center-left[_ngcontent-%COMP%]{top:50%;left:0}"]});var ce=function(){function e(t){g(this,e),this.dialog=t,this.dialogRef=null}return d(e,[{key:"toggleDialog",value:function(){this.dialog.getDialogById("legend-button-dialog-container")?this.dialogRef.close():this.dialogRef=this.dialog.open(le,{id:"legend-button-dialog-container",hasBackdrop:!1,closeOnNavigation:!0})}}]),e}();ce.\u0275fac=function(e){return new(e||ce)(p.Y36(E.uw))},ce.\u0275cmp=p.Xpm({type:ce,selectors:[["app-legend-button"]],decls:2,vars:0,consts:[["mat-raised-button","","qcca-buttons","","color","basic","mat-button","",1,"igo-legend-button",3,"click"]],template:function(e,t){1&e&&(p.TgZ(0,"button",0),p.NdJ("click",function(){return t.toggleDialog()}),p._uU(1,"L\xe9gende"),p.qZA())},directives:[H.lW],styles:["app-legend-button[_ngcontent-%COMP%],   .mat-raised-button{font-size:.9rem!important;font-weight:500!important;margin:0;min-width:8px;border:0px;border-radius:0!important}  .qcca-theme app-legend-button button,   .qcca-theme .mat-raised-button{color:#095797!important;border-color:#095797!important}  #legend-button-dialog-container{top:calc(72px + 4px);width:-webkit-fit-content!important;width:-moz-fit-content!important;width:fit-content!important;height:-webkit-fit-content!important;height:-moz-fit-content!important;height:fit-content!important;z-index:10;position:fixed;right:.5%;max-width:99%!important;padding:8px!important;max-height:calc(100% - 72px - 29px - 100px)!important}  #legend-button-dialog-container igo-layer-legend-item{flex-wrap:wrap;width:-webkit-min-content;width:-moz-min-content;width:min-content;display:flex;flex-direction:column}  #legend-button-dialog-container .igo-layer-legend-container{padding-left:0!important;width:-webkit-max-content!important;width:-moz-max-content!important;width:max-content!important}@media (min-width: 768px){  #legend-button-dialog-container{max-height:calc(100% - 72px - 29px - 180px)!important}}  app-legend-button-dialog .mat-list-base .mat-list-item .mat-list-item-content{padding:0!important}  app-legend-button-dialog .mat-dialog-title{margin:0;display:block}  app-legend-button-dialog .igo-layer-list-item{height:-webkit-fit-content!important;height:-moz-fit-content!important;height:fit-content!important}  app-legend-button-dialog .mat-icon,   app-legend-button-dialog mat-button-wrapper,   app-legend-button-dialog .mat-icon-button .mat-icon,   app-legend-button-dialog .mat-icon-button{line-height:26px;height:24px;width:24px}  app-legend-button-dialog .mat-icon svg{height:20px;width:20px}  app-legend-button-dialog div.mat-dialog-content.legend>img{max-height:100%;max-width:100%}  app-legend-button-dialog div.mat-dialog-actions{float:right;padding:0;min-height:auto}"]});var le=function(){function e(t,n){g(this,e),this.mapState=t,this.dialog=n}return d(e,[{key:"map",get:function(){return this.mapState.map}}]),e}();le.\u0275fac=function(e){return new(e||le)(p.Y36(R.U5),p.Y36(E.uw))},le.\u0275cmp=p.Xpm({type:le,selectors:[["app-legend-button-dialog"]],decls:6,vars:5,consts:[["mat-dialog-actions",""],["mat-button","","mat-icon-button","","mat-dialog-close","",1,"close"],["svgIcon","close"],["mat-dialog-title",""],[3,"layers","excludeBaseLayers","allowShowAllLegends","updateLegendOnResolutionChange","showAllLegendsValue"]],template:function(e,t){1&e&&(p.TgZ(0,"div",0),p.TgZ(1,"button",1),p._UZ(2,"mat-icon",2),p.qZA(),p.qZA(),p.TgZ(3,"h4",3),p._uU(4,"L\xe9gende"),p.qZA(),p._UZ(5,"igo-layer-legend-list",4)),2&e&&(p.xp6(5),p.Q6J("layers",t.map.layers)("excludeBaseLayers",!0)("allowShowAllLegends",!1)("updateLegendOnResolutionChange",!1)("showAllLegendsValue",!1))},directives:[E.H8,H.lW,E.ZT,N.Hw,E.uh,q.exk],encapsulation:2});var ue=d(function e(t){g(this,e),this.languageService=t});ue.\u0275fac=function(e){return new(e||ue)(p.Y36(v.TS))},ue.\u0275cmp=p.Xpm({type:ue,selectors:[["app-footer"]],decls:21,vars:18,consts:[["id","footer-id",1,"footer-right"],[1,"order2"],[1,"footer-text"],["rel","noopener noreferrer","alt","('externallinks' | translate)","target","_blank",3,"href"]],template:function(e,t){1&e&&(p.TgZ(0,"div",0),p.TgZ(1,"span",1),p.TgZ(2,"span",2),p.TgZ(3,"a",3),p.ALo(4,"translate"),p._uU(5),p.ALo(6,"translate"),p.qZA(),p.qZA(),p.TgZ(7,"span",2),p._uU(8," | "),p.qZA(),p.TgZ(9,"span",2),p.TgZ(10,"a",3),p.ALo(11,"translate"),p._uU(12),p.ALo(13,"translate"),p.qZA(),p.qZA(),p.TgZ(14,"span",2),p._uU(15," | "),p.qZA(),p.TgZ(16,"span",2),p.TgZ(17,"a",3),p.ALo(18,"translate"),p._uU(19),p.ALo(20,"translate"),p.qZA(),p.qZA(),p.qZA(),p.qZA()),2&e&&(p.xp6(3),p.s9C("href",p.lcZ(4,6,"footer.url-conditions"),p.LSH),p.xp6(2),p.Oqu(p.lcZ(6,8,"footer.conditions")),p.xp6(5),p.s9C("href",p.lcZ(11,10,"footer.url-ministry"),p.LSH),p.xp6(2),p.Oqu(p.lcZ(13,12,"footer.ministry")),p.xp6(5),p.s9C("href",p.lcZ(18,14,"footer.url-gov"),p.LSH),p.xp6(2),p.Oqu(p.lcZ(20,16,"footer.gov")))},pipes:[z.X$],styles:[".order2[_ngcontent-%COMP%]{order:2;margin-right:.5%;display:flex;justify-content:flex-end;right:0;margin-left:140px;text-align:right!important;width:100%}.footer-right[_ngcontent-%COMP%]{z-index:666;background:#ffffffa3;font-size:.7rem;align-items:center;height:29px;display:flex;margin-left:auto}span.footer-text[_ngcontent-%COMP%]{color:#095797;align-self:center;margin-left:.5rem}span.footer-text[_ngcontent-%COMP%]   a[_ngcontent-%COMP%]{color:#095797;text-decoration:none}  div.ol-scale-line{position:fixed!important;display:flex;flex-direction:row;left:70px!important;bottom:3px!important}  .map-hasFooter{height:calc(100% - 29px)!important}  .ol-scale-line-inner{border:1px solid black;color:#000;border-top:none;order:1}"]});var pe=["mapBrowser"],he=["searchBar"];function de(e,t){if(1&e){var n=p.EpF();p.TgZ(0,"igo-menu-button",13),p.NdJ("openSidenav",function(){return p.CHM(n),p.oxw(2).onToggleSidenavClick()}),p.qZA()}if(2&e){var i=p.oxw(2);p.Q6J("sidenavOpened",i.sidenavOpened)}}function ge(e,t){if(1&e){var n=p.EpF();p.TgZ(0,"igo-search-bar",14,15),p.NdJ("pointerSummaryStatus",function(e){return p.CHM(n),p.oxw(2).onPointerSummaryStatusChange(e)})("searchTermChange",function(e){return p.CHM(n),p.oxw(2).onSearchTermChange(e)})("search",function(e){return p.CHM(n),p.oxw(2).onSearch(e)})("clearFeature",function(){return p.CHM(n),p.oxw(2).removeFeatureFromMap()})("searchSettingsChange",function(){return p.CHM(n),p.oxw(2).onSearchSettingsChange()}),p.ALo(2,"translate"),p.qZA()}if(2&e){var i=p.oxw(2);p.Q6J("matTooltip",p.lcZ(2,4,"search-bar"))("searchSettings",!1)("store",i.searchStore)("termSplitter",i.termSplitter)}}function me(e,t){if(1&e&&p._UZ(0,"igo-geolocate-button",11),2&e){var n=p.oxw(2);p.Q6J("map",n.map)}}function fe(e,t){1&e&&p._UZ(0,"app-legend-button")}function ve(e,t){1&e&&p._UZ(0,"app-footer")}var ye=function(e){return{"map-hasfooter":e}};function be(e,t){if(1&e){var n=p.EpF();p.TgZ(0,"mat-sidenav-container"),p.TgZ(1,"mat-sidenav-content",1),p.TgZ(2,"igo-backdrop",2),p.NdJ("click",function(){return p.CHM(n),p.oxw().onBackdropClick()}),p.qZA(),p.YNc(3,de,1,1,"igo-menu-button",3),p.YNc(4,ge,3,6,"igo-search-bar",4),p.TgZ(5,"app-sideresult",5),p.NdJ("openedChange",function(e){return p.CHM(n),p.oxw().sidenavOpened=e})("toolChange",function(e){return p.CHM(n),p.oxw().toolChanged(e)}),p.qZA(),p.TgZ(6,"igo-map-browser",6,7),p._UZ(8,"igo-baselayers-switcher",8),p.TgZ(9,"div",9),p.YNc(10,me,1,1,"igo-geolocate-button",10),p._UZ(11,"igo-zoom-button",11),p._UZ(12,"igo-rotation-button",12),p.YNc(13,fe,1,0,"app-legend-button",0),p.qZA(),p.qZA(),p.YNc(14,ve,1,0,"app-footer",0),p._UZ(15,"app-map-overlay"),p.ALo(16,"async"),p.qZA(),p.qZA()}if(2&e){var i=p.oxw();p.xp6(2),p.Q6J("shown",i.backdropShown),p.xp6(1),p.Q6J("ngIf",i.showMenuButton),p.xp6(1),p.Q6J("ngIf",i.showSearchBar),p.xp6(1),p.Q6J("map",i.map)("opened",i.sidenavOpened),p.xp6(1),p.Q6J("igoHoverFeatureDelay",250)("igoHoverFeatureEnabled",!0)("map",i.map)("ngClass",p.VKq(22,ye,i.hasFooter)),p.xp6(2),p.Q6J("ngClass",i.sidenavOpened?"baselayers-pushed":"baselayers")("map",i.map)("useStaticIcon",i.getBaseLayersUseStaticIcon()),p.xp6(2),p.Q6J("ngIf",i.hasGeolocateButton),p.xp6(1),p.Q6J("map",i.map),p.xp6(1),p.Q6J("showIfNoRotation",i.showRotationButtonIfNoRotation)("map",i.map),p.xp6(1),p.Q6J("ngIf",i.hasLegendButton),p.xp6(1),p.Q6J("ngIf",i.hasFooter),p.xp6(1),p.Q6J("@controlStateY",i.getControlsOffsetY())("@controlStateX","mobile"!==p.lcZ(16,20,i.mediaService.media$)&&i.sidenavOpened?"right":"left")}}var xe=function(){function e(t,n,i,o,a,r,s,c,l,u,p,h,d,m,f,v,y,b,x,w,O,C){g(this,e),this.route=t,this.workspaceState=n,this.authService=i,this.mediaService=o,this.layerService=a,this.dataSourceService=r,this.capabilitiesService=s,this.contextState=c,this.mapState=l,this.searchState=u,this.queryState=p,this.toolState=h,this.searchSourceService=d,this.configService=m,this.importService=f,this.http=v,this.languageService=y,this.messageService=b,this.dialogWindow=x,this.storageService=w,this.directionState=O,this.dialog=C,this.showRotationButtonIfNoRotation=void 0,this.hasFooter=!0,this.hasLegendButton=!0,this.hasGeolocateButton=!0,this.hasExpansionPanel=void 0,this.hasToolbox=!1,this.workspaceNotAvailableMessage="workspace.disabled.resolution",this.workspaceEntitySortChange$=new S.X(!1),this.workspaceMaximize$$=[],this.workspaceMaximize$=new S.X(this.storageService.get("workspaceMaximize")),this.selectedWorkspace$=new S.X(void 0),this.hasSideSearch=!0,this.showSearchBar=!0,this.showMenuButton=!0,this.sidenavOpened$=new S.X(!1),this.settingsChange$=new S.X(void 0),this.toastPanelOffsetX$=new S.X(void 0),this.minSearchTermLength=2,this.hasHomeExtentButton=!1,this.hasFeatureEmphasisOnSelection=!1,this.workspaceSwitchDisabled=!1,this.paginatorOptions={pageSize:50,pageSizeOptions:[1,5,10,20,50,100,500]},this.workspaceMenuClass="workspace-menu",this.fullExtent=this.storageService.get("fullExtent"),this.matDialogRef$=new S.X(void 0),this.searchBarTerm="",this.onSettingsChange$=new S.X(void 0),this.termDefinedInUrl=!1,this.termSplitter="|",this.termDefinedInUrlTriggered=!1,this.addedLayers$$=[],this.forceCoordsNA=!1,this.contextMenuStore=new j.Dn([]),this.contextLoaded=!1,this.toastPanelForExpansionOpened=!0,this.showToastPanelForExpansionToggle=!1,this.toastPanelHtmlDisplay=!1,this.dialogOpened=this.dialog.getDialogById("legend-button-dialog-container"),this.hasFooter=void 0!==this.configService.getConfig("hasFooter")&&this.configService.getConfig("hasFooter"),this.hasLegendButton=void 0!==this.configService.getConfig("hasLegendButton")&&this.configService.getConfig("hasLegendButton"),this.hasSideSearch=void 0===this.configService.getConfig("hasSideSearch")||this.configService.getConfig("hasSideSearch"),this.showSearchBar=void 0===this.configService.getConfig("showSearchBar")||this.configService.getConfig("showSearchBar"),this.hasToolbox=void 0===this.configService.getConfig("hasToolbox")||this.configService.getConfig("hasToolbox"),this.showMenuButton=void 0===this.configService.getConfig("showMenuButton")||this.configService.getConfig("showMenuButton"),this.hasExpansionPanel=this.configService.getConfig("hasExpansionPanel"),this.hasHomeExtentButton=void 0!==this.configService.getConfig("homeExtentButton"),this.hasGeolocateButton=void 0===this.configService.getConfig("hasGeolocateButton")||this.configService.getConfig("hasGeolocateButton"),this.showRotationButtonIfNoRotation=void 0!==this.configService.getConfig("showRotationButtonIfNoRotation")&&this.configService.getConfig("showRotationButtonIfNoRotation"),this.forceCoordsNA=this.configService.getConfig("app.forceCoordsNA"),this.hasFeatureEmphasisOnSelection=this.configService.getConfig("hasFeatureEmphasisOnSelection"),this.igoSearchPointerSummaryEnabled=this.configService.getConfig("hasSearchPointerSummary"),void 0===this.igoSearchPointerSummaryEnabled&&(this.igoSearchPointerSummaryEnabled=this.storageService.get("searchPointerSummaryEnabled")||!1)}return d(e,[{key:"getBaseLayersUseStaticIcon",value:function(){return this.configService.getConfig("useStaticIcon")}},{key:"map",get:function(){return this.mapState.map}},{key:"sidenavOpened",get:function(){return this.sidenavOpened$.value},set:function(e){this.sidenavOpened$.next(e)}},{key:"auth",get:function(){return this.configService.getConfig("auth")||[]}},{key:"isMobile",value:function(){return this.mediaService.getMedia()===v.pU.Mobile}},{key:"isTablet",value:function(){return this.mediaService.getMedia()===v.pU.Tablet}},{key:"isLandscape",value:function(){return this.mediaService.getOrientation()===v.pC.Landscape}},{key:"isPortrait",value:function(){return this.mediaService.getOrientation()===v.pC.Portrait}},{key:"backdropShown",get:function(){return(this.isMobile()||this.isTablet()&&this.isPortrait())&&this.sidenavOpened}},{key:"expansionPanelExpanded",get:function(){return this.workspaceState.workspacePanelExpanded},set:function(e){this.workspaceState.workspacePanelExpanded=e,!0===e?this.map.viewController.setPadding({bottom:280}):this.map.viewController.setPadding({bottom:0})}},{key:"toastPanelShown",get:function(){return!0}},{key:"expansionPanelBackdropShown",get:function(){return this.expansionPanelExpanded&&this.toastPanelForExpansionOpened}},{key:"workspace",get:function(){return this.workspaceState.workspace$.value}},{key:"actionbarMode",get:function(){return j.rO.Overlay}},{key:"actionbarWithTitle",get:function(){return this.actionbarMode===j.rO.Overlay}},{key:"searchStore",get:function(){return this.searchState.store}},{key:"searchResultsGeometryEnabled",get:function(){return this.searchState.searchResultsGeometryEnabled$.value}},{key:"toolbox",get:function(){return this.toolState.toolbox}},{key:"workspaceStore",get:function(){return this.workspaceState.store}},{key:"ngOnInit",value:function(){var e=this;window.IGO=this,this.hasGeolocateButton=void 0===this.configService.getConfig("hasGeolocateButton")||this.configService.getConfig("hasGeolocateButton"),this.map.ol.once("rendercomplete",function(){void 0!==e.configService.getConfig("geolocate.activateDefault")&&(e.map.geolocationController.tracking=e.configService.getConfig("geolocate.activateDefault"))}),this.searchState.searchTermSplitter$.next(this.termSplitter),this.authService.authenticate$.subscribe(function(t){e.contextLoaded=!1}),this.context$$=this.contextState.context$.subscribe(function(t){return e.onChangeContext(t)});var t=[{id:"coordinates",title:"coordinates",handler:function(){return e.searchCoordinate(e.contextMenuCoord)}},{id:"googleMaps",title:"googleMap",handler:function(){return e.openGoogleMaps(e.contextMenuCoord)}},{id:"googleStreetView",title:"googleStreetView",handler:function(){return e.openGoogleStreetView(e.contextMenuCoord)}}];this.contextMenuStore.load(t),this.map.ol.once("rendercomplete",function(){e.readQueryParams()}),this.onSettingsChange$.subscribe(function(){e.searchState.setSearchSettingsChange()}),this.searchState.selectedResult$.subscribe(function(t){t&&e.isMobile()&&e.closeSidenav()}),this.workspaceState.workspaceEnabled$.next(this.hasExpansionPanel),this.workspaceState.store.empty$.subscribe(function(t){!e.hasExpansionPanel||(e.workspaceState.workspaceEnabled$.next(!t),t&&(e.expansionPanelExpanded=!1),e.updateMapBrowserClass())}),this.workspaceState.workspace$.subscribe(function(t){var n,i,o,a;t?(e.selectedWorkspace$.next(t),e.expansionPanelExpanded=!0,(null===(n=t.layer.options.workspace)||void 0===n?void 0:n.pageSize)&&(null===(i=t.layer.options.workspace)||void 0===i?void 0:i.pageSizeOptions)?e.paginatorOptions={pageSize:null===(o=t.layer.options.workspace)||void 0===o?void 0:o.pageSize,pageSizeOptions:null===(a=t.layer.options.workspace)||void 0===a?void 0:a.pageSizeOptions}:e.paginatorOptions={pageSize:50,pageSizeOptions:[1,5,10,20,50,100,500]}):e.expansionPanelExpanded=!1}),this.activeWidget$$=this.workspaceState.activeWorkspaceWidget$.subscribe(function(t){void 0!==t?(e.openToastPanelForExpansion(),e.showToastPanelForExpansionToggle=!0):(e.closeToastPanelForExpansion(),e.showToastPanelForExpansionToggle=!1)}),this.openSidenav$$=this.toolState.openSidenav$.subscribe(function(t){t&&(e.openSidenav(),e.toolState.openSidenav$.next(!1))}),this.sidenavMediaAndOrientation$$=(0,w.aj)([this.sidenavOpened$,this.mediaService.media$,this.mediaService.orientation$]).pipe((0,O.b)(50)).subscribe(function(){e.computeToastPanelOffsetX()})}},{key:"computeToastPanelOffsetX",value:function(){var e=this;this.isMobile()||!this.isLandscape()?Promise.resolve().then(function(){return e.toastPanelOffsetX$.next(void 0)}):Promise.resolve().then(function(){return e.toastPanelOffsetX$.next(e.getToastPanelExtent())})}},{key:"createFeatureProperties",value:function(e){var t={};return e.options.sourceOptions.sourceFields.forEach(function(e){!e.primary&&e.visible&&(t[e.name]="")}),t}},{key:"entitySortChange",value:function(){this.workspaceEntitySortChange$.next(!0)}},{key:"ngOnDestroy",value:function(){this.context$$.unsubscribe(),this.activeWidget$$.unsubscribe(),this.openSidenav$$.unsubscribe(),this.workspaceMaximize$$.map(function(e){return e.unsubscribe()}),this.sidenavMediaAndOrientation$$.unsubscribe()}},{key:"removeFeatureFromMap",value:function(){this.map.searchResultsOverlay.clear()}},{key:"cancelOngoingAddLayer",value:function(){this.addedLayers$$.forEach(function(e){return e.unsubscribe()}),this.addedLayers$$=[]}},{key:"onBackdropClick",value:function(){this.closeSidenav()}},{key:"onToggleSidenavClick",value:function(){this.toggleSidenav()}},{key:"closeToastPanelForExpansion",value:function(){this.toastPanelForExpansionOpened=!1}},{key:"openToastPanelForExpansion",value:function(){this.toastPanelForExpansionOpened=!0}},{key:"onSearchTermChange",value:function(e){var t;(null===(t=this.routeParams)||void 0===t?void 0:t.search)&&e!==this.routeParams.search&&this.searchState.deactivateCustomFilterTermStrategy(),this.searchState.setSearchTerm(e),e.replace(/(#[^\s]*)/g,"").trim().length<2?this.onClearSearch():this.onBeforeSearch()}},{key:"onSearch",value:function(e){var t,n=e.results,i=!(0,q.OcM)(e.research.source);t=i?this.searchSourceService.getEnabledSources().filter(q._iF):this.searchSourceService.getEnabledSources().filter(q.OcM);var o=this.searchStore.entities$.value.filter(function(n){return n.source!==e.research.source&&t.includes(n.source)}).concat(n);this.searchStore.updateMany(o)}},{key:"onSearchSettingsChange",value:function(){this.onSettingsChange$.next(!0)}},{key:"closeSidenav",value:function(){this.sidenavOpened=!1,this.map.viewController.padding[3]=0}},{key:"openSidenav",value:function(){this.sidenavOpened=!0,this.map.viewController.padding[3]=this.isMobile()?0:400}},{key:"toggleSidenav",value:function(){this.sidenavOpened?this.closeSidenav():this.openSidenav(),this.computeToastPanelOffsetX()}},{key:"toolChanged",value:function(e){e&&"searchResults"===e.name&&this.searchBar&&this.searchBar.nativeElement.getElementsByTagName("input")[0].focus()}},{key:"computeHomeExtentValues",value:function(e){var t,n;(null===(n=null===(t=null==e?void 0:e.map)||void 0===t?void 0:t.view)||void 0===n?void 0:n.homeExtent)?(this.homeExtent=e.map.view.homeExtent.extent,this.homeCenter=e.map.view.homeExtent.center,this.homeZoom=e.map.view.homeExtent.zoom):(this.homeExtent=void 0,this.homeCenter=void 0,this.homeZoom=void 0)}},{key:"onChangeContext",value:function(e){var t=this;if(this.cancelOngoingAddLayer(),void 0!==e){if(this.workspace&&!this.workspace.entityStore.empty&&this.workspace.entityStore.clear(),this.queryState.store.empty||this.queryState.store.softClear(),this.computeHomeExtentValues(e),this.route.queryParams.pipe((0,O.b)(250)).subscribe(function(n){(!n.context||n.context===e.uri)&&t.readLayersQueryParams(n)}),this.contextLoaded){var n=this.toolbox.getTool("contextManager"),i=(n?n.options:{}).toolToOpenOnContextChange;if(!i)for(var o=0,a=["mapTools","map","mapDetails","mapLegend"];o<a.length;o++){var r=a[o];if(this.toolbox.getTool(r)){i=r;break}}i&&this.toolbox.activateTool(i)}this.contextLoaded=!0}}},{key:"onBeforeSearch",value:function(){(!this.toolbox.activeTool$.value||"searchResults"!==this.toolbox.activeTool$.value.name)&&this.toolbox.activateTool("searchResults"),this.openSidenav()}},{key:"onClearSearch",value:function(){this.map.searchResultsOverlay.clear(),this.searchStore.clear(),this.searchState.setSelectedResult(void 0),this.searchState.deactivateCustomFilterTermStrategy()}},{key:"onContextMenuOpen",value:function(e){this.contextMenuCoord=this.getClickCoordinate(e)}},{key:"getClickCoordinate",value:function(e){var t=e,n=this.mapBrowser.nativeElement.getBoundingClientRect();t.y=t.y-n.top+(window.scrollY||window.pageYOffset),t.x=t.x-n.left+(window.scrollX||window.pageXOffset);var i=[t.x,t.y],o=this.map.ol.getCoordinateFromPixel(i),a=this.map.projection;return T.vs(o,a,"EPSG:4326")}},{key:"openGoogleMaps",value:function(e){window.open(q.Gij.getGoogleMapsCoordLink(e[0],e[1]))}},{key:"openGoogleStreetView",value:function(e){window.open(q.Gij.getGoogleStreetViewLink(e[0],e[1]))}},{key:"searchCoordinate",value:function(e){this.searchBarTerm=e.map(function(e){return e.toFixed(6)}).join(", ")}},{key:"updateMapBrowserClass",value:function(){var e=this.queryState.store.entities$.value.length>0;this.hasExpansionPanel&&this.workspaceState.workspaceEnabled$.value?this.mapBrowser.nativeElement.classList.add("has-expansion-panel"):this.mapBrowser.nativeElement.classList.remove("has-expansion-panel"),this.hasExpansionPanel&&this.expansionPanelExpanded?this.workspaceMaximize$.value?(this.mapBrowser.nativeElement.classList.add("expansion-offset-maximized"),this.mapBrowser.nativeElement.classList.remove("expansion-offset")):(this.mapBrowser.nativeElement.classList.add("expansion-offset"),this.mapBrowser.nativeElement.classList.remove("expansion-offset-maximized")):this.workspaceMaximize$.value?this.mapBrowser.nativeElement.classList.remove("expansion-offset-maximized"):this.mapBrowser.nativeElement.classList.remove("expansion-offset"),this.sidenavOpened?this.mapBrowser.nativeElement.classList.add("sidenav-offset"):this.mapBrowser.nativeElement.classList.remove("sidenav-offset"),this.sidenavOpened&&!this.isMobile()?this.mapBrowser.nativeElement.classList.add("sidenav-offset-baselayers"):this.mapBrowser.nativeElement.classList.remove("sidenav-offset-baselayers"),e&&(this.isMobile()||this.isTablet()||this.sidenavOpened)&&!this.expansionPanelExpanded?this.mapBrowser.nativeElement.classList.add("toast-offset-attribution"):this.mapBrowser.nativeElement.classList.remove("toast-offset-attribution")}},{key:"getToastPanelExtent",value:function(){return this.sidenavOpened?this.sidenavOpened?this.toastPanelHtmlDisplay&&this.mediaService.isDesktop()?"htmlDisplayOffsetX":this.fullExtent?"fullOffsetX":"standardOffsetX":void 0:this.toastPanelHtmlDisplay&&this.mediaService.isDesktop()?"htmlDisplay":this.fullExtent?"fullStandard":"standard"}},{key:"onPointerSummaryStatusChange",value:function(e){this.storageService.set("searchPointerSummaryEnabled",e),this.igoSearchPointerSummaryEnabled=e}},{key:"getControlsOffsetY",value:function(){return this.expansionPanelExpanded?this.workspaceMaximize$.value?"firstRowFromBottom-expanded-maximized":"firstRowFromBottom-expanded":"firstRowFromBottom"}},{key:"readQueryParams",value:function(){var e=this;this.route.queryParams.subscribe(function(t){e.routeParams=t,e.readToolParams(),e.readSearchParams(),e.readFocusFirst(),e.computeZoomToExtent()})}},{key:"computeZoomToExtent",value:function(){if(this.routeParams.zoomExtent){var e=this.routeParams.zoomExtent.split(","),t=T.$A(e,"EPSG:4326",this.map.projection);this.map.viewController.zoomToExtent(t)}}},{key:"computeFocusFirst",value:function(){setTimeout(function(){var e=document.getElementsByTagName("igo-search-results-item").item(0);e&&e.click()},1)}},{key:"readFocusFirst",value:function(){var e=this;if("1"===this.routeParams.sf&&this.termDefinedInUrl)var t=this.searchStore.stateView.all$().pipe((0,C.n)(function(e){return 0===e.length}),(0,O.b)(500),(0,k.q)(1)).subscribe(function(n){t.unsubscribe(),n.length&&!e.termDefinedInUrlTriggered&&(e.computeFocusFirst(),e.termDefinedInUrlTriggered=!0)})}},{key:"readSearchParams",value:function(){var e=this;if(this.routeParams.search){if(this.termDefinedInUrl=!0,"1"===this.routeParams.exactMatch&&this.searchState.activateCustomFilterTermStrategy(),this.routeParams.search&&!this.routeParams.zoom&&"1"!==this.routeParams.sf)var t=this.searchStore.stateView.all$().pipe((0,C.n)(function(e){return 0===e.length}),(0,O.b)(500),(0,k.q)(1)).subscribe(function(n){t.unsubscribe();var i=n.filter(function(e){return e.entity.meta.dataType===q.D97}).map(function(t){return(new _.Z).readFeature(t.entity.data,{dataProjection:t.entity.data.projection,featureProjection:e.map.projection})}),o=(0,q.HgW)(e.map,i);e.map.viewController.zoomToExtent(o)});this.searchBarTerm=this.routeParams.search}"1"===this.routeParams.searchGeom&&this.searchState.searchResultsGeometryEnabled$.next(!0)}},{key:"readToolParams",value:function(){var e=this;if(this.routeParams.tool&&this.matDialogRef$.pipe((0,C.n)(function(e){return void 0!==e}),(0,P.P)()).subscribe(function(t){t||e.toolbox.activateTool(e.routeParams.tool)}),"1"===this.routeParams.sidenav&&setTimeout(function(){e.openSidenav()},250),this.routeParams.routing){var t,n=!1,i=this.routeParams.routing.split(";"),o=this.routeParams.routingOptions;o&&(t=parseInt(o.split("result:")[1],10)),this.directionState.stopsStore.storeInitialized$.pipe((0,C.n)(function(e){return!e}),(0,P.P)()).subscribe(function(t){t&&!n&&(n=!0,i.map(function(t,n){n>1&&(0,q.yLv)(e.directionState.stopsStore)}),setTimeout(function(){i.map(function(t,n){var i=e.directionState.stopsStore.all().find(function(e){return e.position===n});i.text=t,i.coordinates=t.split(","),e.directionState.stopsStore.update(i)})},1.25*e.directionState.debounceTime))}),this.directionState.routesFeatureStore.count$.pipe((0,C.n)(function(e){return e<1}),(0,P.P)()).subscribe(function(t){t>=1&&e.directionState.zoomToActiveRoute$.next()}),this.directionState.routesFeatureStore.count$.pipe((0,C.n)(function(e){return e<2}),(0,P.P)()).subscribe(function(){t&&(e.directionState.routesFeatureStore.entities$.value.map(function(e){return e.properties.active=!1}),e.directionState.routesFeatureStore.entities$.value[t].properties.active=!0,e.directionState.zoomToActiveRoute$.next())})}}},{key:"readLayersQueryParams",value:function(e){this.readLayersQueryParamsByType(e,"wms"),this.readLayersQueryParamsByType(e,"wmts"),this.readLayersQueryParamsByType(e,"arcgisrest"),this.readLayersQueryParamsByType(e,"imagearcgisrest"),this.readLayersQueryParamsByType(e,"tilearcgisrest"),this.readVectorQueryParams(e)}},{key:"getQueryParam",value:function(e,t){var n;return t.includes("?")&&(n=new M.LE({fromString:t.split("?")[1]}).get(e)),n}},{key:"readLayersQueryParamsByType",value:function(e,t){var n,i,o=this;switch(t){case"wms":(e.layers||e.wmsLayers)&&e.wmsUrl&&(i="wmsUrl",n=e.wmsLayers?"wmsLayers":"layers");break;case"wmts":e.wmtsLayers&&e.wmtsUrl&&(i="wmtsUrl",n="wmtsLayers");break;case"arcgisrest":e.arcgisLayers&&e.arcgisUrl&&(i="arcgisUrl",n="arcgisLayers");break;case"imagearcgisrest":e.iarcgisLayers&&e.iarcgisUrl&&(i="iarcgisUrl",n="iarcgisLayers");break;case"tilearcgisrest":e.tarcgisLayers&&e.tarcgisUrl&&(i="tarcgisUrl",n="tarcgisLayers")}if(n&&i){var a=e[n].split("),("),r=e[i].split(","),s=0;r.forEach(function(n){var i=n,r=o.getQueryParam("VERSION",i)||o.getQueryParam("version",i)||void 0;r&&(i=i.replace("VERSION="+r,"").replace("version="+r,"")),o.extractLayersByService(a[s]).forEach(function(n){var a=n.split(":igoz"),s=Z.gb.removeUndefined({type:t,url:i,layer:a[0],params:"wms"===t?{LAYERS:a[0]}:void 0}),c=(0,q.lZj)(s),l=o.computeLayerVisibilityFromUrl(e,c);o.addLayerFromURL(i,a[0],t,r,l,a[1]?parseInt(a[1],10):void 0)}),s+=1})}}},{key:"readVectorQueryParams",value:function(e){var t=this;if(e.vector){var n=e.vector,i=n.lastIndexOf("/"),o=n.slice(i+1,n.length);this.http.get("".concat(n),{responseType:"blob"}).subscribe(function(e){var n=new File([e],o,{type:e.type,lastModified:Date.now()});t.importService.import(n).subscribe(function(e){return t.onFileImportSuccess(n,e)},function(e){return t.onFileImportError(n,e)})})}}},{key:"onFileImportSuccess",value:function(e,t){(0,q.xrF)(e,t,this.map,this.messageService,this.languageService)}},{key:"onFileImportError",value:function(e,t){(0,q.jDn)(e,t,this.messageService,this.languageService)}},{key:"extractLayersByService",value:function(e){var t=e;return(t=(t=t.startsWith("(")?t.substr(1):t).endsWith(")")?t.slice(0,-1):t).split(",")}},{key:"addLayerFromURL",value:function(e,t,n,i){var o=this,a=!(arguments.length>4&&void 0!==arguments[4])||arguments[4],r=arguments.length>5?arguments[5]:void 0;if(this.contextLoaded){var s={optionsFromCapabilities:!0,optionsFromApi:!0,crossOrigin:!0,type:n,url:e},c="arcgisrest"===n||"imagearcgisrest"===n||"tilearcgisrest"===n,l={version:"wmts"===n?"1.0.0":void 0,queryable:!!c,queryFormat:c?"esrijson":void 0,layer:t};"wms"===n&&(l={params:{LAYERS:t,VERSION:i}}),l=Z.gb.removeUndefined(Object.assign({},l,s)),this.addedLayers$$.push(this.layerService.createAsyncLayer({zIndex:r,visible:a,sourceOptions:l}).subscribe(function(e){o.map.addLayer(e)}))}}},{key:"computeLayerVisibilityFromUrl",value:function(e,t){var n=e,i=!0;if(!n||!t)return i;var o="",a="",r=[],s=[];return n.visiblelayers&&(o=n.visiblelayers),n.invisiblelayers&&(a=n.invisiblelayers),"*"===o&&(i=!0),"*"===a&&(i=!1),r=o.split(","),s=a.split(","),(r.indexOf(t)>-1||r.indexOf(t.toString())>-1)&&(i=!0),(s.indexOf(t)>-1||s.indexOf(t.toString())>-1)&&(i=!1),i}}]),e}();xe.\u0275fac=function(e){return new(e||xe)(p.Y36(h.gz),p.Y36(R.gV),p.Y36($.e8),p.Y36(v.yJ),p.Y36(q.ITu),p.Y36(q.LvN),p.Y36(q.neU),p.Y36(R.sz),p.Y36(R.U5),p.Y36(R.po),p.Y36(R.Tb),p.Y36(R.EH),p.Y36(q.gS3),p.Y36(v.E4),p.Y36(q.Y5R),p.Y36(M.eN),p.Y36(v.TS),p.Y36(v.ez),p.Y36(E.uw),p.Y36(v.V1),p.Y36(R.Nw),p.Y36(E.uw))},xe.\u0275cmp=p.Xpm({type:xe,selectors:[["app-portal"]],viewQuery:function(e,t){var n;(1&e&&(p.Gf(pe,7,p.SBq),p.Gf(he,7,p.SBq)),2&e)&&(p.iGM(n=p.CRH())&&(t.mapBrowser=n.first),p.iGM(n=p.CRH())&&(t.searchBar=n.first))},decls:1,vars:1,consts:[[4,"ngIf"],["position","end"],[3,"shown","click"],[3,"sidenavOpened","openSidenav",4,"ngIf"],["appearance","outline","searchIcon","magnify","matTooltipShowDelay","500","tooltip-position","after","color","primary",3,"matTooltip","searchSettings","store","termSplitter","pointerSummaryStatus","searchTermChange","search","clearFeature","searchSettingsChange",4,"ngIf"],[3,"map","opened","openedChange","toolChange"],["igoHoverFeature","","igoMapContext","","igoLayerContext","","igoDropGeoFile","",3,"igoHoverFeatureDelay","igoHoverFeatureEnabled","map","ngClass"],["mapBrowser",""],[3,"ngClass","map","useStaticIcon"],["id","map-buttons"],["color","primary",3,"map",4,"ngIf"],["color","primary",3,"map"],["color","primary",3,"showIfNoRotation","map"],[3,"sidenavOpened","openSidenav"],["appearance","outline","searchIcon","magnify","matTooltipShowDelay","500","tooltip-position","after","color","primary",3,"matTooltip","searchSettings","store","termSplitter","pointerSummaryStatus","searchTermChange","search","clearFeature","searchSettingsChange"],["searchbar",""]],template:function(e,t){1&e&&p.YNc(0,be,17,24,"mat-sidenav-container",0),2&e&&p.Q6J("ngIf",!t.hasToolbox)},directives:[f.O5,F.TM,F.Rh,j.qv,K,q.ExE,q.Ej2,ee.b3,ee.mH,q.V$T,f.mk,q.AIr,q.PUQ,q.fwr,se,q.pyf,q.NBD,J.gM,q.u$Y,ce,ue],pipes:[f.Ov,z.X$],styles:["[_nghost-%COMP%]{width:100%;height:100%;display:block}mat-icon.disabled[_ngcontent-%COMP%]{color:#00000061}mat-sidenav-container[_ngcontent-%COMP%]{height:100%;width:100%;background-color:#efefef;z-index:5;display:unset}@media only screen and (orientation:portrait) and (max-width: 599px),only screen and (orientation:landscape) and (max-width: 959px){mat-sidenav-content[_ngcontent-%COMP%]{z-index:auto}}.spacer[_ngcontent-%COMP%]{flex:1 1 auto}igo-search-bar[_ngcontent-%COMP%]{background-color:#fff;font-size:16px;position:absolute;top:calc(4 * 4px);z-index:4;height:40px;margin:0 4px}igo-search-bar[_ngcontent-%COMP%]{width:calc(calc(400px) - 40px)}@media only screen and (orientation:portrait) and (max-width: 599px),only screen and (orientation:landscape) and (max-width: 959px){igo-search-bar[_ngcontent-%COMP%]{width:calc(100% - 40px - 40px - (3 * 4px));max-width:350px}}igo-search-bar[_ngcontent-%COMP%], igo-search-results[_ngcontent-%COMP%]   igo-list[_ngcontent-%COMP%], .baselayers[_ngcontent-%COMP%]{left:16px!important}  .baselayers-pushed{left:calc(400px + 4px)!important;-webkit-animation-duration:3s;animation-duration:3s;visibility:visible;opacity:1;opacity:0;-webkit-animation:fadeIn .1s;animation:fadeIn .1s;-webkit-animation-delay:0s;animation-delay:0s;-webkit-animation-fill-mode:forwards;animation-fill-mode:forwards}  igo-search-bar{height:100%}igo-search-bar[_ngcontent-%COMP%]   svg[_ngcontent-%COMP%]{color:#fff;height:40px;width:40px}  .search-bar-buttons{height:100%;margin-top:.25em;background:#4E5662}  igo-search-bar .mat-form-field-outline-end,   igo-search-bar .mat-form-field-outline-start{border-color:#4e5662;height:40px!important}  igo-search-bar .mat-form-field-appearance-outline .mat-form-field-outline{top:0}  igo-search-bar .mat-form-field-appearance-outline .mat-form-field-wrapper,   .search-bar-buttons{margin-top:0}  .igo-search-bar-container{height:40px!important}  igo-search-bar .mat-form-field-appearance-outline .mat-form-field-infix input{line-height:40px;vertical-align:middle;border-top:0;padding:0;margin-top:0}  igo-search-bar .mat-form-field-appearance-outline .mat-form-field-infix{padding:0;border-top:0!important}  igo-search-bar .mat-form-field-appearance-outline .mat-form-field-wrapper, .search-bar-buttons[_ngcontent-%COMP%],   igo-search-bar .mat-form-field-outline-end,   igo-search-bar .mat-form-field-outline-start{height:40px;padding:0;margin-top:0}  igo-search-bar .mat-form-field-appearance-outline .mat-form-field-flex{padding:0 8px;margin-top:0!important;height:40px}  .igo-search-bar-container>mat-form-field{padding:0!important}  igo-search-bar .mat-form-field-outline-start{border-radius:0!important}  igo-search-bar .mat-form-field-outline-end{border-radius:0!important}  .search-bar-buttons .mat-icon{width:40px!important;display:inline-block!important}igo-map-browser[_ngcontent-%COMP%]{width:100%;height:100%;position:relative;display:block}igo-map-browser[_ngcontent-%COMP%]     .ol-attribution{left:50px;bottom:4px;text-align:left;padding:0;margin-right:90px;background-color:#fff0;width:calc(100% - 500px)}igo-map-browser[_ngcontent-%COMP%]     .ol-attribution.ol-logo-only{height:inherit}igo-map-browser[_ngcontent-%COMP%]     .ol-attribution.ol-collapsed{background:none}igo-map-browser[_ngcontent-%COMP%]     .ol-attribution.ol-collapsed button{transform:none}igo-map-browser[_ngcontent-%COMP%]     .ol-attribution button{transform:rotate(180deg);background-color:#fff;cursor:pointer}igo-map-browser[_ngcontent-%COMP%]     .ol-attribution.ol-uncollapsible{height:auto}igo-map-browser[_ngcontent-%COMP%]     .ol-attribution ul{background-color:#fff9;padding:2px .5em}igo-map-browser[_ngcontent-%COMP%]     .ol-overlaycontainer-stopevent{position:absolute;width:100%;left:0;bottom:0}igo-map-browser.toast-offset-scale-line[_ngcontent-%COMP%]     .ol-overlaycontainer-stopevent   .ol-scale-line{bottom:50px}@media only screen and (orientation:portrait) and (max-width: 599px),only screen and (orientation:landscape) and (max-width: 959px){igo-map-browser.toast-offset-attribution[_ngcontent-%COMP%]     .ol-overlaycontainer-stopevent   .ol-attribution{bottom:50px}}#map-buttons[_ngcontent-%COMP%]{display:flex;flex-direction:column;margin-bottom:5px;z-index:10;position:absolute;right:5px;bottom:0;max-height:50%}.igo-zoom-button-container[_ngcontent-%COMP%], button[_ngcontent-%COMP%], app-legend-button[_ngcontent-%COMP%], igo-zoom-button[_ngcontent-%COMP%], igo-offline-button[_ngcontent-%COMP%], igo-geolocate-button[_ngcontent-%COMP%], igo-home-extent-button[_ngcontent-%COMP%], #app-legend-button-dialog[_ngcontent-%COMP%], mat-dialog-container[_ngcontent-%COMP%]   app-legend-button-dialog[_ngcontent-%COMP%], app-legend-button-dialog[_ngcontent-%COMP%]{margin-top:4px!important;position:unset!important;bottom:unset!important;margin-left:auto;align-self:flex-end;margin-top:auto}  igo-zoom-button{box-shadow:0 3px 1px -2px #0003,0 2px 2px #00000024,0 1px 5px #0000001f}@media only screen and (orientation:portrait) and (min-width: 600px) and (max-width: 839px),only screen and (orientation:landscape) and (min-width: 960px) and (max-width: 1279px){igo-zoom-button[_ngcontent-%COMP%]{display:none}}  .map-hasfooter{height:calc(100% - 29px)!important}  #legend-button-dialog-container{top:calc(72px + 4px);max-height:calc(100% - 72px - 29px - 100px)}@media (min-width: 768px){  #legend-button-dialog-container{top:calc(72px + 4px);max-height:calc(100% - 72px - 29px - 180px)}}"],data:{animation:[[(0,A.X$)("controlsOffsetY",[(0,A.SB)("close",(0,A.oB)({})),(0,A.SB)("firstRowFromBottom",(0,A.oB)({bottom:"5px"})),(0,A.SB)("firstRowFromBottom-expanded",(0,A.oB)({bottom:"5px"})),(0,A.SB)("firstRowFromBottom-expanded-maximized",(0,A.oB)({bottom:"500px"})),(0,A.SB)("secondRowFromBottom",(0,A.oB)({bottom:"47px"})),(0,A.SB)("thirdRowFromBottom",(0,A.oB)({bottom:"104px"})),(0,A.SB)("",(0,A.oB)({bottom:"calc(285px)"})),(0,A.SB)("secondRowFromBottom-expanded",(0,A.oB)({bottom:"calc(285px + 52px)"})),(0,A.SB)("thirdRowFromBottom-expanded",(0,A.oB)({bottom:"calc(285px + 104px)"})),(0,A.eR)("* => *",(0,A.jt)("200ms"))])],(0,A.X$)("controlStateX",[(0,A.SB)("left",(0,A.oB)({left:"60px"})),(0,A.SB)("right",(0,A.oB)({left:"465px"})),(0,A.eR)("* => *",(0,A.jt)("200ms"))]),(0,A.X$)("controlStateY",[(0,A.SB)("close",(0,A.oB)({})),(0,A.SB)("firstRowFromBottom",(0,A.oB)({bottom:"2px","margin-left":"0px"})),(0,A.SB)("firstRowFromBottom-expanded",(0,A.oB)({bottom:"285px","margin-left":"-55px"})),(0,A.SB)("firstRowFromBottom-expanded-maximized",(0,A.oB)({bottom:"500px","margin-left":"-55px"})),(0,A.eR)("* => *",(0,A.jt)("200ms"))])]}});var Se=d(function e(t){g(this,e),this.configService=t,this.hasHeader=!0,this.hasHeader=void 0!==this.configService.getConfig("header.hasHeader")&&this.configService.getConfig("header.hasHeader")});Se.\u0275fac=function(e){return new(e||Se)(p.Y36(v.E4))},Se.\u0275cmp=p.Xpm({type:Se,selectors:[["app-map"]],decls:1,vars:1,consts:[[3,"ngClass"]],template:function(e,t){1&e&&p._UZ(0,"app-portal",0),2&e&&p.Q6J("ngClass",t.hasHeader?"portal-hasHeader-hasMenu":"portal-hasMenu")},directives:[xe,f.mk],styles:[".portal-hasMenu{height:calc(100% - 40px)!important}  .portal-hasHeader-hasMenu{height:calc(100% - 72px - 40px)!important}  #legend-button-dialog-container{top:calc(72px + 40px + 4px)!important;max-height:calc(100% - 72px - 40px - 29px - 100px)!important}@media (min-width: 768px){  .portal-hasMenu{height:calc(100% - 72px)!important}  .portal-hasHeader-hasMenu{height:calc(100% - 72px - 72px)!important}  #legend-button-dialog-container{top:calc(72px + 72px + 4px)!important;max-height:calc(100% - 72px - 72px - 29px - 180px)!important}}"]});var we=[{path:"",component:b},{path:"carte",component:Se},{path:"en-savoir-plus",component:x}],Oe=d(function e(){g(this,e)});Oe.\u0275fac=function(e){return new(e||Oe)},Oe.\u0275mod=p.oAB({type:Oe}),Oe.\u0275inj=p.cJS({imports:[[h.Bz.forRoot(we,{onSameUrlNavigation:"reload",relativeLinkResolution:"legacy"})],h.Bz]});var Ce=d(function e(){g(this,e)});Ce.\u0275fac=function(e){return new(e||Ce)},Ce.\u0275mod=p.oAB({type:Ce}),Ce.\u0275inj=p.cJS({imports:[[f.ez,v.yR,y.g0,Oe]]});var ke=d(function e(){g(this,e)});ke.\u0275fac=function(e){return new(e||ke)},ke.\u0275mod=p.oAB({type:ke}),ke.\u0275inj=p.cJS({imports:[[f.ez,v.yR]]});var Pe=s(81134),Te=s(89544),Me=s(18293),_e=s(94757),Ze=function(e,t,n,i){var o,a=arguments.length,r=a<3?t:null===i?i=Object.getOwnPropertyDescriptor(t,n):i;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)r=Reflect.decorate(e,t,n,i);else for(var s=e.length-1;s>=0;s--)(o=e[s])&&(r=(a<3?o(r):a>3?o(t,n,r):o(t,n))||r);return a>3&&r&&Object.defineProperty(t,n,r),r},je=function(e,t){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(e,t)},qe=function(){function e(t){g(this,e),this.languageService=t}return d(e,[{key:"formatResult",value:function(e){return e}}]),e}();qe.\u0275fac=function(e){return new(e||qe)(p.LFG(v.TS))},qe.\u0275prov=p.Yz7({token:qe,factory:qe.\u0275fac});var Ae=function(){function e(){g(this,e)}return d(e,[{key:"encodeKey",value:function(e){return encodeURIComponent(e)}},{key:"encodeValue",value:function(e){return encodeURIComponent(e)}},{key:"decodeKey",value:function(e){return decodeURIComponent(e)}},{key:"decodeValue",value:function(e){return decodeURIComponent(e)}}]),e}(),Re=function(i){o(s,i);var a=r(s);function s(e,t,n,i,o,r){var c;g(this,s),(c=a.call(this,i,n)).http=e,c.languageService=t,c.formatter=o,c.title$=new S.X(""),c.hashtagsLieuxToKeep=[],c.languageService.translate.get(c.options.title).subscribe(function(e){return c.title$.next(e)});var l=r.get($.e8);return c.settings.length&&(l?l.authenticate$.subscribe(function(){c.getAllowedTypes()}):c.getAllowedTypes()),c}return d(s,[{key:"title",get:function(){return this.title$.getValue()}},{key:"getId",value:function(){return s.id}},{key:"getType",value:function(){return s.type}},{key:"getDefaultOptions",value:function(){var e,t=this.options.params&&this.options.params.limit?Number(this.options.params.limit):void 0,n=this.options.params&&this.options.params.ecmax?Number(this.options.params.ecmax):void 0,i=(null===(e=this.options.params)||void 0===e?void 0:e.type)?this.options.params.type.replace(/\s/g,"").toLowerCase().split(","):["adresses","codes-postaux","routes","intersections","municipalites","mrc","regadmin","lieux"];return{title:"igo.geo.search.icherche.name",searchUrl:"https://geoegl.msp.gouv.qc.ca/apis/icherche",settings:[{type:"checkbox",title:"results type",name:"type",values:[{title:"igo.geo.search.icherche.type.address",value:"adresses",enabled:-1!==i.indexOf("adresses"),hashtags:["adresse"]},{title:"igo.geo.search.icherche.type.oldAddress",value:"anciennes-adresses",enabled:-1!==i.indexOf("anciennes-adresses"),hashtags:["anciennes-adresses"]},{title:"igo.geo.search.icherche.type.postalCode",value:"codes-postaux",enabled:-1!==i.indexOf("codes-postaux"),hashtags:["code-postal"]},{title:"igo.geo.search.icherche.type.road",value:"routes",enabled:-1!==i.indexOf("routes"),hashtags:["route"]},{title:"igo.geo.search.icherche.type.intersection",value:"intersections",enabled:-1!==i.indexOf("intersections"),hashtags:["intersection","+"]},{title:"igo.geo.search.icherche.type.city",value:"municipalites",enabled:-1!==i.indexOf("municipalites"),hashtags:["municipalit\xe9","mun"]},{title:"igo.geo.search.icherche.type.oldCity",value:"anciennes-municipalites",enabled:-1!==i.indexOf("anciennes-municipalites"),hashtags:["anciennes-municipalites"]},{title:"igo.geo.search.icherche.type.mrc",value:"mrc",enabled:-1!==i.indexOf("mrc"),hashtags:["mrc"]},{title:"igo.geo.search.icherche.type.regadmin",value:"regadmin",enabled:-1!==i.indexOf("regadmin"),hashtags:["r\xe9gion-administrative","regadmin"]},{title:"igo.geo.search.icherche.type.entreprise",value:"entreprises",enabled:-1!==i.indexOf("entreprises"),available:!1,hashtags:["entreprise"]},{title:"igo.geo.search.icherche.type.place",value:"lieux",enabled:-1!==i.indexOf("lieux"),hashtags:["lieu"]},{title:"igo.geo.search.icherche.type.exit",value:"sorties-autoroute",enabled:-1!==i.indexOf("sorties-autoroute"),hashtags:["sortie","sorties","exit"]},{title:"igo.geo.search.icherche.type.km",value:"bornes-km",enabled:-1!==i.indexOf("bornes-km"),hashtags:["borne","bornes","rep\xe8re","km"]},{title:"igo.geo.search.icherche.type.gcc",value:"bornes-gcc",enabled:-1!==i.indexOf("bornes-gcc"),hashtags:["borne","bornes","rep\xe8re","gcc","ccg"]},{title:"igo.geo.search.icherche.type.cn",value:"bornes-cn",enabled:-1!==i.indexOf("bornes-cn"),hashtags:["borne","bornes","cn"]},{title:"igo.geo.search.icherche.type.sumi",value:"bornes-sumi",enabled:-1!==i.indexOf("bornes-sumi"),hashtags:["borne","bornes","sumi"]},{title:"igo.geo.search.icherche.type.hq",value:"hq",enabled:-1!==i.indexOf("hq"),hashtags:["hq"]},{title:"igo.geo.search.icherche.type.cadastre",value:"cadastre",enabled:-1!==i.indexOf("cadastre"),hashtags:["cadastre"]}]},{type:"radiobutton",title:"results limit",name:"limit",values:[{title:"1",value:1,enabled:1===t},{title:"5",value:5,enabled:5===t||!t},{title:"10",value:10,enabled:10===t},{title:"25",value:25,enabled:25===t},{title:"50",value:50,enabled:50===t}]},{type:"radiobutton",title:"ecmax",name:"ecmax",values:[{title:"10 %",value:10,enabled:10===n},{title:"30 %",value:30,enabled:30===n||!n},{title:"50 %",value:50,enabled:50===n},{title:"75 %",value:75,enabled:75===n},{title:"100 %",value:100,enabled:100===n}]},{type:"radiobutton",title:"restrictExtent",name:"loc",values:[{title:"igo.geo.search.icherche.restrictExtent.map",value:"true",enabled:!1},{title:"igo.geo.search.icherche.restrictExtent.quebec",value:"false",enabled:!0}]}]}}},{key:"search",value:function(e,t){var n=this,i=this.computeRequestParams(e,t||{});return i.get("type").length?(this.options.params.page=i.get("page")||"1",this.http.get("".concat(this.searchUrl,"/geocode"),{params:i}).pipe((0,L.U)(function(t){return n.extractResults(t,e)}),(0,Me.K)(function(e){throw e.error.toDisplay=!0,e.error.title=n.languageService.translate.instant(n.getDefaultOptions().title),e}))):(0,Pe.of)([])}},{key:"getAllowedTypes",value:function(){var e=this;return this.http.get("".concat(this.searchUrl,"/types")).subscribe(function(n){var i=e.settings.find(function(e){return"type"===e.name});i.values.forEach(function(i){var o=new RegExp("^".concat(i.value,"(\\.|$)")),a=n.filter(function(e){return o.test(e)});i.available=a.length>0,"lieux"===i.value&&(e.hashtagsLieuxToKeep=t(new Set(a.map(function(e){return e.split(".")}).reduce(function(e,t){return e.concat(t)}).filter(function(e){return"lieux"!==e}))))}),e.setParamFromSetting(i,!1)})}},{key:"computeRequestParams",value:function(t,n){var i=Object.assign({geometry:!0,bbox:!0,icon:!0,type:["adresses","codes-postaux","routes","municipalites","mrc","regadmin","lieux.toponyme.geographie","lieux.toponyme.hydro","lieux.toponyme.parc","lieux.toponyme.secteur"]},this.params,this.computeOptionsParam(t,n||{}).params,{q:this.computeTerm(t),page:n.page});if("true"===i.loc){var o=e(n.extent,4),a=o[0],r=o[1],s=o[2],c=o[3];i.loc="".concat(a,",").concat(r,";").concat(s,",").concat(r,";").concat(s,",").concat(c,";").concat(a,",").concat(c,";").concat(a,",").concat(r)}else"false"===i.loc&&delete i.loc;return/#[A-Za-z]+/.test(i.q)&&(i.type="lieux"),new M.LE({fromObject:Z.gb.removeUndefined(i),encoder:new Ae})}},{key:"extractResults",value:function(e,t){var n=this;return e.features.map(function(i){return n.formatter.formatResult(n.dataToResult(i,t,e))})}},{key:"dataToResult",value:function(e,t,n){var i=this.computeProperties(e),o=[this.getId(),i.type,i.code].join("."),a=e.highlight.title||e.properties.nom,r=e.highlight.title2?" <small> "+e.highlight.title2+"</small>":"",s=e.highlight.title3?"<br><small> "+e.highlight.title3+"</small>":"";return{source:this,data:{type:q.D97,projection:"EPSG:4326",geometry:e.geometry,extent:e.bbox,properties:i,meta:{id:o,title:e.properties.nom}},meta:{dataType:q.D97,id:o,title:e.properties.nom,titleHtml:a+r+s,icon:e.icon||"map-marker",score:e.score||(0,q.TWc)(t.trim(),e.properties.nom),nextPage:n.features.length%+this.options.params.limit==0&&+this.options.params.page<10}}}},{key:"computeProperties",value:function(e){var t=Z.gb.removeKeys(e.properties,s.propertiesBlacklist);if(!e.geometry)return Object.assign({type:e.index},t);var n,i,o={GoogleMaps:""};if("Point"===e.geometry.type)n=q.Gij.getGoogleMapsCoordLink(e.geometry.coordinates[0],e.geometry.coordinates[1]);else{var a=(0,I.Z)(e.geometry);n=q.Gij.getGoogleMapsCoordLink(a.geometry.coordinates[0],a.geometry.coordinates[1])}i="routes"===e.index?q.Gij.getGoogleMapsNameLink(e.properties.nom+", "+e.properties.municipalite):"municipalites"===e.index?q.Gij.getGoogleMapsNameLink(e.properties.nom+", ville"):"mrc"===e.index?q.Gij.getGoogleMapsNameLink("mrc+"+e.properties.nom):"regadmin"===e.index?q.Gij.getGoogleMapsNameLink(e.properties.nom+",+QC"):q.Gij.getGoogleMapsNameLink(e.properties.nom||e.highlight.title),o.GoogleMaps="<a href="+n+' target="_blank">'+this.languageService.translate.instant("igo.geo.searchByCoord")+"</a> <br /> <a href="+i+' target="_blank">'+this.languageService.translate.instant("igo.geo.searchByName")+"</a>","Point"===e.geometry.type&&(o.GoogleStreetView=q.Gij.getGoogleStreetViewLink(e.geometry.coordinates[0],e.geometry.coordinates[1]));var r={Route:'<span class="routing"> <u>'+this.languageService.translate.instant("igo.geo.seeRouting")+"</u> </span>"};return Object.assign({type:e.index},t,o,r)}},{key:"computeTerm",value:function(e){var t=this;return(e.match(/(#[A-Za-z]+)/g)||[]).some(function(e){var n=e.substring(1);return t.hashtagsLieuxToKeep.some(function(e){return e.toLowerCase().normalize("NFD").replace(/[\u0300-\u036f]/g,"")===n.toLowerCase().normalize("NFD").replace(/[\u0300-\u036f]/g,"")})})||(e=e.replace(/(#[A-Za-z]+)/g,"")),e.replace(/[^\w\xc0-\xff !\-\+\(\)\.\/\xbd\xbc\xbe,'#]+/g,"")}},{key:"computeOptionsParam",value:function(e,t){var i=n(c(s.prototype),"getHashtagsValid",this).call(this,e,"type");return i&&(t.params=Object.assign(t.params||{},{type:i.join(",")})),t}}]),s}(q.xHx);Re.id="icherche",Re.type=q.D97,Re.propertiesBlacklist=[],Re.\u0275fac=function(e){return new(e||Re)(p.LFG(M.eN),p.LFG(v.TS),p.LFG(v.V1),p.LFG("options"),p.LFG(qe),p.LFG(p.zs3))},Re.\u0275prov=p.Yz7({token:Re,factory:Re.\u0275fac}),Ze([(0,_e.q)({maxCacheCount:20}),je("design:type",Function),je("design:paramtypes",[String,Object]),je("design:returntype",Te.y)],Re.prototype,"search",null);var $e=function(e){o(n,e);var t=r(n);function n(e,i,o,a,r){var s;g(this,n),(s=t.call(this,a,o)).http=e,s.languageService=i,s.title$=new S.X(""),s.languageService.translate.get(s.options.title).subscribe(function(e){return s.title$.next(e)});var c=r.get($.e8);return s.settings.length&&(c?c.authenticate$.subscribe(function(){s.getAllowedTypes()}):s.getAllowedTypes()),s}return d(n,[{key:"title",get:function(){return this.title$.getValue()}},{key:"getId",value:function(){return n.id}},{key:"getType",value:function(){return n.type}},{key:"getDefaultOptions",value:function(){var e=this.options.params&&this.options.params.type?this.options.params.type.replace(/\s/g,"").toLowerCase().split(","):["adresses","municipalites","mrc","regadmin"];return{title:"igo.geo.search.ichercheReverse.name",searchUrl:"https://geoegl.msp.gouv.qc.ca/apis/terrapi",settings:[{type:"checkbox",title:"results type",name:"type",values:[{title:"igo.geo.search.icherche.type.address",value:"adresses",enabled:-1!==e.indexOf("adresses")},{title:"igo.geo.search.icherche.type.road",value:"routes",enabled:-1!==e.indexOf("routes"),available:!1},{title:"igo.geo.search.icherche.type.district",value:"arrondissements",enabled:-1!==e.indexOf("arrondissements")},{title:"igo.geo.search.icherche.type.city",value:"municipalites",enabled:-1!==e.indexOf("municipalites")},{title:"igo.geo.search.icherche.type.mrc",value:"mrc",enabled:-1!==e.indexOf("mrc")},{title:"igo.geo.search.icherche.type.regadmin",value:"regadmin",enabled:-1!==e.indexOf("regadmin")}]},{type:"radiobutton",title:"radius",name:"bufferInput",values:[{title:"100 m",value:100,enabled:!this.options.distance||100===this.options.distance},{title:"500 m",value:500,enabled:500===this.options.distance},{title:"1 km",value:1e3,enabled:1e3===this.options.distance},{title:"2 km",value:2e3,enabled:2e3===this.options.distance},{title:"5 km",value:5e3,enabled:5e3===this.options.distance}]}]}}},{key:"reverseSearch",value:function(e,t){var n=this,i=this.computeRequestParams(e,t||{});return i.get("type").length?this.http.get("".concat(this.searchUrl,"/locate"),{params:i}).pipe((0,L.U)(function(e){return n.extractResults(e)})):(0,Pe.of)([])}},{key:"getAllowedTypes",value:function(){var e=this;return this.http.get("".concat(this.searchUrl,"/types")).subscribe(function(t){var n=e.settings.find(function(e){return"type"===e.name});n.values.forEach(function(e){e.available=t.indexOf(e.value)>-1}),e.setParamFromSetting(n,!1)})}},{key:"computeRequestParams",value:function(e,t){return(t.distance||this.options.distance)&&(t.params=Object.assign(t.params||{},{bufferInput:t.distance||this.options.distance})),new M.LE({fromObject:Object.assign({loc:e.join(","),sort:"distance",geometry:!0,icon:!0},t.params||{},this.params)})}},{key:"extractResults",value:function(e){var t=this;return e.features.map(function(e){return t.dataToResult(e)})}},{key:"getSubtitle",value:function(e){if(!this.settings.length)return"";var t="";switch(e.properties.type){case"arrondissements":t=e.properties.municipalite+" (Arrondissement)";break;default:var n=this.settings.find(function(e){return"type"===e.name}).values.find(function(t){return t.value===e.properties.type});n&&(t=this.languageService.translate.instant(n.title))}return t}},{key:"dataToResult",value:function(e){var t=this.computeProperties(e),n=this.computeExtent(e),i=[this.getId(),t.type,t.code].join("."),o=e.properties.nom,a=" <small> "+this.getSubtitle(e)+"</small>";return{source:this,data:{type:q.D97,projection:"EPSG:4326",geometry:e.geometry,extent:n,properties:t,meta:{id:i,title:e.properties.nom}},meta:{dataType:q.D97,id:i,title:e.properties.nom,titleHtml:o+a,icon:e.icon||"map-marker",pointerSummaryTitle:this.getSubtitle(e)+": "+e.properties.nom}}}},{key:"computeProperties",value:function(e){var t=Z.gb.removeKeys(e.properties,n.propertiesBlacklist),i={Route:'<span class="routing"> <u>'+this.languageService.translate.instant("igo.geo.seeRouting")+"</u> </span>"};return Object.assign(t,i)}},{key:"computeExtent",value:function(e){return e.bbox?[e.bbox[0],e.bbox[2],e.bbox[1],e.bbox[3]]:void 0}}]),n}(q.xHx);$e.id="icherchereverse",$e.type=q.D97,$e.propertiesBlacklist=[],$e.\u0275fac=function(e){return new(e||$e)(p.LFG(M.eN),p.LFG(v.TS),p.LFG(v.V1),p.LFG("options"),p.LFG(p.zs3))},$e.\u0275prov=p.Yz7({token:$e,factory:$e.\u0275fac}),Ze([(0,_e.q)({maxCacheCount:20}),je("design:type",Function),je("design:paramtypes",[Array,Object]),je("design:returntype",Te.y)],$e.prototype,"reverseSearch",null);var Ee=d(function e(){g(this,e)});Ee.\u0275fac=function(e){return new(e||Ee)},Ee.\u0275mod=p.oAB({type:Ee}),Ee.\u0275inj=p.cJS({imports:[[f.ez]]});var Fe=d(function e(){g(this,e)});Fe.\u0275fac=function(e){return new(e||Fe)},Fe.\u0275mod=p.oAB({type:Fe}),Fe.\u0275inj=p.cJS({imports:[[f.ez,N.Ps,H.ot,F.SJ,J.AV,v.yR,j.Am,j.O4,ee.Zy,j.HL,q.Ud7,j.cQ]]});var Le=d(function e(){g(this,e)});Le.\u0275fac=function(e){return new(e||Le)},Le.\u0275mod=p.oAB({type:Le,bootstrap:[ce]}),Le.\u0275inj=p.cJS({providers:[{provide:"app-legend-button-dialog",useValue:le},{provide:E.so,useValue:{}},{provide:E.WI,useValue:{}}],imports:[[N.Ps,E.Is,q.t1T,q.FIR,H.ot],N.Ps]});var Be=s(72012),Ue=d(function e(){g(this,e)});Ue.\u0275fac=function(e){return new(e||Ue)},Ue.\u0275mod=p.oAB({type:Ue}),Ue.\u0275inj=p.cJS({imports:[[f.ez,N.Ps,Be.g,J.AV,H.ot,v.yR,q.Ud7,q.TxX,j.O4,j.Am,q.nob,j.k_]]});var Ie=s(74354),ze=d(function e(){g(this,e)});ze.\u0275fac=function(e){return new(e||ze)},ze.\u0275mod=p.oAB({type:ze}),ze.\u0275inj=p.cJS({imports:[[f.ez,N.Ps,H.ot,F.SJ,J.AV,v.yR,j.Am,j.O4,ee.Zy,j.HL,q.Ud7,Ie.QW,v.zZ,q.FIR,q.TxX,j.gQ,j.qL,R.uL,q.TxX.forRoot(),Ue]]});var Ge=d(function e(){g(this,e)});Ge.\u0275fac=function(e){return new(e||Ge)},Ge.\u0275mod=p.oAB({type:Ge}),Ge.\u0275inj=p.cJS({providers:[(0,q.jxb)(),{provide:q.xHx,useFactory:function(e,t,n,i,o,a){return new Re(e,t,n,i.getConfig("searchSources.".concat(Re.id)),o,a)},multi:!0,deps:[M.eN,v.TS,v.V1,v.E4,qe,p.zs3]},(0,q.ZsY)(),(0,q.PIH)(),(0,q.ZsY)(),(0,q.PIH)(),(0,q.jxb)(),(0,q.c43)(),(0,q.MG6)(),(0,q.HAL)(),q.IDv,(0,q.pCg)(),{provide:qe,useFactory:function(e){return new qe(e)},deps:[v.TS]},(0,q.XBb)(),q.oDG,Re,(0,q.rQG)({path:"./assets/list-style.json"})],imports:[[f.ez,J.AV,H.ot,N.Ps,v.PV,q.Ud7,q.FIR,j.mD,j.O4,R.fZ,ee.Zy,ee.jm,ke,Le,q.t1T,j.h5,q.Jpu,q.y1m.forRoot(),q.TxX.forRoot(),ee.jm,F.SJ,E.Is,j.AP,q.ybB,Ee,Fe,ze,j.Am,j.BQ,j.qL,j.HL,j.gr,j.t3,R.NX,R.uL,R.BQ,R.qk]]});var De=d(function e(){g(this,e)});De.\u0275fac=function(e){return new(e||De)},De.\u0275mod=p.oAB({type:De}),De.\u0275inj=p.cJS({imports:[[f.ez,Oe,Ge,Ce,ke,y.g0],Oe]});var Qe={production:!0,igo:{app:{forceCoordsNA:!1},language:{prefix:["./locale/","./particular/locale/"]},searchSources:{nominatim:{available:!1},storedqueries:{enabled:!1,available:!1},icherche:{searchUrl:"https://geoegl.msp.gouv.qc.ca/apis/icherche",order:2,params:{limit:"8"}},coordinatesreverse:{showInPointerSummary:!0},icherchereverse:{showInPointerSummary:!0,searchUrl:"https://geoegl.msp.gouv.qc.ca/apis/terrapi",order:3,enabled:!0},ilayer:{searchUrl:"https://geoegl.msp.gouv.qc.ca/apis/icherche/layers",order:4,params:{limit:"3"}},cadastre:{enabled:!1}},projections:[{code:"EPSG:32198",alias:"Quebec Lambert",def:"+proj=lcc +lat_1=60 +lat_2=46 +lat_0=44 +lon_0=-68.5 +x_0=0 +y_0=0           +ellps=GRS80 +towgs84=0,0,0,0,0,0,0 +units=m +no_defs",extent:[-799574,45802,891595.4,1849567.5]},{code:"EPSG:3798",alias:"MTQ Lambert",def:"+proj=lcc +lat_1=50 +lat_2=46 +lat_0=44 +lon_0=-70 +x_0=800000 +y_0=0           +ellps=GRS80 +towgs84=0,0,0,0,0,0,0 +units=m +no_defs",extent:[31796.5834,158846.2231,1813323.4284,2141241.0978]}],searchOverlayStyle:{base:{markerColor:"#5ed0fb",markerOpacity:.8,markerOutlineColor:"#a7e7ff",fillColor:"#5ed0fb",fillOpacity:.2,strokeColor:"#5ed0fb",strokeOpacity:.7,strokeWidth:2},focus:{markerColor:"#5ed0fb",markerOpacity:1,markerOutlineColor:"#DFF7FF",fillColor:"#5ed0fb",fillOpacity:.3,strokeColor:"#DFF7FF",strokeOpacity:1,strokeWidth:2},selection:{markerColor:"#00a1de",markerOpacity:1,markerOutlineColor:"#ffffff",fillColor:"#00a1de",fillOpacity:.3,strokeColor:"#00A1DE",strokeOpacity:1,strokeWidth:2}},queryOverlayStyle:{base:{markerColor:"#5ed0fb",markerOpacity:.8,markerOutlineColor:"#a7e7ff",fillColor:"#5ed0fb",fillOpacity:.2,strokeColor:"#5ed0fb",strokeOpacity:.7,strokeWidth:2},focus:{markerColor:"#5ed0fb",markerOpacity:1,markerOutlineColor:"#DFF7FF",fillColor:"#5ed0fb",fillOpacity:.3,strokeColor:"#DFF7FF",strokeOpacity:1,strokeWidth:2},selection:{markerColor:"#00a1de",markerOpacity:1,markerOutlineColor:"#ffffff",fillColor:"#00a1de",fillOpacity:.3,strokeColor:"#00A1DE",strokeOpacity:1,strokeWidth:2}}}},Ye=s(90490),He=function(){function e(t,n){g(this,e),this.configService=t,this.languageService=n,this.computeHeader()}return d(e,[{key:"computeHeader",value:function(){this.headerLogo=this.configService.getConfig("header.logo"),this.headerLogoPrint=this.configService.getConfig("header.logoPrint")}}]),e}();He.\u0275fac=function(e){return new(e||He)(p.Y36(v.E4),p.Y36(v.TS))},He.\u0275cmp=p.Xpm({type:He,selectors:[["app-header"]],decls:21,vars:14,consts:[["role","banner","color","primary",1,"banner"],[1,"container"],[1,"row"],[1,"col-6","col-md-10","d-flex","flex-wrap","align-items-center","zone-logo-title"],["tabindex","5","routerLink","",1,"logo"],["id","header-logo","alt","Logo",3,"src"],["id","header-logo-print","alt","Logo","width","199","height","60",3,"src"],["lang","fr","id","title-desktop",1,"zone-title","d-none","d-md-block"],[1,"col-6","col-md-2","d-flex","justify-content-end","zone-links"],[1,"nav","flex-column"],["rel","noopener noreferrer","alt","('header.contactUsUrl' | translate)","target","_blank",3,"href"],["lang","fr","id","title-mobile",1,"zone-title","d-md-none","col-12"]],template:function(e,t){1&e&&(p.TgZ(0,"mat-toolbar",0),p.TgZ(1,"div",1),p.TgZ(2,"div",2),p.TgZ(3,"div",3),p.TgZ(4,"a",4),p._UZ(5,"img",5),p.qZA(),p._UZ(6,"img",6),p.TgZ(7,"p",7),p._uU(8),p.ALo(9,"translate"),p.qZA(),p.qZA(),p.TgZ(10,"div",8),p.TgZ(11,"ul",9),p.TgZ(12,"li"),p.TgZ(13,"a",10),p.ALo(14,"translate"),p._uU(15),p.ALo(16,"translate"),p.qZA(),p.qZA(),p.qZA(),p.qZA(),p.TgZ(17,"p",11),p.TgZ(18,"a"),p._uU(19),p.ALo(20,"translate"),p.qZA(),p.qZA(),p.qZA(),p.qZA(),p.qZA()),2&e&&(p.xp6(5),p.s9C("src",t.headerLogo,p.LSH),p.xp6(1),p.s9C("src",t.headerLogoPrint,p.LSH),p.xp6(2),p.Oqu(p.lcZ(9,6,"header.title")),p.xp6(5),p.s9C("href",p.lcZ(14,8,"header.contactUsUrl"),p.LSH),p.xp6(2),p.Oqu(p.lcZ(16,10,"header.contactUs")),p.xp6(4),p.Oqu(p.lcZ(20,12,"header.title")))},directives:[y.Ye,h.yS],pipes:[z.X$],styles:['.portal-with-header{height:calc(100% - $header-height-mobile)!important}@media screen and (min-width: 768px){  .portal-with-header{height:calc(100% - $header-height)!important}}[_ngcontent-%COMP%]:root{--breakpoint-sm: 320px;--breakpoint-md: 768px;--breakpoint-lg: 960px;--breakpoint-xl: 1024px}html[_ngcontent-%COMP%], body[_ngcontent-%COMP%]{padding:0;margin:0!important;width:100%;font-size:16px;font-family:"Open sans",sans-serif}@media (min-width: 1280px) and (orientation: landscape){body[_ngcontent-%COMP%]{margin:0!important}}html[_ngcontent-%COMP%], body[_ngcontent-%COMP%], div[_ngcontent-%COMP%], span[_ngcontent-%COMP%], a[_ngcontent-%COMP%], header[_ngcontent-%COMP%], nav[_ngcontent-%COMP%]{margin:0;padding:0;border:0;vertical-align:baseline}html[_ngcontent-%COMP%], body[_ngcontent-%COMP%]{font-family:"Open sans",sans-serif}.col-6[_ngcontent-%COMP%], .col-md-2[_ngcontent-%COMP%], .col-md-10[_ngcontent-%COMP%]{position:relative;width:100%}.col-12[_ngcontent-%COMP%]{flex:0 0 100%;max-width:100%}.container[_ngcontent-%COMP%]{width:100%;margin-right:auto;margin-left:auto}.row[_ngcontent-%COMP%]{-ms-display:flex;display:flex;flex-wrap:wrap;height:100%;width:98%;align-content:center;margin:auto}.col-6[_ngcontent-%COMP%]{flex:0 0 50%;max-width:50%}h1[_ngcontent-%COMP%], h2[_ngcontent-%COMP%], h3[_ngcontent-%COMP%], h4[_ngcontent-%COMP%], h5[_ngcontent-%COMP%], h6[_ngcontent-%COMP%]{font-family:"Roboto",sans-serif;font-weight:bold;color:#095797!important}a[_ngcontent-%COMP%]{word-break:break-word;overflow-wrap:break-word}img[_ngcontent-%COMP%]{vertical-align:middle;border-style:none}*[_ngcontent-%COMP%], *[_ngcontent-%COMP%]:before, *[_ngcontent-%COMP%]:after{box-sizing:border-box}.d-none[_ngcontent-%COMP%]{display:none}.flex-column[_ngcontent-%COMP%]{display:flex;flex-direction:column!important}.flex-wrap[_ngcontent-%COMP%]{flex-wrap:wrap!important}.d-flex[_ngcontent-%COMP%]{display:flex!important}.align-items-center[_ngcontent-%COMP%]{align-items:center!important}.justify-content-end[_ngcontent-%COMP%]{justify-content:flex-end!important}d-md-none[_ngcontent-%COMP%]{display:none}.align-self-end[_ngcontent-%COMP%]{align-self:flex-end!important}.banner[_ngcontent-%COMP%]{display:flex;width:100%;height:72px;box-sizing:border-box;font-family:"Roboto",sans-serif;margin:0;padding:0;border:0;font-size:100%;vertical-align:baseline}a[_ngcontent-%COMP%]{color:#fff;text-decoration:none}.zone-logo-title[_ngcontent-%COMP%]{padding:.5rem 1.1rem .5rem 0}.zone-title[_ngcontent-%COMP%]{font-size:1rem}.zone-links[_ngcontent-%COMP%]{padding-left:1.1rem;max-width:100%;margin:auto;list-style:none;display:block;color:#fff}#header-logo[_ngcontent-%COMP%]{width:100%;min-width:7rem;max-height:28px}#header-logo-print[_ngcontent-%COMP%]{display:none}.zone-links[_ngcontent-%COMP%]   ul[_ngcontent-%COMP%]{font:normal .8rem/1.2rem "roboto",sans-serif;-webkit-font-smoothing:antialiased;text-align:left;flex-wrap:wrap;list-style:none;padding:0;margin:0}ul[_ngcontent-%COMP%]   li[_ngcontent-%COMP%]:last-child{padding:0}.zone-links[_ngcontent-%COMP%]   ul[_ngcontent-%COMP%]   a[_ngcontent-%COMP%]:hover, .zone-links[_ngcontent-%COMP%]   ul[_ngcontent-%COMP%]   a[_ngcontent-%COMP%]:focus{text-decoration:underline;cursor:pointer}.buttonLanguage[_ngcontent-%COMP%]{background:none;border-style:none;padding:0;font:normal .8rem/1rem "roboto",sans-serif;color:unset}#title-mobile[_ngcontent-%COMP%]{margin:auto 0;display:block}#title-desktop[_ngcontent-%COMP%]{display:none;color:#fff;margin:auto 0;padding:0}@media screen and (min-width: 576px){.zone-logo-title[_ngcontent-%COMP%], .zone-links[_ngcontent-%COMP%]{flex:0 0 50%;max-width:50%}}@media screen and (min-width: 768px){.col-md-10[_ngcontent-%COMP%]{flex:0 0 83.33333%;max-width:83.33333%}.zone-links[_ngcontent-%COMP%]{flex:0 0 16.66667%;max-width:16.66667%}}@media screen and (min-width: 824px){#header-logo[_ngcontent-%COMP%]{max-height:39px;padding-right:3.75rem}.banner[_ngcontent-%COMP%]{height:72px}.d-md-block[_ngcontent-%COMP%]{display:block!important}.d-md-none[_ngcontent-%COMP%]{display:none!important}.zone-logo-title[_ngcontent-%COMP%]{flex:0 0 83.33333%;max-width:83.33333%}}']});var Ne=function(){return{exact:!0}},Je=d(function e(){g(this,e),this.color="accent"});Je.\u0275fac=function(e){return new(e||Je)},Je.\u0275cmp=p.Xpm({type:Je,selectors:[["app-menu"]],decls:15,vars:2,consts:[["color","accent",1,"container","headline"],[1,"col-12","align-self-end"],[1,"navbar"],["href","#menu-left","routerLinkActive","active",1,"nav-link","nav-arrow","left"],[1,"main-nav","slick-track"],["routerLink","/","routerLinkActive","active","id","menu-left",1,"nav-link",3,"routerLinkActiveOptions"],["routerLink","/carte","routerLinkActive","active",1,"nav-link"],["routerLink","/en-savoir-plus","id","menu-right","routerLinkActive","active",1,"nav-link"],["color","accent","href","#menu-right","routerLinkActive","active",1,"nav-link","nav-arrow","right"]],template:function(e,t){1&e&&(p.TgZ(0,"mat-toolbar",0),p.TgZ(1,"div",1),p.TgZ(2,"nav",2),p.TgZ(3,"a",3),p._uU(4,"\u276e"),p.qZA(),p.TgZ(5,"div",4),p.TgZ(6,"a",5),p._uU(7,"Accueil"),p.qZA(),p.TgZ(8,"a",6),p._uU(9,"Carte"),p.qZA(),p.TgZ(10,"a",7),p._uU(11,"En savoir plus"),p.qZA(),p.qZA(),p.TgZ(12,"a",8),p._uU(13,"\u276f"),p.qZA(),p.qZA(),p.qZA(),p.qZA(),p._UZ(14,"router-outlet")),2&e&&(p.xp6(6),p.Q6J("routerLinkActiveOptions",p.DdM(1,Ne)))},directives:[y.Ye,h.Od,h.yS,h.lC],styles:['.navbar[_ngcontent-%COMP%]{position:relative;display:flex;flex-wrap:wrap;align-items:flex-end;flex-direction:row;flex-flow:row nowrap;justify-content:flex-start;height:40px;width:100%;margin:0 auto;padding:0}.nav-link[_ngcontent-%COMP%]{display:block;text-decoration:none;font-family:"Open sans",sans-serif;margin-right:.4rem;padding:0 0 1.6rem}a.nav-link[_ngcontent-%COMP%]{color:#fff;text-decoration:none;letter-spacing:0;font-size:1.1rem;padding:0 .5rem .6rem}a.nav-link[_ngcontent-%COMP%]:focus, a.nav-link.active[_ngcontent-%COMP%]{content:"";display:block;margin:0;border-bottom:4px solid #c5cad2;padding-bottom:calc(.6rem - 4px)}.active[_ngcontent-%COMP%]{font-weight:600!important}.main-nav[_ngcontent-%COMP%]{display:block;-webkit-margin-start:0px;margin-inline-start:0px;-webkit-margin-end:0px;margin-inline-end:0px;width:85%;margin:0 auto}.headline[_ngcontent-%COMP%]{padding:0}div.slick-track[_ngcontent-%COMP%]{overflow-x:auto;white-space:nowrap;display:flex}.navbar[_ngcontent-%COMP%]   [_ngcontent-%COMP%]::-webkit-scrollbar{display:none}.nav-arrow[_ngcontent-%COMP%]{color:#f09686!important;font-weight:1000;position:absolute;z-index:100;background-color:#223654c5;margin:0;bottom:5px}.right[_ngcontent-%COMP%]{right:0;padding:5px 5px 5px 15px!important}.left[_ngcontent-%COMP%]{left:0;padding:5px 15px 5px 5px!important}@media (min-width: 400px){.nav-arrow[_ngcontent-%COMP%]{display:none}.main-nav[_ngcontent-%COMP%]{width:98%}}@media (min-width: 768px){.navbar[_ngcontent-%COMP%]{height:72px}.navbar[_ngcontent-%COMP%]   a[_ngcontent-%COMP%]{padding:1rem 1.2rem!important}.navbar[_ngcontent-%COMP%]   a[_ngcontent-%COMP%]:focus, .navbar[_ngcontent-%COMP%]   a.active[_ngcontent-%COMP%]{padding-bottom:calc(1rem - 4px)!important}}']});var Ve=["searchBar"];function Xe(e,t){1&e&&p._UZ(0,"app-header",null,3)}function We(e,t){1&e&&p._UZ(0,"app-menu")}function Ke(e,t){if(1&e&&p._UZ(0,"app-portal",4),2&e){var n=p.oxw();p.Q6J("ngClass",n.hasHeader?"portal-hasHeader":"portal")}}var et=function(){function t(e,n,i,o,a,r){g(this,t),this.languageService=e,this.configService=n,this.renderer=i,this.titleService=o,this.metaService=a,this.messageService=r,this.themeClass="qcca-theme",this.hasHeader=!0,this.hasFooter=!0,this.hasMenu=!1,this.languageService.translate.getTranslation(this.languageService.getLanguage()).subscribe(),this.readTitleConfig(),this.readThemeConfig(),this.readDescriptionConfig(),this.detectOldBrowser(),this.hasHeader=void 0!==this.configService.getConfig("header.hasHeader")&&this.configService.getConfig("header.hasHeader"),this.hasFooter=void 0!==this.configService.getConfig("hasFooter")&&this.configService.getConfig("hasFooter"),this.hasMenu=void 0!==this.configService.getConfig("hasMenu")&&this.configService.getConfig("hasMenu")}return d(t,[{key:"readTitleConfig",value:function(){var e=this;this.languageService.translate.get(this.configService.getConfig("title")).subscribe(function(t){t&&(e.titleService.setTitle(t),e.metaService.addTag({name:"title",content:t}))})}},{key:"readThemeConfig",value:function(){var e=this.configService.getConfig("theme")||this.themeClass;e&&this.renderer.addClass(document.body,e)}},{key:"readDescriptionConfig",value:function(){var e=this.configService.getConfig("description");e&&this.metaService.addTag({name:"description",content:e})}},{key:"detectOldBrowser",value:function(){var t=this;if(Z.WE.satisfies({ie:"<=11",chrome:"<64",firefox:"<60",safari:"<=11"})){var n=this.languageService.translate,i=n.get("oldBrowser.title"),o=n.get("oldBrowser.message");(0,Ye.$R)(i,o).pipe((0,L.U)(function(t){var n=e(t,2);return{title:n[0],message:n[1]}})).subscribe(function(e){return t.messageService.alert(e.message,e.title,{timeOut:15e3})})}}}]),t}();et.\u0275fac=function(e){return new(e||et)(p.Y36(v.TS),p.Y36(v.E4),p.Y36(p.Qsj),p.Y36(u.Dx),p.Y36(u.h_),p.Y36(v.ez))},et.\u0275cmp=p.Xpm({type:et,selectors:[["app-root"]],viewQuery:function(e,t){var n;(1&e&&p.Gf(Ve,7,p.SBq),2&e)&&(p.iGM(n=p.CRH())&&(t.searchBar=n.first))},decls:4,vars:3,consts:[["igoSpinnerActivity",""],[4,"ngIf"],[3,"ngClass",4,"ngIf"],["header",""],[3,"ngClass"]],template:function(e,t){1&e&&(p._UZ(0,"igo-spinner",0),p.YNc(1,Xe,2,0,"app-header",1),p.YNc(2,We,1,0,"app-menu",1),p.YNc(3,Ke,1,1,"app-portal",2)),2&e&&(p.xp6(1),p.Q6J("ngIf",t.hasHeader),p.xp6(1),p.Q6J("ngIf",t.hasMenu),p.xp6(1),p.Q6J("ngIf",!t.hasMenu))},directives:[j.OR,j.Ft,f.O5,He,Je,xe,f.mk],styles:['[_nghost-%COMP%]{font-family:Roboto,"Helvetica Neue",sans-serif}igo-message-center[_ngcontent-%COMP%]     simple-notifications   div.simple-notification-wrapper{right:10px}  .portal-hasHeader{height:calc(100% - 72px)!important;display:block}  .portal{height:100%}@media (min-width: 768px){  .portal-hasHeader{height:calc(100% - 72px)!important;display:block}}igo-spinner[_ngcontent-%COMP%]{position:absolute;top:calc(72px + 4px)!important;right:4px;z-index:100}spinner-with-legend-dialog[_ngcontent-%COMP%]{position:absolute;top:calc(72px + 4px)!important;right:345px;z-index:100}@media (min-width: 768px){igo-spinner[_ngcontent-%COMP%]{top:calc(72px + 4px)!important;right:4px;z-index:100}spinner-with-legend-dialog[_ngcontent-%COMP%]{top:calc(72px + 4px)!important;right:345px!important;z-index:100}}']});var tt=d(function e(){g(this,e)});tt.\u0275fac=function(e){return new(e||tt)},tt.\u0275mod=p.oAB({type:tt,bootstrap:[et]}),tt.\u0275inj=p.cJS({providers:[(0,v.TQ)({default:Qe.igo,path:"./config/config.json"}),v.MZ,(0,q.rQG)({path:"./assets/list-style.json"})],imports:[[u.b2,m.PW,h.Bz.forRoot([]),v.u4.forRoot(),v.zZ,j.d3,j.Po,Ge,u.t6,Ce,ke,De]]}),s(58256),Qe.production&&(0,p.G48)(),u.q6().bootstrapModule(tt).catch(function(e){return console.log(e)})},22356:function(e,t,n){var i={"./en.auth.json":44505,"./en.common.json":13841,"./en.context.json":2977,"./en.core.json":8982,"./en.geo.json":49853,"./en.integration.json":38430,"./en.json":90642,"./fr.auth.json":13788,"./fr.common.json":55144,"./fr.context.json":65742,"./fr.core.json":38783,"./fr.geo.json":78405,"./fr.integration.json":66409,"./fr.json":60863};function o(e){var t=a(e);return n(t)}function a(e){if(!n.o(i,e)){var t=new Error("Cannot find module '"+e+"'");throw t.code="MODULE_NOT_FOUND",t}return i[e]}o.keys=function(){return Object.keys(i)},o.resolve=a,e.exports=o,o.id=22356},46700:function(e,t,n){var i={"./af":62275,"./af.js":62275,"./ar":90857,"./ar-dz":11218,"./ar-dz.js":11218,"./ar-kw":14754,"./ar-kw.js":14754,"./ar-ly":66680,"./ar-ly.js":66680,"./ar-ma":92178,"./ar-ma.js":92178,"./ar-sa":56522,"./ar-sa.js":56522,"./ar-tn":95682,"./ar-tn.js":95682,"./ar.js":90857,"./az":70164,"./az.js":70164,"./be":79774,"./be.js":79774,"./bg":60947,"./bg.js":60947,"./bm":21832,"./bm.js":21832,"./bn":89650,"./bn-bd":74477,"./bn-bd.js":74477,"./bn.js":89650,"./bo":66005,"./bo.js":66005,"./br":98492,"./br.js":98492,"./bs":70534,"./bs.js":70534,"./ca":52061,"./ca.js":52061,"./cs":84737,"./cs.js":84737,"./cv":61167,"./cv.js":61167,"./cy":77996,"./cy.js":77996,"./da":9528,"./da.js":9528,"./de":14540,"./de-at":49430,"./de-at.js":49430,"./de-ch":67978,"./de-ch.js":67978,"./de.js":14540,"./dv":83426,"./dv.js":83426,"./el":6616,"./el.js":6616,"./en-au":63816,"./en-au.js":63816,"./en-ca":32162,"./en-ca.js":32162,"./en-gb":83305,"./en-gb.js":83305,"./en-ie":61954,"./en-ie.js":61954,"./en-il":43060,"./en-il.js":43060,"./en-in":59923,"./en-in.js":59923,"./en-nz":13540,"./en-nz.js":13540,"./en-sg":16505,"./en-sg.js":16505,"./eo":41907,"./eo.js":41907,"./es":86640,"./es-do":41246,"./es-do.js":41246,"./es-mx":56131,"./es-mx.js":56131,"./es-us":36430,"./es-us.js":36430,"./es.js":86640,"./et":62551,"./et.js":62551,"./eu":32711,"./eu.js":32711,"./fa":54572,"./fa.js":54572,"./fi":33390,"./fi.js":33390,"./fil":87860,"./fil.js":87860,"./fo":48216,"./fo.js":48216,"./fr":99291,"./fr-ca":98527,"./fr-ca.js":98527,"./fr-ch":58407,"./fr-ch.js":58407,"./fr.js":99291,"./fy":47054,"./fy.js":47054,"./ga":49540,"./ga.js":49540,"./gd":73917,"./gd.js":73917,"./gl":51486,"./gl.js":51486,"./gom-deva":56245,"./gom-deva.js":56245,"./gom-latn":48868,"./gom-latn.js":48868,"./gu":59652,"./gu.js":59652,"./he":89019,"./he.js":89019,"./hi":42040,"./hi.js":42040,"./hr":63402,"./hr.js":63402,"./hu":79322,"./hu.js":79322,"./hy-am":27609,"./hy-am.js":27609,"./id":57942,"./id.js":57942,"./is":98275,"./is.js":98275,"./it":73053,"./it-ch":4378,"./it-ch.js":4378,"./it.js":73053,"./ja":46176,"./ja.js":46176,"./jv":679,"./jv.js":679,"./ka":92726,"./ka.js":92726,"./kk":72953,"./kk.js":72953,"./km":86957,"./km.js":86957,"./kn":59181,"./kn.js":59181,"./ko":47148,"./ko.js":47148,"./ku":27752,"./ku.js":27752,"./ky":65675,"./ky.js":65675,"./lb":41263,"./lb.js":41263,"./lo":65746,"./lo.js":65746,"./lt":11143,"./lt.js":11143,"./lv":38753,"./lv.js":38753,"./me":44054,"./me.js":44054,"./mi":31573,"./mi.js":31573,"./mk":30202,"./mk.js":30202,"./ml":68523,"./ml.js":68523,"./mn":79794,"./mn.js":79794,"./mr":56681,"./mr.js":56681,"./ms":56975,"./ms-my":39859,"./ms-my.js":39859,"./ms.js":56975,"./mt":3691,"./mt.js":3691,"./my":5152,"./my.js":5152,"./nb":7607,"./nb.js":7607,"./ne":21526,"./ne.js":21526,"./nl":86368,"./nl-be":40076,"./nl-be.js":40076,"./nl.js":86368,"./nn":68420,"./nn.js":68420,"./oc-lnc":51906,"./oc-lnc.js":51906,"./pa-in":94504,"./pa-in.js":94504,"./pl":54721,"./pl.js":54721,"./pt":74645,"./pt-br":54548,"./pt-br.js":54548,"./pt.js":74645,"./ro":71977,"./ro.js":71977,"./ru":26042,"./ru.js":26042,"./sd":78849,"./sd.js":78849,"./se":27739,"./se.js":27739,"./si":50084,"./si.js":50084,"./sk":92449,"./sk.js":92449,"./sl":23086,"./sl.js":23086,"./sq":33139,"./sq.js":33139,"./sr":30607,"./sr-cyrl":30063,"./sr-cyrl.js":30063,"./sr.js":30607,"./ss":40131,"./ss.js":40131,"./sv":21665,"./sv.js":21665,"./sw":5642,"./sw.js":5642,"./ta":33622,"./ta.js":33622,"./te":74825,"./te.js":74825,"./tet":48336,"./tet.js":48336,"./tg":39238,"./tg.js":39238,"./th":99463,"./th.js":99463,"./tk":39986,"./tk.js":39986,"./tl-ph":29672,"./tl-ph.js":29672,"./tlh":40043,"./tlh.js":40043,"./tr":51212,"./tr.js":51212,"./tzl":50110,"./tzl.js":50110,"./tzm":80482,"./tzm-latn":38309,"./tzm-latn.js":38309,"./tzm.js":80482,"./ug-cn":42495,"./ug-cn.js":42495,"./uk":54157,"./uk.js":54157,"./ur":80984,"./ur.js":80984,"./uz":64141,"./uz-latn":43662,"./uz-latn.js":43662,"./uz.js":64141,"./vi":12607,"./vi.js":12607,"./x-pseudo":66460,"./x-pseudo.js":66460,"./yo":92948,"./yo.js":92948,"./zh-cn":62658,"./zh-cn.js":62658,"./zh-hk":39352,"./zh-hk.js":39352,"./zh-mo":38274,"./zh-mo.js":38274,"./zh-tw":98451,"./zh-tw.js":98451};function o(e){var t=a(e);return n(t)}function a(e){if(!n.o(i,e)){var t=new Error("Cannot find module '"+e+"'");throw t.code="MODULE_NOT_FOUND",t}return i[e]}o.keys=function(){return Object.keys(i)},o.resolve=a,e.exports=o,o.id=46700},97223:function(e){"use strict";e.exports="/*** Generic ***/"}},function(e){e.O(0,[736],function(){return 78382,e(e.s=78382)}),e.O()}])}();
//# sourceMappingURL=main-es5.369e48749673086445ee.js.map