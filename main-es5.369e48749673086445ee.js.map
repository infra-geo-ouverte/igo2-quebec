{"version":3,"mappings":"m8HAAA,cAGA,yCACA,8CACA,gCACAA,IAGAC,kBAA6C,UAC7CA,YACAA,WACAC,+HCNOC,EDMPD,ECHEE,+DAHWD,8BAAaE,4SCN1BC,iBACIA,iBACIA,iBACIA,gBAA+BA,mBAAOA,QACtCA,cAAIA,yFAA0EA,QAC9EA,cAAIA,6BAAiBA,QACrBA,aAAGA,4sBAA2oBA,QAC9oBA,gBAA2BA,mDAAgCA,gBAA6GA,sDAAmLA,QAAIA,QACnWA,QACJA,QACJA,4BFEAJ,IGNOK,EHMPL,EGJEE,+DAFWG,8BAAcF,mPCN3BC,iBACIA,iBACIA,iBACIA,gBAA+BA,0BAAcA,QAC7CA,cAAIA,iBAAKA,QAETA,aAAGA,uSAA2RA,aAAGA,2CAA8BA,QAAKA,uFAAyEA,cAAGA,wBAAWA,QAAKA,cAAGA,sCAAyBA,QAAKA,sEAAwDA,cAAGA,wCAA2BA,QAAKA,QAE5hBA,cAAGA,iFAAoEA,gBAA+CA,qCAAwBA,QAAKA,iDAAmCA,iBAAMA,2DAA8CA,QAAQA,uCAAyBA,cAAGA,6BAAgBA,QAAKA,iBAAMA,mCAAsBA,QAAQA,iBAAMA,sDAAyCA,QAAQA,QAE9XA,yBACIA,2EACJA,QAGAA,eACIA,eAAIA,mGAAsFA,QAC1FA,eAAIA,wGAA2FA,QAC/FA,eAAIA,oCAAuBA,QAC3BA,eAAIA,iFAAoEA,QACxEA,eAAIA,gGAAmFA,QAC3FA,QAGAA,cAAGA,cAAIA,sDAAwCA,QAAKA,+EAAiEA,cAAGA,oDAAuCA,QAAKA,4HAA8GA,iBAAMA,gEAAmDA,QAAQA,QAEnVA,gBAAMA,mcAQNA,QAGAA,eACIA,eAAIA,uHAA0GA,QAC9GA,eAAIA,wFAA2EA,QACnFA,QAGAA,eACIA,eAAIA,gBAAKA,0BAAaA,QAAMA,QAC5BA,eAAIA,8EAAiEA,QACrEA,eAAIA,gBAAKA,0BAAaA,QAAMA,QAC5BA,eAAIA,uCAA0BA,QAC9BA,eAAIA,gBAAKA,+BAAkBA,QAAMA,QACjCA,eAAIA,gFAAmEA,QACvEA,eAAIA,gBAAKA,gCAAmBA,QAAMA,QAClCA,eAAIA,2EAA8DA,QACtEA,QACJA,QACJA,QACJA,iTCvDAA,iBACEA,qBACEA,cAAIA,kBAAQA,8BAA+DA,QAASA,QACpFA,aAAGA,kBAAQA,8BAA8DA,QAASA,QAClFA,iEACJA,QACAA,eAJgBA,yEACDA,wEACNA,gIA8BDA,mEACEA,mBAAW,kDA3BrBA,6CAWEA,iBACEA,gCAOEA,2EAAqC,sEAArCA,CAAqC,wEAArCA,CAAqC,yEAArCA,CAAqC,2EAArCA,CAAqC,gEAMrCA,0CAMFA,QACFA,QAuCFA,8BA9DEA,+DAIIA,gCAAe,wBAAfA,CAAe,cAAfA,CAAe,8BAAfA,CAAe,0CCwCRE,aAqFXJ,WACUK,EACAC,EACAC,EACDC,EACCC,EACRC,aALQC,gBACAA,mBACAA,aACDA,iBACCA,sBAtFDA,kBAKAA,0BAA+B,WAEhCA,sCAIAA,4BAAoC,GACpCA,oCAA4C,GAC5CA,oBAAgD,IAAIC,YAGrDD,gCAA6B,IAAIC,QAKjCD,qBAA4C,IAAIC,QAsChDD,UAAO,GAGPA,qBAAkB,IAAIC,YAEtBD,oBAAiB,IAAIC,IAA+B,WAenDD,YAAS,IAAIE,IAUnBF,KAAKG,8BAAgCJ,EAAcK,UACjD,iCA9FOX,6BA8FP,WA7DF,OAAOO,KAAKK,YAAYC,QAjCfb,eAiCea,WAQxB,OAAON,KAAKO,SAASC,MAzCZf,wBAyCYe,WAIrB,OAAOR,KAAKS,WAAUC,MAAeV,KAAKS,kBA7CjChB,oBA6C4C,sBAIrD,OAAOO,KAAKM,MAAMK,UACfC,SAAUlB,mBAAMA,EAAEmB,MAAMC,UACxBC,QACCC,KACGtB,mBACAM,EAAKS,QAAUf,EACXA,EAAQuB,OAAOC,iBAvDjBzB,yBAyEgBC,WAGzB,OAAOM,KAAKmB,eAAeC,OA5ElB3B,IAwDC,SAgBMC,GAChBM,KAAKmB,eAAeE,KAAK3B,KAzEhBD,wBA4EkB2B,WAI3B,OAAOpB,KAAKK,YAAYiB,oBAAoBF,QAhFnC3B,sBAkGX8B,sBACEvB,KAAKwB,aAAexB,KAAKK,YAAYoB,YAAYC,UAC9ChC,YACgD,MAA3CA,IACFM,EAAK2B,KAAOjC,KAJpB6B,UASoBvB,KAAKM,MAAMK,UAAUiB,OAAOR,OAThDG,IASE,2BAA8CH,KAAnC1B,EAAmC0B,aACxCpB,KAAKM,MAAMO,MAAMgB,IAAInC,EAAIuB,QAAQa,WACnC9B,KAAK+B,cAAgB,aAX3BR,8BAeEvB,KAAKK,YAAY2B,sBAAsBN,UAAU,WAC/C1B,EAAKiC,gBAAgBZ,WAGvBrB,KAAKkC,gBAAkBlC,KAAKmB,eAAeO,UAAU,WACnD,IAAMhC,EAAUM,EAAKmC,oBAAoB,GACnCxC,EAAWK,EAAKmC,oBAAoB,GACtCxC,GACFyC,WAAW,WAEJpC,EAAKqC,mBAAmB3C,EAASC,IACpCK,EAAKsC,eAAe5C,EAASC,IAE9Be,oBAAmC,MAItCV,KAAKG,gCACFH,KAAKK,YAAYkC,wBACpBvC,KAAKK,YAAYkC,yBAAwBC,MAAc,CACrDxC,KAAKyC,eACLzC,KAAKQ,IAAIkC,eAAeC,cACvBjB,UAAWhC,mBACZM,EAAK4C,oBAAoBlD,EAAM,GAAI,cAIlCM,KAAKK,YAAYwC,yBACpB7C,KAAKK,YAAYwC,0BAAyBL,MAAc,CACtDxC,KAAKK,YAAYyC,gBACjB9C,KAAKQ,IAAIkC,eAAeC,cACvBjB,UAAWhC,mBACZM,EAAK4C,oBAAoBlD,EAAM,GAAI,gBAIzCM,KAAK+C,yBAEL/C,KAAKgD,2BAA0BR,MAAc,CAC3CxC,KAAKK,YAAY4C,8BACjBjD,KAAKM,MAAMK,UAAUiB,OACrB5B,KAAKyC,eACLzC,KAAKK,YAAYyC,gBACjB9C,KAAKK,YAAYoB,YACjBzB,KAAKQ,IAAIkC,eAAeC,cACvBjB,UAAWhC,YAEZ,IAAMC,EAA+BD,EAAM,GACrCE,EAAgBF,EAAM,GAExBM,EAAKG,+BACPH,EAAKkD,qBAAqB,SAE5BlD,EAAKmD,uBAAuB3C,IAAIV,mBAAUE,EAAKQ,IAAI4C,oBAAoBC,cAAcvD,KACzDF,EACzB0D,OAAOxD,mBACNA,EAAOmB,OAAOsC,KAAKC,WAAaC,OAChC3D,EAAOmB,OAAOC,KAAKwC,WAClB5D,EAAOe,MAAMiB,WACbhC,EAAOe,MAAMC,UAEEN,IAAIV,kBAClBH,IACFG,EAAOmB,OAAOC,KAAKqC,KAAKI,SACtBF,OACEG,OAAOC,OACL,GACA,CAAEpD,QAASX,EAAOmB,OAAOC,MACzBlB,EAAKK,YAAYyD,oBACE,QAAnB/D,IAAOkB,OAAO0C,iBAAK5D,WAAEgE,MAAOjE,EAAOmB,OAAO0C,MAAMI,KAAO,KAE7D/D,EAAKmD,uBAAuBa,KAAKlE,EAAOmB,OAAOC,MAC/ClB,EAAKQ,IAAI4C,oBAAoBa,WAAWnE,EAAOmB,OAAOC,KAAiBuC,YACnEzD,EAAKG,+BACPH,EAAK4C,oBAAoB9C,EAAOmB,OAAiC,cAMzEjB,KAAKkE,iBAAmBlE,KAAKM,MAAMK,UAAUwD,OAAOpD,QAAKqD,KAAa,OAAO1C,UAAUhC,mBAASM,EAAKqE,gBAAgBhD,KAAK3B,OAjMjHD,oCAoMHsD,sBACN/C,KAAKsE,+BAA8B9B,MAAc,CAC/CxC,KAAKQ,IAAIkC,eAAe6B,OACxBvE,KAAKK,YAAYyC,kBAEhB/B,QAAKqD,KAAa,MAClB1C,UAAWhC,YACV,IAAMC,EAAiBD,EAAM,GAC7B,GAAKC,GAIL,GAAIA,EAAeuB,KAAKwC,SAAU,CAChC,IAAM9D,KAAoB6D,OACxB9D,EAAeuB,KACflB,EAAKQ,IAAIgE,YAEL3E,KAA0B4D,OAAwBzD,EAAKQ,IAAK,CAChEZ,IAEFI,EAAKyE,2BAA2BpD,QAC9BoC,OAAqBzD,EAAKQ,IAAKX,UAZjCG,EAAKyE,2BAA2BpD,aA7M7B5B,iCA+NHmD,SACNlD,EACAC,aAKA,GAHgB,UAAZA,GACFK,KAAKkD,qBAAqBvD,GAEvBD,GAAWA,EAAOwB,KAAKwC,SAA5B,CAIA,IAAMgB,KADcjB,OAAY/D,EAAOwB,KAAMlB,KAAKQ,IAAIgE,YACvBG,cAC/B,MAAIlB,OAAyBzD,KAAKQ,IAAKkE,EAAWE,YAAiD,OAAS,CAC1G,IASIC,EATEC,EAASJ,EAAWE,YACpBG,EAAID,EAAO,IAAMA,EAAO,GAAKA,EAAO,IAAM,EAC1CE,EAAIF,EAAO,IAAMA,EAAO,GAAKA,EAAO,IAAM,EAC1CG,EAAW,IAAIC,IAAU,CAC7BC,eAASxF,EAATwF,mBACAzB,SAAU,IAAI0B,IAAQ,CAACL,EAAGC,MAEtBK,KAAiB5B,OAAcwB,EAAUjF,KAAKQ,IAAIgE,YAGpDc,EAAe,EAEnB,OAAQ3F,OACD,UACHkF,KAAgBpB,OACdG,OAAOC,OAAO,GACZ,CAAEpD,QAAS4E,GACXrF,KAAKK,YAAYkF,yBACL,QAAZ3F,IAAO+D,iBAAK/D,WAAE4F,OAAQ9F,EAAOiE,MAAM6B,MAAQ,KAC/CF,EAAe,EACf,UACG,QACHT,KAAgBpB,OAAqBG,OAAOC,OAAO,GACjD,CAAEpD,QAAS4E,GACXrF,KAAKK,YAAYyD,oBACL,QAAZjE,IAAO8D,iBAAK9D,WAAEkE,MAAOrE,EAAOiE,MAAMI,KAAO,KAC3C,UACG,WACHc,KAAgBpB,OACdG,OAAOC,OAAO,GACZ,CAAEpD,QAAS4E,GACXrF,KAAKK,YAAYoF,6BACL,QAAZ3F,IAAO6D,iBAAK7D,WAAE4F,WAAYhG,EAAOiE,MAAM+B,UAAY,KACvDJ,EAAe,EAGnBD,EAAe9B,KAAKI,MAAQkB,EAC5BQ,EAAe9B,KAAKI,MAAMgC,UAAU,IAAOL,GAC3CtF,KAAKQ,IAAIoF,qBAAqB3B,WAAWoB,EAAgB5B,YACzC,YAAZ9D,IACFK,KAAK6F,sBAAwBR,GAEf,aAAZ1F,IACFK,KAAK8F,uBAAyBT,GAEhB,UAAZ1F,GACFK,KAAK+F,+BAA+B/B,KAAKqB,QAG3CrF,KAAKkD,qBAAqBvD,MA7RnBF,kCAiSHyD,SAAqBxD,cACX,YAAZA,GAAyBM,KAAK6F,wBAChC7F,KAAKQ,IAAIoF,qBAAqBvC,cAAcrD,KAAK6F,uBACjD7F,KAAK6F,8BAES,aAAZnG,GAA0BM,KAAK8F,yBACjC9F,KAAKQ,IAAIoF,qBAAqBvC,cAAcrD,KAAK8F,wBACjD9F,KAAK8F,+BAES,UAAZpG,IACFM,KAAK+F,+BAA+BvF,IAAIb,mBAAeK,EAAKQ,IAAIoF,qBAAqBvC,cAAc1D,KACnGK,KAAK+F,+BAAiC,MA5S/BtG,yBAgTXuG,WACEhG,KAAKkC,gBAAgB+D,cACrBjG,KAAKwB,aAAayE,cACdjG,KAAKsE,6BACPtE,KAAKsE,4BAA4B2B,cAE/BjG,KAAKgD,yBACPhD,KAAKgD,wBAAwBiD,cAE3BjG,KAAKkG,YACPlG,KAAKkG,WAAWD,cAEdjG,KAAKkE,kBACPlE,KAAKkE,iBAAiB+B,gBA7TfxG,2BAsUX0G,SAAczG,SAEZ,GADAM,KAAKyC,eAAepB,KAAK3B,GACrBA,EAAO6D,KAAKC,WAAaC,OAAW/D,EAAOwB,KAAKwC,SAAU,CAC5DhE,EAAOwB,KAAKqC,KAAKI,SAAQF,OACvBG,OAAOC,OAAO,GACZ,CAAEpD,QAASf,EAAOwB,MAClBlB,KAAKK,YAAYkF,yBACL,QAAZ5F,IAAOgE,iBAAKhE,WAAE6F,OAAQ9F,EAAOiE,MAAM6B,MAAQ,KAE/C,IAAM5F,EAAUI,KAAKQ,IAAIoF,qBAAqBQ,WAAWC,GAAGC,eAAe5G,EAAO6D,KAAKgD,IACvF,GAAI3G,EAEF,YADAA,EAAQ4G,SAAS9G,EAAOwB,KAAKqC,KAAKI,OAGpC3D,KAAKQ,IAAIoF,qBAAqB3B,WAAWvE,EAAOwB,KAAiBuC,eApV1DhE,6BAwVXgH,SAAgB/G,SAEd,GADAM,KAAKyC,eAAepB,aAChB3B,EAAO6D,KAAKC,WAAaC,MAI7B,SAAIzD,KAAKM,MAAMO,MAAMgB,IAAInC,GAAQoC,SAAmB,CAClD,IAAMlC,EAAUI,KAAKQ,IAAIoF,qBAAqBQ,WAAWC,GAAGC,eAAe5G,EAAO6D,KAAKgD,IACvF,GAAI3G,EAAS,CACX,IAAMC,KAAQ4D,OACZG,OAAOC,OAAO,GACZ,CAAEpD,QAASf,EAAOwB,MAClBlB,KAAKK,YAAYkF,yBACL,QAAZ5F,IAAOgE,iBAAKhE,WAAE6F,OAAQ9F,EAAOiE,MAAM6B,MAAQ,KAC/C5F,EAAQ4G,SAAS3G,GAEnB,OAEFG,KAAKQ,IAAIoF,qBAAqBvC,cAAc3D,EAAOwB,SA1W1CzB,4BAkXXiH,SAAehH,GACbM,KAAKQ,IAAIoF,qBAAqBQ,WAAWC,GAAGM,QAC5C3G,KAAK4G,mBAAmBlH,KApXfD,sBAwYXoH,SAASnH,cACDC,EAAUD,EAAMoH,QAChBlH,EAAaI,KAAKM,MAAMyG,UAAU3F,MACrCkC,OAAQzD,mBAAyBA,EAAOmH,SAAWtH,EAAMuH,SAASD,SAClEE,OAAOvH,GAEVK,KAAKM,MAAM6G,KAAKvH,GANTF,UAQWM,KAAKM,MAAM8G,OARtB1H,IAQP,2BAA6B0H,KAAlBvH,EAAkBuH,aAEzBpH,KAAKM,MAAMO,MAAMgB,IAAIhC,GAAKiB,cAC1Bd,KAAKM,MAAMO,MAAMgB,IAAIhC,GAAKiC,UAE1B9B,KAAKM,MAAMO,MAAMwG,OAAOxH,EAAK,CAAEiB,aAAS,IAbrCpB,8BAiBP0C,WAAW,WACT,IACItC,EADED,EAAUG,EAAKsH,MAAMC,cAAcC,cAAc,YAEvD9H,EAAMuH,SAASQ,QAAQ/F,UAAW3B,YAcd,QAVhBD,EAHGC,EAAO,IAAOA,EAAO,GAAGiH,OAEW,aAA7BjH,EAAO,GAAGiH,OAAOU,QACZ7H,EAAQ2H,cAAc,0BACE,WAAjCzH,EAAW,GAAGiH,OAAOU,QACZ7H,EAAQ2H,cAAc,wBACE,cAA7BzH,EAAO,GAAGiH,OAAOU,QACZ7H,EAAQ2H,cAAc,2BAEtB3H,EAAQ2H,cAAc,IAAMzH,EAAO,GAAGiH,OAAOU,QAAU,iBARvD,QAab1H,EAAKqC,mBAAmBxC,EAASC,KAElCD,EAAQ8H,UACN7H,EAAY8H,UACZ9H,EAAY+H,aACZhI,EAAQiI,iBAGb,OAnbMrI,+BAsbX0C,WAOE,IANA,IAIIvC,EAJEF,EAAQqI,SAASC,qBAAqB,2BACtCrI,EAAUK,KAAKsH,MAAMC,cAAcS,qBACvC,YACA,GAGOnI,EAAI,EAAGA,EAAIH,EAAMuI,OAAQpI,IAC5BH,EAAMG,GAAGqI,UAAUC,SAAS,4BAC9BvI,EAAeF,EAAMG,IAGzB,MAAO,CAACF,EAASC,KAlcRH,4BAqcX6C,SAAe5C,EAAYC,GACpBK,KAAKqC,mBAAmB3C,EAAYC,KACvCD,EAAWiI,UACThI,EAAKiI,UACLjI,EAAKyI,SAAS,GAAGP,aACjBnI,EAAWoI,gBA1cNrI,4BA8cX4I,WAC6B,aAAvBrI,KAAK+B,cACP/B,KAAK+B,cAAgB,YAErB/B,KAAK+B,cAAgB,aAlddtC,iCAsdX6I,WACE,GAAItI,KAAKS,QAAQiD,SAAU,CACzB,IAAMhE,EAAiBM,KAAKuI,OAAOC,YAAYxI,KAAKS,QAAS,CAC3DgI,eAAgBzI,KAAKS,QAAQ+D,WAC7BkE,kBAAmB1I,KAAKQ,IAAIgE,gBAE9Bf,OAAiBzD,KAAKQ,IAAK,CAACd,GAAiB+D,eA5dtChE,gCAoeHmH,SAAmBlH,SACzB,GAAIA,EAAO6D,KAAKC,WAAaC,MAA7B,CAGA,IAAM7D,EAAWF,EAAiCwB,MAG7CtB,EAAQ8D,WAIb9D,EAAQ2D,KAAKI,SAAQF,OACnBG,OAAOC,OAAO,GACZ,CAAEpD,WACFT,KAAKK,YAAYoF,6BACL,QAAZ9F,IAAOgE,iBAAKhE,WAAE+F,WAAYhG,EAAOiE,MAAM+B,UAAY,KAEvD1F,KAAKQ,IAAIoF,qBAAqB3B,WAAWrE,OArfhCH,gCAwfX4C,SAAmB3C,EAAYC,GAC7B,IACME,EAAaH,EAAWiI,UACxB7H,EAAgBD,EAAaH,EAAWoI,aAExC/H,EAAUJ,EAAKiI,UAErB,OAAO7H,EADsBJ,EAAKmI,aALlB,GAMKhI,GAAiBC,GAAWF,IA/fxCJ,sBAkgBXkJ,sBACE3I,KAAK4I,UAAUC,QAAQC,aAAa,cACpC9I,KAAK+I,eAAeC,WAAWC,aAC/B7G,WAAW,WACT,IAAI1C,KACAM,EAAKkG,YAAclG,EAAKkG,WAAWD,cACvCjG,EAAKkG,WAAalG,EAAK+I,eAAeC,WAAWE,kBAAkBxH,UAAW/B,YAC5E,GAAIK,EAAK+I,eAAeC,WAAWE,kBAAkB9H,QAAU1B,EAAoB,CACjFA,KACA,IACIG,EADED,EAAOI,EAAK+I,eAAeC,WAAW5B,MAAM+B,KAAMrJ,mBAAqB,IAAfA,EAAEsJ,WAEhE,GAAIpJ,EAAKS,QAAQiD,SACf,GAAmC,UAA/B1D,EAAKS,QAAQiD,SAAS2F,KACxBxJ,EAAQ,CAACG,EAAKS,QAAQiD,SAAS4F,YAAY,GAAItJ,EAAKS,QAAQiD,SAAS4F,YAAY,QAC5E,CACL,IAAMxJ,KAAQyJ,KAAevJ,EAAKS,QAAQiD,UAC1C7D,EAAQ,CAACC,EAAM4D,SAAS4F,YAAY,GAAIxJ,EAAM4D,SAAS4F,YAAY,IAMvE,GAHA1J,EAAK4J,KAAOxJ,EAAKyJ,aACjB7J,EAAK0J,YAAczJ,EACnBG,EAAK+I,eAAeC,WAAW3B,OAAOzH,GAClCI,EAAKQ,IAAIkJ,sBAAsBC,UAAUvI,MAAO,CAClD,IAAMtB,EAAaE,EAAKQ,IAAIkJ,sBAAsBC,UAAUvI,MACtDrB,EAAOC,EAAK+I,eAAeC,WAAW5B,MAAM+B,KAAMpE,mBAAqB,IAAfA,EAAEqE,WAC1D1E,EAAekF,KAAiB9J,EAAWsJ,SAAUtJ,EAAW0E,WAAY,aAC5EM,KAAyBrB,OAAa,CAACiB,EAAa,GAAIA,EAAa,IAAK,GAChF3E,EAAKyJ,KAAO1E,EAAM+E,KAAK,KACvB9J,EAAKuJ,YAAcxE,EACnB9E,EAAK+I,eAAeC,WAAW3B,OAAOtH,QAK3C,SApiBMN,KAoiBNA,sCApiBMA,GAA0BF,mGAA1BE,EAA0BH,s3BD7DvCC,0CAQAA,wDARMA,gFASHA,wKCoDUE,sUAA0BqK,IAVtCpJ,MAAc,CACbyE,KAAM,gBACN4E,MAAO,sCACPC,KAAM,8IA6FcC,KACGA,KACN1K,MACG0K,KACMA,KACTC,QA3FNzK,8EC7BXF,iDAAiCA,wEACjCA,iDAAkCA,iDPrBpCJ,IQ2BOgL,ER3BPhL,WQyGEE,WACUK,EACAC,EACAC,EAEAC,EACAC,EACAC,EACA2E,EACAI,EACAC,EACAC,wBAVAhF,iBACAA,qBACAA,oBAEAA,uBACAA,yBACAA,kBACAA,oBACAA,mBACAA,qBACAA,oBAxFVA,YAAkC,IAAIC,YAC7BD,2BA0BCA,kBAAe,IAAIT,MACnBS,gBAAa,IAAIT,MAO3BS,YAAmB,GACZA,2BACAA,uBACAA,WAAQ,IAAIU,KAAY,IAGxBV,uCAEAA,kBAAuB,IAWvBA,UAAO,CACZoK,OAAQ,EAAC,GAAK,MACdC,KAAM,GAUDrK,qBAAkB,IAAIC,YAyBzBD,KAAKsK,WAAWC,OAAOvK,KAAKQ,KAC5BR,KAAKwK,wBAAiBxK,KAAKyK,cAAcrK,UAAU,mBACjDJ,KAAKyK,cAAcrK,UAAU,kBAC/BJ,KAAK0K,oBAAa1K,KAAKyK,cAAcrK,UAAU,eAC7CJ,KAAKyK,cAAcrK,UAAU,cAEjCJ,KAAK2K,aACFC,iBAAiB,CAChBb,MAAO,MACPc,cAAe,CACbxB,KAAM,SAGT3H,UAAUuD,YACTjF,EAAK8K,SAAW7F,IRrIxB9F,2BQqIwB8F,WAnGpB,OAAOjF,KAAK+K,MRlChB5L,IQkCgB4L,SAENrL,GACNM,KAAK+K,KAAOrL,IRrChBP,kBQqCgBO,WAMZ,OAAOM,KAAKgL,SR3ChB7L,IQ2CgB6L,SAEHtL,GACLA,IAAUM,KAAKgL,UAInBhL,KAAKgL,QAAUtL,EACfM,KAAKiL,aAAaC,KAAKlL,KAAKgL,YRnDhC7L,mBQmDgC6L,WAQ5B,OAAOhL,KAAK4I,UAAUC,UR3D1B1J,uBQ2D0B0J,WAqCtB,OAAO7I,KAAKK,YAAYC,QRhG5BnB,yBQgG4BmB,WAIxB,OAAON,KAAKmL,aAAaC,kBRpG7BjM,0CQ4IIkM,SAA6B3L,GAC3BM,KAAKsL,+BAAiC5L,IR7I5CP,gCQgJIoM,WAA0B,IAAP7L,EAAO8L,0DACxBxL,KAAK2B,KAAOjC,EAERA,EAD4B+L,QAAQ,aAAc,IAAIC,OACnCzD,OAAS,IAC9BjI,KAAK2L,YAAYhF,QACjB3G,KAAK4L,0BRrJbzM,sBQyJI0H,SAASnH,GACP,IAAMC,EAAUD,EAAMoH,QACtB9G,KAAK2L,YAAY9K,MAAMgL,UAAU,CAAE/K,WAAgBgB,cACnD,IAAMlC,EAAaI,KAAK2L,YAAY5E,UAAU3F,MAC3CkC,OAAQzD,mBAAyBA,EAAOmH,SAAWtH,EAAMuH,SAASD,SAClEE,OAAOvH,GACVK,KAAK2L,YAAYG,WAAWlM,KR/JlCT,oCQkKI4M,WACE/L,KAAKiC,gBAAgBZ,WRnK3BlC,2BQ2KIgH,SAAczG,GACZM,KAAK4G,mBAAmBlH,GACxBM,KAAK4L,gBAAmBlM,EAAiCwB,OR7K/D/B,gCQoLYyH,SAAmBlH,GACrBA,EAAM6D,KAAKC,WAAaC,gBAKxB/D,EAAMwB,KAAKwC,UAIf1D,KAAKQ,IAAIoF,qBAAqBoG,YAC5B,CAACtM,EAAMwB,MACPuC,iBRhMRtE,sBQoMEoC,sBACEvB,KAAKiM,aAAejM,KAAK6I,QAAQqD,YAAYxK,UAAWhC,YACtD,IAAMC,EAAeK,EAAKyK,cAAcrK,UAAU,iBAAmB,MACrE,GAAIV,EACF,GAAkB,mBAAdA,EAAKyF,KAAT,WACwBnF,EAAKmM,aAAaC,aAAahF,OADvD,IACE,2BAAqDA,KAA1CxH,EAA0CwH,aAC/CpH,EAAKmM,aAAaC,aAAavL,MAAMgB,IAAIjC,GAASkC,UACpD9B,EAAKqM,OAAOhL,KAAKzB,EAAQmK,QAH/B,oCAG+BA,GAGN,qBAAdrK,EAAKyF,MAA6C,oBAAdzF,EAAKyF,KAHrB4E,WAIT/J,EAAKQ,IAAI8L,QAJAvC,IAI7B,2BAA6BuC,KAAlB1M,EAAkB0M,aACvB1M,EAAM2M,QAAQC,QAChBxM,EAAKqM,OAAOhL,KAAKzB,EAAMmK,QANEA,oCAU7B/J,EAAKqM,OAAOhL,KAAK3B,EAAKqK,YAGxB/J,EAAKqM,OAAOhL,KAAK1B,GAEnBK,EAAKyM,WAAWvB,KAAKxL,KAGvBM,KAAKM,MAAM6G,KAAK,CACd,CACEZ,GAAI,cACJwD,MAAO,cACP2C,QAAS1M,KAAK2M,mBAAmBC,KAAK5M,OAExC,CACEuG,GAAI,aACJwD,MAAO,YACP2C,QAAS1M,KAAK6M,iBAAiBD,KAAK5M,MACpC8M,KAAM,CAAC,MAET,CACEvG,GAAI,mBACJwD,MAAO,mBACP2C,QAAS1M,KAAK+M,uBAAuBH,KAAK5M,WR5OlDb,yBQiPE6G,WACEhG,KAAKiM,aAAahG,cAElBjG,KAAKM,MAAM0M,YRpPf7N,mCQuPE8N,WACEjN,KAAK6I,QAAQqE,yBRxPjB/N,mCQ2PEgO,WACEnN,KAAK6I,QAAQuE,mBR5PjBjO,kCQmQEkO,WACErN,KAAKQ,IAAIoF,qBAAqBe,URpQlCxH,+BQuQEmO,SAAkB5N,GAChB,IAAMC,EAAWK,KAAKuN,YAAY7N,GAC5BE,EAAQI,KAAKsK,WAAWkD,SAASnH,GAAGoH,uBAAuB9N,GACjEK,KAAK0N,cAAgB1N,KAAKsK,WAAWkD,SAAShJ,WAC9CxE,KAAK2N,OAAS/D,KAAehK,EAAOI,KAAK0N,cAAe,eR3Q5DvO,yBQ8QEoO,SAAY7N,GACV,IAAMC,EAAmBD,EACzB,SAAiBkO,EACfjO,EAAiBiO,EACjB5N,KAAK6N,WAAWtG,cAAcuG,wBAAwBC,IACtDC,OAAOC,QACTtO,EAAiBoF,EACfpF,EAAiBoF,EACjB/E,KAAK6N,WAAWtG,cAAcuG,wBAAwBI,KACtDF,OAAOG,QACQ,CAACxO,EAAiBoF,EAAGpF,EAAiBiO,KRxR3DzO,6BQ4REiP,SAAgB1O,GACdM,KAAK2N,OAASjO,EACdM,KAAK2M,uBR9RTxN,gCQiSEwN,sBACE3M,KAAK2L,YAAYhF,QACjB,IAAMjH,EAAUM,KAAKqO,cAAcC,cAActO,KAAK2N,QAFxDhB,WAIahN,GACLD,EAAQuI,OAAS,GACnBvI,EAAQC,GAAG8H,QAAQ/F,UAAW9B,YAC5BI,EAAK6G,SAAS,CAAEI,SAAUvH,EAAQC,GAAImH,QAASlH,OAHrD,QAAWD,KAAKD,EAAhB6O,EAAW5O,KRrSfR,8BQ8SE0N,WACEmB,OAAOQ,KAAK/K,6BAAmCzD,KAAK2N,OAAO,GAAI3N,KAAK2N,OAAO,OR/S/ExO,oCQkTE4N,WACEiB,OAAOQ,KACL/K,8BAAoCzD,KAAK2N,OAAO,GAAI3N,KAAK2N,OAAO,SRpTtExO,KQoTsEgL,sCAzRzDA,GAAmB5K,sJAAnB4K,EAAmB7K,uDA8DGC,OA9DHD,cA8DGC,05BDrGnCA,2BAIEA,qDAEAA,mBAEQA,mCACEA,wRAUFA,QAERA,QACFA,QACAA,sBAQEA,kDAASkP,WACTlP,4BACAA,4BACFA,+BA/BEA,sBAAmB,mBAqBnBA,2EAQWA,gCACAA,4tEEtBLA,SACEA,iBAGFA,uCAHOA,qCAAsB,YAAtBA,CAAsB,4DAJjCA,eAEIA,SACAA,iCAKJA,sCAPoBA,2BAChBA,+BACeA,2DAUnBA,SACEA,iBACFA,uCADOA,qCAAsB,YAAtBA,CAAsB,4DAF7BA,SACAA,+DADAA,sBACeA,2DArBnBA,SACEA,iBAOEA,sBAWFA,2CAOAA,QACFA,2CAzBOA,sDAAuD,2BAAvDA,CAAuD,6BAAvDA,CAAuD,yBAAvDA,CAAuD,+BAAvDA,CAAuD,wBAD7BA,4BAOzBA,8BAAoB,eTI5BJ,IUAOuP,GVAPvP,WUMEE,WACUK,EACAC,EACAC,aAFAI,sBACAA,oBACAA,qBARHA,gBAA2B,GVDpCb,yCUYEwP,sBACE3O,KAAK4O,UAAY5O,KAAK6O,eAAeC,SAASpN,UAAUhC,YACpDM,EAAK+O,oBAAoBrP,GACzBM,EAAKgP,QAAUtP,IAGnBM,KAAKiP,QAAUjP,KAAKmL,aAAa+D,OAAOxN,UAAUhC,mBAChDM,EAAK+O,oBAAoB/O,EAAKgP,aVnBpC7P,yBUuBE6G,WACEhG,KAAK4O,UAAU3I,cACfjG,KAAKiP,QAAQhJ,gBVzBjB9G,iCU4BU4P,SAAoBrP,GAC1B,IAAIC,EAAa,GACjB,YAAID,EAAuB,CACzBM,KAAKmP,WAAa,GAElBzP,EAAYyP,WACVxP,EAAaD,EAAQyP,WACZnP,KAAKyK,cAAcrK,UAAU,gBACtCT,EAAaK,KAAKyK,cAAcrK,UAAU,eANnB,UAQHT,GARG,IAQzB,2BAAsBA,KAAXC,EAAWD,UAGdC,EAAQwP,OAA0C,YAAjCpP,KAAKmL,aAAakE,YACxCzP,EAAQwP,OAASxP,EAAQwP,MAAMjH,SAASnI,KAAKmL,aAAakE,cACzDrP,KAAKmP,WAAWnL,KAAKpE,IAbA,oCV9B/BT,KU2C+BS,uCA3ClB8O,IAAmBnP,gEAAnBmP,GAAmBpP,uRDZhCC,uCAAkCA,6vBTYlCJ,IWDOmQ,GXCPnQ,WWGEE,WAAmBK,2BAFZM,eAAY,KXDrBb,sCWKEoQ,WACuBvP,KAAKwP,OAAOC,cAAc,kCAQ3CzP,KAAK0P,UAAUC,QANf3P,KAAK0P,UAAY1P,KAAKwP,OAAOhB,KAAKoB,GAA6B,CAC7DrJ,GAAI,iCACJsJ,eACAC,2BXXV3Q,KWW6BmQ,uCAZhBA,IAAqB/P,uCAArB+P,GAAqBhQ,kMCXlCC,oBAA0FA,gCAASI,mBAAgBJ,sBAAOA,i8DZY1HJ,IWuBOyQ,GXvBPzQ,WW+BEE,WACUK,EACDC,aADCK,gBACDA,cXjCXb,2BWiCWa,WALP,OAAOA,KAAKO,SAASC,QX5BzBrB,KW4ByBqB,uCALZoP,IAA2BrQ,mDAA3BqQ,GAA2BtQ,yVEnCxCC,iBAAwBA,oBAAkEA,sBAAuCA,QAASA,QAC1IA,gBAAqBA,sBAAOA,QAC5BA,0CACEA,sCAAqB,uBAArBA,CAAqB,yBAArBA,CAAqB,oCAArBA,CAAqB,0FbSvBJ,IcJO4Q,GdIP5Q,EcFEE,WAAsBK,6EAFXqQ,IAAexQ,uCAAfwQ,GAAezQ,oPCR5BC,iBACIA,kBACIA,kBACIA,oCACgBA,8BAAmCA,QACvDA,QACAA,kBAA4BA,eAAGA,QAC/BA,kBACIA,sCACgBA,gCAAiCA,QACrDA,QACAA,mBAA4BA,gBAAGA,QAC/BA,mBACIA,sCACgBA,gCAA4BA,QAChDA,QACJA,QACJA,eAd6EA,gEACjDA,+CAIiDA,gEACjDA,+CAIiDA,2DACjDA,62BCNxBA,8BAEEA,iFACFA,+BAFEA,+EAIFA,gCAEEA,oGAA6D,+EAA7DA,CAA6D,2DAA7DA,CAA6D,2EAA7DA,CAA6D,2GAc/DA,+BAXEA,4CAAuC,oBAAvCA,CAAuC,sBAAvCA,CAAuC,yDAmCrCA,uDAAiDA,0CAGjDA,mDAGJA,2GA3DJA,iCACEA,iCAEEA,0BAEEA,qEACFA,QAEAA,oCAKAA,mCAkBAA,4BAEEA,2EAA0B,kEAE5BA,QAEAA,+BAUEA,qCAKAA,iBACEA,2CACAA,+BACAA,mCACAA,uCACFA,QACFA,QACAA,gCAEAA,8CAMFA,QAGFA,8BAlEMA,wCAIgBA,wCAKDA,uCAmBfA,4BAAW,0BAOXA,2CAA4B,4BAA5BA,CAA4B,YAA5BA,CAA4B,oCAS1BA,2EAA6D,YAA7DA,CAA6D,gDAKtCA,4CACNA,4BACIA,oEAAmD,aACpDA,yCAGXA,mCAGbA,wDAAuC,iGhBlD3CJ,IiBqFO6Q,GjBrFP7Q,WiBwPEE,WACUK,EACDC,EACAC,EACAC,EACAC,EACAC,EACA2E,EACCI,EACAC,EACAC,EACAC,EACAI,EACAR,EACAS,EACA2K,EACAC,EACAC,EACAC,EACDC,EACCC,EACAC,EACDC,aArBCxQ,aACDA,sBACAA,mBACAA,oBACAA,oBACAA,yBACAA,2BACCA,oBACAA,gBACAA,mBACAA,kBACAA,iBACAA,2BACAA,qBACAA,qBACAA,YACAA,uBACAA,sBACDA,oBACCA,sBACAA,sBACDA,cAxLFA,2CACAA,kBACAA,wBACAA,2BACAA,8BACAA,mBACAA,kCAAuC,gCACvCA,gCAAuD,IAAIC,QAC1DD,yBAAsC,GACrCA,wBAA+C,IAAIC,IAC1DD,KAAKyQ,eAAe5O,IAAI,sBAEnB7B,wBAAiD,IAAIC,YACrDD,sBACAA,sBACAA,uBACAA,oBAA2C,IAAIC,QAM/CD,qBAAkB,IAAIC,YAMtBD,wBAA8C,IAAIC,YAClDD,yBAAsB,EACtBA,4BACAA,sCAEAA,gCACAA,sBAAgD,CACrD0Q,SAAU,GACVC,gBAAiB,CAAC,EAAG,EAAG,GAAI,GAAI,GAAI,IAAK,MAEpC3Q,wBAAqB,iBAErBA,gBAAaA,KAAKyQ,eAAe5O,IAAI,cAErC7B,mBAAgB,IAAIC,YACpBD,mBAAgB,GAChBA,uBAAoB,IAAIC,YACxBD,yBACAA,kBAAe,IACfA,kCACCA,mBAAgC,GACjCA,sBAEAA,sBAAmB,IAAIU,KAAY,IAGlCV,sBAODA,qCAEAA,yCAEAA,8BAQAA,kBAAeA,KAAKwP,OAAOC,cAAc,kCAiH5CzP,KAAK4Q,mBAAY5Q,KAAKyK,cAAcrK,UAAU,cAC5CJ,KAAKyK,cAAcrK,UAAU,aAC/BJ,KAAK6Q,yBAAkB7Q,KAAKyK,cAAcrK,UAAU,oBAClDJ,KAAKyK,cAAcrK,UAAU,mBAC/BJ,KAAK8Q,uBAAgB9Q,KAAKyK,cAAcrK,UAAU,kBAChDJ,KAAKyK,cAAcrK,UAAU,iBAC/BJ,KAAK+Q,uBAAgB/Q,KAAKyK,cAAcrK,UAAU,kBAChDJ,KAAKyK,cAAcrK,UAAU,iBAC/BJ,KAAK0K,oBAAa1K,KAAKyK,cAAcrK,UAAU,eAC7CJ,KAAKyK,cAAcrK,UAAU,cAC/BJ,KAAKwK,wBAAiBxK,KAAKyK,cAAcrK,UAAU,mBACnDJ,KAAKyK,cAAcrK,UAAU,kBAC7BJ,KAAKgR,kBAAoBhR,KAAKyK,cAAcrK,UAAU,qBACtDJ,KAAKiR,6BACHjR,KAAKyK,cAAcrK,UAAU,oBAC/BJ,KAAKkR,4BAAqBlR,KAAKyK,cAAcrK,UAAU,uBACrDJ,KAAKyK,cAAcrK,UAAU,sBAC/BJ,KAAKmR,wCAAiCnR,KAAKyK,cAAcrK,UAAU,mCACjEJ,KAAKyK,cAAcrK,UAAU,kCAC/BJ,KAAKoR,cAAgBpR,KAAKyK,cAAcrK,UAAU,qBAClDJ,KAAKG,8BAAgCH,KAAKyK,cAAcrK,UAAU,iCAClEJ,KAAKsL,+BAAiCtL,KAAKyK,cAAcrK,UAAU,oCAC/DJ,KAAKsL,iCACPtL,KAAKsL,+BAAiCtL,KAAKyQ,eAAe5O,IAAI,oCjBvStE1C,oDiB8GEkS,WACE,OAAOrR,KAAKyK,cAAcrK,UAAU,mBjB/GxCjB,eiB+GwC,WAmDpC,OAAOa,KAAKO,SAASC,MjBlKzBrB,yBiBkKyBqB,WAIrB,OAAOR,KAAKsR,eAAelQ,OjBtK/BjC,IiBsK+BiC,SAGX1B,GAChBM,KAAKsR,eAAejQ,KAAK3B,KjB1K7BP,gBiB0K6BO,WAIzB,OAAOM,KAAKyK,cAAcrK,UAAU,SAAW,KjB9KnDjB,sBiBiLEoS,WACE,OAAOvR,KAAKmL,aAAakE,aAAenF,cjBlL5C/K,sBiBqLEqS,WACE,OAAOxR,KAAKmL,aAAakE,aAAenF,cjBtL5C/K,yBiByLEsS,WACE,OAAOzR,KAAKmL,aAAauG,mBAAqBxH,iBjB1LlD/K,wBiB6LEwS,WACE,OAAO3R,KAAKmL,aAAauG,mBAAqBxH,gBjB9LlD/K,yBiB8LkD+K,WAI9C,OACGlK,KAAKuR,YAAevR,KAAKwR,YAAcxR,KAAK2R,eAC7C3R,KAAK4R,gBjBpMXzS,kCiBoMWyS,WAKP,OAAO5R,KAAK6R,eAAeC,wBjBzM/B3S,IiByM+B2S,SAEFpS,GACzBM,KAAK6R,eAAeC,uBAAyBpS,OACzCA,EACFM,KAAKQ,IAAIkC,eAAeqP,WAAW,CAACC,OAAQ,MAE5ChS,KAAKQ,IAAIkC,eAAeqP,WAAW,CAACC,OAAQ,MjBhNlD7S,2BiBgNkD,WAK9C,WjBrNJA,uCiBqNW,WAIP,OAAOa,KAAKiS,wBAA0BjS,KAAKkS,+BjBzN/C/S,qBiByN+C+S,WAI3C,OAAOlS,KAAK6R,eAAeM,WAAW/Q,QjB7N1CjC,yBiB6N0CiC,WAItC,OAAOV,ejBjOXvB,8BiBiOWuB,WAIP,OAAOV,KAAKoS,gBAAkB1R,ejBrOlCvB,uBiBqOkCuB,WAI9B,OAAOV,KAAKK,YAAYC,QjBzO5BnB,wCiByO4BmB,WAIxB,OAAON,KAAKK,YAAY4C,8BAA8B7B,QjB7O1DjC,mBiB6O0DiC,WAItD,OAAOpB,KAAK4I,UAAUC,UjBjP1B1J,0BiBiP0B0J,WAItB,OAAO7I,KAAK6R,eAAevR,QjBrP/BnB,sBiB2SEoC,sBACEyM,OAAOqE,IAASrS,KAChBA,KAAKkR,4BAAqBlR,KAAKyK,cAAcrK,UAAU,uBACrDJ,KAAKyK,cAAcrK,UAAU,sBAE/BJ,KAAKQ,IAAI6F,GAAGiM,KAAK,iBAAkB,oBAC7BtS,EAAKyK,cAAcrK,UAAU,+BAC/BJ,EAAKQ,IAAIkJ,sBAAsB6I,SAAWvS,EAAKyK,cAAcrK,UAAU,gCAK3EJ,KAAKK,YAAYiB,oBAAoBD,KAAKrB,KAAKwS,cAE/CxS,KAAKyS,YAAYC,cAAchR,UAAW/B,YACxCK,EAAK2S,mBAGP3S,KAAK4O,UAAY5O,KAAK4S,aAAa9D,SAASpN,UACzC/B,mBAA6BK,EAAK6S,gBAAgBlT,KAGrD,IAAMD,EAAiB,CAAC,CACtB6G,GAAI,cACJwD,MAAO,cACP2C,QAAS,kBAAM1M,EAAK8S,iBAAiB9S,EAAK+S,oBAE5C,CACExM,GAAI,aACJwD,MAAO,YACP2C,QAAS,kBAAM1M,EAAKgT,eAAehT,EAAK+S,oBAE1C,CACExM,GAAI,mBACJwD,MAAO,mBACP2C,QAAS,kBAAM1M,EAAKiT,qBAAqBjT,EAAK+S,qBAGhD/S,KAAKkT,iBAAiB/L,KAAKzH,GAE3BM,KAAKQ,IAAI6F,GAAGiM,KAAK,iBAAkB,WACjCtS,EAAKmT,oBAGPnT,KAAKoT,kBAAkB1R,UAAU,WAC/B1B,EAAKK,YAAYgT,4BAGnBrT,KAAKK,YAAYyC,gBAAgBpB,UAAW/B,YACtCA,GAAUK,EAAKuR,YACjBvR,EAAKsT,iBAITtT,KAAK6R,eAAe0B,kBAAkBlS,KAAKrB,KAAKgR,mBAChDhR,KAAK6R,eAAevR,MAAM6D,OAAOzC,UAAW/B,aACrCK,EAAKgR,oBAGVhR,EAAK6R,eAAe0B,kBAAkBlS,MAAK1B,GACvCA,IACFK,EAAKiS,2BAEPjS,EAAKwT,2BAGPxT,KAAK6R,eAAeM,WAAWzQ,UAAW/B,wBACpCA,GACFK,EAAKyT,mBAAmBpS,KAAK1B,GAC7BK,EAAKiS,2BAEgC,QAAjCrS,IAAU8T,MAAMnH,QAAQoH,qBAAS/T,WAAE8Q,YAA6C,QAAjC7Q,IAAU6T,MAAMnH,QAAQoH,qBAAS9T,WAAE8Q,iBACpF3Q,EAAK4T,iBAAmB,CACtBlD,SAA2C,QAAjC5Q,IAAU4T,MAAMnH,QAAQoH,qBAAS7T,WAAE4Q,SAC7CC,gBAAkD,QAAjC5Q,IAAU2T,MAAMnH,QAAQoH,qBAAS5T,WAAE4Q,iBAGtD3Q,EAAK4T,iBAAmB,CACtBlD,SAAU,GACVC,gBAAiB,CAAC,EAAG,EAAG,GAAI,GAAI,GAAI,IAAK,OAI7C3Q,EAAKiS,4BAITjS,KAAK6T,eAAiB7T,KAAK6R,eAAeiC,uBAAuBpS,UAC9D/B,qBACKA,GACFK,EAAK+T,6BACL/T,EAAKgU,sCAELhU,EAAKiU,8BACLjU,EAAKgU,uCAKXhU,KAAKkU,cAAgBlU,KAAK4I,UAAUuL,aAAazS,UAC9C/B,YACKA,IACFK,EAAKoU,cACLpU,EAAK4I,UAAUuL,aAAa9S,YAKlCrB,KAAKqU,gCACH7R,MAAc,CACZxC,KAAKsR,eACLtR,KAAKmL,aAAa+D,OAClBlP,KAAKmL,aAAamJ,eAClBvT,QACAqD,KAAa,KACb1C,UAAU,WACV1B,EAAKuU,+BjB/ZbpV,sCiBmaEoV,sBACMvU,KAAKuR,aAAevR,KAAKyR,cAC3B+C,QAAQC,UAAUC,KAAK,kBAAM1U,EAAK2U,mBAAmBtT,eAErDmT,QAAQC,UAAUC,KAAK,kBAAM1U,EAAK2U,mBAAmBtT,KAAKrB,EAAK4U,2BjBvarEzV,qCiB2aE0V,SAAwBnV,GACtB,IAAIC,EAAa,GACjB,SAAM4M,QAAQ1B,cAAciK,aAAaC,QAAQnV,aAC1CA,EAAMoV,SAAWpV,EAAMqV,UAC1BtV,EAAWC,EAAMuF,MAAQ,MAGtBxF,IjBlbXR,8BiBqbE+V,WACElV,KAAKmV,2BAA2B9T,WjBtbpClC,yBiBybE6G,WACEhG,KAAK4O,UAAU3I,cACfjG,KAAK6T,eAAe5N,cACpBjG,KAAKkU,cAAcjO,cACnBjG,KAAKoV,oBAAoB5U,IAAId,mBAAKA,EAAEuG,gBACpCjG,KAAKqU,6BAA6BpO,gBjB9btC9G,kCiBicEkO,WACErN,KAAKQ,IAAIoF,qBAAqBe,UjBlclCxH,mCiBwcWkW,WACPrV,KAAKsV,cAAcP,QAASrV,mBAAsBA,EAAIuG,gBACtDjG,KAAKsV,cAAgB,KjB1czBnW,6BiB6cEoW,WACEvV,KAAKsT,iBjB9cTnU,kCiBidEqW,WACExV,KAAKyV,kBjBldTtW,yCiBqdE8U,WACEjU,KAAKkS,kCjBtdT/S,wCiBydE4U,WACE/T,KAAKkS,kCjB1dT/S,gCiB6dEoM,SAAmB7L,UACG,QAAhBC,OAAK+V,uBAAW/V,WAAEgW,SAAUjW,IAASM,KAAK0V,YAAYC,QACxD3V,KAAKK,YAAYuV,qCAGnB5V,KAAKK,YAAYwV,cAAcnW,GAE3BA,EAD4B+L,QAAQ,aAAc,IAAIC,OACnCzD,OAAS,EAC9BjI,KAAK8V,gBAGP9V,KAAK+V,mBjBxeT5W,sBiB2eE0H,SAASnH,GACP,IAIIG,EAJEF,EAAUD,EAAMoH,QAEhBlH,MAAmB6D,OAAgB/D,EAAMuH,SAASD,QAItDnH,EADED,EACeI,KAAKgW,oBACnBC,oBACA3S,OAAOG,OAEOzD,KAAKgW,oBACnBC,oBACA3S,OAAOG,OAGZ,IAAM3D,EAAaE,KAAK2L,YAAY5E,UAAU3F,MAC3CkC,OACEvD,mBACCA,EAAOiH,SAAWtH,EAAMuH,SAASD,QACjCnH,EAAesI,SAASpI,EAAOiH,UAElCE,OAAOvH,GACVK,KAAK2L,YAAYG,WAAWhM,KjBlgBhCX,oCiBqgBE4M,WACE/L,KAAKoT,kBAAkB/R,WjBtgB3BlC,0BiBygBUmU,WACNtT,KAAK4R,iBACL5R,KAAKQ,IAAIkC,eAAewT,QAAQ,GAAK,IjB3gBzC/W,yBiB8gBUiV,WACNpU,KAAK4R,iBACL5R,KAAKQ,IAAIkC,eAAewT,QAAQ,GAAKlW,KAAKuR,WAAa,EAAI,MjBhhB/DpS,2BiBmhBUsW,WACNzV,KAAK4R,cAAgB5R,KAAKsT,eAAiBtT,KAAKoU,cAChDpU,KAAKuU,6BjBrhBTpV,yBiBwhBSgX,SAAYzW,GACbA,GAAsB,kBAAdA,EAAKyF,MAA4BnF,KAAKoW,WAChDpW,KAAKoW,UAAU7O,cAAcS,qBAAqB,SAAS,GAAGxC,UjB1hBpErG,qCiB8hBUkX,SAAwB3W,YACR,QAAlBE,EAAY,QAAZD,EAAO,MAAPD,WAASc,eAAGb,WAAE2W,gBAAI1W,WAAE2W,aACtBvW,KAAKuW,WAAa7W,EAAQc,IAAI8V,KAAKC,WAAWC,OAC9CxW,KAAKyW,WAAa/W,EAAQc,IAAI8V,KAAKC,WAAWnM,OAC9CpK,KAAK0W,SAAWhX,EAAQc,IAAI8V,KAAKC,WAAWlM,OAE5CrK,KAAKuW,kBACLvW,KAAKyW,kBACLzW,KAAK0W,mBjBtiBXvX,6BiB2iBU0T,SAAgBnT,cAEtB,GADAM,KAAKqV,iCACD3V,EAkBJ,IAfIM,KAAK2T,YAAc3T,KAAK2T,UAAUgD,YAAYC,OAChD5W,KAAK2T,UAAUgD,YAAYhQ,QAExB3G,KAAK6W,WAAWvW,MAAMsW,OACzB5W,KAAK6W,WAAWvW,MAAMwW,YAGxB9W,KAAKqW,wBAAwB3W,GAE7BM,KAAK+W,MAAMC,YAAYjW,QAAKqD,KAAa,MAAM1C,UAAW/B,cACnDA,EAAQqP,SAAcrP,EAAQqP,UAAetP,EAAQuX,MACxDjX,EAAKkX,sBAAsBvX,KAI3BK,KAAK2S,cAAe,CACtB,IAAMhT,EAAiBK,KAAK6I,QAAQsO,QAAQ,kBAIxCtX,GAH0BF,EAC1BA,EAAe4M,QACf,IACmC6K,0BAEvC,IAAKvX,EAEH,IADA,IACAwX,MADwB,CAAC,WAAY,MAAO,aAAc,aAC1DA,oBAAWtX,OACT,GAAIC,KAAK6I,QAAQsO,QAAQpX,GAAW,CAClCF,EAAaE,EACb,OAKFF,GACFG,KAAK6I,QAAQC,aAAajJ,GAI9BG,KAAK2S,oBjBrlBTxT,4BiBwlBU4W,aAEH/V,KAAK6I,QAAQqD,YAAY9K,OACc,kBAAxCpB,KAAK6I,QAAQqD,YAAY9K,MAAM+D,OAE/BnF,KAAK6I,QAAQC,aAAa,iBAE5B9I,KAAKoU,gBjB/lBTjV,2BiBkmBS2W,WACL9V,KAAKQ,IAAIoF,qBAAqBe,QAC9B3G,KAAK2L,YAAYhF,QACjB3G,KAAKK,YAAYiX,0BACjBtX,KAAKK,YAAYuV,uCjBtmBrBzW,+BiBymBEmO,SAAkB5N,GAChBM,KAAK+S,iBAAmB/S,KAAKuX,mBAAmB7X,KjB1mBpDP,gCiB6mBUoY,SAAmB7X,GACzB,IAAMC,EAAmBD,EACnBE,EAAqBI,KAAK6N,WAAWtG,cAAcuG,wBACzDnO,EAAiBiO,EACfjO,EAAiBiO,EACjBhO,EAAmBmO,KAClBC,OAAOC,SAAWD,OAAOwJ,aAC5B7X,EAAiBoF,EACfpF,EAAiBoF,EACjBnF,EAAmBsO,MAClBF,OAAOG,SAAWH,OAAOyJ,aAC5B,IAAM5X,EAAQ,CAACF,EAAiBoF,EAAGpF,EAAiBiO,GAE9C9N,EAAQE,KAAKQ,IAAI6F,GAAGoH,uBAAuB5N,GAC3CE,EAAOC,KAAKQ,IAAIgE,WACtB,OAAOoF,KAAiB9J,EAAOC,EAAM,ejB5nBzCZ,4BiB+nBU6T,SAAetT,GACrBsO,OAAOQ,KAAK/K,6BAAmC/D,EAAM,GAAIA,EAAM,OjBhoBnEP,kCiBmoBU8T,SAAqBvT,GAC3BsO,OAAOQ,KAAK/K,8BAAoC/D,EAAM,GAAIA,EAAM,OjBpoBpEP,8BiBuoBE2T,SAAiBpT,GACfM,KAAK0X,cAAgBhY,EAAMc,IAAKb,mBAAMA,EAAEgY,QAAQ,KAAI9N,KAAK,QjBxoB7D1K,mCiB2oBEqU,WACE,IAAM9T,EAASM,KAAK6W,WAAWvW,MAAMyG,UAAU3F,MAAM6G,OAAS,EAC1DjI,KAAKgR,mBAAqBhR,KAAK6R,eAAe0B,kBAAkBnS,MAClEpB,KAAK6N,WAAWtG,cAAcqQ,UAAUC,IAAI,uBAE5C7X,KAAK6N,WAAWtG,cAAcqQ,UAAUE,OAAO,uBAG7C9X,KAAKgR,mBAAqBhR,KAAKiS,uBAC7BjS,KAAK+X,mBAAmB3W,OAC1BpB,KAAK6N,WAAWtG,cAAcqQ,UAAUC,IAAI,8BAC5C7X,KAAK6N,WAAWtG,cAAcqQ,UAAUE,OAAO,sBAE/C9X,KAAK6N,WAAWtG,cAAcqQ,UAAUC,IAAI,oBAC5C7X,KAAK6N,WAAWtG,cAAcqQ,UAAUE,OAAO,+BAGjD9X,KAAS+X,mBAAmB3W,MAC1BpB,KAAK6N,WAAWtG,cAAcqQ,UAAUE,OAAO,8BAE/C9X,KAAK6N,WAAWtG,cAAcqQ,UAAUE,OAAO,oBAI/C9X,KAAK4R,cACP5R,KAAK6N,WAAWtG,cAAcqQ,UAAUC,IAAI,kBAE5C7X,KAAK6N,WAAWtG,cAAcqQ,UAAUE,OAAO,kBAGjD9X,KAAS4R,gBAAkB5R,KAAKuR,WAC9BvR,KAAK6N,WAAWtG,cAAcqQ,UAAUC,IAAI,6BAE5C7X,KAAK6N,WAAWtG,cAAcqQ,UAAUE,OACtC,6BAKFpY,IACCM,KAAKuR,YAAcvR,KAAKwR,YAAcxR,KAAK4R,iBAC3C5R,KAAKiS,uBAENjS,KAAK6N,WAAWtG,cAAcqQ,UAAUC,IAAI,4BAE5C7X,KAAK6N,WAAWtG,cAAcqQ,UAAUE,OACtC,8BjBzrBR3Y,iCiB8rBEyV,WACE,OAAK5U,KAAK4R,cASC5R,KAAK4R,cACV5R,KAAKgY,uBAAyBhY,KAAKmL,aAAa8M,YAC3C,qBAELjY,KAAKkY,WACA,cAEA,yBAfLlY,KAAKgY,uBAAyBhY,KAAKmL,aAAa8M,YAC3C,cAELjY,KAAKkY,WACA,eAEA,ajBtsBf/Y,0CiBotBEkM,SAA6B3L,GAC3BM,KAAKyQ,eAAe0H,IAAI,8BAA+BzY,GACvDM,KAAKsL,+BAAiC5L,IjBttB1CP,gCiBytBEiZ,WACE,OAAOpY,KAAKiS,uBACVjS,KAAK+X,mBAAmB3W,MAAQ,wCAA0C,8BAC1E,uBjB5tBNjC,6BiB+tBUgU,sBACNnT,KAAK+W,MAAMC,YAAYtV,UAAWhC,YAChCM,EAAK0V,YAAchW,EACnBM,EAAKqY,iBACLrY,EAAKsY,mBACLtY,EAAKuY,iBACLvY,EAAKwY,0BjBruBXrZ,iCiByuBUqZ,WACN,GAAIxY,KAAK0V,YAAY+C,WAAe,CAClC,IAAM/Y,EAAeM,KAAK0V,YAAY+C,WAAcC,MAAM,KACpD/Y,EAAWiK,KACflK,EACA,YACAM,KAAKQ,IAAIgE,YAEXxE,KAAKQ,IAAIkC,eAAeiW,aAAahZ,MjBjvB3CR,+BiBqvBUyZ,WACNxW,WAAW,WACT,IAAM1C,EAAkBqI,SACrBC,qBAAqB,2BACrB6Q,KAAK,GACJnZ,GACFA,EAAWoZ,SAEZ,KjB7vBP3Z,4BiBgwBUoZ,sBACN,GAA+B,MAA3BvY,KAAK0V,YAAYqD,IAAiB/Y,KAAKgZ,iBACzC,IAAMtZ,EAAaM,KAAK2L,YAAYhL,UAAUiB,OAC3Cb,QACCkY,KAAWtZ,mBAAiC,IAApBA,EAASsI,YACjC7D,KAAa,QACb8U,KAAK,IAENxX,UAAW/B,YACVD,EAAWuG,cACPtG,EAASsI,SAAWjI,EAAKmZ,4BAC3BnZ,EAAK4Y,oBACL5Y,EAAKmZ,kCjB5wBjBha,8BiBkxBUmZ,sBACN,GAAItY,KAAK0V,YAAYC,OAAW,CAK9B,GAJA3V,KAAKgZ,oBACkC,MAAnChZ,KAAK0V,YAAY0D,YACnBpZ,KAAKK,YAAYgZ,mCAEfrZ,KAAK0V,YAAYC,SAAc3V,KAAK0V,YAAYrL,MAAsC,MAA3BrK,KAAK0V,YAAYqD,GAC9E,IAAMrZ,EAAaM,KAAK2L,YAAYhL,UAAUiB,OAC3Cb,QACCkY,KAAWtZ,mBAAiC,IAApBA,EAASsI,YACjC7D,KAAa,QACb8U,KAAK,IAENxX,UAAW/B,YACVD,EAAWuG,cACX,IAAMrG,EAA0BD,EAC7B2D,OAAOxD,mBAAKA,EAAEmB,OAAOsC,KAAKC,WAAaC,QACvCjD,IAAKV,mBACJ,IAAII,KAAkBsI,YAAY1I,EAAOmB,OAAOC,KAAM,CACpDuH,eAAgB3I,EAAOmB,OAAOC,KAAKsD,WACnCkE,kBAAmB1I,EAAKQ,IAAIgE,eAG5B3E,KAAc4D,OAAwBzD,EAAKQ,IAAKZ,GACtDI,EAAKQ,IAAIkC,eAAeiW,aAAa9Y,KAG3CG,KAAK0X,cAAgB1X,KAAK0V,YAAYC,OAED,MAAnC3V,KAAK0V,YAAY4D,YACnBtZ,KAAKK,YAAY4C,8BAA8B5B,WjBhzBrDlC,4BiBozBUkZ,sBAkBN,GAjBIrY,KAAK0V,YAAY6D,MACnBvZ,KAAKwZ,cAAczY,QACjBkY,KAAUvZ,4BAAKA,OACf+Z,QACA/X,UAAUhC,YACLA,GACHM,EAAK6I,QAAQC,aAAa9I,EAAK0V,YAAY6D,QAKb,MAAhCvZ,KAAK0V,YAAYgE,SACnBtX,WAAW,WACTpC,EAAKoU,eACJ,KAGDpU,KAAK0V,YAAYiE,QAAY,CAC/B,IAGI9Z,EAHAH,KACEC,EAAaK,KAAK0V,YAAYiE,QAAWjB,MAAM,KAC/C9Y,EAAiBI,KAAK0V,YAAYkE,eAEpCha,IACFC,EAAkBga,SAASja,EAAe8Y,MAAM,WAAW,GAAI,KAEjE1Y,KAAK+I,eAAeC,WAAWE,kBAC5BnI,QAAKkY,KAAUnZ,mBAASA,OAAO2Z,QAC/B/X,UAAW5B,YACNA,IAASJ,IACXA,KACAC,EAAWa,IAAI,SAACT,EAAO2E,GACjBA,EAAI,MACNjB,OAAezD,EAAK+I,eAAeC,cAGvC5G,WAAW,WACTzC,EAAWa,IAAI,SAACT,EAAO2E,GACrB,IAAMI,EAAO9E,EAAK+I,eAAeC,WAAW5B,MAAM+B,KAAKpE,mBAAKA,EAAEqE,WAAa1E,IAC3EI,EAAK0E,KAAOzJ,EACZ+E,EAAKwE,YAAcvJ,EAAM2Y,MAAM,KAC/B1Y,EAAK+I,eAAeC,WAAW3B,OAAOvC,MAEJ,KAAnC9E,EAAK+I,eAAe+Q,iBAI7B9Z,KAAK+I,eAAegR,mBAAmBC,OACpCjZ,QAAKkY,KAAUnZ,mBAAKA,EAAI,OAAI2Z,QAC5B/X,UAAU5B,YACLA,GAAK,GACPE,EAAK+I,eAAekR,mBAAmB5Y,SAI7CrB,KAAK+I,eAAegR,mBAAmBC,OACpCjZ,QAAKkY,KAAUnZ,mBAAKA,EAAI,OAAI2Z,QAC5B/X,UAAU,WACL7B,IACFG,EAAK+I,eAAegR,mBAAmBhT,UAAU3F,MAAMZ,IAAIV,mBAAKA,EAAEoa,WAAW1N,YAC7ExM,EAAK+I,eAAegR,mBAAmBhT,UAAU3F,MAAMvB,GAAiBqa,WAAW1N,UACnFxM,EAAK+I,eAAekR,mBAAmB5Y,ajBj3BnDlC,mCiBu3BU+X,SAAsBxX,GAC5BM,KAAKma,4BAA4Bza,EAAQ,OACzCM,KAAKma,4BAA4Bza,EAAQ,QACzCM,KAAKma,4BAA4Bza,EAAQ,cACzCM,KAAKma,4BAA4Bza,EAAQ,mBACzCM,KAAKma,4BAA4Bza,EAAQ,kBACzCM,KAAKoa,sBAAsB1a,KjB73B/BP,2BiBg4BEkb,SAAc3a,EAAMC,GAClB,IAAIC,EACJ,OAAID,EAAIwI,SAAS,OAEfvI,EADmB,IAAI0a,KAAW,CAAEC,WAAY5a,EAAI+Y,MAAM,KAAK,KACvC7W,IAAInC,IAEvBE,IjBt4BXT,yCiBy4BUgb,SAA4Bza,EAAgBC,OAC9CC,EACAC,EAF8CF,OAGlD,OAAQA,OACD,OACED,EAAO4M,QAAa5M,EAAO8a,YAAiB9a,EAAO+a,SACtD5a,EAAU,SACVD,EAAqBF,EAAO8a,UAAe,YAAc,UAE3D,UACG,OACC9a,EAAOgb,YAAiBhb,EAAOib,UACjC9a,EAAU,UACVD,EAAqB,cAEvB,UACG,aACCF,EAAOkb,cAAmBlb,EAAOmb,YACnChb,EAAU,YACVD,EAAqB,gBAEvB,UACG,kBACCF,EAAOob,eAAoBpb,EAAOqb,aACpClb,EAAU,aACVD,EAAqB,iBAEvB,UACG,iBACCF,EAAOsb,eAAoBtb,EAAOub,aACpCpb,EAAU,aACVD,EAAqB,iBAI3B,GAAKA,GAAuBC,EAA5B,CAGA,IAAMC,EAAkBJ,EAAOE,GAAoB8Y,MAAM,OACnD3Y,EAAOL,EAAOG,GAAS6Y,MAAM,KAE/BhU,EAAM,EACV3E,EAAKgV,QAASjQ,YACZ,IAAIC,EAAMD,EACJE,EACJhF,EAAKqa,cAAc,UAAWtV,IAC9B/E,EAAKqa,cAAc,UAAWtV,WAE5BC,IACFD,EAAMA,EAAI0G,QAAQ,WAAazG,EAAS,IAAIyG,QAAQ,WAAazG,EAAS,KAM5EhF,EAHoCkb,uBAClCpb,EAAgB4E,IAEKqQ,QAAS1P,YAC9B,IAAMR,EAAeQ,EAAMqT,MAAM,SAC3BpT,EAAe6V,qBAA4B,CAC/C9R,OACA+R,IAAKrW,EACL2O,MAAO7O,EAAa,GACpBwW,OAAiB,QAAT1b,EAAiB,CAAE2b,OAAQzW,EAAa,aAE5CoL,KAAKxM,OAA4B6B,GACjC4K,EAAalQ,EAAKub,8BAA8B7b,EAAQuQ,GAC9DjQ,EAAKwb,gBACHzW,EACAF,EAAa,GACblF,EACAqF,EACAkL,EACArL,EAAa,GAAKgV,SAAShV,EAAa,GAAI,cAGhDH,GAAO,OjBn9BbvF,mCiBu9BUib,SAAsB1a,cAC5B,GAAIA,EAAO+b,OAAW,CACpB,IAAM9b,EAAMD,EAAO+b,OACb7b,EAAYD,EAAI+b,YAAY,KAC5B7b,EAAWF,EAAIgc,MAAM/b,EAAY,EAAGD,EAAIsI,QAE9CjI,KAAK4b,KAAK/Z,IAAV7B,UAAiBL,GAAO,CAAEkc,aAAc,SAAUna,UAAW5B,YAC3D,IAAMC,EAAO,IAAI+b,KAAK,CAAChc,GAAOD,EAAU,CACtCwJ,KAAMvJ,EAAKuJ,KACX0S,aAAcC,KAAKC,QAErBjc,EAAKkc,cAALlc,OAA0BD,GAAM2B,UAC7BgD,mBAAwB1E,EAAKmc,oBAAoBpc,EAAM2E,IACvDA,mBAAiB1E,EAAKoc,kBAAkBrc,EAAM2E,UjBp+BzDvF,iCiB0+BUgd,SAAoBzc,EAAYC,MACtC8D,OACE/D,EACAC,EACAK,KAAKQ,IACLR,KAAKqc,eACLrc,KAAKsc,mBjBh/BXnd,+BiBo/BUid,SAAkB1c,EAAYC,MACpC8D,OACE/D,EACAC,EACAK,KAAKqc,eACLrc,KAAKsc,mBjBz/BXnd,oCiB6/BU+b,SAAuBxb,GAC7B,IAAIC,EAAqBD,EACzB,OAGAC,GAHAA,EAAqBA,EAAmB4c,WAAW,KAC/C5c,EAAmB6c,OAAO,GAC1B7c,GACoC8c,SAAS,KAC7C9c,EAAmBgc,MAAM,GAAG,GAC5Bhc,GACsB+Y,MAAM,OjBrgCpCvZ,6BiBugCUqc,SACN9b,EACAC,EACAC,EACAC,GAEAE,WADAD,IACAC,kGAEA,GAAKC,KAAK2S,cAAV,CAGA,IAAMjO,EAAsB,CAC1BgY,2BACAC,kBACAC,eACAvT,OACA+R,OAEItW,EAAyB,eAATlF,GAAkC,oBAATA,GAAuC,mBAATA,EACzEmF,EAAgB,CAClB8X,QAAkB,SAATjd,EAAkB,eAC3Bkd,YAAWhY,EACXiY,YAAajY,EAAe,kBAC5B4O,MAAO/T,GAEI,QAATC,IACFmF,EAAgB,CAAEsW,OAAQ,CAAEC,OAAQ3b,EAAMqd,QAASnd,KAGrDkF,EAAgBoW,qBAA4BvX,OAAOC,OAAO,GAAIkB,EAAeL,IAE7E1E,KAAKsV,cAActR,KACjBhE,KAAK2K,aACFC,iBAAiB,CAChBqS,OAAQld,EACRkV,QAASnV,EACT+K,kBAEDnJ,UAAWsD,YACVhF,EAAKQ,IAAI0c,SAASlY,SjB9iC5B7F,2CiBmjCUoc,SACN7b,EACAC,GAEA,IAAMC,EAAcF,EAChBG,KACJ,IAAKD,IAAgBD,EACnB,OAAOE,EAET,IAAIC,EAAwB,GACxBC,EAAyB,GACzB2E,EAA0B,GAC1BI,EAA4B,GAChC,OAAIlF,EAAYud,gBACdrd,EAAwBF,EAAYud,eAElCvd,EAAYwd,kBACdrd,EAAyBH,EAAYwd,iBAKT,MAA1Btd,IACFD,MAE6B,MAA3BE,IACFF,MAIF6E,EAAgB5E,EAAsB4Y,MAAM,KAC5C5T,EAAkB/E,EAAuB2Y,MAAM,MAC3ChU,EAAc2Y,QAAQ1d,IAAkB,GAAM+E,EAAc2Y,QAAQ1d,EAAe2d,aAAc,KACnGzd,OAEEiF,EAAgBuY,QAAQ1d,IAAkB,GAAMmF,EAAgBuY,QAAQ1d,EAAe2d,aAAc,KACvGzd,MAEKA,MjBzlCXV,KiBylCWU,uCApgCEmQ,IAAezQ,wSAAfyQ,GAAe1Q,mDAuEMC,OAvEND,gBAmBOC,iBAoDDA,gsCDxKlCA,iDAAwBA,8hLC0FV,CChCL,IACLge,MAAQ,kBAAmB,IACzBA,MAAM,WAASA,MAAM,QACrBA,MACE,wBACAA,MAAM,CACJvL,OAAQ,YAGZuL,MACE,iCACAA,MAAM,CACJvL,OAAQ,YAGZuL,MACE,2CACAA,MAAM,CACJvL,OAAQ,cAGZuL,MACE,yBACAA,MAAM,CACJvL,OAAQ,aAGZuL,MACE,wBACAA,MAAM,CACJvL,OAAQ,cAGZuL,MACE,MACAA,MAAM,CACJvL,OAAQ,oBAGZuL,MACE,kCACAA,MAAM,CACJvL,OAAQ,2BAGZuL,MACE,iCACAA,MAAM,CACJvL,OAAQ,4BAGZuL,MAAW,YAAUA,MAAQ,gBAjG1BA,MAAQ,gBAAiB,IAC9BA,MACE,UACAA,MAAM,CACJrP,KAAM,aAGVqP,MACE,WACAA,MAAM,CACJrP,KAAM,cAGVqP,MAAW,YAAUA,MAAQ,eAKxBA,MAAQ,gBAAiB,IAC9BA,MAAM,WAASA,MAAM,QACrBA,MACE,wBACAA,MAAM,CACJvL,OAAQ,MACR,cAAe,YAGnBuL,MACE,iCACAA,MAAM,CACJvL,OAAQ,QACR,cAAe,cAGnBuL,MACE,2CACAA,MAAM,CACJvL,OAAQ,QACR,cAAe,cAGnBuL,MAAW,YAAUA,MAAQ,gBlBzCjCpe,ImBJOqe,GnBIPre,EmBDEE,WAAoBK,kCAFbM,kBAILA,KAAKyd,mBAAYzd,KAAKyK,cAAcrK,UAAU,qBAC5CJ,KAAKyK,cAAcrK,UAAU,6DANtBod,IAAYje,uCAAZie,GAAYle,0FCRzBC,6BACIA,soBCMJ,IAAMme,GAAiB,CACnB,CAAEC,KAAM,GAAIC,UAAWxe,GACvB,CAAEue,KAAM,QAASC,UAAWJ,IAC5B,CAAEG,KAAM,iBAAkBC,UAAWpe,IAWhCqe,GrBTT1e,2BqBSS0e,uCAAMA,gEANF,CAACC,aAAqBJ,GAAQ,CACrCK,oBAAqB,SACrBC,uBAAwB,YAEhBF,QrBPd3e,IsBSO8e,GtBTP9e,2BsBSO8e,uCAAMA,gEAVF,CACPC,KACAhU,KACAiU,KACAN,OtBHJ1e,IuBKOif,GvBLPjf,2BuBKOif,uCAAMA,gEARF,CACPF,KACAhU,ofCuBGmU,GxBtBPlf,WwBuBEE,WAAoBK,oCxBvBtBP,sCwByBEmf,SAAa5e,GACX,OAAOA,MxB1BXP,KwB0BWO,uCAJE2e,IAA6B9e,yCAA7B8e,GAA6BE,QAA7BF,GAA6BG,YxBtB1Crf,IwBgCOsf,GxBhCPtf,qEwBiCEuf,SAAUhf,GACR,OAAOif,mBAAmBjf,KxBlC9BP,yBwBqCEyf,SAAYlf,GACV,OAAOif,mBAAmBjf,KxBtC9BP,uBwByCE0f,SAAUnf,GACR,OAAOof,mBAAmBpf,KxB1C9BP,yBwB6CE4f,SAAYrf,GACV,OAAOof,mBAAmBpf,OxB9C9BP,KwBsDOyO,GxBtDPzO,8BwBkEEE,WACUK,EACAC,EACRC,EACmBC,EAEXC,EACRC,oBAEAif,cAAMnf,EAASD,IARPI,OACAA,oBAIAA,cAdVA,SAAkC,IAAIC,IAAwB,IAEtDD,sBAAsB,GAiB5BA,EAAKsc,gBAAgB2C,UAClBpd,IAAI7B,EAAKuM,QAAQxC,OACjBrI,UAAWoD,mBAAU9E,EAAKqM,OAAOhL,KAAKyD,KAEzC,IAAMJ,EAAc3E,EAAS8B,IAAIqd,MARjCnf,OASIC,EAAKmf,SAASlX,SACXvD,EAGHA,EAAYgO,cAAchR,UAAU,WAClC1B,EAAKof,oBAHPpf,EAAKof,mBAXTrf,ExBzEJZ,6BwBoFaigB,WArBT,OAAOpf,KAAKqM,OAAOgT,axB/DvBlgB,mBwB6FEuI,WACE,OAAOkG,EAAqBrH,KxB9FhCpH,qBwBiGEmgB,WACE,OAAO1R,EAAqBvE,OxBlGhClK,+BwBqGYogB,iBACF5f,EACJK,KAAKuM,QAAQ8O,QAAUrb,KAAKuM,QAAQ8O,OAAOmE,MACvCC,OAAOzf,KAAKuM,QAAQ8O,OAAOmE,cAE3B5f,EACJI,KAAKuM,QAAQ8O,QAAUrb,KAAKuM,QAAQ8O,OAAOqE,MACvCD,OAAOzf,KAAKuM,QAAQ8O,OAAOqE,cAG3B7f,GAA2B,QAAnBH,OAAK6M,QAAQ8O,kBAAM3b,WAAE2J,MAC7BrJ,KAAKuM,QAAQ8O,OAAOhS,KAAKoC,QAAQ,MAAO,IAAIkU,cAAcjH,MAAM,KAChE,CACE,WACA,gBACA,SACA,gBACA,gBACA,MACA,WACA,SAGR,MAAO,CACL3O,MAAO,+BACP6V,UAAW,8CACXT,SAAU,CACR,CACE9V,KAAM,WACNU,MAAO,eACP5E,KAAM,OACN0a,OAAQ,CACN,CACE9V,MAAO,uCACP3I,MAAO,WACP0e,SAAuC,IAA9BjgB,EAAMwd,QAAQ,YACvB0C,SAAU,CAAC,YAEb,CACEhW,MAAO,0CACP3I,MAAO,qBACP0e,SAAiD,IAAxCjgB,EAAMwd,QAAQ,sBACvB0C,SAAU,CAAC,uBAEb,CACEhW,MAAO,0CACP3I,MAAO,gBACP0e,SAA4C,IAAnCjgB,EAAMwd,QAAQ,iBACvB0C,SAAU,CAAC,gBAEb,CACEhW,MAAO,oCACP3I,MAAO,SACP0e,SAAqC,IAA5BjgB,EAAMwd,QAAQ,UACvB0C,SAAU,CAAC,UAEb,CACEhW,MAAO,4CACP3I,MAAO,gBACP0e,SAA4C,IAAnCjgB,EAAMwd,QAAQ,iBACvB0C,SAAU,CAAC,eAAgB,MAE7B,CACEhW,MAAO,oCACP3I,MAAO,gBACP0e,SAA4C,IAAnCjgB,EAAMwd,QAAQ,iBACvB0C,SAAU,CAAC,kBAAgB,QAE7B,CACEhW,MAAO,uCACP3I,MAAO,0BACP0e,SAAsD,IAA7CjgB,EAAMwd,QAAQ,2BACvB0C,SAAU,CAAC,4BAEb,CACEhW,MAAO,mCACP3I,MAAO,MACP0e,SAAkC,IAAzBjgB,EAAMwd,QAAQ,OACvB0C,SAAU,CAAC,QAEb,CACEhW,MAAO,wCACP3I,MAAO,WACP0e,SAAuC,IAA9BjgB,EAAMwd,QAAQ,YACvB0C,SAAU,CAAC,2BAAyB,aAEtC,CACEhW,MAAO,0CACP3I,MAAO,cACP0e,SAA0C,IAAjCjgB,EAAMwd,QAAQ,eACvB2C,aACAD,SAAU,CAAC,eAEb,CACEhW,MAAO,qCACP3I,MAAO,QACP0e,SAAoC,IAA3BjgB,EAAMwd,QAAQ,SACvB0C,SAAU,CAAC,SAEb,CACEhW,MAAO,oCACP3I,MAAO,oBACP0e,SAAgD,IAAvCjgB,EAAMwd,QAAQ,qBACvB0C,SAAU,CAAC,SAAU,UAAW,SAElC,CACEhW,MAAO,kCACP3I,MAAO,YACP0e,SAAwC,IAA/BjgB,EAAMwd,QAAQ,aACvB0C,SAAU,CAAC,QAAS,SAAU,YAAU,OAE1C,CACEhW,MAAO,mCACP3I,MAAO,aACP0e,SAAyC,IAAhCjgB,EAAMwd,QAAQ,cACvB0C,SAAU,CAAC,QAAS,SAAU,YAAU,MAAO,QAEjD,CACEhW,MAAO,kCACP3I,MAAO,YACP0e,SAAwC,IAA/BjgB,EAAMwd,QAAQ,aACvB0C,SAAU,CAAC,QAAS,SAAU,OAEhC,CACEhW,MAAO,oCACP3I,MAAO,cACP0e,SAA0C,IAAjCjgB,EAAMwd,QAAQ,eACvB0C,SAAU,CAAC,QAAS,SAAU,SAEhC,CACEhW,MAAO,kCACP3I,MAAO,KACP0e,SAAiC,IAAxBjgB,EAAMwd,QAAQ,MACvB0C,SAAU,CAAC,OAEb,CACEhW,MAAO,wCACP3I,MAAO,WACP0e,SAAuC,IAA9BjgB,EAAMwd,QAAQ,YACvB0C,SAAU,CAAC,eAIjB,CACE1W,KAAM,cACNU,MAAO,gBACP5E,KAAM,QACN0a,OAAQ,CACN,CACE9V,MAAO,IACP3I,MAAO,EACP0e,QAAmB,IAAVngB,GAEX,CACEoK,MAAO,IACP3I,MAAO,EACP0e,QAAmB,IAAVngB,IAAgBA,GAE3B,CACEoK,MAAO,KACP3I,MAAO,GACP0e,QAAmB,KAAVngB,GAEX,CACEoK,MAAO,KACP3I,MAAO,GACP0e,QAAmB,KAAVngB,GAEX,CACEoK,MAAO,KACP3I,MAAO,GACP0e,QAAmB,KAAVngB,KAIf,CACE0J,KAAM,cACNU,MAAO,QACP5E,KAAM,QACN0a,OAAQ,CACN,CACE9V,MAAO,OACP3I,MAAO,GACP0e,QAAmB,KAAVlgB,GAEX,CACEmK,MAAO,OACP3I,MAAO,GACP0e,QAAmB,KAAVlgB,IAAiBA,GAE5B,CACEmK,MAAO,OACP3I,MAAO,GACP0e,QAAmB,KAAVlgB,GAEX,CACEmK,MAAO,OACP3I,MAAO,GACP0e,QAAmB,KAAVlgB,GAEX,CACEmK,MAAO,QACP3I,MAAO,IACP0e,QAAmB,MAAVlgB,KAIf,CACEyJ,KAAM,cACNU,MAAO,iBACP5E,KAAM,MACN0a,OAAQ,CACN,CACE9V,MAAO,6CACP3I,MAAO,OACP0e,YAEF,CACE/V,MAAO,gDACP3I,MAAO,QACP0e,kBxBjUd3gB,oBwBiVEwW,SACEjW,EACAC,cAEMC,EAASI,KAAKigB,qBAAqBvgB,EAAMC,GAAW,IAC1D,OAAKC,EAAOiC,IAAI,QAAQoG,QAGxBjI,KAAKuM,QAAQ8O,OAAO6E,KAAOtgB,EAAOiC,IAAI,SAAW,IAE1C7B,KAAK4b,KAAK/Z,IAAV7B,UAAiBA,KAAK4f,UAAtB5f,YAA2C,CAAEqb,WAAUta,QAC5DC,KAAKnB,mBAA+BG,EAAKmgB,eAAetgB,EAAUH,QAClE0gB,MAAYvgB,YACV,QAAIwgB,MAAMC,aACVzgB,EAAIwgB,MAAMtW,MAAQ/J,EAAKsc,gBAAgB2C,UAAUsB,QAC/CvgB,EAAKuf,oBAAoBxV,OAErBlK,SAXD2gB,OAAG,MxBvVhBrhB,6BwBuWUigB,sBACN,OAAOpf,KAAK4b,KACT/Z,IADI7B,UACGA,KAAK4f,UADR5f,WAEJ0B,UAAWhC,YACV,IAAMC,EAAcK,EAAKmf,SAAShW,KAAMvJ,kBAAiB,SAAXA,EAAEuF,OAChDxF,EAAYkgB,OAAO9K,QAASnV,YAC1B,IAAMC,EAAQ,IAAI4gB,OAAJ,WAAe7gB,EAAEwB,MAAjB,YACRtB,EAAeJ,EAAM4D,OAAQvD,mBAAUF,EAAM6gB,KAAK3gB,KACxDH,EAAEogB,UAAYlgB,EAAamI,OAAS,EACpB,UAAZrI,EAAEwB,QACJpB,EAAK2gB,oBAAL3gB,EACM,IAAI4gB,IACN9gB,EACGU,IAAKT,mBAAMA,EAAE2Y,MAAM,OACnBmI,OAAO,SAAC9gB,EAAG2E,GAAJ,OAAU3E,EAAEmH,OAAOxC,KAC1BpB,OAAQvD,kBAAY,UAANA,SAKzBC,EAAK8gB,oBAAoBnhB,UxB3XjCR,kCwB+XU8gB,SACNvgB,EACAC,GAEA,IAAMC,EAAmBgE,OAAOC,OAC9B,CACEH,YACAqd,QACA/W,QACAX,KAEE,CAAC,WAAW,gBAAgB,SAAS,gBAAgB,MAAM,WAC3D,4BAA6B,uBAAwB,sBAAuB,2BAEhFrJ,KAAKqb,OACLrb,KAAKghB,oBAAoBthB,EAAMC,GAAW,IAAI0b,OAC9C,CACE4F,EAAGjhB,KAAKkhB,YAAYxhB,GACpBwgB,KAAMvgB,EAAQugB,OAIlB,GAAwB,SAApBtgB,EAAYuhB,IAAgB,CAC9B,QAAiCxhB,EAAQ6W,OAAzC,GAAO3W,EAAPuhB,KAAathB,EAAbshB,KAAmBrhB,EAAnBqhB,KAAyB1c,EAAzB0c,KACAxhB,EAAYuhB,IAAZvhB,UAAqBC,EAArBD,YAA6BE,EAA7BF,YAAqCG,EAArCH,YAA6CE,EAA7CF,YAAqDG,EAArDH,YAA6D8E,EAA7D9E,YAAqEC,EAArED,YAA6E8E,EAA7E9E,YAAqFC,EAArFD,YAA6FE,OAChE,UAApBF,EAAYuhB,YACdvhB,EAAYuhB,IAGrB,MAAI,aAAaT,KAAK9gB,EAAYqhB,KAChCrhB,EAAYyJ,KAAO,SAGd,IAAIiR,KAAW,CACpB+G,WAAYlG,qBAA4Bvb,GACxC0hB,QAAS,IAAI7C,OxBlanBtf,4BwBsaUghB,SAAezgB,EAA4BC,cACjD,OAAOD,EAAS6hB,SAAS/gB,IAAKZ,mBACrBI,EAAKwhB,UAAUlD,aAAate,EAAKyhB,aAAa7hB,EAAMD,EAAMD,QxBxavEP,0BwB4aUsiB,SACN/hB,EACAC,EACAC,GAEA,IAAMC,EAAaG,KAAK0hB,kBAAkBhiB,GACpCI,EAAK,CAACE,KAAK0H,QAAS7H,EAAWwJ,KAAMxJ,EAAW8hB,MAAM9X,KAAK,KAE3D9J,EAAYL,EAAKkiB,UAAU7X,OAASrK,EAAKwa,WAAW2H,IACpDnd,EAAehF,EAAKkiB,UAAUE,OAChC,YAAcpiB,EAAKkiB,UAAUE,OAAS,WACtC,GACEhd,EAAgBpF,EAAKkiB,UAAUG,OACjC,eAAiBriB,EAAKkiB,UAAUG,OAAS,WACzC,GAEJ,MAAO,CACL/a,OAAQhH,KACRkB,KAAM,CACJmI,KAAM5F,MACNe,WAAY,YACZd,SAAUhE,EAAKgE,SACf8S,OAAQ9W,EAAKqhB,KACb7G,aACA3W,KAAM,CACJgD,KACAwD,MAAOrK,EAAKwa,WAAW2H,MAG3Bte,KAAM,CACJC,SAAUC,MACV8C,KACAwD,MAAOrK,EAAKwa,WAAW2H,IACvBG,UAAWjiB,EAAY2E,EAAeI,EACtCkF,KAAMtK,EAAKsK,MAAQ,aACnBiY,MAAOviB,EAAKuiB,UAASxe,OAAsB9D,EAAK+L,OAAQhM,EAAKwa,WAAW2H,KACxEK,SACEtiB,EAAS2hB,SAAStZ,QAAUjI,KAAKuM,QAAQ8O,OAAOmE,OAAU,IACzDxf,KAAKuM,QAAQ8O,OAAO6E,KAAO,OxBldtC/gB,+BwBudUuiB,SAAkBhiB,GACxB,IAAMC,EAAawb,gBACjBzb,EAAKwa,WACLtM,EAAqBuU,qBAGvB,IAAKziB,EAAKgE,SACR,OAAOE,OAAOC,OAAO,CAAEwF,KAAM3J,EAAK0iB,OAASziB,GAG7C,IAOIE,EAcAC,EArBEF,EAGF,CACFyiB,WAAY,IAId,GAA2B,UAAvB3iB,EAAKgE,SAAS2F,KAChBxJ,EAAa4D,6BACX/D,EAAKgE,SAAS4F,YAAY,GAC1B5J,EAAKgE,SAAS4F,YAAY,QAEvB,CACL,IAAM5E,KAAQ6E,KAAe7J,EAAKgE,UAClC7D,EAAa4D,6BACXiB,EAAMhB,SAAS4F,YAAY,GAC3B5E,EAAMhB,SAAS4F,YAAY,IAM7BxJ,EADiB,WAAfJ,EAAK0iB,MACS3e,4BACd/D,EAAKwa,WAAW2H,IAAM,KAAOniB,EAAKwa,WAAWoI,cAEvB,kBAAf5iB,EAAK0iB,MACE3e,4BACd/D,EAAKwa,WAAW2H,IAAM,WAEA,QAAnBniB,EAAS0iB,MACE3e,4BACd,OAAS/D,EAAKwa,WAAW2H,KAEH,aAAfniB,EAAK0iB,MACE3e,4BACd/D,EAAKwa,WAAW2H,IAAM,QAGRpe,4BACd/D,EAAKwa,WAAW2H,KAAOniB,EAAKkiB,UAAU7X,OAI1CnK,EAAsByiB,WACpB,WACAxiB,EACA,oBACAG,KAAKsc,gBAAgB2C,UAAUsB,QAAQ,yBACvC,uBACAzgB,EACA,oBACAE,KAAKsc,gBAAgB2C,UAAUsB,QAAQ,wBACvC,OAEyB,UAAvB7gB,EAAKgE,SAAS2F,OAChBzJ,EAAsB2iB,iBAAmB9e,8BACvC/D,EAAKgE,SAAS4F,YAAY,GAC1B5J,EAAKgE,SAAS4F,YAAY,KAI9B,IAAMvJ,EAEF,CACFyiB,MACE,6BACAxiB,KAAKsc,gBAAgB2C,UAAUsB,QAAQ,sBACvC,gBAGJ,OAAO3c,OAAOC,OACZ,CAAEwF,KAAM3J,EAAK0iB,OACbziB,EACAC,EACAG,KxB5iBNZ,yBwBojBU+hB,SAAYxhB,cAIlB,OAFiBA,EAAK+iB,MAAM,kBAAoB,IAEhCC,KAAM7iB,YACpB,IAAMC,EAAaD,EAAQ8iB,UAAU,GACrC,OAAO3iB,EAAK2gB,oBAAoB+B,KAC7B3iB,mBACCA,EACG4f,cACAiD,UAAU,OACVnX,QAAQ,mBAAoB,MAC/B3L,EACG6f,cACAiD,UAAU,OACVnX,QAAQ,mBAAoB,UAKnC/L,EAAOA,EAAK+L,QAAQ,gBAAiB,KAGhC/L,EAAK+L,QAAQ,gDAAkC,MxB3kB1DtM,iCwBmlBU6hB,SACNthB,EACAC,GAEA,IAAMC,sDAAkCF,EAAM,QAC9C,OAAIE,IACFD,EAAQ0b,OAASzX,OAAOC,OAAOlE,EAAQ0b,QAAU,GAAI,CACnDhS,KAAMzJ,EAASiK,KAAK,QAIjBlK,MxB9lBXR,GwBsD0CsE,OACjCmK,MAAK,WACLA,QAAOnK,MACPmK,uBAAgC,0CAH5BA,IAAoBrO,0CAgBrB,WAASA,MACT8e,IAA6B9e,0CAjB5BqO,GAAoB2Q,QAApB3Q,GAAoB4Q,YA2R/BqE,OAHCC,MAAU,CACTC,cAAe,+FAKdC,mCxBpVL7jB,IwBsmBO8jB,GxBtmBP9jB,8BwBknBEE,WACUK,EACAC,EACRC,EACmBC,EACnBC,oBAEAkf,cAAMnf,EAASD,IANPI,OACAA,oBARVA,SAAkC,IAAIC,IAAwB,IAe5DD,EAAKsc,gBAAgB2C,UAClBpd,IAAI7B,EAAKuM,QAAQxC,OACjBrI,UAAWgD,mBAAU1E,EAAKqM,OAAOhL,KAAKqD,KAEzC,IAAM3E,EAAcD,EAAS+B,IAAIqd,MARjCpf,OASIE,EAAKmf,SAASlX,SACXlI,EAGHA,EAAY2S,cAAchR,UAAU,WAClC1B,EAAKof,oBAHPpf,EAAKof,mBAXTtf,ExBvnBJX,6BwBkoBaigB,WAnBT,OAAOpf,KAAKqM,OAAOgT,axB/mBvBlgB,mBwB2oBEuI,WACE,OAAOub,EAA4B1c,KxB5oBvCpH,qBwB+oBEmgB,WACE,OAAO2D,EAA4B5Z,OxBhpBvClK,+BwBmpBYogB,WACR,IAAM7f,EACJM,KAAKuM,QAAQ8O,QAAUrb,KAAKuM,QAAQ8O,OAAOhS,KACvCrJ,KAAKuM,QAAQ8O,OAAOhS,KAAKoC,QAAQ,MAAO,IAAIkU,cAAcjH,MAAM,KAChE,CAAC,WAAY,gBAAiB,MAAO,YAE3C,MAAO,CACL3O,MAAO,sCACP6V,UAAW,6CACXT,SAAU,CACR,CACE9V,KAAM,WACNU,MAAO,eACP5E,KAAM,OACN0a,OAAQ,CACN,CACE9V,MAAO,uCACP3I,MAAO,WACP0e,SAAuC,IAA9BpgB,EAAM2d,QAAQ,aAEzB,CACEtT,MAAO,oCACP3I,MAAO,SACP0e,SAAqC,IAA5BpgB,EAAM2d,QAAQ,UACvB2C,cAEF,CACEjW,MAAO,wCACP3I,MAAO,kBACP0e,SAA8C,IAArCpgB,EAAM2d,QAAQ,oBAEzB,CACEtT,MAAO,oCACP3I,MAAO,gBACP0e,SAA4C,IAAnCpgB,EAAM2d,QAAQ,kBAEzB,CACEtT,MAAO,mCACP3I,MAAO,MACP0e,SAAkC,IAAzBpgB,EAAM2d,QAAQ,QAEzB,CACEtT,MAAO,wCACP3I,MAAO,WACP0e,SAAuC,IAA9BpgB,EAAM2d,QAAQ,eAI7B,CACEhU,KAAM,cACNU,MAAO,SACP5E,KAAM,cACN0a,OAAQ,CACN,CACE9V,MAAO,QACP3I,MAAO,IACP0e,SAAU9f,KAAKuM,QAAQ2W,UAAsC,MAA1BljB,KAAKuM,QAAQ2W,UAElD,CACEnZ,MAAO,QACP3I,MAAO,IACP0e,QAAmC,MAA1B9f,KAAKuM,QAAQ2W,UAExB,CACEnZ,MAAO,OACP3I,MAAO,IACP0e,QAAmC,MAA1B9f,KAAKuM,QAAQ2W,UAExB,CACEnZ,MAAO,OACP3I,MAAO,IACP0e,QAAmC,MAA1B9f,KAAKuM,QAAQ2W,UAExB,CACEnZ,MAAO,OACP3I,MAAO,IACP0e,QAAmC,MAA1B9f,KAAKuM,QAAQ2W,gBxB/tBpC/jB,2BwBgvBEmP,SACE5O,EACAC,cAEMC,EAASI,KAAKigB,qBAAqBvgB,EAAQC,GAAW,IAC5D,OAAKC,EAAOiC,IAAI,QAAQoG,OAGjBjI,KAAK4b,KAAK/Z,IAAV7B,UAAiBA,KAAK4f,UAAtB5f,WAA0C,CAAEqb,WAAUta,QAC3DC,KAAKnB,mBACIG,EAAKmgB,eAAetgB,SAJtB2gB,OAAG,MxBtvBhBrhB,6BwB+vBUigB,sBACN,OAAOpf,KAAK4b,KACT/Z,IADI7B,UACGA,KAAK4f,UADR5f,WAEJ0B,UAAWhC,YACV,IAAMC,EAAcK,EAAKmf,SAAShW,KAAMvJ,kBAAiB,SAAXA,EAAEuF,OAChDxF,EAAYkgB,OAAO9K,QAASnV,YAC1BA,EAAEogB,UAAYtgB,EAAM2d,QAAQzd,EAAEwB,QAAmB,IAEnDpB,EAAK8gB,oBAAoBnhB,UxBvwBjCR,kCwB2wBU8gB,SACNvgB,EACAC,GAEA,OAAIA,EAAQujB,UAAYljB,KAAKuM,QAAQ2W,YACnCvjB,EAAQ0b,OAASzX,OAAOC,OAAOlE,EAAQ0b,QAAU,GAAI,CACnD8H,YAAaxjB,EAAQujB,UAAYljB,KAAKuM,QAAQ2W,YAI3C,IAAI5I,KAAW,CACpB+G,WAAYzd,OAAOC,OACjB,CACEsd,IAAKzhB,EAAOmK,KAAK,KACjBuZ,KAAM,WACN1f,YACAsG,SAEFrK,EAAQ0b,QAAU,GAClBrb,KAAKqb,YxB9xBblc,4BwBmyBUghB,SACNzgB,cAEA,OAAOA,EAAS6hB,SAAS/gB,IAAKb,mBACrBK,EAAKyhB,aAAa9hB,OxBvyB/BR,yBwB2yBUkkB,SAAY3jB,GAClB,IAAKM,KAAKmf,SAASlX,OACjB,MAAO,GAET,IAAItI,EAAW,GACf,OAAQD,EAAKwa,WAAW7Q,UACjB,kBACH1J,EAAWD,EAAKwa,WAAWoI,aAAe,oBAC1C,cAGA,IAAMziB,EAAOG,KADYmf,SAAShW,KAAMrJ,kBAAiB,SAAXA,EAAEqF,OACvB0a,OAAO1W,KAC7BrJ,mBAAMA,EAAEsB,QAAU1B,EAAKwa,WAAW7Q,OAEjCxJ,IACFF,EAAWK,KAAKsc,gBAAgB2C,UAAUsB,QAAQ1gB,EAAKkK,QAG7D,OAAOpK,IxB7zBXR,0BwBg0BUsiB,SAAa/hB,GACnB,IAAMC,EAAaK,KAAK0hB,kBAAkBhiB,GACpCE,EAASI,KAAKsjB,cAAc5jB,GAC5BG,EAAK,CAACG,KAAK0H,QAAS/H,EAAW0J,KAAM1J,EAAWgiB,MAAM9X,KAAK,KAE3D/J,EAAYJ,EAAKwa,WAAW2H,IAC5B9hB,EAAe,YAAcC,KAAKqjB,YAAY3jB,GAAQ,WAE5D,MAAO,CACLsH,OAAQhH,KACRkB,KAAM,CACJmI,KAAM5F,MACNe,WAAY,YACZd,SAAUhE,EAAKgE,SACf8S,SACA0D,aACA3W,KAAM,CACJgD,KACAwD,MAAOrK,EAAKwa,WAAW2H,MAG3Bte,KAAM,CACJC,SAAUC,MACV8C,KACAwD,MAAOrK,EAAKwa,WAAW2H,IACvBG,UAAWliB,EAAYC,EACvBiK,KAAMtK,EAAKsK,MAAQ,aACnBuZ,oBAAqBvjB,KAAKqjB,YAAY3jB,GAAO,KAAOA,EAAKwa,WAAW2H,QxB31B5E1iB,+BwBg2BUuiB,SAAkBhiB,GACxB,IAAMC,EAAawb,gBACjBzb,EAAKwa,WACL+I,EAA4Bd,qBAGxBviB,EAEF,CACF4iB,MACE,6BACAxiB,KAAKsc,gBAAgB2C,UAAUsB,QAAQ,sBACvC,gBAGJ,OAAO3c,OAAOC,OAAOlE,EAAYC,KxB/2BrCT,2BwBk3BUmkB,SACN5jB,GAEA,OAAOA,EAAKqhB,KACR,CAACrhB,EAAKqhB,KAAK,GAAIrhB,EAAKqhB,KAAK,GAAIrhB,EAAKqhB,KAAK,GAAIrhB,EAAKqhB,KAAK,exBt3B7D5hB,GwBsmBiDsE,OAExCwf,MAAK,kBACLA,QAAOxf,MACPwf,uBAAgC,0CAJ5BA,IAA2B1jB,0CAgB5B,WAASA,0CAhBR0jB,GAA2B1E,QAA3B0E,GAA2BzE,YA0ItCqE,OAHCC,MAAU,CACTC,cAAe,8FAKdC,0CxBnvBL7jB,IyBCOqkB,GzBDPrkB,2ByBCOqkB,uCAAMA,gEANF,CACPtF,SzBIJ/e,I0ByBOskB,G1BzBPtkB,2B0ByBOskB,uCAAMA,gEAjBF,CACPvF,KACAwF,KACAC,KACAC,KACAC,KACA3Z,KACAxJ,KACAA,KACAojB,MACApjB,KACA+C,MACA/C,S1BpBJvB,I2BqBO4kB,G3BrBP5kB,2B2BqBO4kB,uCAAMA,iCAAkBC,WAFjB1U,oCAdZ,CAAC,CACC2U,QAAS,2BACTC,SAAUtU,IAER,CAACqU,QAAQE,KAAeD,SAAS,IAEjC,CAAED,QAASE,KAAiBD,SAAU,KAE3CE,SAhBU,CACPV,KACAS,KACA1gB,MACAA,MACAkgB,MAeAD,wBCWGW,G5B5BPllB,2B4B4BOklB,uCAAMA,gEAlBF,CACPnG,KACAwF,KACAY,KACAT,KACAF,KACAzZ,KACAzG,MACAA,MACA/C,KACAA,KACA+C,MACA/C,yBCoBG6jB,G7B1CPplB,2B6B0COolB,uCAAMA,gEA3BF,CACPrG,KACAwF,KACAC,KACAC,KACAC,KACA3Z,KACAxJ,KACAA,KACAojB,MACApjB,KACA+C,MAEA+gB,MACAta,KACAzG,MACAA,MACA/C,KACAA,KACAuJ,KACAxG,gBACA4gB,O7BpCJllB,I8BsHO8hB,G9BtHP9hB,2B8BsHO8hB,uCAAMA,iEAzBA,IACTxd,SC/CK,CACLwgB,QAASxgB,MACTghB,WAxBG,SACLC,EACAhlB,EACAC,EACAC,EACAC,EACAC,GAEA,OAAO,IAAI8N,GACT8W,EACAhlB,EACAC,EACAC,EAAOQ,UAAPR,wBAAkCgO,QAClC/N,EACAC,IAWA6kB,SACAC,KAAM,CACJtK,KACApQ,KACAA,KACAA,KACAmU,GACA9e,WDuCFkE,YACAA,YACAA,YACAA,YACAA,YACAA,YACAA,YACAA,SAEAA,SACAA,SC5FK,CACLwgB,QAAS5F,GACToG,WAZG,SACLC,GAEA,OAAO,IAAIrG,GAA8BqG,IAUvCE,KAAM,CAAC1a,UD2FPzG,SACAA,MACAmK,MACAnK,OAAwB,CACtBka,KAAM,8BAETyG,SA7DQ,CACPlG,KACA2F,KACAF,KACAD,KACAxZ,KACAzG,MACAA,MACA/C,KACAA,KACAuJ,KACA6Z,MACAA,MACA1F,GACA2F,GACAtgB,MACA/C,KACA+C,MACAA,gBACAA,gBACAqgB,MACAF,KACAO,KACAzjB,KACA+C,MACA+f,GACAC,GACAc,GACA7jB,KACAA,KACAA,KACAA,KACAA,KACAA,KAEAuJ,KACAA,KACAA,KACAA,S9B3FJ9K,IgCmBO0lB,GhCnBP1lB,2BgCmBO0lB,uCAAMA,gEAbF,CACP3G,KACAL,GACAoD,GACAhD,GACAG,GACAD,MAIAN,MCCG,IAAMiH,GAA2B,CACtCC,cACAC,IAAK,CACHC,IAAK,CACH7T,kBAEF8T,SAAU,CACRC,OAAQ,CAAC,YAAa,yBAExBC,cAAe,CACbC,UAAW,CACTrF,cAEFsF,cAAe,CACbxF,WACAE,cAEFuF,SAAU,CACR3F,UAAW,8CACX4F,MAAO,EACPnK,OAAQ,CACNmE,MAAO,MAGXiG,mBAAoB,CAClBC,yBAEFC,gBAAiB,CACfD,wBACA9F,UAAW,6CACX4F,MAAO,EACP1F,YAEF8F,OAAQ,CACNhG,UAAW,qDACX4F,MAAO,EACPnK,OAAQ,CACNmE,MAAO,MAGXqG,SAAU,CACR/F,aAGJgG,YAAa,CACX,CACEnE,KAAM,aACNoE,MAAO,iBACPC,IACE,qIAEFxP,OAAQ,EAAC,OAAS,MAAO,SAAU,YAErC,CACEmL,KAAM,YACNoE,MAAO,cACPC,IACE,wIAEFxP,OAAQ,CAAC,WAAY,YAAa,aAAc,gBAGpD1S,mBAAoB,CAClBC,KAAM,CACJkiB,YAAa,UACbC,cAAe,GACfC,mBAAoB,UACpBC,UAAW,UACXC,YAAa,GACbC,YAAa,UACbC,cAAe,GACfC,YAAa,GAEfhhB,MAAO,CACLygB,YAAa,UACbC,cAAe,EACfC,mBAAoB,UACpBC,UAAW,UACXC,YAAa,GACbC,YAAa,UACbC,cAAe,EACfC,YAAa,GAEf9gB,UAAW,CACTugB,YAAa,UACbC,cAAe,EACfC,mBAAoB,UACpBC,UAAW,UACXC,YAAa,GACbC,YAAa,UACbC,cAAe,EACfC,YAAa,IAGjBC,kBAAmB,CACjB1iB,KAAM,CACJkiB,YAAa,UACbC,cAAe,GACfC,mBAAoB,UACpBC,UAAW,UACXC,YAAa,GACbC,YAAa,UACbC,cAAe,GACfC,YAAa,GAEfhhB,MAAO,CACLygB,YAAa,UACbC,cAAe,EACfC,mBAAoB,UACpBC,UAAW,UACXC,YAAa,GACbC,YAAa,UACbC,cAAe,EACfC,YAAa,GAEf9gB,UAAW,CACTugB,YAAa,UACbC,cAAe,EACfC,mBAAoB,UACpBC,UAAW,UACXC,YAAa,GACbC,YAAa,UACbC,cAAe,EACfC,YAAa,kBChJdE,GlCIPvnB,WkCCEE,WACUK,EACEC,aADFK,qBACEA,uBACRA,KAAK2mB,gBlCJXxnB,uCkCOEwnB,WACE3mB,KAAK4mB,WAAa5mB,KAAKyK,cAAcrK,UAAU,eAC/CJ,KAAK6mB,gBAAkB7mB,KAAKyK,cAAcrK,UAAU,wBlCTxDjB,KkCSwDunB,uCAb3CA,IAAennB,mDAAfmnB,GAAepnB,6tBCR5BC,yBACCA,iBACCA,iBACCA,iBACCA,eACgBA,iBAEJA,QACZA,iBACAA,eAAsEA,8BAA8BA,QACrGA,QACAA,kBACCA,iBAECA,eAAIA,uCAAoIA,gCAAkCA,QAAIA,QAC/KA,QACDA,QACAA,iBAAmEA,cAAGA,gCAA8BA,QAAIA,QACzGA,QACDA,QACDA,eAfqDA,yCAGVA,8CAC+BA,0CAKMA,+DAA6DA,gDAGpEA,0sICVlEunB,GpCKP3nB,EoCFEE,uBAFOW,WAAQ,kDADJ8mB,iCAAaxnB,goBCP1BC,yBACEA,iBACEA,iBACEA,eAA+EA,kBAACA,QAChFA,iBACIA,eAAqHA,mBAAOA,QAC5HA,eAAkEA,iBAAKA,QACvEA,gBAA2FA,2BAAcA,QAC7GA,QACAA,gBAAgGA,mBAACA,QACnGA,QACFA,QACFA,QACAA,iCARsFA,s2DCHtFA,mDAEAA,6CAEAA,2CAA6BA,0DtCM7BJ,IuCIO4nB,GvCJP5nB,WuCcEE,WACYK,EACFC,EACAC,EACAC,EACAC,EACAC,aALEC,uBACFA,qBACAA,gBACAA,oBACAA,mBACAA,sBAdFA,gBAAa,aACdA,kBACAA,kBACAA,gBAaNA,KAAKsc,gBAAgB2C,UAAU+H,eAAehnB,KAAKsc,gBAAgB2K,eAAevlB,YAEjF1B,KAAKknB,kBACLlnB,KAAKmnB,kBACLnnB,KAAKonB,wBAELpnB,KAAKqnB,mBAELrnB,KAAKyd,mBAAYzd,KAAKyK,cAAcrK,UAAU,qBAC5CJ,KAAKyK,cAAcrK,UAAU,oBAE/BJ,KAAK4Q,mBAAY5Q,KAAKyK,cAAcrK,UAAU,cAC5CJ,KAAKyK,cAAcrK,UAAU,aAE/BJ,KAAKsnB,iBAAUtnB,KAAKyK,cAAcrK,UAAU,YAC1CJ,KAAKyK,cAAcrK,UAAU,WvCrCnCjB,yCuCwCU+nB,sBACNlnB,KAAKsc,gBAAgB2C,UAAUpd,IAAI7B,KAAKyK,cAAcrK,UAAU,UAAUsB,UAAUhC,YAC9EA,IACFM,EAAKunB,aAAaC,SAAS9nB,GAC3BM,EAAKynB,YAAYC,OAAO,CAAEviB,KAAM,QAASwiB,QAASjoB,SvC5C1DP,6BuCiDUgoB,WACN,IAAMznB,EAAQM,KAAKyK,cAAcrK,UAAU,UAAYJ,KAAK4nB,WACxDloB,GACFM,KAAK6nB,SAASC,SAAS/f,SAASggB,KAAMroB,KvCpD5CP,mCuCwDUioB,WACN,IAAM1nB,EAAcM,KAAKyK,cAAcrK,UAAU,eAC7CV,GACFM,KAAKynB,YAAYC,OAAO,CAAEviB,KAAM,cAAewiB,QAASjoB,MvC3D9DP,8BuC+DUkoB,sBAQN,GAPmBlM,eAAoB,CACrClW,GAAI,OACJ+iB,OAAQ,MACRC,QAAS,MACTC,OAAQ,SAGM,CACd,IAAMvoB,EAAYK,KAAKsc,gBAAgB2C,UACjCrf,EAASD,EAAUkC,IAAI,oBACvBhC,EAAWF,EAAUkC,IAAI,yBAC/BsmB,OAAIvoB,EAAQC,GACTkB,QACCC,KAAI,+BAAuB,CACzB+I,MADEqe,KAEFC,QAFED,SAKL1mB,UAAW5B,mBACVE,EAAKqc,eAAeiM,MAAMxoB,EAAIuoB,QAASvoB,EAAIiK,MAAO,CAChDwe,QAAS,cvCpFrBppB,KuCoFqB4nB,uCAhFRA,IAAYxnB,oGAAZwnB,GAAYznB,iDAOSC,OAPTD,eAOSC,qMDvBlCA,yBAEAA,+BAEAA,6BAEAA,sCAJaA,mCAEFA,iCAEEA,83BtCMbJ,IwCuCOqpB,GxCvCPrpB,2BwCuCOqpB,uCAAMA,iCAASxE,WAFR+C,oCAVD,IACT7c,MAAqB,CACnBue,QAAS3D,OACTnH,KAAM,yBAERzT,QACAzG,OAAwB,CACtBka,KAAM,8BAETyG,SAvBQ,CACPnlB,KACAypB,KACA5K,aAAqB,IACrB5T,eACAA,KACAxJ,KACAA,KACAugB,GACAhiB,KACAgf,GACAG,GACAyG,gBC7BAC,kBACFvlB,SAGFN,OACG0pB,gBAAgBH,IADnBvpB,MAESylB,mBAAOkE,QAAQC,IAAInE,4BCd5B,OACA,uBACA,yBACA,yBACA,sBACA,sBACA,8BACA,kBACA,uBACA,yBACA,0BACA,uBACA,sBACA,8BACA,mBAIA,cACA,WACA,YAEA,cACA,cACA,8CACA,gCACAxG,EAEA,YAEA3e,kBACA,uBAEAA,YACAJ,YACAI,kCCnCA,OACA,aACA,gBACA,aACA,gBACA,mBACA,gBACA,mBACA,gBACA,mBACA,gBACA,mBACA,gBACA,mBACA,gBACA,mBACA,gBACA,aACA,gBACA,aACA,gBACA,aACA,gBACA,aACA,gBACA,aACA,gBACA,mBACA,gBACA,aACA,gBACA,aACA,gBACA,aACA,gBACA,aACA,gBACA,aACA,gBACA,aACA,gBACA,aACA,gBACA,YACA,eACA,aACA,gBACA,mBACA,gBACA,mBACA,gBACA,aACA,gBACA,YACA,eACA,gBACA,mBACA,gBACA,mBACA,gBACA,mBACA,gBACA,mBACA,gBACA,mBACA,gBACA,mBACA,gBACA,mBACA,gBACA,mBACA,aACA,gBACA,aACA,gBACA,mBACA,gBACA,mBACA,gBACA,mBACA,gBACA,aACA,gBACA,aACA,gBACA,aACA,gBACA,aACA,gBACA,cACA,iBACA,aACA,gBACA,aACA,gBACA,mBACA,gBACA,mBACA,gBACA,aACA,gBACA,aACA,gBACA,aACA,gBACA,aACA,gBACA,mBACA,sBACA,mBACA,sBACA,aACA,gBACA,aACA,gBACA,aACA,gBACA,aACA,gBACA,aACA,gBACA,gBACA,mBACA,aACA,gBACA,aACA,gBACA,aACA,eACA,kBACA,gBACA,aACA,gBACA,WACA,cACA,aACA,gBACA,aACA,gBACA,aACA,gBACA,aACA,gBACA,aACA,gBACA,aACA,gBACA,aACA,gBACA,aACA,gBACA,aACA,gBACA,aACA,gBACA,aACA,gBACA,aACA,gBACA,aACA,gBACA,aACA,gBACA,aACA,gBACA,aACA,gBACA,aACA,gBACA,aACA,gBACA,mBACA,gBACA,YACA,eACA,YACA,eACA,YACA,eACA,aACA,gBACA,aACA,gBACA,mBACA,gBACA,aACA,gBACA,iBACA,oBACA,gBACA,mBACA,aACA,gBACA,aACA,gBACA,mBACA,gBACA,aACA,gBACA,aACA,gBACA,aACA,gBACA,aACA,gBACA,aACA,gBACA,aACA,gBACA,aACA,gBACA,aACA,gBACA,aACA,kBACA,qBACA,gBACA,aACA,gBACA,aACA,gBACA,YACA,eACA,aACA,gBACA,aACA,gBACA,cACA,iBACA,aACA,gBACA,aACA,gBACA,aACA,gBACA,gBACA,mBACA,cACA,iBACA,aACA,gBACA,cACA,iBACA,cACA,mBACA,sBACA,iBACA,gBACA,mBACA,aACA,gBACA,aACA,gBACA,aACA,kBACA,qBACA,gBACA,aACA,gBACA,mBACA,sBACA,aACA,gBACA,gBACA,mBACA,gBACA,mBACA,gBACA,mBACA,gBACA,oBAIA,cACA,WACA,YAEA,cACA,cACA,8CACA,gCACA2e,EAEA,YAEA3e,kBACA,uBAEAA,YACAJ,YACAI","names":["b","Z","_","ne","constructor","selectors","e","ae","B","t","o","i","n","a","l","this","v","_e","hasFeatureEmphasisOnSelection","getConfig","searchState","store","mapState","map","feature","d","stateView","firstBy$","state","focused","pipe","be","entity","data","topPanelState$","value","next","searchTermSplitter$","ngOnInit","searchTerm$$","searchTerm$","subscribe","term","all$","get","selected","topPanelState","searchSettingsChange$","settingsChange$","topPanelState$$","computeElementRef","setTimeout","isScrolledIntoView","adjustTopPanel","focusedOrResolution$$","se","focusedResult$","viewController","resolution$","buildResultEmphasis","selectedOrResolution$$","selectedResult$","monitorResultOutOfView","showResultsGeometries$$","searchResultsGeometryEnabled$","clearFeatureEmphasis","shownResultsGeometries","queryResultsOverlay","removeFeature","filter","meta","dataType","r","geometry","style","Object","assign","searchOverlayStyle","base","push","addFeature","debouncedEmpty$$","empty$","I","debouncedEmpty$","isSelectedResultOutOfView$$","state$","projection","isSelectedResultOutOfView$","p","getGeometry","getExtent","T","g","x","P","ie","Fe","name","Ae","O","U","searchOverlayStyleFocus","focus","searchOverlayStyleSelection","selection","setZIndex","searchResultsOverlay","abstractFocusedResult","abstractSelectedResult","shownResultsEmphasisGeometries","ngOnDestroy","unsubscribe","getRoute$$","onResultFocus","dataSource","ol","getFeatureById","id","setStyle","onResultUnfocus","onResultSelect","clear","tryAddFeatureToMap","onSearch","results","entities$","source","research","concat","load","all","update","elRef","nativeElement","querySelector","request","getId","scrollTop","offsetTop","offsetHeight","clientHeight","document","getElementsByTagName","length","className","includes","children","toggleTopPanel","zoomToFeatureExtent","format","readFeature","dataProjection","featureProjection","getRoute","toolState","toolbox","activateTool","directionState","stopsStore","clearStops","storeInitialized$","find","position","type","coordinates","we","text","featureTitle","geolocationController","position$","xe","join","Ee","title","icon","f","u","le","center","zoom","mapService","setMap","showMenuButton","configService","hasToolbox","layerService","createAsyncLayer","sourceOptions","osmLayer","_map","_opened","openedChange","emit","mediaService","isTouchScreen","onPointerSummaryStatusChange","igoSearchPointerSummaryEnabled","onSearchTermChange","arguments","replace","trim","searchStore","selectedFeature","updateAll","updateMany","onSearchSettingsChange","setFeatures","activeTool$$","activeTool$","catalogState","catalogStore","title$","layers","options","active","toolChange","handler","onSearchCoordinate","bind","onOpenGoogleMaps","args","onOpenGoogleStreetView","destroy","onPreviousButtonClick","activatePreviousTool","onUnselectButtonClick","deactivateTool","removeFeatureFromMap","onContextMenuOpen","mapPosition","getMap","getCoordinateFromPixel","mapProjection","lonlat","y","mapBrowser","getBoundingClientRect","top","window","scrollY","left","scrollX","onPointerSearch","searchService","reverseSearch","_loop","open","toggle","ce","ngAfterViewInit","context$$","contextService","context$","handleContextChange","context","media$$","media$","mapOverlay","media","getMedia","Q","toggleDialog","dialog","getDialogById","dialogRef","close","Y","hasBackdrop","closeOnNavigation","pe","N","ye","Se","yt","St","Ct","_t","wt","Ot","storageService","pageSize","pageSizeOptions","hasFooter","hasLegendButton","hasSideSearch","showSearchBar","hasExpansionPanel","hasHomeExtentButton","hasGeolocateButton","showRotationButtonIfNoRotation","forceCoordsNA","getBaseLayersUseStaticIcon","sidenavOpened$","isMobile","isTablet","isLandscape","getOrientation","isPortrait","sidenavOpened","workspaceState","workspacePanelExpanded","setPadding","bottom","expansionPanelExpanded","toastPanelForExpansionOpened","workspace$","actionbarMode","IGO","once","tracking","termSplitter","authService","authenticate$","contextLoaded","contextState","onChangeContext","searchCoordinate","contextMenuCoord","openGoogleMaps","openGoogleStreetView","contextMenuStore","readQueryParams","onSettingsChange$","setSearchSettingsChange","closeSidenav","workspaceEnabled$","updateMapBrowserClass","selectedWorkspace$","layer","workspace","paginatorOptions","activeWidget$$","activeWorkspaceWidget$","openToastPanelForExpansion","showToastPanelForExpansionToggle","closeToastPanelForExpansion","openSidenav$$","openSidenav$","openSidenav","sidenavMediaAndOrientation$$","orientation$","computeToastPanelOffsetX","Promise","resolve","then","toastPanelOffsetX$","getToastPanelExtent","createFeatureProperties","sourceFields","forEach","primary","visible","entitySortChange","workspaceEntitySortChange$","workspaceMaximize$$","cancelOngoingAddLayer","addedLayers$$","onBackdropClick","onToggleSidenavClick","toggleSidenav","routeParams","search","deactivateCustomFilterTermStrategy","setSearchTerm","onClearSearch","onBeforeSearch","searchSourceService","getEnabledSources","padding","toolChanged","searchBar","computeHomeExtentValues","view","homeExtent","extent","homeCenter","homeZoom","entityStore","empty","queryState","softClear","route","queryParams","uri","readLayersQueryParams","getTool","toolToOpenOnContextChange","_i3","setSelectedResult","getClickCoordinate","pageYOffset","pageXOffset","searchBarTerm","toFixed","classList","add","remove","workspaceMaximize$","toastPanelHtmlDisplay","isDesktop","fullExtent","set","getControlsOffsetY","readToolParams","readSearchParams","readFocusFirst","computeZoomToExtent","zoomExtent","split","zoomToExtent","computeFocusFirst","item","click","sf","termDefinedInUrl","z","Ce","termDefinedInUrlTriggered","exactMatch","activateCustomFilterTermStrategy","searchGeom","tool","matDialogRef$","fe","sidenav","routing","routingOptions","parseInt","debounceTime","routesFeatureStore","count$","zoomToActiveRoute$","properties","readLayersQueryParamsByType","readVectorQueryParams","getQueryParam","E","fromString","wmsLayers","wmsUrl","wmtsLayers","wmtsUrl","arcgisLayers","arcgisUrl","iarcgisLayers","iarcgisUrl","tarcgisLayers","tarcgisUrl","extractLayersByService","H","url","params","LAYERS","computeLayerVisibilityFromUrl","addLayerFromURL","vector","lastIndexOf","slice","http","responseType","File","lastModified","Date","now","importService","onFileImportSuccess","onFileImportError","messageService","languageService","startsWith","substr","endsWith","optionsFromCapabilities","optionsFromApi","crossOrigin","version","queryable","queryFormat","VERSION","zIndex","addLayer","visiblelayers","invisiblelayers","indexOf","toString","h","ue","hasHeader","nt","path","component","F","C","onSameUrlNavigation","relativeLinkResolution","L","m","ge","A","j","formatResult","factory","ɵfac","st","encodeKey","encodeURIComponent","encodeValue","decodeKey","decodeURIComponent","decodeValue","super","translate","ve","settings","getAllowedTypes","getValue","getType","getDefaultOptions","limit","Number","ecmax","toLowerCase","searchUrl","values","enabled","hashtags","available","computeRequestParams","page","extractResults","at","error","toDisplay","instant","Pe","RegExp","test","hashtagsLieuxToKeep","Set","reduce","setParamFromSetting","bbox","computeOptionsParam","q","computeTerm","loc","_o$extent","fromObject","encoder","features","formatter","dataToResult","computeProperties","code","highlight","nom","title2","title3","titleHtml","score","nextPage","propertiesBlacklist","index","GoogleMaps","municipalite","GoogleStreetView","Route","match","some","substring","normalize","Ze","Me","maxCacheCount","Te","w","distance","bufferInput","sort","getSubtitle","computeExtent","pointerSummaryTitle","V","X","R","k","G","D","$","W","bootstrap","provide","useValue","M","imports","K","ht","ee","dt","useFactory","s","multi","deps","te","je","production","igo","app","language","prefix","searchSources","nominatim","storedqueries","icherche","order","coordinatesreverse","showInPointerSummary","icherchereverse","ilayer","cadastre","projections","alias","def","markerColor","markerOpacity","markerOutlineColor","fillColor","fillOpacity","strokeColor","strokeOpacity","strokeWidth","queryOverlayStyle","he","computeHeader","headerLogo","headerLogoPrint","de","me","getTranslation","getLanguage","readTitleConfig","readThemeConfig","readDescriptionConfig","detectOldBrowser","hasMenu","titleService","setTitle","metaService","addTag","content","themeClass","renderer","addClass","body","chrome","firefox","safari","mt","_ref2","message","alert","timeOut","oe","default","S","bootstrapModule","console","log"],"sources":["webpack:///$_lazy_route_resources|lazy|groupOptions:%20%7B%7D|namespace%20object","webpack:///src/app/pages/menu/menu-pages/home/home.component.ts","webpack:///src/app/pages/menu/menu-pages/home/home.component.html","webpack:///src/app/pages/menu/menu-pages/about/about.component.ts","webpack:///src/app/pages/menu/menu-pages/about/about.component.html","webpack:///src/app/pages/portal/sideresult/search-results-tool/search-results-tool.component.html","webpack:///src/app/pages/portal/sideresult/search-results-tool/search-results-tool.component.ts","webpack:///src/app/pages/portal/sideresult/sideresult.component.html","webpack:///src/app/pages/portal/sideresult/sideresult.component.ts","webpack:///src/app/pages/portal/map-overlay/map-overlay.component.html","webpack:///src/app/pages/portal/map-overlay/map-overlay.component.ts","webpack:///src/app/pages/portal/legend-button/legend-button.component.ts","webpack:///src/app/pages/portal/legend-button/legend-button.component.html","webpack:///src/app/pages/portal/legend-button/legend-button-dialog.component.html","webpack:///src/app/pages/footer/footer.component.ts","webpack:///src/app/pages/footer/footer.component.html","webpack:///src/app/pages/portal/portal.component.html","webpack:///src/app/pages/portal/portal.component.ts","webpack:///src/app/pages/portal/portal.animation.ts","webpack:///src/app/pages/menu/menu-pages/map/map.component.ts","webpack:///src/app/pages/menu/menu-pages/map/map.component.html","webpack:///src/app/pages/menu/menu-routing/menu-routing.module.ts","webpack:///src/app/pages/header/header.module.ts","webpack:///src/app/pages/footer/footer.module.ts","webpack:///src/app/pages/portal/icherche/icherche.ts","webpack:///src/app/pages/portal/map-overlay/map-overlay.module.ts","webpack:///src/app/pages/portal/sidenav/sidenav.module.ts","webpack:///src/app/pages/portal/legend-button/legend-button.module.ts","webpack:///src/app/pages/portal/sideresult/search-results-tool/search-results-tool.module.ts","webpack:///src/app/pages/portal/sideresult/sideresult.module.ts","webpack:///src/app/pages/portal/portal.module.ts","webpack:///src/app/pages/portal/icherche/icherche.providers.ts","webpack:///src/app/pages/menu/menu.module.ts","webpack:///src/environments/environment.github.ts","webpack:///src/app/pages/header/header.component.ts","webpack:///src/app/pages/header/header.component.html","webpack:///src/app/pages/menu/menu.component.ts","webpack:///src/app/pages/menu/menu.component.html","webpack:///src/app/app.component.html","webpack:///src/app/app.component.ts","webpack:///src/app/app.module.ts","webpack:///src/main.ts","webpack:///node_modules/@igo2/core/locale|sync|/^/.*/.json$","webpack:///node_modules/moment/locale|sync|/^/.*$"],"sourcesContent":["function webpackEmptyAsyncContext(req) {\n\t// Here Promise.resolve().then() is used instead of new Promise() to prevent\n\t// uncaught exception popping up in devtools\n\treturn Promise.resolve().then(function() {\n\t\tvar e = new Error(\"Cannot find module '\" + req + \"'\");\n\t\te.code = 'MODULE_NOT_FOUND';\n\t\tthrow e;\n\t});\n}\nwebpackEmptyAsyncContext.keys = function() { return []; };\nwebpackEmptyAsyncContext.resolve = webpackEmptyAsyncContext;\nwebpackEmptyAsyncContext.id = 98255;\nmodule.exports = webpackEmptyAsyncContext;","import { Component } from '@angular/core';\n\n@Component({\n  selector: 'app-menu-home',\n  templateUrl: './home.component.html'\n})\nexport class HomeComponent {\n  getHomeComponent: any;\n\n  constructor() { }\n\n}\n","<div class=\"container-fluid page\">\n    <div class=\"container\">\n        <div class=\"row\">\n            <h1 class=\"d-block themeTitre\">Accueil</h1>\n            <h2>Infrastructure géomatique ouverte 2.0 (IGO2) / Open GIS Infrastructure 2.0</h2>\n            <h4>Qu'est-ce qu'IGO?</h4>\n            <p>IGO2 est une solution Web gratuite en géomatique basée sur Angular - Material, OpenLayers et IGO2lib. IGO2 permet de tirer profit d’une multitude de données géographiques grâce à une interface cartographique accessible par un navigateur Web sur un poste de travail et par un appareil mobile. IGO2 a été initié par l'administration publique du Québec (Canada) et issu d’un travail collaboratif basé sur la philosophie des logiciels libres et ouverts (« open source »). Les membres du public en géomatique et du Web qui soumettent des contributions conservent leurs droits d'auteur s'ils partagent leur code source selon la LICENCE LiLiQ-R de type LGPL.</p>\n            <p style=\"display:inline;\">Téléchargement et code source : <a style=\"display:inline;\" href=\"https://github.com/infra-geo-ouverte/igo2\" target=\"_blank\" rel=\"noreferrer\">https://github.com/infra-geo-ouverte/igo2<!--img class=\"linkExtImg\" src=\"../../../../../assets/images/lien-externe.svg\" alt=\"Cet hyperlien s'ouvrira dans une nouvelle fenêtre.\"--></a></p>\n        </div>\n    </div>\n</div>\n\n","import { Component } from '@angular/core';\n\n@Component({\n  selector: 'app-about',\n  templateUrl: './about.component.html'\n})\nexport class AboutComponent {\n\n  constructor() { }\n\n}\n","<div class=\"container-fluid page\">\n    <div class=\"container\">\n        <div class=\"row\">\n            <h1 class=\"d-block themeTitre\">En savoir plus</h1>\n            <h2>Titre</h2>\n\n            <p>Paragraphe : Lorem ipsum dolor sit amet, consectetur adipiscing elit. Tu enim ista lenius, hic Stoicorum more nos vexat. Quo studio Aristophanem putamus aetatem in litteris duxisse? Honesta oratio, Socratica, Platonis etiam. Vitiosum est enim in dividendo partem in genere numerare. <i>Non est igitur voluptas bonum.</i> Duo Reges: constructio interrete. Non autem hoc: igitur ne illud quidem. <b>Magna laus.</b> <b>Quis istum dolorem timet?</b> Quod autem satis est, eo quicquid accessit, nimium est; <b>Sed ille, ut dixi, vitiose.</b> </p>\n\n            <p>Cur tantas regiones barbarorum pedibus obiit, tot maria transmisit? <a href=\"http://loripsum.net/\" target=\"_blank\">Nulla erit controversia.</a> Prave, nequiter, turpiter cenabat; <code>Multoque hoc melius nos veriusque quam Stoici.</code> Contineo me ab exemplis. <b>Sed nimis multa.</b> <code>Nos vero, inquit ille;</code> <mark>Occultum facinus esse potuerit, gaudebit;</mark> </p>\n\n            <blockquote cite=\"http://loripsum.net\">\n                Blockquote Non quam nostram quidem, inquit Pomponius iocans;\n            </blockquote>\n\n\n            <ul>\n                <li>Iam doloris medicamenta illa Epicurea tamquam de narthecio proment: Si gravis, brevis;</li>\n                <li>Ergo et avarus erit, sed finite, et adulter, verum habebit modum, et luxuriosus eodem modo.</li>\n                <li>Sedulo, inquam, faciam.</li>\n                <li>Quid enim tanto opus est instrumento in optimis artibus comparandis?</li>\n                <li>Sic, et quidem diligentius saepiusque ista loquemur inter nos agemusque communiter.</li>\n            </ul>\n\n\n            <p><b> Bold Inde igitur, inquit, ordiendum est.</b> Quis hoc dicit? Quamquam te quidem video minime esse deterritum. <i>Bonum incolumis acies: misera caecitas.</i> Indicant pueri, in quibus ut in speculis natura cernitur. Duae sunt enim res quoque, ne tu verba solum putes. <code>Est enim effectrix multarum et magnarum voluptatum.</code> </p>\n\n            <pre> Pre Corporis igitur nostri partes totaque figura et forma et\n            statura quam apta ad naturam sit, apparet, neque est dubium,\n            quin frons, oculi, aures et reliquae partes quales propriae\n            sint hominis intellegatur.\n\n            Pungunt quasi aculeis interrogatiunculis angustis, quibus\n            etiam qui assentiuntur nihil commutantur animo et idem\n            abeunt, qui venerant.\n            </pre>\n\n\n            <ol>\n                <li>Atqui perspicuum est hominem e corpore animoque constare, cum primae sint animi partes, secundae corporis.</li>\n                <li>Nonne videmus quanta perturbatio rerum omnium consequatur, quanta confusio?</li>\n            </ol>\n\n\n            <dl>\n                <dt><dfn>Stoicos roga.</dfn></dt>\n                <dd>Quid enim de amicitia statueris utilitatis causa expetenda vides.</dd>\n                <dt><dfn>Qui convenit?</dfn></dt>\n                <dd>Que Manilium, ab iisque M.</dd>\n                <dt><dfn>Paria sunt igitur.</dfn></dt>\n                <dd>Quamquam ab iis philosophiam et omnes ingenuas disciplinas habemus;</dd>\n                <dt><dfn>Confecta res esset.</dfn></dt>\n                <dd>Cupiditates non Epicuri divisione finiebat, sed sua satietate.</dd>\n            </dl>\n        </div>\n    </div>\n</div>\n","<div *ngIf=\"(!store || store.stateView.empty) && (debouncedEmpty$ | async) \" style=\"margin: 10px;\">\n  <section class=\"mat-typography\">\n    <h4><strong>{{ 'igo.integration.searchResultsTool.noResults' | translate }}</strong></h4>\n    <p><strong>{{ 'igo.integration.searchResultsTool.doSearch' | translate }}</strong></p>\n    <div [innerHTML]=\"'igo.integration.searchResultsTool.examples' | translate | sanitizeHtml\"></div>\n</section>\n</div>\n\n<igo-flexible\n  *ngIf=\"store && (store.stateView.empty$ | async)===false\"\n  #topPanel\n  initial=\"100%\"\n  initialMobile=\"100%\"\n  collapsed=\"calc(100% - 58px)\"\n  collapsedMobile=\"calc(100% - 58px)\"\n  expanded=\"60%\"\n  expandedMobile=\"60%\"\n  [state]=\"(feature$ | async) ? topPanelState : 'initial'\">\n\n  <div class=\"igo-content\">\n    <igo-search-results\n      [store]=\"store\"\n      [showIcons]=\"showIcons\"\n      [term]=\"term\"\n      [termSplitter]=\"termSplitter\"\n      [settingsChange$]=\"settingsChange$\"\n      placeholder=\"false\"\n      (resultFocus)=\"onResultFocus($event)\"\n      (resultSelect)=\"onResultSelect($event)\"\n      (resultUnfocus)=\"onResultUnfocus($event)\"\n      (resultMouseenter)=\"onResultFocus($event)\"\n      (resultMouseleave)=\"onResultUnfocus($event)\"\n      (moreResults)=\"onSearch($event)\">\n      <ng-template #igoSearchItemToolbar let-result=\"result\">\n        <igo-search-add-button\n          [map]=\"map\"\n          [layer]=\"result\">\n        </igo-search-add-button>\n      </ng-template>\n    </igo-search-results>\n  </div>\n\n  <!--div igoFlexibleFill class=\"igo-content\">\n    <igo-panel [title]=\"featureTitle\" *ngIf=\"feature$ | async\">\n\n      <button\n        mat-icon-button\n        panelLeftButton\n        class=\"igo-icon-button\"\n        (click)=\"toggleTopPanel()\">\n        <mat-icon [svgIcon]=\"(topPanelState$ | async) === 'collapsed' ? 'arrow-up' : 'arrow-down'\"></mat-icon>\n      </button>\n\n      <button\n        *ngIf=\"feature.geometry\"\n        mat-icon-button\n        panelRightButton\n        class=\"igo-icon-button\"\n        [matTooltip]=\"((isSelectedResultOutOfView$ | async) ? 'igo.integration.searchResultsTool.zoomOnFeatureTooltipOutOfView' : 'igo.integration.searchResultsTool.zoomOnFeatureTooltip') | translate\"\n        matTooltipShowDelay=\"500\"\n        (click)=\"zoomToFeatureExtent()\">\n        <mat-icon\n        [matBadge]=\"(isSelectedResultOutOfView$ | async) ? '!' : ''\"\n        matBadgeColor=\"accent\"\n        matBadgeSize=\"small\"\n        [matBadgeHidden]=\"(isSelectedResultOutOfView$ | async)===false\"     \n        svgIcon=\"magnify-plus-outline\"></mat-icon>\n      </button>\n\n      <igo-feature-details\n        igoFeatureDetailsDirective\n        [feature]=\"feature$ | async\"\n        [map]=\"map\"\n        [toolbox]=\"toolState.toolbox\"\n        (routingEvent)=\"getRoute()\">\n      </igo-feature-details>\n    </igo-panel>\n  </div-->\n\n</igo-flexible>\n","import {\n  Component,\n  ChangeDetectionStrategy,\n  Input,\n  OnInit,\n  ElementRef,\n  OnDestroy\n} from '@angular/core';\nimport { Observable, BehaviorSubject, Subscription, combineLatest } from 'rxjs';\nimport { debounceTime, map } from 'rxjs/operators';\nimport olFormatGeoJSON from 'ol/format/GeoJSON';\nimport olFeature from 'ol/Feature';\nimport olPoint from 'ol/geom/Point';\nimport type { default as OlGeometry } from 'ol/geom/Geometry';\n\nimport pointOnFeature from '@turf/point-on-feature';\nimport * as olProj from 'ol/proj';\nimport { ConfigService } from '@igo2/core';\n\nimport {\n  EntityStore,\n  ToolComponent,\n  FlexibleState,\n  getEntityTitle,\n  FlexibleComponent,\n  EntityState\n} from '@igo2/common';\n\nimport {\n  FEATURE,\n  Feature,\n  FeatureMotion,\n  SearchResult,\n  IgoMap,\n  moveToOlFeatures,\n  Research,\n  featuresAreTooDeepInView,\n  featureToOl,\n  featureFromOl,\n  getCommonVectorStyle,\n  getCommonVectorSelectedStyle,\n  computeOlFeaturesExtent,\n  featuresAreOutOfView,\n  roundCoordTo\n} from '@igo2/geo';\n\nimport { MapState, SearchState, ToolState, DirectionState } from '@igo2/integration';\n\n/**\n * Tool to browse the search results\n */\n@ToolComponent({\n  name: 'searchResults',\n  title: 'igo.integration.tools.searchResults',\n  icon: 'magnify'\n})\n@Component({\n  selector: 'app-search-results-tool',\n  templateUrl: './search-results-tool.component.html',\n  changeDetection: ChangeDetectionStrategy.OnPush\n})\nexport class SearchResultsToolComponent implements OnInit, OnDestroy {\n  /**\n   * to show hide results icons\n   */\n  @Input() showIcons: boolean = true;\n\n  /**\n   * Determine the top panel default state\n   */\n  @Input() topPanelStateDefault: string = 'expanded';\n\n  private hasFeatureEmphasisOnSelection: boolean = false;\n\n  private showResultsGeometries$$: Subscription;\n  private getRoute$$: Subscription;\n  private shownResultsGeometries: Feature[] = [];\n  private shownResultsEmphasisGeometries: Feature[] = [];\n  private focusedResult$: BehaviorSubject<SearchResult> = new BehaviorSubject(\n    undefined\n  );\n  public isSelectedResultOutOfView$ = new BehaviorSubject(false);\n  private isSelectedResultOutOfView$$: Subscription;\n  private abstractFocusedResult: Feature;\n  private abstractSelectedResult: Feature;\n\n  public debouncedEmpty$ :BehaviorSubject<boolean> = new BehaviorSubject(true);\n  private debouncedEmpty$$: Subscription;\n\n  /**\n   * Store holding the search results\n   * @internal\n   */\n  get store(): EntityStore<SearchResult> {\n    return this.searchState.store;\n  }\n\n  /**\n   * Map to display the results on\n   * @internal\n   */\n  get map(): IgoMap {\n    return this.mapState.map;\n  }\n\n  get featureTitle(): string {\n    return this.feature ? getEntityTitle(this.feature) : undefined;\n  }\n\n  get feature$(): Observable<Feature> {\n    return this.store.stateView\n      .firstBy$((e) => e.state.focused)\n      .pipe(\n        map(\n          (element) =>\n          (this.feature = element\n            ? (element.entity.data as Feature)\n            : undefined)\n        )\n      );\n  }\n\n  public feature: Feature;\n\n  public term = '';\n  private searchTerm$$: Subscription;\n\n  public settingsChange$ = new BehaviorSubject<boolean>(undefined);\n\n  public topPanelState$ = new BehaviorSubject<FlexibleState>('initial');\n  private topPanelState$$: Subscription;\n\n  @Input()\n  set topPanelState(value: FlexibleState) {\n    this.topPanelState$.next(value);\n  }\n  get topPanelState(): FlexibleState {\n    return this.topPanelState$.value;\n  }\n\n  get termSplitter(): string {\n    return this.searchState.searchTermSplitter$.value;\n  }\n\n  private format = new olFormatGeoJSON();\n\n  constructor(\n    private mapState: MapState,\n    private searchState: SearchState,\n    private elRef: ElementRef,\n    public toolState: ToolState,\n    private directionState: DirectionState,\n    configService: ConfigService\n  ) {\n    this.hasFeatureEmphasisOnSelection = configService.getConfig(\n      'hasFeatureEmphasisOnSelection'\n    );\n  }\n\n  ngOnInit() {\n    this.searchTerm$$ = this.searchState.searchTerm$.subscribe(\n      (searchTerm: string) => {\n        if (searchTerm !== undefined && searchTerm !== null) {\n          this.term = searchTerm;\n        }\n      }\n    );\n\n    for (const res of this.store.stateView.all$().value) {\n      if (this.store.state.get(res.entity).selected === true) {\n        this.topPanelState = 'expanded';\n      }\n    }\n\n    this.searchState.searchSettingsChange$.subscribe(() => {\n      this.settingsChange$.next(true);\n    });\n\n    this.topPanelState$$ = this.topPanelState$.subscribe(() => {\n      const igoList = this.computeElementRef()[0];\n      const selected = this.computeElementRef()[1];\n      if (selected) {\n        setTimeout(() => {\n          // To be sure the flexible component has been displayed yet\n          if (!this.isScrolledIntoView(igoList, selected)) {\n            this.adjustTopPanel(igoList, selected);\n          }\n        }, FlexibleComponent.transitionTime + 50);\n      }\n    });\n\n    if (this.hasFeatureEmphasisOnSelection) {\n      if (!this.searchState.focusedOrResolution$$) {\n        this.searchState.focusedOrResolution$$ = combineLatest([\n          this.focusedResult$,\n          this.map.viewController.resolution$\n        ]).subscribe((bunch: [SearchResult<Feature>, number]) =>\n          this.buildResultEmphasis(bunch[0], 'focused')\n        );\n      }\n\n      if (!this.searchState.selectedOrResolution$$) {\n        this.searchState.selectedOrResolution$$ = combineLatest([\n          this.searchState.selectedResult$,\n          this.map.viewController.resolution$\n        ]).subscribe((bunch: [SearchResult<Feature>, number]) =>\n          this.buildResultEmphasis(bunch[0], 'selected')\n        );\n      }\n    }\n    this.monitorResultOutOfView();\n\n    this.showResultsGeometries$$ = combineLatest([\n      this.searchState.searchResultsGeometryEnabled$,\n      this.store.stateView.all$(),\n      this.focusedResult$,\n      this.searchState.selectedResult$,\n      this.searchState.searchTerm$,\n      this.map.viewController.resolution$\n    ]).subscribe((bunch: [boolean, { entity: SearchResult, state: EntityState }[], SearchResult, SearchResult, string, number]) => {\n\n      const searchResultsGeometryEnabled = bunch[0];\n      const searchResults = bunch[1];\n\n      if (this.hasFeatureEmphasisOnSelection) {\n        this.clearFeatureEmphasis('shown');\n      }\n      this.shownResultsGeometries.map(result => this.map.queryResultsOverlay.removeFeature(result));\n      const featureToHandleGeom = searchResults\n        .filter(result =>\n          result.entity.meta.dataType === FEATURE &&\n          result.entity.data.geometry &&\n          !result.state.selected &&\n          !result.state.focused);\n\n      featureToHandleGeom.map(result => {\n        if (searchResultsGeometryEnabled) {\n          result.entity.data.meta.style =\n            getCommonVectorStyle(\n              Object.assign(\n                {},\n                { feature: result.entity.data as Feature | olFeature<OlGeometry> },\n                this.searchState.searchOverlayStyle,\n                result.entity.style?.base ? result.entity.style.base : {}\n              ));\n          this.shownResultsGeometries.push(result.entity.data as Feature);\n          this.map.queryResultsOverlay.addFeature(result.entity.data as Feature, FeatureMotion.None);\n          if (this.hasFeatureEmphasisOnSelection) {\n            this.buildResultEmphasis(result.entity as SearchResult<Feature>, 'shown');\n          }\n        }\n      });\n    });\n\n    this.debouncedEmpty$$ = this.store.stateView.empty$.pipe(debounceTime(1500)).subscribe(empty => this.debouncedEmpty$.next(empty));\n  }\n\n  private monitorResultOutOfView() {\n    this.isSelectedResultOutOfView$$ = combineLatest([\n      this.map.viewController.state$,\n      this.searchState.selectedResult$\n    ])\n      .pipe(debounceTime(100))\n      .subscribe((bunch) => {\n        const selectedResult = bunch[1] as SearchResult<Feature>;\n        if (!selectedResult) {\n          this.isSelectedResultOutOfView$.next(false);\n          return;\n        }\n        if (selectedResult.data.geometry) {\n          const selectedOlFeature = featureToOl(\n            selectedResult.data,\n            this.map.projection\n          );\n          const selectedOlFeatureExtent = computeOlFeaturesExtent(this.map, [\n            selectedOlFeature\n          ]);\n          this.isSelectedResultOutOfView$.next(\n            featuresAreOutOfView(this.map, selectedOlFeatureExtent)\n          );\n        }\n      });\n  }\n\n  private buildResultEmphasis(\n    result: SearchResult<Feature>,\n    trigger: 'selected' | 'focused' | 'shown' | undefined\n  ) {\n    if (trigger !== 'shown') {\n      this.clearFeatureEmphasis(trigger);\n    }\n    if (!result || !result.data.geometry) {\n      return;\n    }\n    const myOlFeature = featureToOl(result.data, this.map.projection);\n    const olGeometry = myOlFeature.getGeometry();\n    if (featuresAreTooDeepInView(this.map, olGeometry.getExtent() as [number, number, number, number], 0.0025)) {\n      const extent = olGeometry.getExtent();\n      const x = extent[0] + (extent[2] - extent[0]) / 2;\n      const y = extent[1] + (extent[3] - extent[1]) / 2;\n      const feature1 = new olFeature({\n        name: `${trigger}AbstractResult'`,\n        geometry: new olPoint([x, y])\n      });\n      const abstractResult = featureFromOl(feature1, this.map.projection);\n\n      let computedStyle;\n      let zIndexOffset = 0;\n\n      switch (trigger) {\n        case 'focused':\n          computedStyle = getCommonVectorSelectedStyle(\n            Object.assign({},\n              { feature: abstractResult },\n              this.searchState.searchOverlayStyleFocus,\n              result.style?.focus ? result.style.focus : {}));\n          zIndexOffset = 2;\n          break;\n        case 'shown':\n          computedStyle = getCommonVectorStyle(Object.assign({},\n            { feature: abstractResult },\n            this.searchState.searchOverlayStyle,\n            result.style?.base ? result.style.base : {}));\n          break;\n        case 'selected':\n          computedStyle = getCommonVectorSelectedStyle(\n            Object.assign({},\n              { feature: abstractResult },\n              this.searchState.searchOverlayStyleSelection,\n              result.style?.selection ? result.style.selection : {}));\n          zIndexOffset = 1;\n          break;\n      }\n      abstractResult.meta.style = computedStyle;\n      abstractResult.meta.style.setZIndex(2000 + zIndexOffset);\n      this.map.searchResultsOverlay.addFeature(abstractResult, FeatureMotion.None);\n      if (trigger === 'focused') {\n        this.abstractFocusedResult = abstractResult;\n      }\n      if (trigger === 'selected') {\n        this.abstractSelectedResult = abstractResult;\n      }\n      if (trigger === 'shown') {\n        this.shownResultsEmphasisGeometries.push(abstractResult);\n      }\n    } else {\n      this.clearFeatureEmphasis(trigger);\n    }\n  }\n\n  private clearFeatureEmphasis(trigger: 'selected' | 'focused' | 'shown') {\n    if (trigger === 'focused' && this.abstractFocusedResult) {\n      this.map.searchResultsOverlay.removeFeature(this.abstractFocusedResult);\n      this.abstractFocusedResult = undefined;\n    }\n    if (trigger === 'selected' && this.abstractSelectedResult) {\n      this.map.searchResultsOverlay.removeFeature(this.abstractSelectedResult);\n      this.abstractSelectedResult = undefined;\n    }\n    if (trigger === 'shown') {\n      this.shownResultsEmphasisGeometries.map(shownResult => this.map.searchResultsOverlay.removeFeature(shownResult));\n      this.shownResultsEmphasisGeometries = [];\n    }\n  }\n\n  ngOnDestroy() {\n    this.topPanelState$$.unsubscribe();\n    this.searchTerm$$.unsubscribe();\n    if (this.isSelectedResultOutOfView$$) {\n      this.isSelectedResultOutOfView$$.unsubscribe();\n    }\n    if (this.showResultsGeometries$$) {\n      this.showResultsGeometries$$.unsubscribe();\n    }\n    if (this.getRoute$$) {\n      this.getRoute$$.unsubscribe();\n    }\n    if (this.debouncedEmpty$$) {\n      this.debouncedEmpty$$.unsubscribe();\n    }\n  }\n\n  /**\n   * Try to add a feature to the map when it's being focused\n   * @internal\n   * @param result A search result that could be a feature\n   */\n  onResultFocus(result: SearchResult) {\n    this.focusedResult$.next(result);\n    if (result.meta.dataType === FEATURE && result.data.geometry) {\n      result.data.meta.style = getCommonVectorSelectedStyle(\n        Object.assign({},\n          { feature: result.data as Feature | olFeature<OlGeometry> },\n          this.searchState.searchOverlayStyleFocus,\n          result.style?.focus ? result.style.focus : {}));\n\n      const feature = this.map.searchResultsOverlay.dataSource.ol.getFeatureById(result.meta.id);\n      if (feature) {\n        feature.setStyle(result.data.meta.style);\n        return;\n      }\n      this.map.searchResultsOverlay.addFeature(result.data as Feature, FeatureMotion.None);\n    }\n  }\n\n  onResultUnfocus(result: SearchResult) {\n    this.focusedResult$.next(undefined);\n    if (result.meta.dataType !== FEATURE) {\n      return;\n    }\n\n    if (this.store.state.get(result).selected === true) {\n      const feature = this.map.searchResultsOverlay.dataSource.ol.getFeatureById(result.meta.id);\n      if (feature) {\n        const style = getCommonVectorSelectedStyle(\n          Object.assign({},\n            { feature: result.data as Feature | olFeature<OlGeometry> },\n            this.searchState.searchOverlayStyleFocus,\n            result.style?.focus ? result.style.focus : {}));\n        feature.setStyle(style);\n      }\n      return;\n    }\n    this.map.searchResultsOverlay.removeFeature(result.data as Feature);\n  }\n\n  /**\n   * Try to add a feature to the map when it's being selected\n   * @internal\n   * @param result A search result that could be a feature or some layer options\n   */\n  onResultSelect(result: SearchResult) {\n    this.map.searchResultsOverlay.dataSource.ol.clear();\n    this.tryAddFeatureToMap(result);\n    //this.searchState.setSelectedResult(result);\n    /*\n    if (this.topPanelState === 'initial') {\n      if (this.topPanelStateDefault !== 'collapsed') {\n        this.topPanelState = 'expanded';\n      } else {\n        this.topPanelState = 'collapsed';\n      }\n    }*/\n    /*\n    if (this.topPanelState === 'expanded') {\n      const igoList = this.computeElementRef()[0];\n      const selected = this.computeElementRef()[1];\n      if (!this.isScrolledIntoView(igoList, selected)) {\n        this.adjustTopPanel(igoList, selected);\n      }\n    }*/\n  }\n\n  onSearch(event: { research: Research; results: SearchResult[] }) {\n    const results = event.results;\n    const newResults = this.store.entities$.value\n      .filter((result: SearchResult) => result.source !== event.research.source)\n      .concat(results);\n\n    this.store.load(newResults);\n\n    for (const res of this.store.all()) {\n      if (\n        this.store.state.get(res).focused === true &&\n        this.store.state.get(res).selected !== true\n      ) {\n        this.store.state.update(res, { focused: false }, true);\n      }\n    }\n\n    setTimeout(() => {\n      const igoList = this.elRef.nativeElement.querySelector('igo-list');\n      let moreResults;\n      event.research.request.subscribe((source) => {\n        if (!source[0] || !source[0].source) {\n          moreResults = null;\n        } else if (source[0].source.getId() === 'icherche') {\n          moreResults = igoList.querySelector('.icherche .moreResults');\n        } else if (source[0].source.getId() === 'ilayer') {\n          moreResults = igoList.querySelector('.ilayer .moreResults');\n        } else if (source[0].source.getId() === 'nominatim') {\n          moreResults = igoList.querySelector('.nominatim .moreResults');\n        } else {\n          moreResults = igoList.querySelector('.' + source[0].source.getId() + ' .moreResults');\n        }\n\n        if (\n          moreResults !== null &&\n          !this.isScrolledIntoView(igoList, moreResults)\n        ) {\n          igoList.scrollTop =\n            moreResults.offsetTop +\n            moreResults.offsetHeight -\n            igoList.clientHeight;\n        }\n      });\n    }, 250);\n  }\n\n  computeElementRef() {\n    const items = document.getElementsByTagName('igo-search-results-item');\n    const igoList = this.elRef.nativeElement.getElementsByTagName(\n      'igo-list'\n    )[0];\n    let selectedItem;\n    // eslint-disable-next-line\n    for (let i = 0; i < items.length; i++) {\n      if (items[i].className.includes('igo-list-item-selected')) {\n        selectedItem = items[i];\n      }\n    }\n    return [igoList, selectedItem];\n  }\n\n  adjustTopPanel(elemSource, elem) {\n    if (!this.isScrolledIntoView(elemSource, elem)) {\n      elemSource.scrollTop =\n        elem.offsetTop +\n        elem.children[0].offsetHeight -\n        elemSource.clientHeight;\n    }\n  }\n\n  toggleTopPanel() {\n    if (this.topPanelState === 'expanded') {\n      this.topPanelState = 'collapsed';\n    } else {\n      this.topPanelState = 'expanded';\n    }\n  }\n\n  zoomToFeatureExtent() {\n    if (this.feature.geometry) {\n      const localOlFeature = this.format.readFeature(this.feature, {\n        dataProjection: this.feature.projection,\n        featureProjection: this.map.projection\n      });\n      moveToOlFeatures(this.map, [localOlFeature], FeatureMotion.Zoom);\n    }\n  }\n\n  /**\n   * Try to add a feature to the map overlay\n   * @param result A search result that could be a feature\n   */\n  private tryAddFeatureToMap(result: SearchResult) {\n    if (result.meta.dataType !== FEATURE) {\n      return undefined;\n    }\n    const feature = (result as SearchResult<Feature>).data;\n\n    // Somethimes features have no geometry. It happens with some GetFeatureInfo\n    if (!feature.geometry) {\n      return;\n    }\n\n    feature.meta.style = getCommonVectorSelectedStyle(\n      Object.assign({},\n        { feature },\n        this.searchState.searchOverlayStyleSelection,\n        result.style?.selection ? result.style.selection : {}));\n\n    this.map.searchResultsOverlay.addFeature(feature);\n  }\n\n  isScrolledIntoView(elemSource, elem) {\n    const padding = 6;\n    const docViewTop = elemSource.scrollTop;\n    const docViewBottom = docViewTop + elemSource.clientHeight;\n\n    const elemTop = elem.offsetTop;\n    const elemBottom = elemTop + elem.clientHeight + padding;\n    return elemBottom <= docViewBottom && elemTop >= docViewTop;\n  }\n\n  getRoute() {\n    this.toolState.toolbox.activateTool('directions');\n    this.directionState.stopsStore.clearStops();\n    setTimeout(() => {\n      let routingCoordLoaded = false;\n      if (this.getRoute$$) { this.getRoute$$.unsubscribe(); }\n      this.getRoute$$ = this.directionState.stopsStore.storeInitialized$.subscribe((init: boolean) => {\n        if (this.directionState.stopsStore.storeInitialized$.value && !routingCoordLoaded) {\n          routingCoordLoaded = true;\n          const stop = this.directionState.stopsStore.all().find((e) => e.position === 1);\n          let coord;\n          if (this.feature.geometry) {\n            if (this.feature.geometry.type === 'Point') {\n              coord = [this.feature.geometry.coordinates[0], this.feature.geometry.coordinates[1]];\n            } else {\n              const point = pointOnFeature(this.feature.geometry);\n              coord = [point.geometry.coordinates[0], point.geometry.coordinates[1]];\n            }\n          }\n          stop.text = this.featureTitle;\n          stop.coordinates = coord;\n          this.directionState.stopsStore.update(stop);\n          if (this.map.geolocationController.position$.value) {\n            const currentPos = this.map.geolocationController.position$.value;\n            const stop = this.directionState.stopsStore.all().find((e) => e.position === 0);\n            const currentCoord = olProj.transform(currentPos.position, currentPos.projection, 'EPSG:4326');\n            const coord: [number,number] = roundCoordTo([currentCoord[0], currentCoord[1]], 6);\n            stop.text = coord.join(',');\n            stop.coordinates = coord;\n            this.directionState.stopsStore.update(stop);\n          }\n\n        }\n      });\n    }, 250);\n  }\n}\n","<mat-sidenav\n  #sidenav\n  mode=\"side\"\n  [autoFocus]=\"false\"\n  [(opened)]=\"opened\">\n\n  <div #content class=\"app-sidenav-content\">\n\n          <app-search-results-tool>  \n            #searchresults\n            [store]=\"searchStore\"\n            [term]=\"term\"\n            [showIcons]=\"true\"\n            [termSplitter]=\"termSplitter\"\n            placeholder=\"false\"\n            [settingsChange$]=\"settingsChange$\"\n            (resultFocus)=\"onResultFocus($event)\"\n            (resultSelect)=\"onResultFocus($event)\"\n            (moreResults)=\"onSearch($event)\">\n          </app-search-results-tool>\n\n  </div>\n</mat-sidenav>\n<button\n  [ngClass]=\" sidenav.opened? 'sideresult-opened' : 'sideresult-closed' \"\n  #sidenavbutton\n  mat-raised-button\n  id=\"sideresult-button\"\n  isRoundButton=false\n  isIconButton=true\n  MatDrawerMode=\"push\"\n  (click)=\"sidenav.toggle()\">\n  <mat-icon *ngIf=\"sidenav.opened\" [matTooltip]=\"'sideresult.close' | translate\" matTooltipShowDelay=\"500\" tooltip-position=\"after\"svgIcon=\"menu-left\"></mat-icon>\n  <mat-icon *ngIf=\"!sidenav.opened\" [matTooltip]=\"'sideresult.open' | translate\" matTooltipShowDelay=\"500\" tooltip-position=\"after\" svgIcon=\"menu-right\"></mat-icon>\n</button>\n","import {\n  Component,\n  Input,\n  Output,\n  OnInit,\n  OnDestroy,\n  EventEmitter,\n  ChangeDetectionStrategy,\n  ElementRef,\n  ViewChild\n} from '@angular/core';\nimport * as proj from 'ol/proj';\n\nimport { LanguageService, MediaService } from '@igo2/core';\nimport { EntityStore, ActionStore } from '@igo2/common';\n\nimport { BehaviorSubject, Subscription } from 'rxjs';\n\nimport { Tool, Toolbox } from '@igo2/common';\nimport { IgoMap, FEATURE,\n  Feature,\n  FeatureMotion,\n  GoogleLinks,\n  LayerService,\n  MapService,\n  Layer,\n  ProjectionService,\n  Research,\n  SearchResult,\n  SearchService } from '@igo2/geo';\nimport { ToolState, CatalogState, SearchState } from '@igo2/integration';\nimport { ConfigService } from '@igo2/core';\n\n@Component({\n  selector: 'app-sideresult',\n  templateUrl: './sideresult.component.html',\n  styleUrls: ['./sideresult.component.scss'],\n  changeDetection: ChangeDetectionStrategy.OnPush\n})\nexport class SideResultComponent implements OnInit, OnDestroy {\n  title$: BehaviorSubject<string> = new BehaviorSubject<string>(undefined);\n  @Input() hasSearchQuery: boolean = undefined;\n  private activeTool$$: Subscription;\n\n  @Input()\n  get map(): IgoMap {\n    return this._map;\n  }\n  set map(value: IgoMap) {\n    this._map = value;\n  }\n  private _map: IgoMap;\n\n  @Input()\n  get opened(): boolean {\n    return this._opened;\n  }\n  set opened(value: boolean) {\n    if (value === this._opened) {\n      return;\n    }\n\n    this._opened = value;\n    this.openedChange.emit(this._opened);\n  }\n  private _opened: boolean;\n\n  @Output() openedChange = new EventEmitter<boolean>();\n  @Output() toolChange = new EventEmitter<Tool>();\n\n  get toolbox(): Toolbox {\n    return this.toolState.toolbox;\n  }\n\n  // SEARCH\n  events: string[] = [];\n  public showMenuButton: boolean = undefined;\n  public hasToolbox: boolean = undefined;\n  public store = new ActionStore([]);\n\n\n  public igoSearchPointerSummaryEnabled: boolean = false;\n\n  public termSplitter: string = '|';\n/*\n  public map = new IgoMap({\n    overlay: true,\n    controls: {\n      attribution: {\n        collapsed: true\n      }\n    }\n  });*/\n\n  public view = {\n    center: [-73, 47.2],\n    zoom: 7\n  };\n\n  public osmLayer: Layer;\n\n  @ViewChild('mapBrowser', { read: ElementRef, static: true }) mapBrowser: ElementRef;\n\n  public lonlat;\n  public mapProjection: string;\n  public term: string;\n  public settingsChange$ = new BehaviorSubject<boolean>(undefined);\n  get searchStore(): EntityStore<SearchResult> {\n    return this.searchState.store;\n  }\n\n  get isTouchScreen(): boolean {\n    return this.mediaService.isTouchScreen();\n  }\n\n  public selectedFeature: Feature;\n\n  constructor(\n    private toolState: ToolState,\n    private configService: ConfigService,\n    private catalogState: CatalogState,\n    //SEARCH\n    private languageService: LanguageService,\n    private projectionService: ProjectionService,\n    private mapService: MapService,\n    private layerService: LayerService,\n    private searchState: SearchState,\n    private searchService: SearchService,\n    private mediaService: MediaService\n    ) {\n      // SEARCH\n      this.mapService.setMap(this.map);\n      this.showMenuButton = this.configService.getConfig('showMenuButton') === undefined ? false :\n        this.configService.getConfig('showMenuButton');\n      this.hasToolbox = this.configService.getConfig('hasToolbox') === undefined ? false :\n        this.configService.getConfig('hasToolbox');\n\n    this.layerService\n      .createAsyncLayer({\n        title: 'OSM',\n        sourceOptions: {\n          type: 'osm'\n        }\n      })\n      .subscribe(layer => {\n        this.osmLayer = layer;\n        //this.map.addLayer(layer);\n      });\n    }\n\n    //SEARCH\n\n    onPointerSummaryStatusChange(value) {\n      this.igoSearchPointerSummaryEnabled = value;\n    }\n\n    onSearchTermChange(term = '') {\n      this.term = term;\n      const termWithoutHashtag = term.replace(/(#[^\\s]*)/g, '').trim();\n      if (termWithoutHashtag.length < 2) {\n        this.searchStore.clear();\n        this.selectedFeature = undefined;\n      }\n    }\n\n    onSearch(event: { research: Research; results: SearchResult[] }) {\n      const results = event.results;\n      this.searchStore.state.updateAll({ focused: false, selected: false });\n      const newResults = this.searchStore.entities$.value\n        .filter((result: SearchResult) => result.source !== event.research.source)\n        .concat(results);\n      this.searchStore.updateMany(newResults);\n    }\n\n    onSearchSettingsChange() {\n      this.settingsChange$.next(true);\n    }\n\n    /**\n     * Try to add a feature to the map when it's being focused\n     * @internal\n     * @param result A search result that could be a feature\n     */\n    onResultFocus(result: SearchResult) {\n      this.tryAddFeatureToMap(result);\n      this.selectedFeature = (result as SearchResult<Feature>).data;\n    }\n\n    /**\n     * Try to add a feature to the map overlay\n     * @param layer A search result that could be a feature\n     */\n    private tryAddFeatureToMap(layer: SearchResult) {\n      if (layer.meta.dataType !== FEATURE) {\n        return undefined;\n      }\n\n      // Somethimes features have no geometry. It happens with some GetFeatureInfo\n      if (layer.data.geometry === undefined) {\n        return;\n      }\n\n      this.map.searchResultsOverlay.setFeatures(\n        [layer.data] as Feature[],\n        FeatureMotion.Default\n      );\n    }\n\n  ngOnInit() {\n    this.activeTool$$ = this.toolbox.activeTool$.subscribe((tool: Tool) => {\n      const sidenavTitle = this.configService.getConfig('sidenavTitle') || 'IGO';\n      if (tool) {\n        if (tool.name === 'catalogBrowser') {\n          for (const catalog of this.catalogState.catalogStore.all()) {\n            if (this.catalogState.catalogStore.state.get(catalog).selected === true) {\n              this.title$.next(catalog.title);\n            }\n          }\n        } else if (tool.name === 'activeTimeFilter' || tool.name === 'activeOgcFilter') {\n          for (const layer of this.map.layers) {\n            if (layer.options.active === true) {\n              this.title$.next(layer.title);\n            }\n          }\n        } else {\n          this.title$.next(tool.title);\n        }\n      } else {\n        this.title$.next(sidenavTitle);\n      }\n      this.toolChange.emit(tool);\n    });\n    //SEARCH\n    this.store.load([\n      {\n        id: 'coordinates',\n        title: 'coordinates',\n        handler: this.onSearchCoordinate.bind(this)\n      },\n      {\n        id: 'googleMaps',\n        title: 'googleMap',\n        handler: this.onOpenGoogleMaps.bind(this),\n        args: ['1']\n      },\n      {\n        id: 'googleStreetView',\n        title: 'googleStreetView',\n        handler: this.onOpenGoogleStreetView.bind(this)\n      }\n    ]);\n  }\n\n  ngOnDestroy() {\n    this.activeTool$$.unsubscribe();\n    // SEARCH\n    this.store.destroy();\n  }\n\n  onPreviousButtonClick() {\n    this.toolbox.activatePreviousTool();\n  }\n\n  onUnselectButtonClick() {\n    this.toolbox.deactivateTool();\n  }\n\n  //SEARCH\n  /*\n   * Remove a feature to the map overlay\n   */\n  removeFeatureFromMap() {\n    this.map.searchResultsOverlay.clear();\n  }\n\n  onContextMenuOpen(event: { x: number; y: number }) {\n    const position = this.mapPosition(event);\n    const coord = this.mapService.getMap().ol.getCoordinateFromPixel(position);\n    this.mapProjection = this.mapService.getMap().projection;\n    this.lonlat = proj.transform(coord, this.mapProjection, 'EPSG:4326');\n  }\n\n  mapPosition(event: { x: number; y: number }) {\n    const contextmenuPoint = event;\n    contextmenuPoint.y =\n      contextmenuPoint.y -\n      this.mapBrowser.nativeElement.getBoundingClientRect().top +\n      window.scrollY;\n    contextmenuPoint.x =\n      contextmenuPoint.x -\n      this.mapBrowser.nativeElement.getBoundingClientRect().left +\n      window.scrollX;\n    const position = [contextmenuPoint.x, contextmenuPoint.y];\n    return position;\n  }\n\n  onPointerSearch(event) {\n    this.lonlat = event;\n    this.onSearchCoordinate();\n  }\n\n  onSearchCoordinate() {\n    this.searchStore.clear();\n    const results = this.searchService.reverseSearch(this.lonlat);\n\n    for (const i in results) {\n      if (results.length > 0) {\n        results[i].request.subscribe((_results: SearchResult<Feature>[]) => {\n          this.onSearch({ research: results[i], results: _results });\n        });\n      }\n    }\n  }\n\n  onOpenGoogleMaps() {\n    window.open(GoogleLinks.getGoogleMapsCoordLink(this.lonlat[0], this.lonlat[1]));\n  }\n\n  onOpenGoogleStreetView() {\n    window.open(\n      GoogleLinks.getGoogleStreetViewLink(this.lonlat[0], this.lonlat[1])\n    );\n  }\n}\n","<ng-container *ngFor=\"let element of mapOverlay; let i = index\">\n  <div class=\"mapOverlayDefault\" [ngClass]=\"element.cssClass\"\n       [style.position]=\"element.fixed ? 'fixed' : 'absolute'\"\n       [style.marginLeft]=\"element.marginLeft\"\n       [style.marginRight]=\"element.marginRight\"\n       [style.marginTop]=\"element.marginTop\"\n       [style.marginBottom]=\"element.marginBottom\"\n       [style.fontSize]=\"element.fontSize\">\n    <a *ngIf=\"element.link; else templateNoLink\"\n        target=\"_blank\" [href]='element.link'>\n        {{ element.text }}\n        <ng-container *ngIf=\"element.imgSrc\">\n          <img [src]=\"element.imgSrc\"\n               [alt]=\"element.alt\"\n               [ngStyle]=\"{ 'width': element.imgSize }\">\n        </ng-container>\n    </a>\n\n\n  <ng-template #templateNoLink>\n    {{ element.text }}\n    <ng-container *ngIf=\"element.imgSrc\">\n      <img [src]=\"element.imgSrc\" [alt]=\"element.alt\" [ngStyle]=\"{ 'width': element.imgSize }\">\n    </ng-container>\n\n  </ng-template>\n  </div>\n</ng-container>\n","import { Component, AfterViewInit, OnDestroy } from '@angular/core';\nimport { Subscription } from 'rxjs';\nimport { Context, ContextService } from '@igo2/context';\nimport { MediaService, ConfigService } from '@igo2/core';\nimport { MapOverlay } from './map-overlay.interface';\n\n@Component({\n  selector: 'app-map-overlay',\n  templateUrl: './map-overlay.component.html',\n  styleUrls: ['./map-overlay.component.scss']\n})\n\nexport class MapOverlayComponent implements AfterViewInit, OnDestroy {\n  public mapOverlay: MapOverlay[] = [];\n  private context$$: Subscription;\n  private media$$: Subscription;\n  private context: Context;\n\n  constructor(\n    private contextService: ContextService,\n    private mediaService: MediaService,\n    private configService: ConfigService\n  ) { }\n\n  ngAfterViewInit() {\n    this.context$$ = this.contextService.context$.subscribe(context => {\n        this.handleContextChange(context);\n        this.context = context;\n        }\n    );\n    this.media$$ = this.mediaService.media$.subscribe(media =>\n      this.handleContextChange(this.context)\n    );\n  }\n\n  ngOnDestroy() {\n    this.context$$.unsubscribe();\n    this.media$$.unsubscribe();\n  }\n\n  private handleContextChange(context: Context) {\n    let mapOverlay = [];\n    if (context !== undefined) {\n      this.mapOverlay = [];\n\n      if (context['mapOverlay']) {\n        mapOverlay = context['mapOverlay'];\n      } else if (this.configService.getConfig('mapOverlay')) {\n        mapOverlay = this.configService.getConfig('mapOverlay');\n      }\n      for (const overlay of mapOverlay) {\n\n        // If no media define use default to desktop, display only if current media is on context definition\n        if ((!overlay.media && this.mediaService.getMedia() === 'desktop') ||\n        (overlay.media && overlay.media.includes(this.mediaService.getMedia()))) {\n          this.mapOverlay.push(overlay);\n        }\n      }\n    }\n\n  }\n}\n","import { Component } from '@angular/core';\nimport { MatDialog, MatDialogState } from '@angular/material/dialog';\nimport { IgoMap } from '@igo2/geo';\nimport { MapState } from '@igo2/integration';\n\n@Component({\n  selector: 'app-legend-button',\n  templateUrl: './legend-button.component.html',\n  styleUrls: ['./legend-button.component.scss']\n})\n\nexport class LegendButtonComponent {\n\n  public dialogRef = null;\n\n  constructor(public dialog: MatDialog) {}\n\n  toggleDialog() {\n    const dialogOpened = this.dialog.getDialogById('legend-button-dialog-container');\n      if (!dialogOpened) {\n        this.dialogRef = this.dialog.open(LegendButtonDialogComponent, {\n          id: 'legend-button-dialog-container',\n          hasBackdrop: false,\n          closeOnNavigation: true\n        });\n      } else {\n        this.dialogRef.close();\n      }\n  }\n}\n\n@Component({\n  selector: 'app-legend-button-dialog',\n  templateUrl: 'legend-button-dialog.component.html'\n})\nexport class LegendButtonDialogComponent {\n\n  public getState: MatDialogState\n\n  get map(): IgoMap {\n    return this.mapState.map;\n  }\n\n  constructor(\n    private mapState: MapState,\n    public dialog: MatDialog\n    ) { }\n\n}\n","<button mat-raised-button qcca-buttons color=\"basic\" mat-button class=\"igo-legend-button\" (click)=\"toggleDialog()\">Légende</button>\n","<div mat-dialog-actions><button mat-button mat-icon-button mat-dialog-close class=\"close\"><mat-icon svgIcon = \"close\"></mat-icon></button></div>\n<h4 mat-dialog-title>Légende</h4>\n<igo-layer-legend-list\n  [layers]=\"map.layers\"\n  [excludeBaseLayers]=\"true\"\n  [allowShowAllLegends]=\"false\"\n  [updateLegendOnResolutionChange]=\"false\"\n  [showAllLegendsValue]=\"false\">\n</igo-layer-legend-list>\n","import { Component } from '@angular/core';\nimport { LanguageService } from '@igo2/core';\n\n@Component({\n  selector: 'app-footer',\n  templateUrl: './footer.component.html',\n  styleUrls: ['./footer.component.scss']\n})\nexport class FooterComponent {\n\n  constructor(protected languageService: LanguageService) {}\n\n}\n","<div class=\"footer-right\" id=\"footer-id\">\n    <span class=\"order2\">\n        <span class=\"footer-text\">\n            <a rel=\"noopener noreferrer\" alt=\"('externallinks' | translate)\" href=\"{{'footer.url-conditions' | translate}}\"\n            target=\"_blank\">{{'footer.conditions' | translate}}</a>\n        </span>\n        <span class=\"footer-text\">  |  </span>\n        <span class=\"footer-text\">\n            <a rel=\"noopener noreferrer\" alt=\"('externallinks' | translate)\" href=\"{{'footer.url-ministry' | translate}}\"\n            target=\"_blank\">{{'footer.ministry' | translate}}</a>\n        </span>\n        <span class=\"footer-text\">  |  </span>\n        <span class=\"footer-text\">\n            <a rel=\"noopener noreferrer\" alt=\"('externallinks' | translate)\" href=\"{{'footer.url-gov' | translate}}\"\n            target=\"_blank\">{{'footer.gov' | translate}}</a>\n        </span>\n    </span>\n</div>\n","<mat-sidenav-container *ngIf=\"!hasToolbox\">\n  <mat-sidenav-content position=\"end\">\n\n    <igo-backdrop\n      [shown]=\"backdropShown\"\n      (click)=\"onBackdropClick()\">\n    </igo-backdrop>\n\n    <igo-menu-button *ngIf=\"showMenuButton\"\n      [sidenavOpened]=\"sidenavOpened\"\n      (openSidenav)=\"onToggleSidenavClick()\">\n    </igo-menu-button>\n\n    <igo-search-bar *ngIf=\"showSearchBar\"\n      #searchbar\n      (pointerSummaryStatus)=\"onPointerSummaryStatusChange($event)\"\n      appearance=\"outline\"\n      searchIcon =\"magnify\"\n      [matTooltip]=\"'search-bar' | translate\"\n      matTooltipShowDelay=\"500\"\n      tooltip-position=\"after\"\n      [searchSettings]=\"false\"\n      color=\"primary\"\n      [store]=\"searchStore\"\n      [termSplitter]=\"termSplitter\"\n      (searchTermChange)=\"onSearchTermChange($event)\"\n      (search)=\"onSearch($event)\"\n      (clearFeature)=\"removeFeatureFromMap()\"\n      (searchSettingsChange)=\"onSearchSettingsChange()\">\n    </igo-search-bar>\n\n    <app-sideresult\n      [map]=\"map\"\n      [(opened)]=\"sidenavOpened\"\n      (toolChange)=\"toolChanged($event)\">\n    </app-sideresult>\n\n    <igo-map-browser\n      igoHoverFeature\n      [igoHoverFeatureDelay]=\"250\"\n      [igoHoverFeatureEnabled]=\"true\"\n      #mapBrowser\n      igoMapContext\n      igoLayerContext\n      igoDropGeoFile\n      [map]=\"map\"\n      [ngClass]=\"{'map-hasfooter': hasFooter}\">\n      <igo-baselayers-switcher\n        [ngClass]=\"sidenavOpened? 'baselayers-pushed' : 'baselayers'\"\n        [map]=\"map\"\n        [useStaticIcon]=\"getBaseLayersUseStaticIcon()\">\n      </igo-baselayers-switcher>\n      <div id=\"map-buttons\">\n        <igo-geolocate-button *ngIf=\"hasGeolocateButton\" [map]=\"map\" color=\"primary\"></igo-geolocate-button>\n        <igo-zoom-button [map]=\"map\" color=\"primary\"></igo-zoom-button>\n        <igo-rotation-button [showIfNoRotation]=\"showRotationButtonIfNoRotation\" [map]=\"map\" color=\"primary\"></igo-rotation-button>\n        <app-legend-button *ngIf=\"hasLegendButton\"></app-legend-button>\n      </div>\n    </igo-map-browser>\n    <app-footer *ngIf=\"hasFooter\" ></app-footer>\n\n    <app-map-overlay\n    [@controlStateY]=\"getControlsOffsetY()\"\n    [@controlStateX]=\"(mediaService.media$ | async) !== 'mobile' &&\n                            sidenavOpened ? 'right' : 'left'\">\n    </app-map-overlay>\n\n  </mat-sidenav-content>\n\n  \n</mat-sidenav-container>\n","import {\n  Component,\n  OnInit,\n  OnDestroy,\n  ViewChild,\n  ElementRef\n} from '@angular/core';\nimport { ActivatedRoute, Params } from '@angular/router';\nimport { Subscription, BehaviorSubject, combineLatest } from 'rxjs';\nimport { debounceTime, take, skipWhile, first } from 'rxjs/operators';\nimport { MatDialog, MatDialogRef } from '@angular/material/dialog';\nimport * as olProj from 'ol/proj';\nimport { MatPaginator } from '@angular/material/paginator';\nimport { AuthOptions, AuthService } from '@igo2/auth';\nimport { HttpClient, HttpParams } from '@angular/common/http';\nimport olFormatGeoJSON from 'ol/format/GeoJSON';\n\nimport { ObjectUtils } from '@igo2/utils';\n\nimport {\n  MediaService,\n  Media,\n  MediaOrientation,\n  ConfigService,\n  LanguageService,\n  MessageService,\n  StorageService\n  } from '@igo2/core';\n\n  import {\n    ActionbarMode,\n    Workspace,\n    WorkspaceStore,\n    ActionStore,\n    EntityStore,\n    // getEntityTitle,\n    Toolbox,\n    Tool,\n    Widget,\n    EntityTablePaginatorOptions,\n    EntityRecord\n  } from '@igo2/common';\n\n  import { DetailedContext } from '@igo2/context';\n\n  import {\n  FEATURE,\n  Feature,\n  GoogleLinks,\n  LayerService,\n  Research,\n  SearchResult,\n  SearchSourceService,\n  CapabilitiesService,\n  sourceCanSearch,\n  sourceCanReverseSearch,\n  ImportService,\n  handleFileImportError,\n  handleFileImportSuccess,\n  WfsWorkspace,\n  FeatureWorkspace,\n  EditionWorkspace,\n  generateIdFromSourceOptions,\n  computeOlFeaturesExtent,\n  addStopToStore,\n  ImageLayer,\n  VectorLayer,\n  MapExtent,\n  IgoMap,\n  DataSourceService\n  } from '@igo2/geo';\n\nimport {\n  MapState,\n  WorkspaceState,\n  QueryState,\n  ContextState,\n  SearchState,\n  ToolState,\n  DirectionState\n} from '@igo2/integration';\n\nimport {\n  controlsAnimations, controlSlideX, controlSlideY\n} from './portal.animation';\n\n@Component({\n  selector: 'app-portal',\n  templateUrl: './portal.component.html',\n  styleUrls: ['./portal.component.scss'],\n  animations: [\n    controlsAnimations(),\n    controlSlideX(),\n    controlSlideY()\n  ]\n})\n\nexport class PortalComponent implements OnInit, OnDestroy {\n  public showRotationButtonIfNoRotation: boolean = undefined;\n  public hasFooter: boolean = true;\n  public hasLegendButton: boolean = true;\n  public hasGeolocateButton: boolean = true;\n  public hasExpansionPanel: boolean = undefined;\n  public hasToolbox: boolean = false;\n  public workspaceNotAvailableMessage: String = 'workspace.disabled.resolution';\n  public workspaceEntitySortChange$: BehaviorSubject<boolean> = new BehaviorSubject(false);\n  private workspaceMaximize$$: Subscription[] = [];\n  readonly workspaceMaximize$: BehaviorSubject<boolean> = new BehaviorSubject(\n    this.storageService.get('workspaceMaximize') as boolean\n  );\n  public selectedWorkspace$: BehaviorSubject<Workspace> = new BehaviorSubject(undefined);;\n  public hasSideSearch = true;\n  public showSearchBar = true;\n  public showMenuButton = true;\n  public sidenavOpened$: BehaviorSubject<boolean> = new BehaviorSubject(false);\n\n  @ViewChild('mapBrowser', { read: ElementRef, static: true })\n  mapBrowser: ElementRef;\n\n  public term: string;\n  public settingsChange$ = new BehaviorSubject<boolean>(undefined);\n\n  getBaseLayersUseStaticIcon(): Boolean {\n    return this.configService.getConfig('useStaticIcon');\n  }\n\n  public toastPanelOffsetX$: BehaviorSubject<string> = new BehaviorSubject(undefined);\n  public minSearchTermLength = 2;\n  public hasHomeExtentButton = false;\n  public hasFeatureEmphasisOnSelection: Boolean = false;\n  public workspacePaginator: MatPaginator;\n  public workspaceSwitchDisabled = false;\n  public paginatorOptions: EntityTablePaginatorOptions = {\n    pageSize: 50, // Number of items to display on a page.\n    pageSizeOptions: [1, 5, 10, 20, 50, 100, 500] // The set of provided page size options to display to the user.\n  };\n  public workspaceMenuClass = 'workspace-menu';\n\n  public fullExtent = this.storageService.get('fullExtent') as boolean;\n\n  public matDialogRef$ = new BehaviorSubject<MatDialogRef<any>>(undefined);\n  public searchBarTerm = '';\n  public onSettingsChange$ = new BehaviorSubject<boolean>(undefined);\n  public termDefinedInUrl = false;\n  public termSplitter = '|';\n  public termDefinedInUrlTriggered = false;\n  private addedLayers$$: Subscription[] = [];\n  public forceCoordsNA = false;\n\n  public contextMenuStore = new ActionStore([]);\n  private contextMenuCoord: [number, number];\n\n  private contextLoaded = false;\n  private context$$: Subscription;\n  private openSidenav$$: Subscription;\n  private sidenavMediaAndOrientation$$: Subscription;\n\n  public igoSearchPointerSummaryEnabled: boolean;\n\n  public toastPanelForExpansionOpened = true;\n  private activeWidget$$: Subscription;\n  public showToastPanelForExpansionToggle = false;\n  private routeParams: Params;\n  public toastPanelHtmlDisplay = false;\n\n  public homeExtent: MapExtent;\n  public homeCenter: [number, number];\n  public homeZoom: number;\n  @ViewChild('searchBar', { read: ElementRef, static: true })\n  searchBar: ElementRef;\n\n  public dialogOpened = this.dialog.getDialogById('legend-button-dialog-container');\n\n  get map(): IgoMap {\n    return this.mapState.map;\n  }\n\n  get sidenavOpened(): boolean {\n    return this.sidenavOpened$.value;\n  }\n\n  set sidenavOpened(value: boolean) {\n    this.sidenavOpened$.next(value);\n  }\n\n  get auth(): AuthOptions {\n    return this.configService.getConfig('auth') || [];\n  }\n\n  isMobile(): boolean {\n    return this.mediaService.getMedia() === Media.Mobile;\n  }\n\n  isTablet(): boolean {\n    return this.mediaService.getMedia() === Media.Tablet;\n  }\n\n  isLandscape(): boolean {\n    return this.mediaService.getOrientation() === MediaOrientation.Landscape;\n  }\n\n  isPortrait(): boolean {\n    return this.mediaService.getOrientation() === MediaOrientation.Portrait;\n  }\n\n  get backdropShown(): boolean {\n    return (\n      (this.isMobile() || (this.isTablet() && this.isPortrait())) &&\n      this.sidenavOpened\n    );\n  }\n\n  get expansionPanelExpanded(): boolean {\n    return this.workspaceState.workspacePanelExpanded;\n  }\n  set expansionPanelExpanded(value: boolean) {\n    this.workspaceState.workspacePanelExpanded = value;\n    if (value === true) {\n      this.map.viewController.setPadding({bottom: 280});\n    } else {\n      this.map.viewController.setPadding({bottom: 0});\n    }\n  }\n\n  get toastPanelShown(): boolean {\n    return true;\n  }\n\n  get expansionPanelBackdropShown(): boolean {\n    return this.expansionPanelExpanded && this.toastPanelForExpansionOpened;\n  }\n\n  get workspace(): Workspace {\n    return this.workspaceState.workspace$.value;\n  }\n\n  get actionbarMode(): ActionbarMode {\n    return ActionbarMode.Overlay;\n  }\n\n  get actionbarWithTitle(): boolean {\n    return this.actionbarMode === ActionbarMode.Overlay;\n  }\n\n  get searchStore(): EntityStore<SearchResult> {\n    return this.searchState.store;\n  }\n\n  get searchResultsGeometryEnabled(): boolean {\n    return this.searchState.searchResultsGeometryEnabled$.value;\n  }\n\n  get toolbox(): Toolbox {\n    return this.toolState.toolbox;\n  }\n\n  get workspaceStore(): WorkspaceStore {\n    return this.workspaceState.store;\n  }\n\n  constructor(\n    private route: ActivatedRoute,\n    public workspaceState: WorkspaceState,\n    public authService: AuthService,\n    public mediaService: MediaService,\n    public layerService: LayerService,\n    public dataSourceService: DataSourceService,\n    public capabilitiesService: CapabilitiesService,\n    private contextState: ContextState,\n    private mapState: MapState,\n    private searchState: SearchState,\n    private queryState: QueryState,\n    private toolState: ToolState,\n    private searchSourceService: SearchSourceService,\n    private configService: ConfigService,\n    private importService: ImportService,\n    private http: HttpClient,\n    private languageService: LanguageService,\n    private messageService: MessageService,\n    public dialogWindow: MatDialog,\n    private storageService: StorageService,\n    private directionState: DirectionState,\n    public dialog: MatDialog\n  ) {\n      this.hasFooter = this.configService.getConfig('hasFooter') === undefined ? false :\n        this.configService.getConfig('hasFooter');\n      this.hasLegendButton = this.configService.getConfig('hasLegendButton') === undefined ? false :\n        this.configService.getConfig('hasLegendButton');\n      this.hasSideSearch = this.configService.getConfig('hasSideSearch') === undefined ? true :\n        this.configService.getConfig('hasSideSearch');\n      this.showSearchBar = this.configService.getConfig('showSearchBar') === undefined ? true :\n        this.configService.getConfig('showSearchBar');\n      this.hasToolbox = this.configService.getConfig('hasToolbox') === undefined ? true :\n        this.configService.getConfig('hasToolbox');\n      this.showMenuButton = this.configService.getConfig('showMenuButton') === undefined ? true :\n      this.configService.getConfig('showMenuButton');\n      this.hasExpansionPanel = this.configService.getConfig('hasExpansionPanel');\n      this.hasHomeExtentButton =\n        this.configService.getConfig('homeExtentButton') === undefined ? false : true;\n      this.hasGeolocateButton = this.configService.getConfig('hasGeolocateButton') === undefined ? true :\n        this.configService.getConfig('hasGeolocateButton');\n      this.showRotationButtonIfNoRotation = this.configService.getConfig('showRotationButtonIfNoRotation') === undefined ? false :\n        this.configService.getConfig('showRotationButtonIfNoRotation');\n      this.forceCoordsNA = this.configService.getConfig('app.forceCoordsNA');\n      this.hasFeatureEmphasisOnSelection = this.configService.getConfig('hasFeatureEmphasisOnSelection');\n      this.igoSearchPointerSummaryEnabled = this.configService.getConfig('hasSearchPointerSummary');\n      if (this.igoSearchPointerSummaryEnabled === undefined) {\n        this.igoSearchPointerSummaryEnabled = this.storageService.get('searchPointerSummaryEnabled') as boolean || false;\n      }\n  }\n\n  ngOnInit() {\n    window['IGO'] = this;\n    this.hasGeolocateButton = this.configService.getConfig('hasGeolocateButton') === undefined ? true :\n      this.configService.getConfig('hasGeolocateButton');\n\n    this.map.ol.once('rendercomplete', () => {\n      if (this.configService.getConfig('geolocate.activateDefault') !== undefined) {\n        this.map.geolocationController.tracking = this.configService.getConfig('geolocate.activateDefault');\n      }\n\n    });\n\n    this.searchState.searchTermSplitter$.next(this.termSplitter);\n\n    this.authService.authenticate$.subscribe((authenticated) => {\n      this.contextLoaded = false;\n    });\n\n    this.context$$ = this.contextState.context$.subscribe(\n      (context: DetailedContext) => this.onChangeContext(context)\n    );\n\n    const contextActions = [{\n      id: 'coordinates',\n      title: 'coordinates',\n      handler: () => this.searchCoordinate(this.contextMenuCoord)\n    },\n    {\n      id: 'googleMaps',\n      title: 'googleMap',\n      handler: () => this.openGoogleMaps(this.contextMenuCoord)\n    },\n    {\n      id: 'googleStreetView',\n      title: 'googleStreetView',\n      handler: () => this.openGoogleStreetView(this.contextMenuCoord)\n    }];\n\n    this.contextMenuStore.load(contextActions);\n\n    this.map.ol.once('rendercomplete', () => {\n      this.readQueryParams();\n    });\n\n    this.onSettingsChange$.subscribe(() => {\n      this.searchState.setSearchSettingsChange();\n    });\n\n    this.searchState.selectedResult$.subscribe((result) => {\n      if (result && this.isMobile()) {\n        this.closeSidenav();\n      }\n    });\n\n    this.workspaceState.workspaceEnabled$.next(this.hasExpansionPanel);\n    this.workspaceState.store.empty$.subscribe((workspaceEmpty) => {\n      if (!this.hasExpansionPanel) {\n        return;\n      }\n      this.workspaceState.workspaceEnabled$.next(workspaceEmpty ? false : true);\n      if (workspaceEmpty) {\n        this.expansionPanelExpanded = false;\n      }\n      this.updateMapBrowserClass();\n    });\n\n    this.workspaceState.workspace$.subscribe((activeWks: WfsWorkspace | FeatureWorkspace | EditionWorkspace) => {\n      if (activeWks) {\n        this.selectedWorkspace$.next(activeWks);\n        this.expansionPanelExpanded = true;\n\n        if (activeWks.layer.options.workspace?.pageSize && activeWks.layer.options.workspace?.pageSizeOptions) {\n          this.paginatorOptions = {\n            pageSize: activeWks.layer.options.workspace?.pageSize,\n            pageSizeOptions: activeWks.layer.options.workspace?.pageSizeOptions\n          };\n        } else {\n          this.paginatorOptions = {\n            pageSize: 50,\n            pageSizeOptions: [1, 5, 10, 20, 50, 100, 500]\n          };\n        }\n      } else {\n        this.expansionPanelExpanded = false;\n      }\n    });\n\n    this.activeWidget$$ = this.workspaceState.activeWorkspaceWidget$.subscribe(\n      (widget: Widget) => {\n        if (widget !== undefined) {\n          this.openToastPanelForExpansion();\n          this.showToastPanelForExpansionToggle = true;\n        } else {\n          this.closeToastPanelForExpansion();\n          this.showToastPanelForExpansionToggle = false;\n        }\n      }\n    );\n\n    this.openSidenav$$ = this.toolState.openSidenav$.subscribe(\n      (openSidenav: boolean) => {\n        if (openSidenav) {\n          this.openSidenav();\n          this.toolState.openSidenav$.next(false);\n        }\n      }\n    );\n\n    this.sidenavMediaAndOrientation$$ =\n      combineLatest([\n        this.sidenavOpened$,\n        this.mediaService.media$,\n        this.mediaService.orientation$]\n      ).pipe(\n        debounceTime(50)\n      ).subscribe(() => {\n        this.computeToastPanelOffsetX();\n      });\n  }\n\n  computeToastPanelOffsetX() {\n    if (this.isMobile() || !this.isLandscape()) {\n      Promise.resolve().then(() => this.toastPanelOffsetX$.next(undefined));\n    } else {\n      Promise.resolve().then(() => this.toastPanelOffsetX$.next(this.getToastPanelExtent()));\n    }\n  }\n\n  createFeatureProperties(layer: ImageLayer | VectorLayer) {\n    let properties = {};\n    layer.options.sourceOptions.sourceFields.forEach(field => {\n      if (!field.primary && field.visible) {\n        properties[field.name] = '';\n      }\n    });\n    return properties;\n  }\n\n  entitySortChange() {\n    this.workspaceEntitySortChange$.next(true);\n  }\n\n  ngOnDestroy() {\n    this.context$$.unsubscribe();\n    this.activeWidget$$.unsubscribe();\n    this.openSidenav$$.unsubscribe();\n    this.workspaceMaximize$$.map(f => f.unsubscribe());\n    this.sidenavMediaAndOrientation$$.unsubscribe();\n  }\n\n  removeFeatureFromMap() {\n    this.map.searchResultsOverlay.clear();\n  }\n\n  /**\n   * Cancel ongoing add layer, if any\n   */\n   private cancelOngoingAddLayer() {\n    this.addedLayers$$.forEach((sub: Subscription) => sub.unsubscribe());\n    this.addedLayers$$ = [];\n  }\n\n  onBackdropClick() {\n    this.closeSidenav();\n  }\n\n  onToggleSidenavClick() {\n    this.toggleSidenav();\n  }\n\n  closeToastPanelForExpansion() {\n    this.toastPanelForExpansionOpened = false;\n  }\n\n  openToastPanelForExpansion() {\n    this.toastPanelForExpansionOpened = true;\n  }\n\n  onSearchTermChange(term?: string) {\n    if (this.routeParams?.search && term !== this.routeParams.search) {\n      this.searchState.deactivateCustomFilterTermStrategy();\n    }\n\n    this.searchState.setSearchTerm(term);\n    const termWithoutHashtag = term.replace(/(#[^\\s]*)/g, '').trim();\n    if (termWithoutHashtag.length < 2) {\n      this.onClearSearch();\n      return;\n    }\n    this.onBeforeSearch();\n  }\n\n  onSearch(event: { research: Research; results: SearchResult[] }) {\n    const results = event.results;\n\n    const isReverseSearch = !sourceCanSearch(event.research.source);\n\n    let enabledSources;\n    if (isReverseSearch) {\n      enabledSources = this.searchSourceService\n        .getEnabledSources()\n        .filter(sourceCanReverseSearch);\n    } else {\n      enabledSources = this.searchSourceService\n        .getEnabledSources()\n        .filter(sourceCanSearch);\n    }\n\n    const newResults = this.searchStore.entities$.value\n      .filter(\n        (result: SearchResult) =>\n          result.source !== event.research.source &&\n          enabledSources.includes(result.source)\n      )\n      .concat(results);\n    this.searchStore.updateMany(newResults);\n  }\n\n  onSearchSettingsChange() {\n    this.onSettingsChange$.next(true);\n  }\n\n  private closeSidenav() {\n    this.sidenavOpened = false;\n    this.map.viewController.padding[3] = 0;\n  }\n\n  private openSidenav() {\n    this.sidenavOpened = true;\n    this.map.viewController.padding[3] = this.isMobile() ? 0 : 400;\n  }\n\n  private toggleSidenav() {\n    this.sidenavOpened ? this.closeSidenav() : this.openSidenav();\n    this.computeToastPanelOffsetX();\n  }\n\n  public toolChanged(tool: Tool) {\n    if (tool && tool.name === 'searchResults' && this.searchBar) {\n      this.searchBar.nativeElement.getElementsByTagName('input')[0].focus();\n    }\n  }\n\n  private computeHomeExtentValues(context: DetailedContext) {\n    if (context?.map?.view?.homeExtent) {\n      this.homeExtent = context.map.view.homeExtent.extent;\n      this.homeCenter = context.map.view.homeExtent.center;\n      this.homeZoom = context.map.view.homeExtent.zoom;\n    } else {\n      this.homeExtent = undefined;\n      this.homeCenter = undefined;\n      this.homeZoom = undefined;\n    }\n\n  }\n\n  private onChangeContext(context: DetailedContext) {\n    this.cancelOngoingAddLayer();\n    if (context === undefined) {\n      return;\n    }\n    if (this.workspace && !this.workspace.entityStore.empty) {\n      this.workspace.entityStore.clear();\n    }\n    if (!this.queryState.store.empty) {\n      this.queryState.store.softClear();\n    }\n\n    this.computeHomeExtentValues(context);\n\n    this.route.queryParams.pipe(debounceTime(250)).subscribe((qParams) => {\n      if (!qParams['context'] || qParams['context'] === context.uri) {\n        this.readLayersQueryParams(qParams);\n      }\n    });\n\n    if (this.contextLoaded) {\n      const contextManager = this.toolbox.getTool('contextManager');\n      const contextManagerOptions = contextManager\n        ? contextManager.options\n        : {};\n      let toolToOpen = contextManagerOptions.toolToOpenOnContextChange;\n\n      if (!toolToOpen) {\n        const toolOrderToOpen = ['mapTools', 'map', 'mapDetails', 'mapLegend'];\n        for (const toolName of toolOrderToOpen) {\n          if (this.toolbox.getTool(toolName)) {\n            toolToOpen = toolName;\n            break;\n          }\n        }\n      }\n\n      if (toolToOpen) {\n        this.toolbox.activateTool(toolToOpen);\n      }\n    }\n\n    this.contextLoaded = true;\n  }\n\n  private onBeforeSearch() {\n    if (\n      !this.toolbox.activeTool$.value ||\n      this.toolbox.activeTool$.value.name !== 'searchResults'\n    ) {\n      this.toolbox.activateTool('searchResults');\n    }\n    this.openSidenav();\n  }\n\n  public onClearSearch() {\n    this.map.searchResultsOverlay.clear();\n    this.searchStore.clear();\n    this.searchState.setSelectedResult(undefined);\n    this.searchState.deactivateCustomFilterTermStrategy();\n  }\n\n  onContextMenuOpen(event: { x: number; y: number }) {\n    this.contextMenuCoord = this.getClickCoordinate(event) as [number, number];\n  }\n\n  private getClickCoordinate(event: { x: number; y: number }) {\n    const contextmenuPoint = event;\n    const boundingMapBrowser = this.mapBrowser.nativeElement.getBoundingClientRect();\n    contextmenuPoint.y =\n      contextmenuPoint.y -\n      boundingMapBrowser.top +\n      (window.scrollY || window.pageYOffset);\n    contextmenuPoint.x =\n      contextmenuPoint.x -\n      boundingMapBrowser.left +\n      (window.scrollX || window.pageXOffset);\n    const pixel = [contextmenuPoint.x, contextmenuPoint.y];\n\n    const coord = this.map.ol.getCoordinateFromPixel(pixel);\n    const proj = this.map.projection;\n    return olProj.transform(coord, proj, 'EPSG:4326');\n  }\n\n  private openGoogleMaps(coord: [number, number]) {\n    window.open(GoogleLinks.getGoogleMapsCoordLink(coord[0], coord[1]));\n  }\n\n  private openGoogleStreetView(coord: [number, number]) {\n    window.open(GoogleLinks.getGoogleStreetViewLink(coord[0], coord[1]));\n  }\n\n  searchCoordinate(coord: [number, number]) {\n    this.searchBarTerm = coord.map((c) => c.toFixed(6)).join(', ');\n  }\n\n  updateMapBrowserClass() {\n    const header = this.queryState.store.entities$.value.length > 0;\n    if (this.hasExpansionPanel && this.workspaceState.workspaceEnabled$.value) {\n      this.mapBrowser.nativeElement.classList.add('has-expansion-panel');\n    } else {\n      this.mapBrowser.nativeElement.classList.remove('has-expansion-panel');\n    }\n\n    if (this.hasExpansionPanel && this.expansionPanelExpanded) {\n      if (this.workspaceMaximize$.value) {\n        this.mapBrowser.nativeElement.classList.add('expansion-offset-maximized');\n        this.mapBrowser.nativeElement.classList.remove('expansion-offset');\n      } else {\n        this.mapBrowser.nativeElement.classList.add('expansion-offset');\n        this.mapBrowser.nativeElement.classList.remove('expansion-offset-maximized');\n      }\n    } else {\n      if (this.workspaceMaximize$.value) {\n        this.mapBrowser.nativeElement.classList.remove('expansion-offset-maximized');\n      } else {\n        this.mapBrowser.nativeElement.classList.remove('expansion-offset');\n      }\n    }\n\n    if (this.sidenavOpened) {\n      this.mapBrowser.nativeElement.classList.add('sidenav-offset');\n    } else {\n      this.mapBrowser.nativeElement.classList.remove('sidenav-offset');\n    }\n\n    if (this.sidenavOpened && !this.isMobile()) {\n      this.mapBrowser.nativeElement.classList.add('sidenav-offset-baselayers');\n    } else {\n      this.mapBrowser.nativeElement.classList.remove(\n        'sidenav-offset-baselayers'\n      );\n    }\n\n    if (\n      header &&\n      (this.isMobile() || this.isTablet() || this.sidenavOpened) &&\n      !this.expansionPanelExpanded\n    ) {\n      this.mapBrowser.nativeElement.classList.add('toast-offset-attribution');\n    } else {\n      this.mapBrowser.nativeElement.classList.remove(\n        'toast-offset-attribution'\n      );\n    }\n  }\n\n  getToastPanelExtent() {\n    if (!this.sidenavOpened) {\n      if (this.toastPanelHtmlDisplay && this.mediaService.isDesktop()) {\n        return 'htmlDisplay';\n      }\n      if (this.fullExtent) {\n        return 'fullStandard';\n      } else {\n        return 'standard';\n      }\n    } else if (this.sidenavOpened) {\n      if (this.toastPanelHtmlDisplay && this.mediaService.isDesktop()) {\n        return 'htmlDisplayOffsetX';\n      }\n      if (this.fullExtent) {\n        return 'fullOffsetX';\n      } else {\n        return 'standardOffsetX';\n      }\n    }\n  }\n\n  onPointerSummaryStatusChange(value) {\n    this.storageService.set('searchPointerSummaryEnabled', value);\n    this.igoSearchPointerSummaryEnabled = value;\n  }\n\n  getControlsOffsetY() {\n    return this.expansionPanelExpanded ?\n      this.workspaceMaximize$.value ? 'firstRowFromBottom-expanded-maximized' : 'firstRowFromBottom-expanded' :\n      'firstRowFromBottom';\n  }\n\n  private readQueryParams() {\n    this.route.queryParams.subscribe((params) => {\n      this.routeParams = params;\n      this.readToolParams();\n      this.readSearchParams();\n      this.readFocusFirst();\n      this.computeZoomToExtent();\n    });\n  }\n\n  private computeZoomToExtent() {\n    if (this.routeParams['zoomExtent']) {\n      const extentParams = this.routeParams['zoomExtent'].split(',');\n      const olExtent = olProj.transformExtent(\n        extentParams,\n        'EPSG:4326',\n        this.map.projection\n      );\n      this.map.viewController.zoomToExtent(olExtent as [number, number, number, number]);\n    }\n  }\n\n  private computeFocusFirst() {\n    setTimeout(() => {\n      const resultItem: any = document\n        .getElementsByTagName('igo-search-results-item')\n        .item(0);\n      if (resultItem) {\n        resultItem.click();\n      }\n    }, 1);\n  }\n\n  private readFocusFirst() {\n    if (this.routeParams['sf'] === '1' && this.termDefinedInUrl) {\n      const entities$$ = this.searchStore.stateView.all$()\n        .pipe(\n          skipWhile((entities) => entities.length === 0),\n          debounceTime(500),\n          take(1)\n        )\n        .subscribe((entities) => {\n          entities$$.unsubscribe();\n          if (entities.length && !this.termDefinedInUrlTriggered) {\n            this.computeFocusFirst();\n            this.termDefinedInUrlTriggered = true;\n          }\n        });\n    }\n  }\n\n  private readSearchParams() {\n    if (this.routeParams['search']) {\n      this.termDefinedInUrl = true;\n      if (this.routeParams['exactMatch'] === '1') {\n        this.searchState.activateCustomFilterTermStrategy();\n      }\n      if (this.routeParams['search'] && !this.routeParams['zoom'] && this.routeParams['sf'] !== '1') {\n        const entities$$ = this.searchStore.stateView.all$()\n          .pipe(\n            skipWhile((entities) => entities.length === 0),\n            debounceTime(500),\n            take(1)\n          )\n          .subscribe((entities) => {\n            entities$$.unsubscribe();\n            const searchResultsOlFeatures = entities\n              .filter(e => e.entity.meta.dataType === FEATURE)\n              .map((entity: EntityRecord<SearchResult>) =>\n                new olFormatGeoJSON().readFeature(entity.entity.data, {\n                  dataProjection: entity.entity.data.projection,\n                  featureProjection: this.map.projection\n                })\n              );\n            const totalExtent = computeOlFeaturesExtent(this.map, searchResultsOlFeatures);\n            this.map.viewController.zoomToExtent(totalExtent);\n          });\n      }\n      this.searchBarTerm = this.routeParams['search'];\n    }\n    if (this.routeParams['searchGeom'] === '1') {\n      this.searchState.searchResultsGeometryEnabled$.next(true);\n    }\n  }\n\n  private readToolParams() {\n    if (this.routeParams['tool']) {\n      this.matDialogRef$.pipe(\n        skipWhile(r => r !== undefined),\n        first()\n      ).subscribe(matDialogOpened => {\n        if (!matDialogOpened) {\n          this.toolbox.activateTool(this.routeParams['tool']);\n        }\n      });\n    }\n\n    if (this.routeParams['sidenav'] === '1') {\n      setTimeout(() => {\n        this.openSidenav();\n      }, 250);\n    }\n\n    if (this.routeParams['routing']) {\n      let routingCoordLoaded = false;\n      const stopCoords = this.routeParams['routing'].split(';');\n      const routingOptions = this.routeParams['routingOptions'];\n      let resultSelection: number;\n      if (routingOptions) {\n        resultSelection = parseInt(routingOptions.split('result:')[1], 10);\n      }\n      this.directionState.stopsStore.storeInitialized$\n        .pipe(skipWhile(init => !init), first())\n        .subscribe((init: boolean) => {\n          if (init && !routingCoordLoaded) {\n            routingCoordLoaded = true;\n            stopCoords.map((coord, i) => {\n              if (i > 1) {\n                addStopToStore(this.directionState.stopsStore);\n              }\n            });\n            setTimeout(() => {\n              stopCoords.map((coord, i) => {\n                const stop = this.directionState.stopsStore.all().find(e => e.position === i);\n                stop.text = coord;\n                stop.coordinates = coord.split(',');\n                this.directionState.stopsStore.update(stop);\n              });\n            }, this.directionState.debounceTime * 1.25); // this delay is due to the default component debounce time\n          }\n        });\n      // zoom to active route\n      this.directionState.routesFeatureStore.count$\n        .pipe(skipWhile(c => c < 1), first())\n        .subscribe(c => {\n          if (c >= 1) {\n            this.directionState.zoomToActiveRoute$.next();\n          }\n        });\n      // select the active route by url controls\n      this.directionState.routesFeatureStore.count$\n        .pipe(skipWhile(c => c < 2), first())\n        .subscribe(() => {\n          if (resultSelection) {\n            this.directionState.routesFeatureStore.entities$.value.map(d => d.properties.active = false);\n            this.directionState.routesFeatureStore.entities$.value[resultSelection].properties.active = true;\n            this.directionState.zoomToActiveRoute$.next();\n          }\n        });\n    }\n  }\n\n  private readLayersQueryParams(params: Params) {\n    this.readLayersQueryParamsByType(params, 'wms');\n    this.readLayersQueryParamsByType(params, 'wmts');\n    this.readLayersQueryParamsByType(params, 'arcgisrest');\n    this.readLayersQueryParamsByType(params, 'imagearcgisrest');\n    this.readLayersQueryParamsByType(params, 'tilearcgisrest');\n    this.readVectorQueryParams(params);\n  }\n\n  getQueryParam(name, url) {\n    let paramValue;\n    if (url.includes('?')) {\n      const httpParams = new HttpParams({ fromString: url.split('?')[1] });\n      paramValue = httpParams.get(name);\n    }\n    return paramValue;\n  }\n\n  private readLayersQueryParamsByType(params: Params, type) {\n    let nameParamLayersKey;\n    let urlsKey;\n    switch (type) {\n      case 'wms':\n        if ((params['layers'] || params['wmsLayers']) && params['wmsUrl']) {\n          urlsKey = 'wmsUrl';\n          nameParamLayersKey = params['wmsLayers'] ? 'wmsLayers' : 'layers'; // for maintain compatibility\n        }\n        break;\n      case 'wmts':\n        if (params['wmtsLayers'] && params['wmtsUrl']) {\n          urlsKey = 'wmtsUrl';\n          nameParamLayersKey = 'wmtsLayers';\n        }\n        break;\n      case 'arcgisrest':\n        if (params['arcgisLayers'] && params['arcgisUrl']) {\n          urlsKey = 'arcgisUrl';\n          nameParamLayersKey = 'arcgisLayers';\n        }\n        break;\n      case 'imagearcgisrest':\n        if (params['iarcgisLayers'] && params['iarcgisUrl']) {\n          urlsKey = 'iarcgisUrl';\n          nameParamLayersKey = 'iarcgisLayers';\n        }\n        break;\n      case 'tilearcgisrest':\n        if (params['tarcgisLayers'] && params['tarcgisUrl']) {\n          urlsKey = 'tarcgisUrl';\n          nameParamLayersKey = 'tarcgisLayers';\n        }\n        break;\n    }\n    if (!nameParamLayersKey || !urlsKey) {\n      return;\n    }\n    const layersByService = params[nameParamLayersKey].split('),(');\n    const urls = params[urlsKey].split(',');\n\n    let cnt = 0;\n    urls.forEach((urlSrc) => {\n      let url = urlSrc;\n      const version =\n        this.getQueryParam('VERSION', url) ||\n        this.getQueryParam('version', url) ||\n        undefined;\n      if (version) {\n        url = url.replace('VERSION=' + version, '').replace('version=' + version, '');\n      }\n\n      const currentLayersByService = this.extractLayersByService(\n        layersByService[cnt]\n      );\n      currentLayersByService.forEach((layer) => {\n        const layerFromUrl = layer.split(':igoz');\n        const layerOptions = ObjectUtils.removeUndefined({\n          type,\n          url: url,\n          layer: layerFromUrl[0],\n          params: type === 'wms' ? { LAYERS: layerFromUrl[0] } : undefined\n        });\n        const id = generateIdFromSourceOptions(layerOptions);\n        const visibility = this.computeLayerVisibilityFromUrl(params, id);\n        this.addLayerFromURL(\n          url,\n          layerFromUrl[0],\n          type,\n          version,\n          visibility,\n          layerFromUrl[1] ? parseInt(layerFromUrl[1], 10) : undefined\n        );\n      });\n      cnt += 1;\n    });\n  }\n\n  private readVectorQueryParams(params: Params) {\n    if (params['vector']) {\n      const url = params['vector'] as string;\n      const lastIndex = url.lastIndexOf('/');\n      const fileName = url.slice(lastIndex + 1, url.length);\n\n      this.http.get(`${url}`, { responseType: 'blob' }).subscribe((data) => {\n        const file = new File([data], fileName, {\n          type: data.type,\n          lastModified: Date.now()\n        });\n        this.importService.import(file).subscribe(\n          (features: Feature[]) => this.onFileImportSuccess(file, features),\n          (error: Error) => this.onFileImportError(file, error)\n        );\n      });\n    }\n  }\n\n  private onFileImportSuccess(file: File, features: Feature[]) {\n    handleFileImportSuccess(\n      file,\n      features,\n      this.map,\n      this.messageService,\n      this.languageService\n    );\n  }\n\n  private onFileImportError(file: File, error: Error) {\n    handleFileImportError(\n      file,\n      error,\n      this.messageService,\n      this.languageService\n    );\n  }\n\n  private extractLayersByService(layersByService: string): any[] {\n    let outLayersByService = layersByService;\n    outLayersByService = outLayersByService.startsWith('(')\n      ? outLayersByService.substr(1)\n      : outLayersByService;\n    outLayersByService = outLayersByService.endsWith(')')\n      ? outLayersByService.slice(0, -1)\n      : outLayersByService;\n    return outLayersByService.split(',');\n  }\n  private addLayerFromURL(\n    url: string,\n    name: string,\n    type: 'wms' | 'wmts' | 'arcgisrest' | 'imagearcgisrest' | 'tilearcgisrest',\n    version: string,\n    visibility: boolean = true,\n    zIndex: number\n  ) {\n    if (!this.contextLoaded) {\n      return;\n    }\n    const commonSourceOptions = {\n      optionsFromCapabilities: true,\n      optionsFromApi: true,\n      crossOrigin: true,\n      type,\n      url\n    };\n    const arcgisClause = (type === 'arcgisrest' || type === 'imagearcgisrest' || type === 'tilearcgisrest');\n    let sourceOptions = {\n      version: type === 'wmts' ? '1.0.0' : undefined,\n      queryable: arcgisClause ? true : false,\n      queryFormat: arcgisClause ? 'esrijson' : undefined,\n      layer: name\n    };\n    if (type === 'wms') {\n      sourceOptions = { params: { LAYERS: name, VERSION: version } } as any;\n    }\n\n    sourceOptions = ObjectUtils.removeUndefined(Object.assign({}, sourceOptions, commonSourceOptions));\n\n    this.addedLayers$$.push(\n      this.layerService\n        .createAsyncLayer({\n          zIndex: zIndex,\n          visible: visibility,\n          sourceOptions\n        })\n        .subscribe((l) => {\n          this.map.addLayer(l);\n        })\n    );\n  }\n\n  private computeLayerVisibilityFromUrl(\n    params: Params,\n    currentLayerid: string\n  ): boolean {\n    const queryParams = params;\n    let visible = true;\n    if (!queryParams || !currentLayerid) {\n      return visible;\n    }\n    let visibleOnLayersParams = '';\n    let visibleOffLayersParams = '';\n    let visiblelayers: string[] = [];\n    let invisiblelayers: string[] = [];\n    if (queryParams['visiblelayers']) {\n      visibleOnLayersParams = queryParams['visiblelayers'];\n    }\n    if (queryParams['invisiblelayers']) {\n      visibleOffLayersParams = queryParams['invisiblelayers'];\n    }\n\n    /* This order is important because to control whichever\n     the order of * param. First whe open and close everything.*/\n    if (visibleOnLayersParams === '*') {\n      visible = true;\n    }\n    if (visibleOffLayersParams === '*') {\n      visible = false;\n    }\n\n    // After, managing named layer by id (context.json OR id from datasource)\n    visiblelayers = visibleOnLayersParams.split(',');\n    invisiblelayers = visibleOffLayersParams.split(',');\n    if (visiblelayers.indexOf(currentLayerid) > -1 || visiblelayers.indexOf(currentLayerid.toString()) > -1) {\n      visible = true;\n    }\n    if (invisiblelayers.indexOf(currentLayerid) > -1 || invisiblelayers.indexOf(currentLayerid.toString()) > -1) {\n      visible = false;\n    }\n    return visible;\n  }\n}\n","import './portal.variables.scss';\n\nimport {\n  trigger,\n  state,\n  style,\n  transition,\n  animate,\n  AnimationTriggerMetadata\n} from '@angular/animations';\n\nexport function controlSlideX(): AnimationTriggerMetadata {\n  return trigger('controlStateX', [\n    state(\n      'left',\n      style({\n        left: '60px'\n      })\n    ),\n    state(\n      'right',\n      style({\n        left: '465px'\n      })\n    ),\n    transition('* => *', animate('200ms'))\n  ]);\n}\n\nexport function controlSlideY(): AnimationTriggerMetadata {\n  return trigger('controlStateY', [\n    state('close', style({})),\n    state(\n      'firstRowFromBottom',\n      style({\n        bottom: '2px',\n        'margin-left': '0px'\n      })\n    ),\n    state(\n      'firstRowFromBottom-expanded',\n      style({\n        bottom: '285px',\n        'margin-left': '-55px'\n      })\n    ),\n    state(\n      'firstRowFromBottom-expanded-maximized',\n      style({\n        bottom: '500px', // workspace full size\n        'margin-left': '-55px'\n      })\n    ),\n    transition('* => *', animate('200ms'))\n  ]);\n}\n\nexport function controlsAnimations(): AnimationTriggerMetadata[] {\n  return [\n    trigger('controlsOffsetY', [\n      state('close', style({})),\n      state(\n        'firstRowFromBottom',\n        style({\n          bottom: '5px'\n        })\n      ),\n      state(\n        'firstRowFromBottom-expanded',\n        style({\n          bottom: '5px'\n        })\n      ),\n      state(\n        'firstRowFromBottom-expanded-maximized',\n        style({\n          bottom: '500px'\n        })\n      ),\n      state(\n        'secondRowFromBottom',\n        style({\n          bottom: '47px'\n        })\n      ),\n      state(\n        'thirdRowFromBottom',\n        style({\n          bottom: '104px'\n        })\n      ),\n      state(\n        '',\n        style({\n          bottom: 'calc(285px)'\n        })\n      ),\n      state(\n        'secondRowFromBottom-expanded',\n        style({\n          bottom: 'calc(285px + 52px)'\n        })\n      ),\n      state(\n        'thirdRowFromBottom-expanded',\n        style({\n          bottom: 'calc(285px + 104px)'\n        })\n      ),\n      transition('* => *', animate('200ms'))\n    ])\n  ];\n}\n","import { Component } from '@angular/core';\nimport { ConfigService } from '@igo2/core';\n\n@Component({\n  selector: 'app-map',\n  templateUrl: './map.component.html',\n  styleUrls: ['./map.component.scss']\n})\nexport class MapComponent {\n  public hasHeader = true;\n\n  constructor(private configService: ConfigService) {\n\n    this.hasHeader = this.configService.getConfig('header.hasHeader') === undefined ? false :\n      this.configService.getConfig('header.hasHeader');\n   }\n\n}\n","<app-portal \n    [ngClass]=\" hasHeader? 'portal-hasHeader-hasMenu' : 'portal-hasMenu' \">\n</app-portal>\n","import { HomeComponent } from '../menu-pages/home/home.component';\nimport { AboutComponent } from '../menu-pages/about/about.component';\nimport { MapComponent } from '../menu-pages/map/map.component';\n\nimport { NgModule } from '@angular/core';\nimport { Routes, RouterModule } from '@angular/router';\n\nconst routes: Routes = [\n    { path: '', component: HomeComponent },\n    { path: 'carte', component: MapComponent },\n    { path: 'en-savoir-plus', component: AboutComponent }\n  ];\n\n\n@NgModule({\n    imports: [RouterModule.forRoot(routes, {\n      onSameUrlNavigation: 'reload',\n      relativeLinkResolution: 'legacy'\n  })],\n    exports: [RouterModule],\n  })\n  export class MenuRoutingModule { }\n","import { NgModule } from '@angular/core';\nimport { CommonModule } from '@angular/common';\nimport { HeaderComponent } from './header.component';\nimport { IgoLanguageModule } from '@igo2/core';\nimport { MatToolbarModule } from '@angular/material/toolbar';\nimport { MenuRoutingModule } from '../menu/menu-routing/menu-routing.module';\n\n@NgModule({\n  declarations: [\n    HeaderComponent\n  ],\n  imports: [\n    CommonModule,\n    IgoLanguageModule,\n    MatToolbarModule,\n    MenuRoutingModule\n    ],\n  exports: [\n    HeaderComponent\n  ]\n})\nexport class HeaderModule { }\n","import { NgModule } from '@angular/core';\nimport { CommonModule } from '@angular/common';\nimport { FooterComponent } from './footer.component';\nimport { IgoLanguageModule } from '@igo2/core';\n\n@NgModule({\n  declarations: [\n    FooterComponent\n  ],\n  imports: [\n    CommonModule,\n    IgoLanguageModule\n  ],\n  exports: [\n    FooterComponent\n  ]\n})\nexport class FooterModule { }\n","import { Injectable, Inject, Injector } from '@angular/core';\nimport { HttpClient, HttpParams, HttpParameterCodec } from '@angular/common/http';\n\nimport { Observable, of, BehaviorSubject } from 'rxjs';\nimport { map, catchError } from 'rxjs/operators';\n\nimport { AuthService } from '@igo2/auth';\nimport { LanguageService, StorageService } from '@igo2/core';\nimport { ObjectUtils } from '@igo2/utils';\n\nimport pointOnFeature from '@turf/point-on-feature';\n\nimport {\n  FEATURE,\n  Feature,\n  GoogleLinks,\n  SearchResult,\n  SearchSource, TextSearch, ReverseSearch,\n  SearchSourceOptions,\n  TextSearchOptions,\n  ReverseSearchOptions,\n  computeTermSimilarity\n} from '@igo2/geo';\n\nimport {\n  IChercheData,\n  IChercheResponse,\n  IChercheReverseData,\n  IChercheReverseResponse\n} from './icherche.interfaces';\n\nimport { Cacheable } from 'ts-cacheable';\n\n@Injectable()\nexport class IChercheSearchResultFormatter {\n  constructor(private languageService: LanguageService) {}\n\n  formatResult(result: SearchResult<Feature>): SearchResult<Feature> {\n    return result;\n  }\n}\n\n// Fix the \"+\" is replaced with space \" \" in a query string\n// https://github.com/angular/angular/issues/11058\nexport class IgoHttpParameterCodec implements HttpParameterCodec {\n  encodeKey(key: string): string {\n    return encodeURIComponent(key);\n  }\n\n  encodeValue(value: string): string {\n    return encodeURIComponent(value);\n  }\n\n  decodeKey(key: string): string {\n    return decodeURIComponent(key);\n  }\n\n  decodeValue(value: string): string {\n    return decodeURIComponent(value);\n  }\n}\n\n/**\n * ICherche search source\n */\n@Injectable()\nexport class IChercheSearchSource extends SearchSource implements TextSearch {\n  static id = 'icherche';\n  static type = FEATURE;\n  static propertiesBlacklist: string[] = [];\n  title$: BehaviorSubject<string> = new BehaviorSubject<string>('');\n\n  private hashtagsLieuxToKeep = [];\n\n  get title(): string {\n    return this.title$.getValue();\n  }\n\n  constructor(\n    private http: HttpClient,\n    private languageService: LanguageService,\n    storageService: StorageService,\n    @Inject('options') options: SearchSourceOptions,\n    @Inject(IChercheSearchResultFormatter)\n    private formatter: IChercheSearchResultFormatter,\n    injector: Injector\n  ) {\n    super(options, storageService);\n\n    this.languageService.translate\n      .get(this.options.title)\n      .subscribe((title) => this.title$.next(title));\n\n    const authService = injector.get(AuthService);\n    if (this.settings.length) {\n      if (!authService) {\n        this.getAllowedTypes();\n      } else {\n        authService.authenticate$.subscribe(() => {\n          this.getAllowedTypes();\n        });\n      }\n    }\n  }\n\n  getId(): string {\n    return IChercheSearchSource.id;\n  }\n\n  getType(): string {\n    return IChercheSearchSource.type;\n  }\n\n  protected getDefaultOptions(): SearchSourceOptions {\n    const limit =\n      this.options.params && this.options.params.limit\n        ? Number(this.options.params.limit)\n        : undefined;\n    const ecmax =\n      this.options.params && this.options.params.ecmax\n        ? Number(this.options.params.ecmax)\n        : undefined;\n\n    const types = this.options.params?.type\n        ? this.options.params.type.replace(/\\s/g, '').toLowerCase().split(',')\n        : [\n            'adresses',\n            'codes-postaux',\n            'routes',\n            'intersections',\n            'municipalites',\n            'mrc',\n            'regadmin',\n            'lieux'\n          ];\n\n    return {\n      title: 'igo.geo.search.icherche.name',\n      searchUrl: 'https://geoegl.msp.gouv.qc.ca/apis/icherche',\n      settings: [\n        {\n          type: 'checkbox',\n          title: 'results type',\n          name: 'type',\n          values: [\n            {\n              title: 'igo.geo.search.icherche.type.address',\n              value: 'adresses',\n              enabled: types.indexOf('adresses') !== -1,\n              hashtags: ['adresse']\n            },\n            {\n              title: 'igo.geo.search.icherche.type.oldAddress',\n              value: 'anciennes-adresses',\n              enabled: types.indexOf('anciennes-adresses') !== -1,\n              hashtags: ['anciennes-adresses']\n            },\n            {\n              title: 'igo.geo.search.icherche.type.postalCode',\n              value: 'codes-postaux',\n              enabled: types.indexOf('codes-postaux') !== -1,\n              hashtags: ['code-postal']\n            },\n            {\n              title: 'igo.geo.search.icherche.type.road',\n              value: 'routes',\n              enabled: types.indexOf('routes') !== -1,\n              hashtags: ['route']\n            },\n            {\n              title: 'igo.geo.search.icherche.type.intersection',\n              value: 'intersections',\n              enabled: types.indexOf('intersections') !== -1,\n              hashtags: ['intersection', '+']\n            },\n            {\n              title: 'igo.geo.search.icherche.type.city',\n              value: 'municipalites',\n              enabled: types.indexOf('municipalites') !== -1,\n              hashtags: ['municipalité', 'mun']\n            },\n            {\n              title: 'igo.geo.search.icherche.type.oldCity',\n              value: 'anciennes-municipalites',\n              enabled: types.indexOf('anciennes-municipalites') !== -1,\n              hashtags: ['anciennes-municipalites']\n            },\n            {\n              title: 'igo.geo.search.icherche.type.mrc',\n              value: 'mrc',\n              enabled: types.indexOf('mrc') !== -1,\n              hashtags: ['mrc']\n            },\n            {\n              title: 'igo.geo.search.icherche.type.regadmin',\n              value: 'regadmin',\n              enabled: types.indexOf('regadmin') !== -1,\n              hashtags: ['région-administrative', 'regadmin']\n            },\n            {\n              title: 'igo.geo.search.icherche.type.entreprise',\n              value: 'entreprises',\n              enabled: types.indexOf('entreprises') !== -1,\n              available: false,\n              hashtags: ['entreprise']\n            },\n            {\n              title: 'igo.geo.search.icherche.type.place',\n              value: 'lieux',\n              enabled: types.indexOf('lieux') !== -1,\n              hashtags: ['lieu']\n            },\n            {\n              title: 'igo.geo.search.icherche.type.exit',\n              value: 'sorties-autoroute',\n              enabled: types.indexOf('sorties-autoroute') !== -1,\n              hashtags: ['sortie', 'sorties', 'exit']\n            },\n            {\n              title: 'igo.geo.search.icherche.type.km',\n              value: 'bornes-km',\n              enabled: types.indexOf('bornes-km') !== -1,\n              hashtags: ['borne', 'bornes', 'repère', 'km']\n            },\n            {\n              title: 'igo.geo.search.icherche.type.gcc',\n              value: 'bornes-gcc',\n              enabled: types.indexOf('bornes-gcc') !== -1,\n              hashtags: ['borne', 'bornes', 'repère', 'gcc', 'ccg']\n            },\n            {\n              title: 'igo.geo.search.icherche.type.cn',\n              value: 'bornes-cn',\n              enabled: types.indexOf('bornes-cn') !== -1,\n              hashtags: ['borne', 'bornes', 'cn']\n            },\n            {\n              title: 'igo.geo.search.icherche.type.sumi',\n              value: 'bornes-sumi',\n              enabled: types.indexOf('bornes-sumi') !== -1,\n              hashtags: ['borne', 'bornes', 'sumi']\n            },\n            {\n              title: 'igo.geo.search.icherche.type.hq',\n              value: 'hq',\n              enabled: types.indexOf('hq') !== -1,\n              hashtags: ['hq']\n            },\n            {\n              title: 'igo.geo.search.icherche.type.cadastre',\n              value: 'cadastre',\n              enabled: types.indexOf('cadastre') !== -1,\n              hashtags: ['cadastre']\n            }\n          ]\n        },\n        {\n          type: 'radiobutton',\n          title: 'results limit',\n          name: 'limit',\n          values: [\n            {\n              title: '1',\n              value: 1,\n              enabled: limit === 1\n            },\n            {\n              title: '5',\n              value: 5,\n              enabled: limit === 5 || !limit\n            },\n            {\n              title: '10',\n              value: 10,\n              enabled: limit === 10\n            },\n            {\n              title: '25',\n              value: 25,\n              enabled: limit === 25\n            },\n            {\n              title: '50',\n              value: 50,\n              enabled: limit === 50\n            }\n          ]\n        },\n        {\n          type: 'radiobutton',\n          title: 'ecmax',\n          name: 'ecmax',\n          values: [\n            {\n              title: '10 %',\n              value: 10,\n              enabled: ecmax === 10\n            },\n            {\n              title: '30 %',\n              value: 30,\n              enabled: ecmax === 30 || !ecmax\n            },\n            {\n              title: '50 %',\n              value: 50,\n              enabled: ecmax === 50\n            },\n            {\n              title: '75 %',\n              value: 75,\n              enabled: ecmax === 75\n            },\n            {\n              title: '100 %',\n              value: 100,\n              enabled: ecmax === 100\n            }\n          ]\n        },\n        {\n          type: 'radiobutton',\n          title: 'restrictExtent',\n          name: 'loc',\n          values: [\n            {\n              title: 'igo.geo.search.icherche.restrictExtent.map',\n              value: 'true',\n              enabled: false\n            },\n            {\n              title: 'igo.geo.search.icherche.restrictExtent.quebec',\n              value: 'false',\n              enabled: true\n            }\n          ]\n        }\n      ]\n    };\n  }\n\n  /**\n   * Search a location by name or keyword\n   * @param term Location name or keyword\n   * @returns Observable of <SearchResult<Feature>[]\n   */\n  @Cacheable({\n    maxCacheCount: 20\n  })\n  search(\n    term: string,\n    options?: TextSearchOptions\n  ): Observable<SearchResult<Feature>[]> {\n    const params = this.computeRequestParams(term, options || {});\n    if (!params.get('type').length) {\n      return of([]);\n    }\n    this.options.params.page = params.get('page') || '1';\n\n    return this.http.get(`${this.searchUrl}/geocode`, { params }).pipe(\n      map((response: IChercheResponse) => this.extractResults(response, term)),\n      catchError((err) => {\n        err.error.toDisplay = true;\n        err.error.title = this.languageService.translate.instant(\n          this.getDefaultOptions().title\n        );\n        throw err;\n      })\n    );\n  }\n\n  private getAllowedTypes() {\n    return this.http\n      .get(`${this.searchUrl}/types`)\n      .subscribe((types: string[]) => {\n        const typeSetting = this.settings.find((s) => s.name === 'type');\n        typeSetting.values.forEach((v) => {\n          const regex = new RegExp(`^${v.value}(\\\\.|$)`);\n          const typesMatched = types.filter((value) => regex.test(value));\n          v.available = typesMatched.length > 0;\n          if (v.value === 'lieux') {\n            this.hashtagsLieuxToKeep = [\n              ...(new Set(\n                typesMatched\n                  .map((t) => t.split('.'))\n                  .reduce((a, b) => a.concat(b))\n                  .filter((t) => t !== 'lieux')\n              ) as any)\n            ];\n          }\n        });\n        this.setParamFromSetting(typeSetting, false);\n      });\n  }\n\n  private computeRequestParams(\n    term: string,\n    options: TextSearchOptions\n  ): HttpParams {\n    const queryParams: any = Object.assign(\n      {\n        geometry: true,\n        bbox: true,\n        icon: true,\n        type:\n          //'adresses,codes-postaux,municipalites,mrc,regadmin,lieux,entreprises,bornes-sumi'\n          ['adresses','codes-postaux','routes','municipalites','mrc','regadmin',\n          'lieux.toponyme.geographie', 'lieux.toponyme.hydro', 'lieux.toponyme.parc', 'lieux.toponyme.secteur']\n      },\n      this.params,\n      this.computeOptionsParam(term, options || {}).params,\n      {\n        q: this.computeTerm(term),\n        page: options.page\n      }\n    );\n\n    if (queryParams.loc === 'true') {\n      const [xMin, yMin, xMax, yMax] = options.extent;\n      queryParams.loc = `${xMin},${yMin};${xMax},${yMin};${xMax},${yMax};${xMin},${yMax};${xMin},${yMin}`;\n    } else if (queryParams.loc === 'false') {\n      delete queryParams.loc;\n    }\n\n    if (/#[A-Za-z]+/.test(queryParams.q)) {\n      queryParams.type = 'lieux';\n    }\n\n    return new HttpParams({\n      fromObject: ObjectUtils.removeUndefined(queryParams),\n      encoder: new IgoHttpParameterCodec()\n    });\n  }\n\n  private extractResults(response: IChercheResponse, term: string): SearchResult<Feature>[] {\n    return response.features.map((data: IChercheData) => {\n      return this.formatter.formatResult(this.dataToResult(data, term, response));\n    });\n  }\n\n  private dataToResult(\n    data: IChercheData,\n    term: string,\n    response?: IChercheResponse\n  ): SearchResult<Feature> {\n    const properties = this.computeProperties(data);\n    const id = [this.getId(), properties.type, properties.code].join('.');\n\n    const titleHtml = data.highlight.title || data.properties.nom;\n    const subtitleHtml = data.highlight.title2\n      ? ' <small> ' + data.highlight.title2 + '</small>'\n      : '';\n    const subtitleHtml2 = data.highlight.title3\n      ? '<br><small> ' + data.highlight.title3 + '</small>'\n      : '';\n\n    return {\n      source: this,\n      data: {\n        type: FEATURE,\n        projection: 'EPSG:4326',\n        geometry: data.geometry,\n        extent: data.bbox,\n        properties,\n        meta: {\n          id,\n          title: data.properties.nom\n        }\n      },\n      meta: {\n        dataType: FEATURE,\n        id,\n        title: data.properties.nom,\n        titleHtml: titleHtml + subtitleHtml + subtitleHtml2,\n        icon: data.icon || 'map-marker',\n        score: data.score || computeTermSimilarity(term.trim(), data.properties.nom),\n        nextPage:\n          response.features.length % +this.options.params.limit === 0 &&\n          +this.options.params.page < 10\n      }\n    };\n  }\n\n  private computeProperties(data: IChercheData): { [key: string]: any } {\n    const properties = ObjectUtils.removeKeys(\n      data.properties,\n      IChercheSearchSource.propertiesBlacklist\n    );\n\n    if (!data.geometry) {\n      return Object.assign({ type: data.index }, properties);\n    }\n\n    const googleLinksProperties: {\n      GoogleMaps: string;\n      GoogleStreetView?: string;\n    } = {\n      GoogleMaps: ''\n    };\n\n    let googleMaps;\n    if (data.geometry.type === 'Point') {\n      googleMaps = GoogleLinks.getGoogleMapsCoordLink(\n        data.geometry.coordinates[0],\n        data.geometry.coordinates[1]\n      );\n    } else {\n      const point = pointOnFeature(data.geometry);\n      googleMaps = GoogleLinks.getGoogleMapsCoordLink(\n        point.geometry.coordinates[0],\n        point.geometry.coordinates[1]\n      );\n    }\n\n    let googleMapsNom;\n    if (data.index === 'routes') {\n      googleMapsNom = GoogleLinks.getGoogleMapsNameLink(\n        data.properties.nom + ', ' + data.properties.municipalite\n      );\n    } else if (data.index === 'municipalites') {\n      googleMapsNom = GoogleLinks.getGoogleMapsNameLink(\n        data.properties.nom + ', ' + 'ville'\n      );\n    } else if (data.index === 'mrc') {\n      googleMapsNom = GoogleLinks.getGoogleMapsNameLink(\n        'mrc+' + data.properties.nom\n      );\n    } else if (data.index === 'regadmin') {\n      googleMapsNom = GoogleLinks.getGoogleMapsNameLink(\n        data.properties.nom + ',+QC'\n      );\n    } else {\n      googleMapsNom = GoogleLinks.getGoogleMapsNameLink(\n        data.properties.nom || data.highlight.title\n      );\n    }\n\n    googleLinksProperties.GoogleMaps =\n      '<a href=' +\n      googleMaps +\n      ' target=\"_blank\">' +\n      this.languageService.translate.instant('igo.geo.searchByCoord') +\n      '</a> <br /> <a href=' +\n      googleMapsNom +\n      ' target=\"_blank\">' +\n      this.languageService.translate.instant('igo.geo.searchByName') +\n      '</a>';\n\n    if (data.geometry.type === 'Point') {\n      googleLinksProperties.GoogleStreetView = GoogleLinks.getGoogleStreetViewLink(\n        data.geometry.coordinates[0],\n        data.geometry.coordinates[1]\n      );\n    }\n\n    const routing: {\n      Route: string;\n    } = {\n      Route:\n        '<span class=\"routing\"> <u>' +\n        this.languageService.translate.instant('igo.geo.seeRouting') +\n        '</u> </span>'\n    };\n\n    return Object.assign(\n      { type: data.index },\n      properties,\n      googleLinksProperties,\n      routing\n    );\n  }\n\n  /**\n   * Remove hashtag from query\n   * @param term Query with hashtag\n   */\n  private computeTerm(term: string): string {\n    // Keep hashtags for \"lieux\"\n    const hashtags = term.match(/(#[A-Za-z]+)/g) || [];\n    let keep = false;\n    keep = hashtags.some((hashtag) => {\n      const hashtagKey = hashtag.substring(1);\n      return this.hashtagsLieuxToKeep.some(\n        (h) =>\n          h\n            .toLowerCase()\n            .normalize('NFD')\n            .replace(/[\\u0300-\\u036f]/g, '') ===\n          hashtagKey\n            .toLowerCase()\n            .normalize('NFD')\n            .replace(/[\\u0300-\\u036f]/g, '')\n      );\n    });\n\n    if (!keep) {\n      term = term.replace(/(#[A-Za-z]+)/g, '');\n    }\n\n    return term.replace(/[^\\wÀ-ÿ !\\-\\+\\(\\)\\.\\/½¼¾,'#]+/g, '');\n  }\n\n  /**\n   * Add hashtag to param if valid\n   * @param term Query with hashtag\n   * @param options TextSearchOptions\n   */\n  private computeOptionsParam(\n    term: string,\n    options: TextSearchOptions\n  ): TextSearchOptions {\n    const hashtags = super.getHashtagsValid(term, 'type');\n    if (hashtags) {\n      options.params = Object.assign(options.params || {}, {\n        type: hashtags.join(',')\n      });\n    }\n\n    return options;\n  }\n}\n\n/**\n * IChercheReverse search source\n */\n@Injectable()\nexport class IChercheReverseSearchSource extends SearchSource\n  implements ReverseSearch {\n  static id = 'icherchereverse';\n  static type = FEATURE;\n  static propertiesBlacklist: string[] = [];\n\n  title$: BehaviorSubject<string> = new BehaviorSubject<string>('');\n\n  get title(): string {\n    return this.title$.getValue();\n  }\n\n  constructor(\n    private http: HttpClient,\n    private languageService: LanguageService,\n    storageService: StorageService,\n    @Inject('options') options: SearchSourceOptions,\n    injector: Injector,\n  ) {\n    super(options, storageService);\n\n    this.languageService.translate\n      .get(this.options.title)\n      .subscribe((title) => this.title$.next(title));\n\n    const authService = injector.get(AuthService);\n    if (this.settings.length) {\n      if (!authService) {\n        this.getAllowedTypes();\n      } else {\n        authService.authenticate$.subscribe(() => {\n          this.getAllowedTypes();\n        });\n      }\n    }\n  }\n\n  getId(): string {\n    return IChercheReverseSearchSource.id;\n  }\n\n  getType(): string {\n    return IChercheReverseSearchSource.type;\n  }\n\n  protected getDefaultOptions(): SearchSourceOptions {\n    const types =\n      this.options.params && this.options.params.type\n        ? this.options.params.type.replace(/\\s/g, '').toLowerCase().split(',')\n        : ['adresses', 'municipalites', 'mrc', 'regadmin'];\n\n    return {\n      title: 'igo.geo.search.ichercheReverse.name',\n      searchUrl: 'https://geoegl.msp.gouv.qc.ca/apis/terrapi',\n      settings: [\n        {\n          type: 'checkbox',\n          title: 'results type',\n          name: 'type',\n          values: [\n            {\n              title: 'igo.geo.search.icherche.type.address',\n              value: 'adresses',\n              enabled: types.indexOf('adresses') !== -1\n            },\n            {\n              title: 'igo.geo.search.icherche.type.road',\n              value: 'routes',\n              enabled: types.indexOf('routes') !== -1,\n              available: false\n            },\n            {\n              title: 'igo.geo.search.icherche.type.district',\n              value: 'arrondissements',\n              enabled: types.indexOf('arrondissements') !== -1\n            },\n            {\n              title: 'igo.geo.search.icherche.type.city',\n              value: 'municipalites',\n              enabled: types.indexOf('municipalites') !== -1\n            },\n            {\n              title: 'igo.geo.search.icherche.type.mrc',\n              value: 'mrc',\n              enabled: types.indexOf('mrc') !== -1\n            },\n            {\n              title: 'igo.geo.search.icherche.type.regadmin',\n              value: 'regadmin',\n              enabled: types.indexOf('regadmin') !== -1\n            }\n          ]\n        },\n        {\n          type: 'radiobutton',\n          title: 'radius',\n          name: 'bufferInput',\n          values: [\n            {\n              title: '100 m',\n              value: 100,\n              enabled: !this.options.distance || this.options.distance === 100\n            },\n            {\n              title: '500 m',\n              value: 500,\n              enabled: this.options.distance === 500\n            },\n            {\n              title: '1 km',\n              value: 1000,\n              enabled: this.options.distance === 1000\n            },\n            {\n              title: '2 km',\n              value: 2000,\n              enabled: this.options.distance === 2000\n            },\n            {\n              title: '5 km',\n              value: 5000,\n              enabled: this.options.distance === 5000\n            }\n          ]\n        }\n      ]\n    };\n  }\n\n  /**\n   * Search a location by coordinates\n   * @param lonLat Location coordinates\n   * @param distance Search raidus around lonLat\n   * @returns Observable of <SearchResult<Feature>[]\n   */\n  @Cacheable({\n    maxCacheCount: 20\n  })\n  reverseSearch(\n    lonLat: [number, number],\n    options?: ReverseSearchOptions\n  ): Observable<SearchResult<Feature>[]> {\n    const params = this.computeRequestParams(lonLat, options || {});\n    if (!params.get('type').length) {\n      return of([]);\n    }\n    return this.http.get(`${this.searchUrl}/locate`, { params }).pipe(\n      map((response: IChercheReverseResponse) => {\n        return this.extractResults(response);\n      })\n    );\n  }\n\n  private getAllowedTypes() {\n    return this.http\n      .get(`${this.searchUrl}/types`)\n      .subscribe((types: string[]) => {\n        const typeSetting = this.settings.find((s) => s.name === 'type');\n        typeSetting.values.forEach((v) => {\n          v.available = types.indexOf(v.value as string) > -1;\n        });\n        this.setParamFromSetting(typeSetting, false);\n      });\n  }\n\n  private computeRequestParams(\n    lonLat: [number, number],\n    options?: ReverseSearchOptions\n  ): HttpParams {\n    if (options.distance || this.options.distance) {\n      options.params = Object.assign(options.params || {}, {\n        bufferInput: options.distance || this.options.distance\n      });\n    }\n\n    return new HttpParams({\n      fromObject: Object.assign(\n        {\n          loc: lonLat.join(','),\n          sort: 'distance',\n          geometry: true,\n          icon: true\n        },\n        options.params || {},\n        this.params\n      )\n    });\n  }\n\n  private extractResults(\n    response: IChercheReverseResponse\n  ): SearchResult<Feature>[] {\n    return response.features.map((data: IChercheReverseData) => {\n      return this.dataToResult(data);\n    });\n  }\n\n  private getSubtitle(data: IChercheReverseData) {\n    if (!this.settings.length) {\n      return '';\n    }\n    let subtitle = '';\n    switch (data.properties.type) {\n      case 'arrondissements':\n        subtitle = data.properties.municipalite + ' (Arrondissement)';\n        break;\n      default:\n        const typeSetting = this.settings.find((s) => s.name === 'type');\n        const type = typeSetting.values.find(\n          (t) => t.value === data.properties.type\n        );\n        if (type) {\n          subtitle = this.languageService.translate.instant(type.title);\n        }\n    }\n    return subtitle;\n  }\n\n  private dataToResult(data: IChercheReverseData): SearchResult<Feature> {\n    const properties = this.computeProperties(data);\n    const extent = this.computeExtent(data);\n    const id = [this.getId(), properties.type, properties.code].join('.');\n\n    const titleHtml = data.properties.nom;\n    const subtitleHtml = ' <small> ' + this.getSubtitle(data) + '</small>';\n\n    return {\n      source: this,\n      data: {\n        type: FEATURE,\n        projection: 'EPSG:4326',\n        geometry: data.geometry,\n        extent,\n        properties,\n        meta: {\n          id,\n          title: data.properties.nom\n        }\n      },\n      meta: {\n        dataType: FEATURE,\n        id,\n        title: data.properties.nom,\n        titleHtml: titleHtml + subtitleHtml,\n        icon: data.icon || 'map-marker',\n        pointerSummaryTitle: this.getSubtitle(data)+ ': ' + data.properties.nom\n      }\n    };\n  }\n\n  private computeProperties(data: IChercheReverseData): { [key: string]: any } {\n    const properties = ObjectUtils.removeKeys(\n      data.properties,\n      IChercheReverseSearchSource.propertiesBlacklist\n    );\n\n    const routing: {\n      Route: string;\n    } = {\n      Route:\n        '<span class=\"routing\"> <u>' +\n        this.languageService.translate.instant('igo.geo.seeRouting') +\n        '</u> </span>'\n    };\n\n    return Object.assign(properties, routing);\n  }\n\n  private computeExtent(\n    data: IChercheReverseData\n  ): [number, number, number, number] | undefined {\n    return data.bbox\n      ? [data.bbox[0], data.bbox[2], data.bbox[1], data.bbox[3]]\n      : undefined;\n  }\n}\n","import { NgModule } from '@angular/core';\nimport { CommonModule } from '@angular/common';\n\n\nimport { MapOverlayComponent } from './map-overlay.component';\n\n@NgModule({\n  imports: [\n    CommonModule\n  ],\n  exports: [MapOverlayComponent],\n  declarations: [MapOverlayComponent]\n})\nexport class MapOverlayModule {}\n","import { NgModule } from '@angular/core';\nimport { CommonModule } from '@angular/common';\nimport { MatButtonModule } from '@angular/material/button';\nimport { MatIconModule } from '@angular/material/icon';\nimport { MatSidenavModule } from '@angular/material/sidenav';\nimport { MatTooltipModule } from '@angular/material/tooltip';\n\nimport { IgoLanguageModule } from '@igo2/core';\nimport {\n  IgoPanelModule,\n  IgoFlexibleModule,\n  IgoToolModule,\n  IgoHomeButtonModule\n} from '@igo2/common';\nimport { IgoFeatureModule } from '@igo2/geo';\nimport { IgoContextManagerModule } from '@igo2/context';\n\nimport { SidenavComponent } from './sidenav.component';\n\n@NgModule({\n  imports: [\n    CommonModule,\n    MatIconModule,\n    MatButtonModule,\n    MatSidenavModule,\n    MatTooltipModule,\n    IgoLanguageModule,\n    IgoPanelModule,\n    IgoFlexibleModule,\n    IgoContextManagerModule,\n    IgoToolModule,\n    IgoFeatureModule,\n    IgoHomeButtonModule\n  ],\n  exports: [SidenavComponent],\n  declarations: [SidenavComponent]\n})\nexport class AppSidenavModule {}\n","import { LegendButtonComponent, LegendButtonDialogComponent } from './legend-button.component';\nimport { NgModule } from '@angular/core';\nimport { MatIconModule } from '@angular/material/icon';\nimport { MatButtonModule } from '@angular/material/button';\nimport { IgoMapModule, IgoLayerModule } from '@igo2/geo';\nimport {MAT_DIALOG_DATA, MatDialogModule, MatDialogRef} from '@angular/material/dialog';\n\n@NgModule({\n  declarations: [LegendButtonComponent, LegendButtonDialogComponent],\n  imports: [\n    MatIconModule,\n    MatDialogModule,\n    IgoLayerModule,\n    IgoMapModule,\n    MatButtonModule\n  ],\n  providers:\n  [{\n    provide: 'app-legend-button-dialog',\n    useValue: LegendButtonDialogComponent,\n},\n      {provide:MatDialogRef , useValue:{} },\n\n      { provide: MAT_DIALOG_DATA, useValue: {} }\n\n],\n  exports: [\n    LegendButtonComponent,\n    LegendButtonDialogComponent,\n    MatIconModule\n  ],\n  bootstrap: [LegendButtonComponent],\n})\nexport class LegendButtonModule { }\n","import { NgModule, CUSTOM_ELEMENTS_SCHEMA } from '@angular/core';\nimport { CommonModule } from '@angular/common';\n\nimport { MatButtonModule } from '@angular/material/button';\nimport { MatIconModule } from '@angular/material/icon';\nimport { MatBadgeModule } from '@angular/material/badge';\nimport { MatTooltipModule } from '@angular/material/tooltip';\n\nimport { IgoLanguageModule } from '@igo2/core';\nimport { IgoFlexibleModule, IgoCustomHtmlModule, IgoPanelModule } from '@igo2/common';\nimport {\n  IgoFeatureModule,\n  IgoSearchModule,\n  IgoFeatureDetailsModule\n} from '@igo2/geo';\n\nimport { SearchResultsToolComponent } from './search-results-tool.component';\n\n/**\n * @ignore\n */\n@NgModule({\n  imports: [\n    CommonModule,\n    MatIconModule,\n    MatBadgeModule,\n    MatTooltipModule,\n    MatButtonModule,\n    IgoLanguageModule,\n    IgoFeatureModule,\n    IgoSearchModule,\n    IgoFlexibleModule,\n    IgoPanelModule,\n    IgoFeatureDetailsModule,\n    IgoCustomHtmlModule\n  ],\n  declarations: [SearchResultsToolComponent],\n  exports: [SearchResultsToolComponent],\n  schemas: [CUSTOM_ELEMENTS_SCHEMA]\n})\nexport class IgoAppSearchResultsToolModule {}\n","import { IgoAppSearchModule } from '@igo2/integration';\nimport { IgoAppSearchResultsToolModule } from './search-results-tool/search-results-tool.module';\nimport { MatCardModule } from '@angular/material/card';\nimport { NgModule } from '@angular/core';\nimport { CommonModule } from '@angular/common';\nimport { MatButtonModule } from '@angular/material/button';\nimport { MatIconModule } from '@angular/material/icon';\nimport { MatSidenavModule } from '@angular/material/sidenav';\nimport { MatTooltipModule } from '@angular/material/tooltip';\n\nimport { IgoLanguageModule, IgoMessageModule } from '@igo2/core';\nimport {\n  IgoPanelModule,\n  IgoFlexibleModule,\n  IgoToolModule,\n  IgoActionbarModule,\n  IgoContextMenuModule\n} from '@igo2/common';\nimport {\n  IgoFeatureModule,\n  IgoMapModule,\n  IgoSearchModule\n} from '@igo2/geo';\nimport { IgoContextManagerModule } from '@igo2/context';\nimport { SideResultComponent } from './sideresult.component';\n\n@NgModule({\n  imports: [\n    CommonModule,\n    MatIconModule,\n    MatButtonModule,\n    MatSidenavModule,\n    MatTooltipModule,\n    IgoLanguageModule,\n    IgoPanelModule,\n    IgoFlexibleModule,\n    IgoContextManagerModule,\n    IgoToolModule,\n    IgoFeatureModule,\n    //SEARCH\n    MatCardModule,\n    IgoMessageModule,\n    IgoMapModule,\n    IgoSearchModule,\n    IgoActionbarModule,\n    IgoContextMenuModule,\n    IgoAppSearchModule,\n    IgoSearchModule.forRoot(),\n    IgoAppSearchResultsToolModule\n  ],\n  exports: [SideResultComponent ],\n  //SEARCH\n  declarations: [SideResultComponent]\n})\nexport class AppSideResultModule {}\n","\nimport { provideIChercheSearchSource, provideDefaultIChercheSearchResultFormatter } from './icherche/icherche.providers';\nimport { IChercheSearchSource } from './icherche/icherche';\nimport { IgoAppSearchBarModule, IgoAppSearchModule, IgoAppSearchResultsToolModule, IgoAppToolModule } from '@igo2/integration';\nimport { NgModule } from '@angular/core';\nimport { CommonModule } from '@angular/common';\n\nimport { MatButtonModule } from '@angular/material/button';\nimport { MatIconModule } from '@angular/material/icon';\nimport { MatSidenavModule } from '@angular/material/sidenav';\nimport { MatTooltipModule } from '@angular/material/tooltip';\nimport { MatDialogModule } from '@angular/material/dialog';\n\nimport { IgoCoreModule } from '@igo2/core';\nimport {\n  IgoActionModule,\n  IgoWorkspaceModule,\n  IgoEntityModule,\n  IgoPanelModule,\n  IgoBackdropModule,\n  IgoFlexibleModule,\n  IgoContextMenuModule,\n  IgoToolModule,\n  IgoEntityTableModule,\n  IgoEntityTablePaginatorModule\n} from '@igo2/common';\n\nimport {\n  IgoGeoWorkspaceModule,\n  IgoFeatureModule,\n  IgoImportExportModule,\n  IgoMapModule,\n  IgoQueryModule,\n  IgoSearchModule,\n  IgoLayerModule,\n  //IgoSearchBarModule\n  provideIChercheReverseSearchSource,\n  provideNominatimSearchSource,\n  provideCoordinatesReverseSearchSource,\n  provideILayerSearchSource,\n  provideOsrmDirectionsSource,\n  provideOptionsApi,\n  //provideCadastreSearchSource,\n  provideStyleListOptions,\n  provideDefaultCoordinatesSearchResultFormatter,\n  CoordinatesSearchResultFormatter,\n  provideSearchSourceService,\n  SearchService\n} from '@igo2/geo';\nimport {\n  IgoContextManagerModule,\n  IgoContextMapButtonModule\n} from '@igo2/context';\n\nimport { IgoIntegrationModule } from '@igo2/integration';\nimport { MapOverlayModule } from './map-overlay/map-overlay.module';\nimport { AppSidenavModule } from './sidenav/sidenav.module';\n\nimport { PortalComponent } from './portal.component';\n\nimport { LegendButtonModule } from './legend-button/legend-button.module';\nimport { FooterModule } from './../footer/footer.module';\nimport { AppSideResultModule } from './sideresult/sideresult.module';\n\n@NgModule({\n  imports: [\n    CommonModule,\n    MatTooltipModule,\n    MatButtonModule,\n    MatIconModule,\n    IgoCoreModule,\n    IgoFeatureModule,\n    IgoMapModule,\n    IgoEntityModule,\n    IgoFlexibleModule,\n    IgoIntegrationModule,\n    IgoContextManagerModule,\n    IgoContextMapButtonModule,\n    FooterModule,\n    LegendButtonModule,\n    IgoLayerModule,\n    IgoWorkspaceModule,\n    IgoGeoWorkspaceModule,\n    IgoQueryModule.forRoot(),\n    IgoSearchModule.forRoot(),\n    IgoContextMapButtonModule,\n    MatSidenavModule,\n    MatDialogModule,\n    IgoActionModule,\n    IgoImportExportModule,\n    MapOverlayModule,\n    AppSidenavModule,\n    AppSideResultModule,\n    IgoPanelModule,\n    IgoBackdropModule,\n    IgoContextMenuModule,\n    IgoToolModule,\n    IgoEntityTableModule,\n    IgoEntityTablePaginatorModule,\n    //IgoSearchBarModule,\n    IgoAppSearchBarModule,\n    IgoAppSearchModule,\n    IgoAppSearchResultsToolModule,\n    IgoAppToolModule\n  ],\n  providers: [\n    provideCoordinatesReverseSearchSource(),\n    provideIChercheSearchSource(),\n    provideNominatimSearchSource(),\n    provideIChercheReverseSearchSource(),\n    provideNominatimSearchSource(),\n    provideIChercheReverseSearchSource(),\n    provideCoordinatesReverseSearchSource(),\n    provideILayerSearchSource(),\n    provideOsrmDirectionsSource(),\n    provideOptionsApi(),\n    //provideCadastreSearchSource(),\n    CoordinatesSearchResultFormatter,\n    provideDefaultCoordinatesSearchResultFormatter(),\n    provideDefaultIChercheSearchResultFormatter(),\n    provideSearchSourceService(),\n    SearchService,\n    IChercheSearchSource,\n    provideStyleListOptions({\n      path: './assets/list-style.json'\n    })\n  ],\n  exports: [PortalComponent],\n  declarations: [PortalComponent]\n})\nexport class PortalModule {}\n","import { Injector } from '@angular/core';\nimport { HttpClient } from '@angular/common/http';\n\nimport { ConfigService, LanguageService, StorageService } from '@igo2/core';\n\nimport { SearchSource } from '@igo2/geo';\nimport {\n  IChercheSearchSource,\n  IChercheSearchResultFormatter,\n  IChercheReverseSearchSource\n} from './icherche';\n\n/**\n * ICherche search result formatter factory\n * @ignore\n */\nexport function defaultIChercheSearchResultFormatterFactory(\n  languageService: LanguageService\n) {\n  return new IChercheSearchResultFormatter(languageService);\n}\n\n/**\n * Function that returns a provider for the ICherche search result formatter\n */\nexport function provideDefaultIChercheSearchResultFormatter() {\n  return {\n    provide: IChercheSearchResultFormatter,\n    useFactory: defaultIChercheSearchResultFormatterFactory,\n    deps: [LanguageService]\n  };\n}\n\n/**\n * ICherche search source factory\n * @ignore\n */\nexport function ichercheSearchSourceFactory(\n  http: HttpClient,\n  languageService: LanguageService,\n  storageService: StorageService,\n  config: ConfigService,\n  formatter: IChercheSearchResultFormatter,\n  injector: Injector\n) {\n  return new IChercheSearchSource(\n    http,\n    languageService,\n    storageService,\n    config.getConfig(`searchSources.${IChercheSearchSource.id}`),\n    formatter,\n    injector\n  );\n}\n\n/**\n * Function that returns a provider for the ICherche search source\n */\nexport function provideIChercheSearchSource() {\n  return {\n    provide: SearchSource,\n    useFactory: ichercheSearchSourceFactory,\n    multi: true,\n    deps: [\n      HttpClient,\n      LanguageService,\n      StorageService,\n      ConfigService,\n      IChercheSearchResultFormatter,\n      Injector\n    ]\n  };\n}\n\n/**\n * IChercheReverse search source factory\n * @ignore\n */\nexport function ichercheReverseSearchSourceFactory(\n  http: HttpClient,\n  languageService: LanguageService,\n  storageService: StorageService,\n  config: ConfigService,\n  injector: Injector\n) {\n  return new IChercheReverseSearchSource(\n    http,\n    languageService,\n    storageService,\n    config.getConfig(`searchSources.${IChercheReverseSearchSource.id}`),\n    injector\n  );\n}\n\n/**\n * Function that returns a provider for the IChercheReverse search source\n */\nexport function provideIChercheReverseSearchSource() {\n  return {\n    provide: SearchSource,\n    useFactory: ichercheReverseSearchSourceFactory,\n    multi: true,\n    deps: [HttpClient, LanguageService, StorageService, ConfigService, Injector]\n  };\n}\n","import { NgModule } from '@angular/core';\nimport { CommonModule } from '@angular/common';\nimport { MenuComponent } from './menu.component';\nimport { HomeComponent } from './menu-pages/home/home.component';\nimport { MenuRoutingModule } from './menu-routing/menu-routing.module';\nimport { AboutComponent } from './menu-pages/about/about.component';\nimport { MapComponent } from './menu-pages/map/map.component';\nimport { HeaderModule } from '../header/header.module';\nimport { FooterModule } from '../footer/footer.module';\nimport { PortalModule } from '../portal';\nimport { MatToolbarModule } from '@angular/material/toolbar';\n@NgModule({\n  declarations: [\n    MenuComponent,\n    HomeComponent,\n    AboutComponent,\n    MapComponent\n  ],\n  imports: [\n    CommonModule,\n    MenuRoutingModule,\n    PortalModule,\n    HeaderModule,\n    FooterModule,\n    MatToolbarModule\n  ],\n  exports:[\n    MenuComponent,\n    MenuRoutingModule\n  ]\n})\nexport class MenuModule { }\n","import { LanguageOptions } from '@igo2/core';\nimport {\n  Projection,\n  SearchSourceOptions,\n  CommonVectorStyleOptions\n} from '@igo2/geo';\n\ninterface Environment {\n  production: boolean;\n  igo: {\n    app: {\n      forceCoordsNA: boolean;\n    };\n    language?: LanguageOptions;\n    projections?: Projection[];\n    searchSources?: { [key: string]: SearchSourceOptions };\n    queryOverlayStyle?: {\n      base?: CommonVectorStyleOptions,\n      selection?: CommonVectorStyleOptions,\n      focus?: CommonVectorStyleOptions\n    };\n    searchOverlayStyle?: {\n      base?: CommonVectorStyleOptions,\n      selection?: CommonVectorStyleOptions,\n      focus?: CommonVectorStyleOptions\n    };\n  };\n}\n\nexport const environment: Environment = {\n  production: true,\n  igo: {\n    app: {\n      forceCoordsNA: false\n    },\n    language: {\n      prefix: ['./locale/', './particular/locale/']\n    },\n    searchSources: {\n      nominatim: {\n        available: false\n      },\n      storedqueries: {\n        enabled: false,\n        available: false\n      },\n      icherche: {\n        searchUrl: 'https://geoegl.msp.gouv.qc.ca/apis/icherche',\n        order: 2,\n        params: {\n          limit: '8'\n        }\n      },\n      coordinatesreverse: {\n        showInPointerSummary: true\n      },\n      icherchereverse: {\n        showInPointerSummary: true,\n        searchUrl: 'https://geoegl.msp.gouv.qc.ca/apis/terrapi',\n        order: 3,\n        enabled: true\n      },\n      ilayer: {\n        searchUrl: 'https://geoegl.msp.gouv.qc.ca/apis/icherche/layers',\n        order: 4,\n        params: {\n          limit: '3'\n        }\n      },\n      cadastre: {\n        enabled: false\n      }\n    },\n    projections: [\n      {\n        code: 'EPSG:32198',\n        alias: 'Quebec Lambert',\n        def:\n          '+proj=lcc +lat_1=60 +lat_2=46 +lat_0=44 +lon_0=-68.5 +x_0=0 +y_0=0 \\\n          +ellps=GRS80 +towgs84=0,0,0,0,0,0,0 +units=m +no_defs',\n        extent: [-799574, 45802, 891595.4, 1849567.5]\n      },\n      {\n        code: 'EPSG:3798',\n        alias: 'MTQ Lambert',\n        def:\n          '+proj=lcc +lat_1=50 +lat_2=46 +lat_0=44 +lon_0=-70 +x_0=800000 +y_0=0 \\\n          +ellps=GRS80 +towgs84=0,0,0,0,0,0,0 +units=m +no_defs',\n        extent: [31796.5834, 158846.2231, 1813323.4284, 2141241.0978]\n      }\n    ],\n    searchOverlayStyle: {\n      base: {\n        markerColor: '#5ed0fb', // marker fill\n        markerOpacity: 0.8, // marker opacity not applied if a rgba markerColor is provided\n        markerOutlineColor: '#a7e7ff', // marker contour\n        fillColor: '#5ed0fb', // poly\n        fillOpacity: 0.2, // poly fill opacity not applied if a rgba fillColor is provided\n        strokeColor: '#5ed0fb', // line and poly\n        strokeOpacity: 0.7, // line and poly not applied if a rgba strokeColor is provided\n        strokeWidth: 2 // line and poly\n      },\n      focus: {\n        markerColor: '#5ed0fb', // marker fill\n        markerOpacity: 1, // marker opacity not applied if a rgba markerColor is provided\n        markerOutlineColor: '#DFF7FF', // marker contour\n        fillColor: '#5ed0fb', // poly\n        fillOpacity: 0.3, // poly fill opacity not applied if a rgba fillColor is provided\n        strokeColor: '#DFF7FF', // line and poly\n        strokeOpacity: 1, // line and poly not applied if a rgba strokeColor is provided\n        strokeWidth: 2 // line and poly\n      },\n      selection: {\n        markerColor: '#00a1de', // marker fill\n        markerOpacity: 1, // marker opacity not applied if a rgba markerColor is provided\n        markerOutlineColor: '#ffffff', // marker contour\n        fillColor: '#00a1de', // poly\n        fillOpacity: 0.3, // poly fill opacity not applied if a rgba fillColor is provided\n        strokeColor: '#00A1DE', // line and poly\n        strokeOpacity: 1, // line and poly not applied if a rgba strokeColor is provided\n        strokeWidth: 2 // line and poly\n      }\n    },\n    queryOverlayStyle: {\n      base: {\n        markerColor: '#5ed0fb', // marker fill\n        markerOpacity: 0.8, // marker opacity not applied if a rgba markerColor is provided\n        markerOutlineColor: '#a7e7ff', // marker contour\n        fillColor: '#5ed0fb', // poly\n        fillOpacity: 0.2, // poly fill opacity not applied if a rgba fillColor is provided\n        strokeColor: '#5ed0fb', // line and poly\n        strokeOpacity: 0.7, // line and poly not applied if a rgba strokeColor is provided\n        strokeWidth: 2 // line and poly\n      },\n      focus: {\n        markerColor: '#5ed0fb', // marker fill\n        markerOpacity: 1, // marker opacity not applied if a rgba markerColor is provided\n        markerOutlineColor: '#DFF7FF', // marker contour\n        fillColor: '#5ed0fb', // poly\n        fillOpacity: 0.3, // poly fill opacity not applied if a rgba fillColor is provided\n        strokeColor: '#DFF7FF', // line and poly\n        strokeOpacity: 1, // line and poly not applied if a rgba strokeColor is provided\n        strokeWidth: 2 // line and poly\n      },\n      selection: {\n        markerColor: '#00a1de', // marker fill\n        markerOpacity: 1, // marker opacity not applied if a rgba markerColor is provided\n        markerOutlineColor: '#ffffff', // marker contour\n        fillColor: '#00a1de', // poly\n        fillOpacity: 0.3, // poly fill opacity not applied if a rgba fillColor is provided\n        strokeColor: '#00A1DE', // line and poly\n        strokeOpacity: 1, // line and poly not applied if a rgba strokeColor is provided\n        strokeWidth: 2 // line and poly\n      }\n    }\n  }\n};\n","import { Component } from '@angular/core';\nimport { ConfigService, LanguageService } from '@igo2/core';\n\n@Component({\n  selector: 'app-header',\n  templateUrl: './header.component.html',\n  styleUrls: ['./header.component.scss']\n})\nexport class HeaderComponent {\n\n  public headerLogo: string;\n  public headerLogoPrint: string;\n\n  constructor(\n    private configService: ConfigService,\n    protected languageService: LanguageService) {\n      this.computeHeader();\n    }\n\n  computeHeader() {\n    this.headerLogo = this.configService.getConfig('header.logo');\n    this.headerLogoPrint = this.configService.getConfig('header.logoPrint');\n  }\n\n  // Future translation system\n  /*changeLanguage() {\n    if (this.languageService.getLanguage() === 'fr'){\n      this.languageService.setLanguage('en');\n    } else {\n      this.languageService.setLanguage('fr');\n    }\n  }*/\n\n}\n","<mat-toolbar class = banner role = banner color=\"primary\">\n\t<div class=\"container\">\n\t\t<div class=\"row\">\n\t\t\t<div class=\"col-6 col-md-10 d-flex flex-wrap align-items-center zone-logo-title\">\n\t\t\t\t<a class=\"logo\" tabindex=\"5\" routerLink=\"\">\n                    <img id=\"header-logo\" alt=\"Logo\" src=\"{{headerLogo}}\">\n\t\t\t\t\t\n                </a>\n\t\t\t\t<img id=\"header-logo-print\" alt=\"Logo\" src=\"{{headerLogoPrint}}\" width=\"199\" height=\"60\" />\n\t\t\t\t<p lang=\"fr\" id=\"title-desktop\" class=\"zone-title  d-none d-md-block\">{{'header.title' | translate}}</p>\n\t\t\t</div>\n\t\t\t<div class=\"col-6 col-md-2 d-flex justify-content-end zone-links\">\n\t\t\t\t<ul class=\"nav flex-column\">\n\t\t\t\t\t<!--<li><button class=\"buttonLanguage\" disabled (click)=\"changeLanguage()\">{{'header.language'}}</button></li>-->\n\t\t\t\t\t<li><a rel=\"noopener noreferrer\" alt=\"('header.contactUsUrl' | translate)\" href=\"{{'header.contactUsUrl' | translate}}\" target=\"_blank\">{{'header.contactUs' | translate}}</a></li>\n\t\t\t\t</ul>\n\t\t\t</div>\n\t\t\t<p lang=\"fr\" id=\"title-mobile\" class=\"zone-title d-md-none col-12\"><a>{{'header.title' | translate}}</a></p>\n\t\t</div>\n\t</div>\n</mat-toolbar>","import { Component } from '@angular/core';\n\n@Component({\n  selector: 'app-menu',\n  templateUrl: './menu.component.html',\n  styleUrls: ['./menu.component.scss']\n})\nexport class MenuComponent {\n  public color = 'accent';\n\n  constructor() { }\n\n}\n","<mat-toolbar class=\"container headline\" color=\"accent\">\n  <div class=\"col-12 align-self-end\">\n    <nav class=\"navbar\">\n      <a class=\"nav-link nav-arrow left\" href=\"#menu-left\" routerLinkActive=\"active\">❮</a>\n      <div class=\"main-nav slick-track\">\n          <a class=\"nav-link\" routerLink=\"/\" routerLinkActive=\"active\" id=\"menu-left\" [routerLinkActiveOptions]=\"{exact:true}\">Accueil</a>\n          <a class=\"nav-link\" routerLink=\"/carte\" routerLinkActive=\"active\">Carte</a>\n          <a class=\"nav-link\" routerLink=\"/en-savoir-plus\" id=\"menu-right\" routerLinkActive=\"active\">En savoir plus</a>\n      </div>\n      <a class=\"nav-link nav-arrow right\" color=\"accent\" href=\"#menu-right\" routerLinkActive=\"active\">❯</a>\n    </nav>\n  </div>\n</mat-toolbar>\n<router-outlet></router-outlet>\n","<igo-spinner igoSpinnerActivity></igo-spinner>\n\n<app-header *ngIf=\"hasHeader\" #header></app-header>\n\n<app-menu *ngIf=\"hasMenu\"></app-menu>\n\n<app-portal *ngIf=\"!hasMenu\" [ngClass]=\"hasHeader? 'portal-hasHeader': 'portal'\"></app-portal>","import { Component, ElementRef, Renderer2, ViewChild } from '@angular/core';\nimport { Title, Meta } from '@angular/platform-browser';\nimport { zip } from 'rxjs';\nimport { map } from 'rxjs/operators';\nimport { userAgent } from '@igo2/utils';\nimport {\n  LanguageService,\n  ConfigService,\n  MessageService\n} from '@igo2/core';\nimport { AuthOptions } from '@igo2/auth';\n@Component({\n  selector: 'app-root',\n  templateUrl: './app.component.html',\n  styleUrls: ['./app.component.scss']\n})\nexport class AppComponent {\n  public authConfig: AuthOptions;\n  private themeClass = 'qcca-theme';\n  public hasHeader: boolean = true;\n  public hasFooter: boolean = true;\n  public hasMenu: boolean = false;\n\n  @ViewChild('searchBar', { read: ElementRef, static: true })\n  searchBar: ElementRef;\n\n  constructor(\n    protected languageService: LanguageService,\n    private configService: ConfigService,\n    private renderer: Renderer2,\n    private titleService: Title,\n    private metaService: Meta,\n    private messageService: MessageService\n  ) {\n   this.languageService.translate.getTranslation(this.languageService.getLanguage()).subscribe();\n\n    this.readTitleConfig();\n    this.readThemeConfig();\n    this.readDescriptionConfig();\n\n    this.detectOldBrowser();\n\n    this.hasHeader = this.configService.getConfig('header.hasHeader') === undefined ? false :\n      this.configService.getConfig('header.hasHeader');\n\n    this.hasFooter = this.configService.getConfig('hasFooter') === undefined ? false :\n      this.configService.getConfig('hasFooter');\n\n    this.hasMenu = this.configService.getConfig('hasMenu') === undefined ? false :\n      this.configService.getConfig('hasMenu');\n  }\n\n  private readTitleConfig() {\n    this.languageService.translate.get(this.configService.getConfig('title')).subscribe(title => {\n      if (title) {\n        this.titleService.setTitle(title);\n        this.metaService.addTag({ name: 'title', content: title });\n      }\n    });\n  }\n\n  private readThemeConfig() {\n    const theme = this.configService.getConfig('theme') || this.themeClass;\n    if (theme) {\n      this.renderer.addClass(document.body, theme);\n    }\n  }\n\n  private readDescriptionConfig() {\n    const description = this.configService.getConfig('description');\n    if (description) {\n      this.metaService.addTag({ name: 'description', content: description });\n    }\n  }\n\n  private detectOldBrowser() {\n    const oldBrowser = userAgent.satisfies({\n      ie: '<=11',\n      chrome: '<64',\n      firefox: '<60',\n      safari: '<=11'\n    });\n\n    if (oldBrowser) {\n      const translate = this.languageService.translate;\n      const title$ = translate.get('oldBrowser.title');\n      const message$ = translate.get('oldBrowser.message');\n      zip(title$, message$)\n        .pipe(\n          map(([title, message]) => ({\n            title,\n            message\n          }))\n        )\n        .subscribe((rep) =>\n          this.messageService.alert(rep.message, rep.title, {\n            timeOut: 15000\n          })\n        );\n    }\n  }\n}\n","import { BrowserModule, HammerModule } from '@angular/platform-browser';\nimport { NgModule } from '@angular/core';\nimport { RouterModule } from '@angular/router';\nimport { BrowserAnimationsModule } from '@angular/platform-browser/animations';\nimport { HeaderModule } from './pages/header/header.module';\nimport { FooterModule } from './pages/footer/footer.module';\nimport { MenuModule } from './pages/menu/menu.module';\n\nimport {\n  provideConfigOptions,\n  IgoMessageModule,\n  IgoGestureModule,\n  RouteService\n} from '@igo2/core';\nimport { IgoSpinnerModule, IgoStopPropagationModule } from '@igo2/common';\nimport {\n  provideStyleListOptions\n} from '@igo2/geo';\n\nimport { environment } from '../environments/environment';\nimport { PortalModule } from './pages';\nimport { AppComponent } from './app.component';\n\n@NgModule({\n  declarations: [AppComponent],\n  imports: [\n    BrowserModule,\n    BrowserAnimationsModule,\n    RouterModule.forRoot([]),\n    IgoGestureModule.forRoot(),\n    IgoMessageModule,\n    IgoSpinnerModule,\n    IgoStopPropagationModule,\n    PortalModule,\n    HammerModule,\n    HeaderModule,\n    FooterModule,\n    MenuModule\n    ],\n  providers: [\n    provideConfigOptions({\n      default: environment.igo,\n      path: './config/config.json'\n    }),\n    RouteService,\n    provideStyleListOptions({\n      path: './assets/list-style.json'\n    })\n  ],\n  bootstrap: [AppComponent]\n})\nexport class AppModule {}\n","import { enableProdMode } from '@angular/core';\nimport { platformBrowserDynamic } from '@angular/platform-browser-dynamic';\n\nimport { AppModule } from './app/app.module';\nimport { environment } from './environments/environment';\n\nimport 'hammerjs';\n\nif (environment.production) {\n  enableProdMode();\n}\n\nplatformBrowserDynamic()\n  .bootstrapModule(AppModule)\n  .catch(err => console.log(err));\n","var map = {\n\t\"./en.auth.json\": 44505,\n\t\"./en.common.json\": 13841,\n\t\"./en.context.json\": 2977,\n\t\"./en.core.json\": 8982,\n\t\"./en.geo.json\": 49853,\n\t\"./en.integration.json\": 38430,\n\t\"./en.json\": 90642,\n\t\"./fr.auth.json\": 13788,\n\t\"./fr.common.json\": 55144,\n\t\"./fr.context.json\": 65742,\n\t\"./fr.core.json\": 38783,\n\t\"./fr.geo.json\": 78405,\n\t\"./fr.integration.json\": 66409,\n\t\"./fr.json\": 60863\n};\n\n\nfunction webpackContext(req) {\n\tvar id = webpackContextResolve(req);\n\treturn __webpack_require__(id);\n}\nfunction webpackContextResolve(req) {\n\tif(!__webpack_require__.o(map, req)) {\n\t\tvar e = new Error(\"Cannot find module '\" + req + \"'\");\n\t\te.code = 'MODULE_NOT_FOUND';\n\t\tthrow e;\n\t}\n\treturn map[req];\n}\nwebpackContext.keys = function webpackContextKeys() {\n\treturn Object.keys(map);\n};\nwebpackContext.resolve = webpackContextResolve;\nmodule.exports = webpackContext;\nwebpackContext.id = 22356;","var map = {\n\t\"./af\": 62275,\n\t\"./af.js\": 62275,\n\t\"./ar\": 90857,\n\t\"./ar-dz\": 11218,\n\t\"./ar-dz.js\": 11218,\n\t\"./ar-kw\": 14754,\n\t\"./ar-kw.js\": 14754,\n\t\"./ar-ly\": 66680,\n\t\"./ar-ly.js\": 66680,\n\t\"./ar-ma\": 92178,\n\t\"./ar-ma.js\": 92178,\n\t\"./ar-sa\": 56522,\n\t\"./ar-sa.js\": 56522,\n\t\"./ar-tn\": 95682,\n\t\"./ar-tn.js\": 95682,\n\t\"./ar.js\": 90857,\n\t\"./az\": 70164,\n\t\"./az.js\": 70164,\n\t\"./be\": 79774,\n\t\"./be.js\": 79774,\n\t\"./bg\": 60947,\n\t\"./bg.js\": 60947,\n\t\"./bm\": 21832,\n\t\"./bm.js\": 21832,\n\t\"./bn\": 89650,\n\t\"./bn-bd\": 74477,\n\t\"./bn-bd.js\": 74477,\n\t\"./bn.js\": 89650,\n\t\"./bo\": 66005,\n\t\"./bo.js\": 66005,\n\t\"./br\": 98492,\n\t\"./br.js\": 98492,\n\t\"./bs\": 70534,\n\t\"./bs.js\": 70534,\n\t\"./ca\": 52061,\n\t\"./ca.js\": 52061,\n\t\"./cs\": 84737,\n\t\"./cs.js\": 84737,\n\t\"./cv\": 61167,\n\t\"./cv.js\": 61167,\n\t\"./cy\": 77996,\n\t\"./cy.js\": 77996,\n\t\"./da\": 9528,\n\t\"./da.js\": 9528,\n\t\"./de\": 14540,\n\t\"./de-at\": 49430,\n\t\"./de-at.js\": 49430,\n\t\"./de-ch\": 67978,\n\t\"./de-ch.js\": 67978,\n\t\"./de.js\": 14540,\n\t\"./dv\": 83426,\n\t\"./dv.js\": 83426,\n\t\"./el\": 6616,\n\t\"./el.js\": 6616,\n\t\"./en-au\": 63816,\n\t\"./en-au.js\": 63816,\n\t\"./en-ca\": 32162,\n\t\"./en-ca.js\": 32162,\n\t\"./en-gb\": 83305,\n\t\"./en-gb.js\": 83305,\n\t\"./en-ie\": 61954,\n\t\"./en-ie.js\": 61954,\n\t\"./en-il\": 43060,\n\t\"./en-il.js\": 43060,\n\t\"./en-in\": 59923,\n\t\"./en-in.js\": 59923,\n\t\"./en-nz\": 13540,\n\t\"./en-nz.js\": 13540,\n\t\"./en-sg\": 16505,\n\t\"./en-sg.js\": 16505,\n\t\"./eo\": 41907,\n\t\"./eo.js\": 41907,\n\t\"./es\": 86640,\n\t\"./es-do\": 41246,\n\t\"./es-do.js\": 41246,\n\t\"./es-mx\": 56131,\n\t\"./es-mx.js\": 56131,\n\t\"./es-us\": 36430,\n\t\"./es-us.js\": 36430,\n\t\"./es.js\": 86640,\n\t\"./et\": 62551,\n\t\"./et.js\": 62551,\n\t\"./eu\": 32711,\n\t\"./eu.js\": 32711,\n\t\"./fa\": 54572,\n\t\"./fa.js\": 54572,\n\t\"./fi\": 33390,\n\t\"./fi.js\": 33390,\n\t\"./fil\": 87860,\n\t\"./fil.js\": 87860,\n\t\"./fo\": 48216,\n\t\"./fo.js\": 48216,\n\t\"./fr\": 99291,\n\t\"./fr-ca\": 98527,\n\t\"./fr-ca.js\": 98527,\n\t\"./fr-ch\": 58407,\n\t\"./fr-ch.js\": 58407,\n\t\"./fr.js\": 99291,\n\t\"./fy\": 47054,\n\t\"./fy.js\": 47054,\n\t\"./ga\": 49540,\n\t\"./ga.js\": 49540,\n\t\"./gd\": 73917,\n\t\"./gd.js\": 73917,\n\t\"./gl\": 51486,\n\t\"./gl.js\": 51486,\n\t\"./gom-deva\": 56245,\n\t\"./gom-deva.js\": 56245,\n\t\"./gom-latn\": 48868,\n\t\"./gom-latn.js\": 48868,\n\t\"./gu\": 59652,\n\t\"./gu.js\": 59652,\n\t\"./he\": 89019,\n\t\"./he.js\": 89019,\n\t\"./hi\": 42040,\n\t\"./hi.js\": 42040,\n\t\"./hr\": 63402,\n\t\"./hr.js\": 63402,\n\t\"./hu\": 79322,\n\t\"./hu.js\": 79322,\n\t\"./hy-am\": 27609,\n\t\"./hy-am.js\": 27609,\n\t\"./id\": 57942,\n\t\"./id.js\": 57942,\n\t\"./is\": 98275,\n\t\"./is.js\": 98275,\n\t\"./it\": 73053,\n\t\"./it-ch\": 4378,\n\t\"./it-ch.js\": 4378,\n\t\"./it.js\": 73053,\n\t\"./ja\": 46176,\n\t\"./ja.js\": 46176,\n\t\"./jv\": 679,\n\t\"./jv.js\": 679,\n\t\"./ka\": 92726,\n\t\"./ka.js\": 92726,\n\t\"./kk\": 72953,\n\t\"./kk.js\": 72953,\n\t\"./km\": 86957,\n\t\"./km.js\": 86957,\n\t\"./kn\": 59181,\n\t\"./kn.js\": 59181,\n\t\"./ko\": 47148,\n\t\"./ko.js\": 47148,\n\t\"./ku\": 27752,\n\t\"./ku.js\": 27752,\n\t\"./ky\": 65675,\n\t\"./ky.js\": 65675,\n\t\"./lb\": 41263,\n\t\"./lb.js\": 41263,\n\t\"./lo\": 65746,\n\t\"./lo.js\": 65746,\n\t\"./lt\": 11143,\n\t\"./lt.js\": 11143,\n\t\"./lv\": 38753,\n\t\"./lv.js\": 38753,\n\t\"./me\": 44054,\n\t\"./me.js\": 44054,\n\t\"./mi\": 31573,\n\t\"./mi.js\": 31573,\n\t\"./mk\": 30202,\n\t\"./mk.js\": 30202,\n\t\"./ml\": 68523,\n\t\"./ml.js\": 68523,\n\t\"./mn\": 79794,\n\t\"./mn.js\": 79794,\n\t\"./mr\": 56681,\n\t\"./mr.js\": 56681,\n\t\"./ms\": 56975,\n\t\"./ms-my\": 39859,\n\t\"./ms-my.js\": 39859,\n\t\"./ms.js\": 56975,\n\t\"./mt\": 3691,\n\t\"./mt.js\": 3691,\n\t\"./my\": 5152,\n\t\"./my.js\": 5152,\n\t\"./nb\": 7607,\n\t\"./nb.js\": 7607,\n\t\"./ne\": 21526,\n\t\"./ne.js\": 21526,\n\t\"./nl\": 86368,\n\t\"./nl-be\": 40076,\n\t\"./nl-be.js\": 40076,\n\t\"./nl.js\": 86368,\n\t\"./nn\": 68420,\n\t\"./nn.js\": 68420,\n\t\"./oc-lnc\": 51906,\n\t\"./oc-lnc.js\": 51906,\n\t\"./pa-in\": 94504,\n\t\"./pa-in.js\": 94504,\n\t\"./pl\": 54721,\n\t\"./pl.js\": 54721,\n\t\"./pt\": 74645,\n\t\"./pt-br\": 54548,\n\t\"./pt-br.js\": 54548,\n\t\"./pt.js\": 74645,\n\t\"./ro\": 71977,\n\t\"./ro.js\": 71977,\n\t\"./ru\": 26042,\n\t\"./ru.js\": 26042,\n\t\"./sd\": 78849,\n\t\"./sd.js\": 78849,\n\t\"./se\": 27739,\n\t\"./se.js\": 27739,\n\t\"./si\": 50084,\n\t\"./si.js\": 50084,\n\t\"./sk\": 92449,\n\t\"./sk.js\": 92449,\n\t\"./sl\": 23086,\n\t\"./sl.js\": 23086,\n\t\"./sq\": 33139,\n\t\"./sq.js\": 33139,\n\t\"./sr\": 30607,\n\t\"./sr-cyrl\": 30063,\n\t\"./sr-cyrl.js\": 30063,\n\t\"./sr.js\": 30607,\n\t\"./ss\": 40131,\n\t\"./ss.js\": 40131,\n\t\"./sv\": 21665,\n\t\"./sv.js\": 21665,\n\t\"./sw\": 5642,\n\t\"./sw.js\": 5642,\n\t\"./ta\": 33622,\n\t\"./ta.js\": 33622,\n\t\"./te\": 74825,\n\t\"./te.js\": 74825,\n\t\"./tet\": 48336,\n\t\"./tet.js\": 48336,\n\t\"./tg\": 39238,\n\t\"./tg.js\": 39238,\n\t\"./th\": 99463,\n\t\"./th.js\": 99463,\n\t\"./tk\": 39986,\n\t\"./tk.js\": 39986,\n\t\"./tl-ph\": 29672,\n\t\"./tl-ph.js\": 29672,\n\t\"./tlh\": 40043,\n\t\"./tlh.js\": 40043,\n\t\"./tr\": 51212,\n\t\"./tr.js\": 51212,\n\t\"./tzl\": 50110,\n\t\"./tzl.js\": 50110,\n\t\"./tzm\": 80482,\n\t\"./tzm-latn\": 38309,\n\t\"./tzm-latn.js\": 38309,\n\t\"./tzm.js\": 80482,\n\t\"./ug-cn\": 42495,\n\t\"./ug-cn.js\": 42495,\n\t\"./uk\": 54157,\n\t\"./uk.js\": 54157,\n\t\"./ur\": 80984,\n\t\"./ur.js\": 80984,\n\t\"./uz\": 64141,\n\t\"./uz-latn\": 43662,\n\t\"./uz-latn.js\": 43662,\n\t\"./uz.js\": 64141,\n\t\"./vi\": 12607,\n\t\"./vi.js\": 12607,\n\t\"./x-pseudo\": 66460,\n\t\"./x-pseudo.js\": 66460,\n\t\"./yo\": 92948,\n\t\"./yo.js\": 92948,\n\t\"./zh-cn\": 62658,\n\t\"./zh-cn.js\": 62658,\n\t\"./zh-hk\": 39352,\n\t\"./zh-hk.js\": 39352,\n\t\"./zh-mo\": 38274,\n\t\"./zh-mo.js\": 38274,\n\t\"./zh-tw\": 98451,\n\t\"./zh-tw.js\": 98451\n};\n\n\nfunction webpackContext(req) {\n\tvar id = webpackContextResolve(req);\n\treturn __webpack_require__(id);\n}\nfunction webpackContextResolve(req) {\n\tif(!__webpack_require__.o(map, req)) {\n\t\tvar e = new Error(\"Cannot find module '\" + req + \"'\");\n\t\te.code = 'MODULE_NOT_FOUND';\n\t\tthrow e;\n\t}\n\treturn map[req];\n}\nwebpackContext.keys = function webpackContextKeys() {\n\treturn Object.keys(map);\n};\nwebpackContext.resolve = webpackContextResolve;\nmodule.exports = webpackContext;\nwebpackContext.id = 46700;"]}